<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Monda:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"soundmemories.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.17.1","exturl":true,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="今日事，今日毕">
<meta property="og:type" content="website">
<meta property="og:title" content="SoundMemories">
<meta property="og:url" content="https://soundmemories.github.io/page/8/index.html">
<meta property="og:site_name" content="SoundMemories">
<meta property="og:description" content="今日事，今日毕">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="SoundMemories">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://soundmemories.github.io/page/8/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/8/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SoundMemories</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">SoundMemories</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">10</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">10</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">127</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SoundMemories"
      src="/images/avstar.png">
  <p class="site-author-name" itemprop="name">SoundMemories</p>
  <div class="site-description" itemprop="description">今日事，今日毕</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">127</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NvdW5kbWVtb3JpZXM=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;soundmemories"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnNvdW5kbWVtb3JpZXNAMTYzLmNvbQ==" title="E-Mail → mailto:soundmemories@163.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/10/Java/28.Java%E5%8F%8D%E5%B0%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/03/10/Java/28.Java%E5%8F%8D%E5%B0%84/" class="post-title-link" itemprop="url">Java反射</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-10 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-10T00:00:00+08:00">2020-03-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>10k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>38 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="类的加载连接和初始化">类的加载、连接和初始化</h2>
<p>当程序主动使用某个类时，如果该类还未被加载到JVM内存中，系统会通过加载、连接、初始化三个步骤来对该类进行初始化，如果没有意外，JVM将会连续完成这三个步骤，所以也把这三个步骤统称为类加载或类初始化。大多数情况下是这三步一起完成的，但是有的时候初始化不一起完成。<br />
<img src="https://i.loli.net/2021/04/08/vT6NlPw83mCZgpn.png"><br />
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/03/10/Java/28.Java%E5%8F%8D%E5%B0%84/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/07/Java/27.Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/03/07/Java/27.Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="post-title-link" itemprop="url">Java网络编程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-07 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-07T00:00:00+08:00">2020-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>33 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="基础知识">基础知识</h2>
<p>Java程序可以非常方便的访问互联网上的HTTP服务、FTP服务等，并可以直接取得互联网上的远程资源，还可以向远程资源发送GET、POST请求。</p>
<h3 id="网络概念">网络概念</h3>
<p>计算机网络：把分布在不同地理区域的计算机与专门的外部设备用通信线路互连成一个规模大、功能强的网络系统，从而使众多的计算机可以方便地互相传递信息、共享硬件、软件、数据信息等资源。</p>
<p>计算机网络有多种分类：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|-传输介质：双绞线网、同轴电缆网、光纤网、卫星网等。还有无线传输，例如Wifi的介质是红外线，蓝牙的介质是无线电波，都是电磁波的一种。</span><br><span class="line">|-拓扑结构：星型网络、总线网络、环线网络、树型网络、网状网络、混合型网等。</span><br><span class="line">|-网络规模：</span><br><span class="line">    |-局域网LAN：某一区域内由多台计算机互联成的计算机组。一般是方圆几千米以内。</span><br><span class="line">        |-局域网可以实现文件管理、应用软件共享、打印机共享、工作组内的日程安排、电子邮件通信等功能。</span><br><span class="line">        |-局域网是封闭型的，可以由办公室内的两台计算机组成，也可以由一个公司内的上千台计算机组成。</span><br><span class="line">    |-城域网MAN：在一个城市范围内所建立的计算机通信网，属宽带局域网。</span><br><span class="line">        |-传输媒介主要采用光缆，传输速率在<span class="number">100</span>兆比特/秒以上。</span><br><span class="line">        |-主要用作骨干网，通过它将位于同一城市内不同地点的主机、数据库，以及LAN等互相联接起来。</span><br><span class="line">    |-广域网WAN：又称外网、公网，是连接不同地区局域网或城域网计算机通信的远程网。</span><br><span class="line">        |-覆盖的范围从几十公里到几千公里，它能连接多个地区、城市和国家，提供远距离通信，形成国际性的远程网络。</span><br></pre></td></tr></table></figure></p>
<p>拓扑结构：<br />
<img src="/images/Java简介和环境搭建/网络.png" width="60%"></p>
<h3 id="通信协议">通信协议</h3>
<p>国际标准化组织ISO于1978年提出了著名的OSI（Open System
Interconnection）开放系统互连参考模型：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">|-应用层：网络服务与最终用户的一个接口。协议有：HTTP、FTP、SMTP、DNS、TELNET、HTTPS、POP3等等。</span><br><span class="line">|-表示层：数据的表示、安全、压缩。格式有：JPEG、ASCll、DECOIC、加密格式等。</span><br><span class="line">|-会话层：建立、管理、终止会话。对应主机进程，指本地主机与远程主机正在进行的会话</span><br><span class="line">|-传输层：定义传输数据的协议端口号，以及流控和差错校验。协议有：TCP、UDP。</span><br><span class="line">|-网络层：进行逻辑地址寻址，实现不同网络之间的路径选择。协议有：ICMP、IGMP、IP（IPV4 IPV6）、ARP、RARP。</span><br><span class="line">|-数据链路层：建立逻辑连接、进行硬件地址寻址、差错校验等功能。将比特组合成字节再组合成帧，用MAC地址访问介质，错误可被发现但不能纠正。</span><br><span class="line">|-物理层：建立、维护、断开物理连接。</span><br></pre></td></tr></table></figure></p>
<p><strong>通信协议</strong>：对速率、传输代码、代码结构、传输控制步骤、出错控制等制定标准。<br />
<strong>IP协议</strong>：internet
protocal，互联网协议。IP的责任就是把数据从源传送到目的地。它在源地址和目的地址之间传送一种称之为数据包的东西，它还提供对数据大小的重新组装功能，以适应不同网络对包大小的要求。<br />
<strong>TCP协议</strong>：Transmission Control
Protocol，传输控制协议，是一种连接的、可靠的、基于字节流的传输层通信协议，适用于大数据量的传输。通常我们说的TCP/IP协议，其实是指TCP/IP协议族。<br />
<strong>UDP协议</strong>：User Datagram
Protocol，用户数据报协议。是一种非连接的，不可靠的，基于用户数据报文，只支持64k以内的数据发送。</p>
<p>按照TCP/IP协议模型，网络分为四层：网络访问层、互联网层、传输层、应用层。<br />
<img src="/images/Java简介和环境搭建/TCP.IP.png" width="40%"></p>
<h3 id="ip地址">IP地址</h3>
<p><strong>IP地址</strong>：基于IP协议网络中，用于标识网络中的一个通信实体，通信实体可以是计算机、打印机等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|-IPV4：<span class="number">32</span>位，<span class="string">&quot;X.X.X.X&quot;</span>，每个X表示地址中的<span class="number">8</span>位，以十进制[<span class="number">0</span>,<span class="number">255</span>]之间的值表示。</span><br><span class="line">|-IPV6：<span class="number">128</span>位，<span class="string">&quot;X:X:X:X:X:X:X:X&quot;</span>，每个X表示地址中的<span class="number">16</span>位，以十六进制表示。</span><br></pre></td></tr></table></figure>
<p>Internet委员会定义了A~E类，5种IP地址类型以适合不同容量的网络。前3类由Internet
NIC在全球范围内统一分配，D、E类为特殊地址：<br />
<img src="/images/Java简介和环境搭建/IP.png" width="70%"></p>
<p><strong>域名</strong>：和IP地址是相对应的，方便人们记忆，比如百度的域名是www.baidu.com。<br />
<strong>网域名称系统</strong>（DNS，Domain Name
System）：因特网的一项核心服务，它是一个分布式数据库，记录域名和IP地址相互映射，输入的域名自动解析为IP地址。</p>
<h3 id="端口号">端口号</h3>
<p>IP地址可以确定网络上唯一的一个通信实体，但是一个通信实体可以有多个通信程序同时提供网络服务，而端口号能确定和哪个通信程序。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|-端口号：<span class="number">16</span>位，以十进制[<span class="number">0</span>,<span class="number">65535</span>]之间的值表示。</span><br><span class="line">    |-公认端口：[<span class="number">0</span>,<span class="number">1023</span>]，一般为固定服务，比如<span class="number">21</span>分配给FTP服务、<span class="number">25</span>分配给SMTP服务、<span class="number">80</span>分配给HTTP服务。</span><br><span class="line">    |-注册端口：[<span class="number">1024</span>,<span class="number">49151</span>]，松散地绑定于一些服务，比如Tomcat:<span class="number">8080</span>、Oracle:<span class="number">1521</span>、MySQL:<span class="number">3306</span>、SQL Server:<span class="number">1433</span>、QQ:<span class="number">1080</span>。</span><br><span class="line">    |-动态端口：[<span class="number">49152</span>,<span class="number">65535</span>]，一般不固定分配给某个服务，只要服务提出网络申请，系统会从这些端口号中分配一个供程序使用。</span><br></pre></td></tr></table></figure></p>
<h2 id="网络开发">网络开发</h2>
<h3 id="ip相关">IP相关</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|-InetAddress：IP地址类，有两个子类：IPV4的Inet4Address、IPV6的Inet6Address。</span><br><span class="line">    |-InetAddress <span class="title function_">getLocalHost</span><span class="params">()</span>：返回本地主机。不可靠，不建议多网卡、windows环境使用。</span><br><span class="line">    |-InetAddress <span class="title function_">getByAddress</span><span class="params">(<span class="type">byte</span>[] addr)</span>：给定原始IP地址，返回InetAddress对象。</span><br><span class="line">    |-InetAddress <span class="title function_">getByName</span><span class="params">(String host)</span>：给定主机名，返回InetAddress对象。</span><br><span class="line">    |-String <span class="title function_">getHostAddress</span><span class="params">()</span>：返回IP地址字符串（以文本表现形式）。</span><br><span class="line">    |-String <span class="title function_">getHostName</span><span class="params">()</span>：获取此IP地址的主机名。</span><br><span class="line">    |-String <span class="title function_">getCanonicalHostName</span><span class="params">()</span>：获取此IP地址的完全限定域名。</span><br><span class="line">    |-<span class="type">boolean</span> <span class="title function_">isReachable</span><span class="params">(<span class="type">int</span> timeout)</span>：测试是否可以达到该地址。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInetAddress</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnknownHostException&#123;</span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">ip1</span> <span class="operator">=</span> InetAddress.getLocalHost();</span><br><span class="line">        System.out.println(ip1);<span class="comment">// LAPTOP/192.168.1.107</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">ip2</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line">        System.out.println(ip2);<span class="comment">// www.baidu.com/220.181.38.150</span></span><br><span class="line">        <span class="type">byte</span>[] ip = &#123;(<span class="type">byte</span>) <span class="number">222</span>,(<span class="type">byte</span>) <span class="number">222</span>,<span class="number">88</span>,<span class="number">102</span>&#125;;</span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">ip3</span> <span class="operator">=</span> InetAddress.getByAddress(ip);</span><br><span class="line">        System.out.println(ip3);<span class="comment">// /222.222.88.102</span></span><br><span class="line">        <span class="comment">//如果这个IP地址不存在或DNS服务器不允许&quot;ip-&gt;域名&quot;的映射，那么getHostName方法就直接返回这个IP地址</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="url相关">URL相关</h3>
<p><strong>URI</strong>（Uniform resource
identifier）：统一资源标识符，用来唯一的标识一个资源。不能定位资源，只能解析。<br />
<strong>URL</strong>（Uniform Resource
Locator）：统一资源定位符，它是指向互联网“资源”的指针。资源可以是文件、目录、复杂对象的引用，例如对数据库、搜索引擎的查询。URL的基本结构由5部分组成：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&lt;传输协议&gt;://&lt;主机名&gt;:&lt;端口号&gt;/&lt;文件名&gt;#片段名&quot;</span></span><br><span class="line"><span class="string">&quot;&lt;传输协议&gt;://&lt;主机名&gt;:&lt;端口号&gt;/&lt;文件名&gt;?参数列表&quot;</span></span><br><span class="line"><span class="comment">//&quot;#片段名&quot;：即锚点，例如看小说，直接定位到章节。</span></span><br><span class="line"><span class="comment">//&quot;参数列表&quot;：参数名=参数值&amp;参数名=参数值....。</span></span><br></pre></td></tr></table></figure></p>
<p>URL方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">构造方法：</span><br><span class="line">|-URL (String spec)：根据String表示形式创建URL对象。</span><br><span class="line">|-URL(URL context, String spec)：通过基URL和相对URL构造一个URL对象。</span><br><span class="line">|-URL(String protocol, String host, String file)：根据指定的protocol、host、file创建URL对象。</span><br><span class="line">|-URL(String protocol, String host, <span class="type">int</span> port, String file)：根据指定protocol、host、port、file创建URL对象。</span><br><span class="line">常用方法：</span><br><span class="line">|-String <span class="title function_">getProtocol</span><span class="params">()</span>：获取该URL的协议名。</span><br><span class="line">|-String <span class="title function_">getHost</span><span class="params">()</span>：获取该URL的主机名。</span><br><span class="line">|-String <span class="title function_">getPort</span><span class="params">()</span>：获取该URL的端口号。</span><br><span class="line">|-String <span class="title function_">getPath</span><span class="params">()</span>：获取该URL的文件路径，即tomcat的webapps目录下级目录名也就是资源路径名。</span><br><span class="line">|-String <span class="title function_">getFile</span><span class="params">()</span>：获取该URL的文件名。</span><br><span class="line">|-String <span class="title function_">getRef</span><span class="params">()</span>：获取该URL在文件中的相对位置。</span><br><span class="line">|-String <span class="title function_">getQuery</span><span class="params">()</span>：获取该URL的查询名。</span><br><span class="line">读取、传输方法：</span><br><span class="line">|-InputStream <span class="title function_">openStream</span><span class="params">()</span>：返回一个用于从该连接读入的InputStream。</span><br><span class="line">|-openConnection()：创建传输实例。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">setDoOutput</span><span class="params">(<span class="type">boolean</span> dooutput)</span>：所有get和connect方法之首。默认<span class="literal">false</span>，若使用URL连接传递数据，则将DoOutput设置为<span class="literal">true</span>。</span><br><span class="line">    |-String <span class="title function_">getContentEncoding</span><span class="params">()</span>：返回content-encoding头字段的值。</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">getContentLength</span><span class="params">()</span>：返回content-length头字段的值。 </span><br><span class="line">    |-String <span class="title function_">getContentType</span><span class="params">()</span>：返回content-type头字段的值。 </span><br><span class="line">    |-<span class="type">long</span> <span class="title function_">getDate</span><span class="params">()</span>：返回date头字段的值。</span><br><span class="line">    |-<span class="type">long</span> <span class="title function_">getLastModified</span><span class="params">()</span>：返回last-modified头字段的值。结果为距离格林威治标准时间<span class="number">1970</span>年<span class="number">1</span>月<span class="number">1</span>日的毫秒数。</span><br><span class="line">    |-String <span class="title function_">getHeaderField</span><span class="params">(String name)</span>：返回指定的头字段的值。 </span><br><span class="line">    |-InputStream <span class="title function_">getInputStream</span><span class="params">()</span>：返回从此打开的连接读取的输入流。</span><br><span class="line">    |-OutputStream <span class="title function_">getOutputStream</span><span class="params">()</span>：返回写入到此连接的输出流。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="url"><ul class="nav-tabs"><li class="tab active"><a href="#url-1">构造方法</a></li><li class="tab"><a href="#url-2">常用方法</a></li><li class="tab"><a href="#url-3">读取数据</a></li><li class="tab"><a href="#url-4">传输数据</a></li></ul><div class="tab-content"><div class="tab-pane active" id="url-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span> (<span class="string">&quot;http://www.baidu.com/&quot;</span>);</span><br><span class="line"><span class="type">URL</span> <span class="variable">downloadUrl</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">URL</span>(url, <span class="string">&quot;download.html&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http&quot;</span>, <span class="string">&quot;www.baidu.com&quot;</span>, <span class="string">&quot;download.html&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http&quot;</span>, <span class="string">&quot;www.baidu.com&quot;</span>, <span class="number">80</span>, <span class="string">&quot;download.html&quot;</span>);</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="url-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestURL</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MalformedURLException &#123;</span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://www.baidu.com:80/index.html?keyword=java&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;协议:&quot;</span> + url.getProtocol());<span class="comment">//协议:http</span></span><br><span class="line">        System.out.println(<span class="string">&quot;主机名:&quot;</span> + url.getHost());<span class="comment">//主机名:www.baidu.com</span></span><br><span class="line">        System.out.println(<span class="string">&quot;端口号:&quot;</span> + url.getPort());<span class="comment">//端口号:8</span></span><br><span class="line">        System.out.println(<span class="string">&quot;路径名:&quot;</span> + url.getPath());<span class="comment">//路径名:/index.html</span></span><br><span class="line">        System.out.println(<span class="string">&quot;文件名:&quot;</span> + url.getFile());<span class="comment">//文件名:/index.html?keyword=java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;锚点:&quot;</span> + url.getRef());<span class="comment">//锚点:null</span></span><br><span class="line">        System.out.println(<span class="string">&quot;查询名:&quot;</span> + url.getQuery());<span class="comment">//查询名:keyword=java</span></span><br><span class="line">        <span class="comment">//如果存在锚点，那么查询名返回null，因为#后面全部当做锚点了</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="url-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="comment">//获取百度首页的资源</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestURLRead</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//html标签（格式化数据）、css：皮肤（美化数据）、js：互动（交互数据）</span></span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://www.baidu.com/index.html&quot;</span>);</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> url.openStream();</span><br><span class="line">        <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len=input.read(data)) != -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(data,<span class="number">0</span>,len,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="url-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLConnection;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestURLConnection</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://localhost/web1/denglu&quot;</span>);</span><br><span class="line">        <span class="comment">//通过URL对象调用openConnection方法创建连接对象</span></span><br><span class="line">        <span class="type">URLConnection</span> <span class="variable">uc</span> <span class="operator">=</span> url.openConnection();</span><br><span class="line">        <span class="comment">//处理设置参数</span></span><br><span class="line">        uc.setDoOutput(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//给服务器发送请求参数</span></span><br><span class="line">        uc.getOutputStream().write(<span class="string">&quot;username=admin&amp;password=123&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">//使用connect方法建立到远程对象的实际连接</span></span><br><span class="line">        uc.connect();</span><br><span class="line">        <span class="comment">//获取资源</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> uc.getInputStream();</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        String str;</span><br><span class="line">        <span class="keyword">while</span>((str=br.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="socket相关">Socket相关</h3>
<p><strong>Socket</strong>：套接字，应用层和传输层之间定义的一种编程接口，使得应用程序可以通过它发送或接收数据。Socket分为两种类型：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通信的两端都要有Socket，是两台机器间通信的端点。</span></span><br><span class="line">|-流套接字（stream socket）：面向连接的，使用TCP提供可靠的字节流服务。Java中使用ServerSocket类和Socket类。</span><br><span class="line">|-数据报套接字（datagram socket）：使用UDP提供“尽力而为”的数据报服务。Java中使用DatagramSocket类。</span><br></pre></td></tr></table></figure><br />
<img src="/images/Java简介和环境搭建/Socket.png" width="70%"></p>
<p>Socket方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">构造方法：</span><br><span class="line">|-Socket(InetAddress address,<span class="type">int</span> port)：创建一个流套接字并将其连接到指定IP地址的指定端口号。</span><br><span class="line">|-Socket(String host,<span class="type">int</span> port)：创建一个流套接字并将其连接到指定主机上的指定端口号。</span><br><span class="line">常用方法：</span><br><span class="line">|-InputStream <span class="title function_">getInputStream</span><span class="params">()</span>：返回此套接字的输入流，可以用于接收消息。</span><br><span class="line">|-OutputStream <span class="title function_">getOutputStream</span><span class="params">()</span>：返回此套接字的输出流，可以用于发送消息。</span><br><span class="line">|-InetAddress <span class="title function_">getInetAddress</span><span class="params">()</span>：此套接字连接到的远程IP地址；如果套接字是未连接的，则返回<span class="literal">null</span>。</span><br><span class="line">|-InetAddress <span class="title function_">getLocalAddress</span><span class="params">()</span>：获取套接字绑定的本地地址。</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">getPort</span><span class="params">()</span>：此套接字连接到的远程端口号，如果尚未连接套接字，则返回<span class="number">0</span>。</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">getLocalPort</span><span class="params">()</span>：返回此套接字绑定到的本地端口。如果尚未绑定套接字，则返回-<span class="number">1</span>。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>：关闭此套接字，释放Socket占用的资源，比如端口号。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">shutdownInput</span><span class="params">()</span>：禁用此套接字的输入流。在套接字上调用此方法后，从套接字输入流读取内容，将返回EOF（文件结束符）。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">shutdownOutput</span><span class="params">()</span>：禁用此套接字的输出流。对于TCP套接字，以前写入的数据都将被发送，之后链接终止，再调用输出会报IOException。</span><br><span class="line"><span class="comment">//先后调用shutdownInput、和shutdownOutput方法，仅仅关闭了输入流和输出流，并不等于close方法。</span></span><br></pre></td></tr></table></figure></p>
<h5 id="基于tcp协议">基于TCP协议</h5>
<p><strong>TCP</strong>（Transmission Control
Protocol）：传输控制协议，也被称作一种端对端协议。是一种面向连接的、可靠的、基于字节流的传输层的通信协议，可以连续传输大量的数据。当一台计算机想要连接另一台计算机时，TCP协议会采用<strong>三次握手</strong>方式让它们建立一个连接用于发送和接收数据，数据传输完毕TCP协议会采用<strong>四次挥手</strong>方式断开连接。</p>
<p>Java基于Socket的TCP编程，分为<strong>服务端</strong>编程、<strong>客户端</strong>编程，其通信模型如图所示：<br />
<img src="/images/Java简介和环境搭建/TCP.png" width="60%"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">服务端：</span><br><span class="line">|-ServerSocket(<span class="type">int</span> port)：创建一个服务器端套接字，并绑定到指定端口上，用于监听客户端的请求。</span><br><span class="line">|-Socket <span class="title function_">accept</span><span class="params">()</span>：监听连接请求，若客户端请求连接，则接受连接，创建与该客户端的Socket对象。否则它将一直处于等待状态。</span><br><span class="line">|-InputStream <span class="title function_">getInputStream</span><span class="params">()</span>：获取输入流，开始网络数据的接收。</span><br><span class="line">|-OutputStream <span class="title function_">getOutputStream</span><span class="params">()</span>：获取输出流，开始网络数据的发送。</span><br><span class="line">|-关闭Socket实例：某客户端访问结束，关闭与之通信的套接字。</span><br><span class="line">|-关闭ServerSocket实例：如果不再接收任何客户端的连接的话，调用close()进行关闭。</span><br><span class="line">客户端：</span><br><span class="line">|-创建Socket实例：根据指定服务端的IP地址/端口号构造Socket实例，创建的同时会自动向服务器方发起连接。</span><br><span class="line">   |-若服务器端响应，则建立客户端到服务器的通信线路。</span><br><span class="line">   |-若连接失败，会出现异常。</span><br><span class="line">|-InputStream <span class="title function_">getInputStream</span><span class="params">()</span>：获取输入流，开始网络数据的接收。</span><br><span class="line">|-OutputStream <span class="title function_">getOutputStream</span><span class="params">()</span>：获取输出流，开始网络数据的发送。</span><br><span class="line">|-进行读/写操作：通过输入流读取服务器发送的信息，通过输出流将信息发送给服务器。</span><br><span class="line">|-关闭Socket实例：断开客户端到服务器的连接。</span><br><span class="line"><span class="comment">//客户端、服务器端在获取输入流和输出流时要一入对应一出，否则容易死锁。</span></span><br></pre></td></tr></table></figure>
<div class="tabs" id="socket1"><ul class="nav-tabs"><li class="tab active"><a href="#socket1-1">单客户端+单服务端（服务端）</a></li><li class="tab"><a href="#socket1-2">单客户端+单服务端（客户端）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="socket1-1"><figure class="highlight java"><figcaption><span>Server.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.one;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="comment">//客户端连接服务器，连接成功后给服务发送“lalala”，服务器收到消息后，给客户端返回“欢迎登录”</span></span><br><span class="line"><span class="comment">//运行程序时，必须先启动服务器端程序，主动接收客户端程序的连接请求。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.准备ServerSocket对象，并绑定8888端口</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">server</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;等待连接....&quot;</span>);</span><br><span class="line">        <span class="comment">//2.在8888端口监听客户端的连接，该方法是个阻塞方法，若没有客户端连接，将一直等待</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> server.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;一个客户端连接成功！！&quot;</span>);</span><br><span class="line">        <span class="comment">//3.获取输入流，用来接收该客户端发送给服务器的数据，</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];<span class="comment">//接收byte数据</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len=input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            s.append(<span class="keyword">new</span> <span class="title class_">String</span>(data, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端发送的消息是：&quot;</span> + s);</span><br><span class="line">        <span class="comment">//4.获取输出流，用来发送数据给该客户端</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="comment">//发送数据</span></span><br><span class="line">        out.write(<span class="string">&quot;欢迎登录&quot;</span>.getBytes());<span class="comment">//转成byte数据发送</span></span><br><span class="line">        out.flush();</span><br><span class="line">        <span class="comment">//5.关闭socket，不再与该客户端通信</span></span><br><span class="line">        socket.close();<span class="comment">//socket关闭，意味着InputStream和OutputStream也关闭了</span></span><br><span class="line">        <span class="comment">//6.如果服务端不再接收任何客户端通信，可以关闭ServerSocket</span></span><br><span class="line">        server.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="socket1-2"><figure class="highlight java"><figcaption><span>Client.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.one;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.准备Socket，连接服务器，需要指定服务器的IP地址和端口号</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8888</span>);</span><br><span class="line">        <span class="comment">//2.获取输出流，用来发送数据给服务器</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        out.write(<span class="string">&quot;lalala&quot;</span>.getBytes());<span class="comment">//转成byte数据发送</span></span><br><span class="line">        <span class="comment">//会在流末尾写入一个“流的末尾”标记，对方才能读到-1，否则对方的读取方法会一致阻塞</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line">        <span class="comment">//3.获取输入流，用来接收服务器发送给该客户端的数据</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];<span class="comment">//接收byte数据</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len=input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            s.append(<span class="keyword">new</span> <span class="title class_">String</span>(data, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;服务器返回的消息是：&quot;</span> + s);</span><br><span class="line">        <span class="comment">//4.关闭socket，不再与服务器通信，即断开与服务器的连接</span></span><br><span class="line">        socket.close();<span class="comment">//socket关闭，意味着InputStream和OutputStream也关闭了</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<div class="tabs" id="socket2"><ul class="nav-tabs"><li class="tab active"><a href="#socket2-1">多客户端+单服务端（主服务端）</a></li><li class="tab"><a href="#socket2-2">多客户端+单服务端（次服务端）</a></li><li class="tab"><a href="#socket2-3">多客户端+单服务端（客户端）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="socket2-1"><figure class="highlight java"><figcaption><span>Server.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.echo;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="comment">//案例需求：多个客户端连接服务器，并进行多次通信。</span></span><br><span class="line"><span class="comment">//1.每一个客户端连接成功后，从键盘输入单词或成语，发送给服务器。</span></span><br><span class="line"><span class="comment">//2.服务器收到客户端的消息后，把词语“反转”后返回给客户端。</span></span><br><span class="line"><span class="comment">//3.客户端接收服务器返回的“词语”，打印显示。</span></span><br><span class="line"><span class="comment">//4.当客户端输入“stop”时断开与服务器的连接。</span></span><br><span class="line"><span class="comment">//5.多个客户端可以同时给服务器发送“词语”，服务器可以“同时”处理多个客户端的请求。</span></span><br><span class="line"><span class="comment">//提示：服务器端要“同时”处理多个客户端的请求，那么必须使用多线程，每一个客户端的通信需要单独的线程来处理。</span></span><br><span class="line"><span class="comment">//提示：IO流中提到可通过包装类把流包装成处理流。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.准备一个ServerSocket</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;等待连接...&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;<span class="comment">//2.循环监听客户端的连接</span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> server.accept();</span><br><span class="line">            System.out.println(<span class="string">&quot;第&quot;</span> + ++count + <span class="string">&quot;个客户端连接成功！！&quot;</span>);</span><br><span class="line">            <span class="type">ClientHandlerThread</span> <span class="variable">ct</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClientHandlerThread</span>(socket);</span><br><span class="line">            ct.start();<span class="comment">//启动一个处理线程</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//这里没有关闭server，永远监听</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="socket2-2"><figure class="highlight java"><figcaption><span>ClientHandlerThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.echo;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="comment">//使用包装类，包装输入、输出流</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClientHandlerThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ClientHandlerThread</span><span class="params">(Socket socket)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//1.获取输入流，用来接收该客户端发送给服务器的数据</span></span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line">            <span class="comment">//2.获取输出流，用来发送数据给该客户端</span></span><br><span class="line">            <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(socket.getOutputStream());</span><br><span class="line">            String str;</span><br><span class="line">            <span class="comment">//3.接收数据</span></span><br><span class="line">            <span class="keyword">while</span> ((str=br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">StringBuilder</span> <span class="variable">word</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(str);</span><br><span class="line">                word.reverse();<span class="comment">//4.反转</span></span><br><span class="line">                ps.println(word);<span class="comment">//5.返回给客户端</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception  e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                socket.close();<span class="comment">//6.断开连接</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="socket2-3"><figure class="highlight java"><figcaption><span>Client.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.echo;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.准备Socket，连接服务器，需要指定服务器的IP地址和端口号</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8888</span>);</span><br><span class="line">        <span class="comment">//2.获取输出流，用来发送数据给服务器</span></span><br><span class="line">        <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(socket.getOutputStream());</span><br><span class="line">        <span class="comment">//3.获取输入流，用来接收服务器发送给该客户端的数据</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line">        <span class="comment">//4.准备数据</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;输入发送给服务器的单词或成语：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">            <span class="keyword">if</span>(message.equals(<span class="string">&quot;stop&quot;</span>))&#123;</span><br><span class="line">                socket.shutdownOutput();<span class="comment">//发送断开连接</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ps.println(message);<span class="comment">//5.发送数据</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">feedback</span>  <span class="operator">=</span> br.readLine();<span class="comment">//6.接收数据</span></span><br><span class="line">            System.out.println(<span class="string">&quot;从服务器收到的反馈是：&quot;</span> + feedback);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//7.关闭socket，断开与服务器的连接</span></span><br><span class="line">        scanner.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<div class="tabs" id="socket3"><ul class="nav-tabs"><li class="tab active"><a href="#socket3-1">多客户端+单服务端（主服务端）</a></li><li class="tab"><a href="#socket3-2">多客户端+单服务端（次服务端）</a></li><li class="tab"><a href="#socket3-3">多客户端+单服务端（客户端）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="socket3-1"><figure class="highlight java"><figcaption><span>Server.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.fileupload;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="comment">//案例需求：每一个客户端启动后都可以给服务器上传一个文件，服务器接收到文件后保存到一个upload目录中。</span></span><br><span class="line"><span class="comment">//1.可以同时接收多个客户端的文件上传。</span></span><br><span class="line"><span class="comment">//2.每个客户端给服务器发送的文件可能重名，所以需要保证文件名的唯一，可使用“时间戳”作为文件名，而后缀名不变。</span></span><br><span class="line"><span class="comment">//3.客户端需要给服务器上传文件全名（字符串）、文件内容（不确定）。可选择DataOutputStream和DataInputStream。</span></span><br><span class="line"><span class="comment">//提示：服务器端要“同时”处理多个客户端的请求，那么必须使用多线程，每一个客户端的通信需要单独的线程来处理。</span></span><br><span class="line"><span class="comment">//提示：IO流中提到可通过包装类把流包装成处理流。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="comment">//1.准备一个ServerSocket</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8888</span>);</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;<span class="comment">//2.循环监听客户端的连接</span></span><br><span class="line">            <span class="type">Socket</span> <span class="variable">accept</span> <span class="operator">=</span> server.accept();</span><br><span class="line">            <span class="type">FileUploadThread</span> <span class="variable">ft</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileUploadThread</span>(accept);</span><br><span class="line">            ft.start();<span class="comment">//启动一个处理线程</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="socket3-2"><figure class="highlight java"><figcaption><span>FileUploadThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.tcp.fileupload;</span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUploadThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="string">&quot;upload/&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FileUploadThread</span><span class="params">(Socket socket)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1.获取文件输入流，用来接收该客户端发送给服务器的数据</span></span><br><span class="line">            <span class="type">DataInputStream</span> <span class="variable">dis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataInputStream</span>(socket.getInputStream());</span><br><span class="line">            <span class="comment">//2.生成时间戳作为文件名</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> dis.readUTF();<span class="comment">//读取文件名</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">ext</span> <span class="operator">=</span> filename.substring(filename.lastIndexOf(<span class="string">&quot;.&quot;</span>));<span class="comment">//获取后缀名</span></span><br><span class="line">            <span class="type">SimpleDateFormat</span> <span class="variable">sf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMddHHmmssSSS&quot;</span>);</span><br><span class="line">            filename = sf.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">            <span class="comment">//3.获取文件输出流，写文件到本地</span></span><br><span class="line">            fos = <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dir + filename + ext);<span class="comment">//文件名改为：时间戳.后缀</span></span><br><span class="line">            <span class="comment">//4.接收文件内容</span></span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span>((len=is.read(data)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                fos.write(data, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//5.获取文件输出流，用来发送数据给该客户端</span></span><br><span class="line">            <span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintStream</span>(socket.getOutputStream());</span><br><span class="line">            ps.println(filename + ext + <span class="string">&quot;：已上传完毕&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">                socket.close();<span class="comment">//6.关闭socket，断开与服务器的连接</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="socket3-3"><figure class="highlight java"><figcaption><span>Client.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.fileupload;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.准备Socket，连接服务器，需要指定服务器的IP地址和端口号</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;192.168.34.53&quot;</span>, <span class="number">8888</span>);</span><br><span class="line">        <span class="comment">//2.从键盘输入文件的路径和名称</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请选择要上传的文件：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> input.nextLine();</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="comment">//3.获取输出流，用来发送数据给服务器（DataOutputStream可发字符，也可发字节）</span></span><br><span class="line">        <span class="type">DataOutputStream</span> <span class="variable">dos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(socket.getOutputStream());</span><br><span class="line">        dos.writeUTF(file.getName());<span class="comment">//先发送文件全名</span></span><br><span class="line">        <span class="comment">//4.获取文件输入流，读取本地文件</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">        <span class="type">int</span> len</span><br><span class="line">        <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span>((len=fis.read(data)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                fos.write(data, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line">        <span class="comment">//5.获取输入流，接收服务器返回的结果</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(socket.getInputStream()));</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="comment">//6.关闭socket，断开与服务器的连接</span></span><br><span class="line">        fis.close();</span><br><span class="line">        input.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<div class="tabs" id="socket4"><ul class="nav-tabs"><li class="tab active"><a href="#socket4-1">多客户端+单服务端（主服务端）</a></li><li class="tab"><a href="#socket4-2">多客户端+单服务端（次服务端）</a></li><li class="tab"><a href="#socket4-3">多客户端+单服务端（客户端）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="socket4-1"></div><div class="tab-pane" id="socket4-2"></div><div class="tab-pane" id="socket4-3"></div></div></div>
<h5 id="案例多个客户端群聊">案例：多个客户端群聊</h5>
<p>需求：模拟聊天室群聊。客户端要先登录，登录成功之后才能发送和接收消息。<br />
（1）服务器端，需要为每个客户端开启一个线程通信，这样才能实现多个客户端“同时”与服务器通信。<br />
（2）客户端，需要把收消息功能与发消息功能分开两个线程，这样才能“同时收发”，即可以发消息，也可以接收其他客户端的聊天消息。<br />
（3）服务器端要分别处理客户端的“登录”、“退出”、“聊天”的消息，所以这里设计了Code常量类，用状态值区分“登录”、“退出”、“聊天”。<br />
（4）这里设计Message类，包含code属性，区别是“登录”、“退出”、“聊天”，username属性表示用户名，表明消息是谁发的，content属性，存储消息内容，如果是登录，就用来存储密码。<br />
（5）这里消息是Message对象，因此在客户端与服务器之间传输的是对象，所以选择ObjectOutputStream和ObjectInputStream。<br />
（6）这里的Message类与Code类是服务器端和客户端“共享”的，要保持一致。特别注意包名和序列化版本ID。<br />
<div class="tabs" id="chat"><ul class="nav-tabs"><li class="tab active"><a href="#chat-1">Code</a></li><li class="tab"><a href="#chat-2">Message</a></li><li class="tab"><a href="#chat-3">ServiceUserManager</a></li><li class="tab"><a href="#chat-4">Server</a></li><li class="tab"><a href="#chat-5">ServerThread</a></li><li class="tab"><a href="#chat-6">Client</a></li><li class="tab"><a href="#chat-7">ClientSendThread</a></li><li class="tab"><a href="#chat-8">ClientReceiveThread</a></li></ul><div class="tab-content"><div class="tab-pane active" id="chat-1"><figure class="highlight java"><figcaption><span>Code.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.bean;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Code</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">LOGIN</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">CHAT</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">LOGOUT</span> <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SUCCESS</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">FAIL</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-2"><figure class="highlight java"><figcaption><span>Message.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.bean;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Message</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Message</span><span class="params">(<span class="type">int</span> code, String username, String content)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Message</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(<span class="type">int</span> code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContent</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-3"><figure class="highlight java"><figcaption><span>UserManager.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.server;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserManager</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;String,String&gt; allUsers = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,String&gt;();</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        allUsers.put(<span class="string">&quot;gangge&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">        allUsers.put(<span class="string">&quot;xiaobai&quot;</span>, <span class="string">&quot;456&quot;</span>);</span><br><span class="line">        allUsers.put(<span class="string">&quot;gujie&quot;</span>, <span class="string">&quot;789&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">login</span><span class="params">(String username, String password)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(allUsers.get(username)!=<span class="literal">null</span> &amp;&amp; allUsers.get(username).equals(password))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-4"><figure class="highlight java"><figcaption><span>Server.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.server;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;resource&quot;)</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">server</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> server.accept();</span><br><span class="line">            <span class="type">ClientHandlerThread</span> <span class="variable">ct</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClientHandlerThread</span>(socket);</span><br><span class="line">            ct.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-5"><figure class="highlight java"><figcaption><span>ClientHandlerThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.server;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Code;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Message;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClientHandlerThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Set&lt;ObjectOutputStream&gt; online = Collections.synchronizedSet(<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;ObjectOutputStream&gt;());</span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> ObjectInputStream ois;</span><br><span class="line">    <span class="keyword">private</span> ObjectOutputStream oos;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ClientHandlerThread</span><span class="params">(Socket socket)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            ois = <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(socket.getInputStream());</span><br><span class="line">            oos = <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(socket.getOutputStream());</span><br><span class="line">            <span class="comment">//接收数据</span></span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                message = (Message) ois.readObject();</span><br><span class="line">                <span class="keyword">if</span>(message.getCode() == Code.LOGIN)&#123;</span><br><span class="line">                    <span class="comment">//如果是登录，则验证用户名密码</span></span><br><span class="line">                    username = message.getUsername();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> message.getContent();</span><br><span class="line">                    <span class="keyword">if</span>(UserManager.login(username, password))&#123;</span><br><span class="line">                        message.setCode(Code.SUCCESS);</span><br><span class="line">                        oos.writeObject(message);</span><br><span class="line">                        <span class="comment">//并将该用户添加到在线人员名单中</span></span><br><span class="line">                        online.add(oos);</span><br><span class="line">                        message.setCode(Code.CHAT);</span><br><span class="line">                        message.setContent(<span class="string">&quot;上线了&quot;</span>);</span><br><span class="line">                        <span class="comment">//通知其他人，xx上线了</span></span><br><span class="line">                        sendToOther(message);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        message.setCode(Code.FAIL);</span><br><span class="line">                        oos.writeObject(message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(message.getCode() == Code.CHAT)&#123;</span><br><span class="line">                    <span class="comment">//如果是聊天信息，把消息转发给其他在线客户端</span></span><br><span class="line">                    sendToOther(message);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(message.getCode() == Code.LOGOUT)&#123;</span><br><span class="line">                    <span class="comment">//通知其他人，xx下线了</span></span><br><span class="line">                    message.setContent(<span class="string">&quot;下线了&quot;</span>);</span><br><span class="line">                    sendToOther(message);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception  e)&#123;</span><br><span class="line">            <span class="comment">//通知其他人，xx掉线了</span></span><br><span class="line">            <span class="keyword">if</span>(message!=<span class="literal">null</span> &amp;&amp; username!=<span class="literal">null</span>)&#123;</span><br><span class="line">                message.setCode(Code.LOGOUT);</span><br><span class="line">                message.setContent(<span class="string">&quot;掉线了&quot;</span>);</span><br><span class="line">                sendToOther(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//从在线人员中移除并断开当前客户端</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                online.remove(oos);</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendToOther</span><span class="params">(Message message)</span> &#123;</span><br><span class="line">        ArrayList&lt;ObjectOutputStream&gt; offline = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;ObjectOutputStream&gt;();</span><br><span class="line">        <span class="keyword">for</span> (ObjectOutputStream on : online) &#123;</span><br><span class="line">            <span class="comment">//只给其他客户端转发</span></span><br><span class="line">            <span class="keyword">if</span>(!on.equals(oos))&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    on.writeObject(message);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    <span class="comment">//说明on这个客户端要么下线了，要么掉线了</span></span><br><span class="line">                    offline.add(on);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//把下线人员从在线人员中删除</span></span><br><span class="line">        <span class="keyword">for</span> (ObjectOutputStream off : offline) &#123;</span><br><span class="line">            online.remove(off);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        //遍历所有online的客户端</span></span><br><span class="line"><span class="comment">        Iterator&lt;ObjectOutputStream&gt; iterator = online.iterator();</span></span><br><span class="line"><span class="comment">        while(iterator.hasNext())&#123;</span></span><br><span class="line"><span class="comment">            ObjectOutputStream on = iterator.next();</span></span><br><span class="line"><span class="comment">            if(!on.equals(oos))&#123;//只给其他客户端转发</span></span><br><span class="line"><span class="comment">                try &#123;</span></span><br><span class="line"><span class="comment">                    on.writeObject(message);</span></span><br><span class="line"><span class="comment">                &#125; catch (IOException e) &#123;</span></span><br><span class="line"><span class="comment">                    //说明on这个客户端要么下线了，要么掉线了</span></span><br><span class="line"><span class="comment">                    //把下线人员从在线人员中删除</span></span><br><span class="line"><span class="comment">                    iterator.remove();</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-6"><figure class="highlight java"><figcaption><span>Client.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.client;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Code;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Message;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;192.168.1.107&quot;</span>, <span class="number">9999</span>);</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(socket.getOutputStream());</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(socket.getInputStream());</span><br><span class="line">        <span class="comment">//先登录</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        String username;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">//输入登录信息</span></span><br><span class="line">            System.out.println(<span class="string">&quot;用户名：&quot;</span>);</span><br><span class="line">            username = scanner.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;密码：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">            <span class="type">Message</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Message</span>(Code.LOGIN, username, password);</span><br><span class="line">            <span class="comment">//发送登录数据</span></span><br><span class="line">            oos.writeObject(msg);</span><br><span class="line">            <span class="comment">//接收登录结果</span></span><br><span class="line">            msg = (Message) ois.readObject();</span><br><span class="line">            <span class="keyword">if</span>(msg.getCode() == Code.SUCCESS)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;登录成功！&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(msg.getCode() == Code.FAIL)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;用户名或密码错误，登录失败，重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//启动收消息和发消息线程</span></span><br><span class="line">        <span class="type">SendThread</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SendThread</span>(oos,username);</span><br><span class="line">        <span class="type">ReceiveThread</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReceiveThread</span>(ois);</span><br><span class="line">        s.start();</span><br><span class="line">        r.start();</span><br><span class="line"></span><br><span class="line">        s.join();<span class="comment">//等待s线程终止</span></span><br><span class="line">        r.setFlag(<span class="literal">false</span>);<span class="comment">//s终止，r也终止</span></span><br><span class="line">        r.join();<span class="comment">//等待r线程终止</span></span><br><span class="line">        </span><br><span class="line">        scanner.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-7"><figure class="highlight java"><figcaption><span>SendThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.client;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Code;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Message;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ObjectOutputStream oos;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SendThread</span><span class="params">(ObjectOutputStream oos,String username)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.oos = oos;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请输入消息内容：&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">                Message msg;</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;bye&quot;</span>.equals(content))&#123;</span><br><span class="line">                    msg = <span class="keyword">new</span> <span class="title class_">Message</span>(Code.LOGOUT, username, content);</span><br><span class="line">                    oos.writeObject(msg);</span><br><span class="line">                    scanner.close();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    msg = <span class="keyword">new</span> <span class="title class_">Message</span>(Code.CHAT, username, content);</span><br><span class="line">                    oos.writeObject(msg);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-8"><figure class="highlight java"><figcaption><span>ReceiveThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.client;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Message;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReceiveThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ObjectInputStream ois;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ReceiveThread</span><span class="params">(ObjectInputStream ois)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.ois = ois;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(flag)&#123;</span><br><span class="line">                <span class="type">Message</span> <span class="variable">msg</span> <span class="operator">=</span> (Message) ois.readObject();</span><br><span class="line">                System.out.println(msg.getUsername() + <span class="string">&quot;:&quot;</span> + msg.getContent());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请重新登录&quot;</span>);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlag</span><span class="params">(<span class="type">boolean</span> flag)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h4 id="基于udp协议的网络编程">基于UDP协议的网络编程</h4>
<p>UDP(User Datagram
Protocol，用户数据报协议)：是一个<strong>无连接</strong>的传输层协议、提供面向事务的简单<strong>不可靠</strong>的信息传送服务，类似于短信。</p>
<p>UDP协议是一种<strong>面向非连接</strong>的协议，面向非连接指的是在正式通信前不必与对方先建立连接，不管对方状态就直接发送，至于对方是否可以接收到这些数据内容，UDP协议无法控制，因此说，UDP协议是一种<strong>不可靠</strong>的协议。无连接的好处就是快，省内存空间和流量，因为维护连接需要创建大量的数据结构。UDP会尽最大努力交付数据，但不保证可靠交付，没有TCP的确认机制、重传机制，如果因为网络原因没有传送到对端，UDP也不会给应用层返回错误信息。</p>
<p>UDP协议是面向数据报文的信息传送服务。UDP在发送端没有缓冲区，对于应用层交付下来的报文在添加了首部之后就直接交付于ip层，不会进行合并，也不会进行拆分，而是一次交付一个完整的报文。比如我们要发送100个字节的报文，我们调用一次send()方法就会发送100字节，接收方也需要用receive()方法一次性接收100字节，不能使用循环每次获取10个字节，获取十次这样的做法。</p>
<p>UDP协议没有拥塞控制，所以当网络出现的拥塞不会导致主机发送数据的速率降低。虽然UDP的接收端有缓冲区，但是这个缓冲区只负责接收，并不会保证UDP报文的到达顺序是否和发送的顺序一致。因为网络传输的时候，由于网络拥塞的存在是很大的可能导致先发的报文比后发的报文晚到达。如果此时缓冲区满了，后面到达的报文将直接被丢弃。这个对实时应用来说很重要，比如：视频通话、直播等应用。<br />
因此UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境，数据报大小限制在64K以下。</p>
<h5 id="基于udp协议的网络编程-1">基于UDP协议的网络编程</h5>
<p>基于UDP协议的网络编程仍然需要在通信实例的两端各建立一个Socket，但这两个Socket之间并没有虚拟链路，这两个Socket只是发送、接收数据报的对象，Java提供了DatagramSocket对象作为基于UDP协议的Socket，使用DatagramPacket代表DatagramSocket发送、接收的数据报。</p>
<p><strong>DatagramSocket 类的常用方法：</strong><br />
（1）<code>public DatagramSocket(int port)</code>：创建数据报套接字并将其绑定到本地主机上的指定端口。套接字将被绑定到通配符地址，IP
地址由内核来选择。<br />
（2）<code>public DatagramSocket(int port,InetAddress laddr)</code>：创建数据报套接字，将其绑定到指定的本地地址。本地端口必须在
0 到 65535 之间（包括两者）。如果 IP 地址为
0.0.0.0，套接字将被绑定到通配符地址，IP 地址由内核选择。<br />
（3）<code>public void close()</code>：关闭此数据报套接字。<br />
（4）<code>public void send(DatagramPacket p)</code>：从此套接字发送数据报包。DatagramPacket
包含的信息指示：将要发送的数据、其长度、远程主机的 IP
地址和远程主机的端口号。<br />
（5）<code>public void receive(DatagramPacket p)</code>：从此套接字接收数据报包。当此方法返回时，DatagramPacket
的缓冲区填充了接收的数据。数据报包也包含发送方的 IP
地址和发送方机器上的端口号。
此方法在接收到数据报前一直阻塞。数据报包对象的 length
字段包含所接收信息的长度。如果信息比包的长度长，该信息将被截短。</p>
<p><strong>DatagramPacket类的常用方法：</strong><br />
（6）<code>public DatagramPacket(byte[] buf,int length)</code>：构造DatagramPacket，用来接收长度为
length 的数据包。 length 参数必须小于等于 buf.length。<br />
（7）<code>public DatagramPacket(byte[] buf,int length,InetAddress address,int port)</code>：构造数据报包，用来将长度为
length 的包发送到指定主机上的指定端口号。length 参数必须小于等于
buf.length。<br />
（8）<code>public int getLength()</code>：返回将要发送或接收到的数据的长度。</p>
<p><strong>1、“发送端”</strong><br />
步骤流程：<br />
1、建立发送端DatagramSocket，需要指定本端的端口号。<br />
2、建立数据包DatagramPacket，数据、接收端的IP地址、接收端的端口号。<br />
3、调用DatagramSocket的发送方法。<br />
4、关闭DatagramSocket。<br />
<figure class="highlight java"><figcaption><span>Send.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.udp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Send</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1、建立发送端的DatagramSocket</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//要发送的数据</span></span><br><span class="line">        ArrayList&lt;String&gt; all = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        all.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        all.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">        all.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        all.add(<span class="string">&quot;great&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//接收方的IP地址</span></span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">ip</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        <span class="comment">//接收方的监听端口号</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">9999</span>;</span><br><span class="line">         <span class="comment">//发送多个数据报</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; all.size(); i++) &#123;</span><br><span class="line">            <span class="comment">//2、建立数据包DatagramPacket</span></span><br><span class="line">            <span class="type">byte</span>[] data = all.get(i).getBytes();</span><br><span class="line">            <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(data, data.length, ip, port);</span><br><span class="line">            <span class="comment">//3、调用Socket的发送方法</span></span><br><span class="line">            ds.send(dp);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//4、关闭Socket</span></span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br />
<strong>2、“接收端”</strong><br />
步骤流程：<br />
1、建立接收端DatagramSocket，需要指定本端的IP地址和端口号。<br />
2、建立数据包DatagramPacket，需要指定装数据的数组。<br />
3、调用Socket的接收方法。<br />
4、拆封数据。<br />
5、关闭Socke。<br />
<figure class="highlight java"><figcaption><span>Receive.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.udp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Receive</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1、建立接收端的DatagramSocket，需要指定本端的监听端口号</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">9999</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//一直监听数据</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">//2、建立数据包DatagramPacket</span></span><br><span class="line">            <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>*<span class="number">64</span>];</span><br><span class="line">            <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(buffer , buffer.length);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//3、调用Socket的接收方法</span></span><br><span class="line">            ds.receive(dp);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//4、拆封数据</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(buffer,<span class="number">0</span>,dp.getLength());</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5
id="使用multicastsocket实现多点广播">使用MulticastSocket实现多点广播</h5>
<p>Datagram只允许数据报发送给指定的目标地址，而MulticastSocket可以将数据报以广播方式发送到数量不等的多个客户端。<br />
IP协议为多点广播提供了这批特殊的IP地址，这些IP地址的范围是224.0.0.0至239.255.255.255。<br />
MulticastSocket常用的方法：<br />
（1）<code>MulticastSocket(int port)</code>：创建多播套接字并将其绑定到特定端口。创建一个MulticastSocket对象后，还需要将该MulticastSocket加入到指定的多点广播地址，如果结束也需要脱离多点广播地址。<br />
（2）<code>void joinGroup(InetAddress mcastaddr)</code>：加入多播组。<br />
（3）<code>void leaveGroup(InetAddress mcastaddr)</code>：离开多播组。<br />
（4）<code>void setLoopbackMode(boolean disable)</code>：启用/禁用多播数据报的本地回送。true
表示禁用 LoopbackMode。<br />
<figure class="highlight java"><figcaption><span>Chat.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.udp.multi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.MulticastSocket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Chat</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">exit</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">MulticastSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MulticastSocket</span>(<span class="number">9999</span>);</span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">ip</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;230.0.0.1&quot;</span>);</span><br><span class="line">        socket.joinGroup(ip);</span><br><span class="line">        socket.setLoopbackMode(<span class="literal">false</span>);</span><br><span class="line">        </span><br><span class="line">        System.out.print(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">        username = input.nextLine();</span><br><span class="line">        </span><br><span class="line">        <span class="type">SendThread</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SendThread</span>(socket,ip);</span><br><span class="line">        <span class="type">ReceiveThread</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReceiveThread</span>(socket);</span><br><span class="line">        </span><br><span class="line">        s.start();</span><br><span class="line">        r.start();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            s.join();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        socket.close();</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">SendThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> MulticastSocket socket;</span><br><span class="line">        <span class="keyword">private</span> InetAddress ip;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">SendThread</span><span class="params">(MulticastSocket socket,InetAddress ip)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>();</span><br><span class="line">            <span class="built_in">this</span>.socket = socket;</span><br><span class="line">            <span class="built_in">this</span>.ip = ip;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (!exit) &#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;输入广播消息：&quot;</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> input.nextLine();</span><br><span class="line">                    <span class="keyword">if</span> (<span class="string">&quot;bye&quot;</span>.equals(message)) &#123;</span><br><span class="line">                        exit = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">    </span><br><span class="line">                    <span class="type">byte</span>[] data = (username+<span class="string">&quot;:&quot;</span>+message).getBytes();</span><br><span class="line">                    <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(data, data.length, ip, <span class="number">9999</span>);</span><br><span class="line">    </span><br><span class="line">                    socket.send(dp);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ReceiveThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> MulticastSocket socket;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ReceiveThread</span><span class="params">(MulticastSocket socket)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>();</span><br><span class="line">            <span class="built_in">this</span>.socket = socket;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (!exit) &#123;</span><br><span class="line">                    <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                    <span class="type">DatagramPacket</span> <span class="variable">dp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(data, data.length);</span><br><span class="line">                    socket.receive(dp);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(data, <span class="number">0</span>, dp.getLength());</span><br><span class="line">                    System.out.println(str);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                exit = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="小结">小结</h2>
<p>本文重点介绍了Java网络编程的相关知识。通过本文的学习，了解了计算机网络的相关知识，并介绍了IP地址和端口、网络协议的概念，这是进行网络编程的基础。</p>
<p>本文介绍了Java提供的InetAddress、URLConnection等，并通过它获取了远程资源。</p>
<p>本文还介绍了ServerSocket、Socket类，程序可以通过这两个类实现了TCP服务器、TCP客户端，通过编写案例，我们发现编写基于TCP协议的网络编程对于IO流、多线程知识的应用也有了更好的体会。</p>
<p>本文也介绍了DatagramSocket，DatagramPacket和MulticastSocket，并通过一个局域网通信案例示范了如何使用它们。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/04/Java/26.Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/03/04/Java/26.Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="post-title-link" itemprop="url">Java多线程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-04 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-04T00:00:00+08:00">2020-03-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>35 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="进程和线程">进程和线程</h2>
<p>程序：当你要完成某些任务时，选择一种编程语言而编写的一组指令的集合。<br />
软件：程序（可能多个） + 程序运行所需要的一些资源文件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|-进程：</span><br><span class="line">    |-程序的一次运行。</span><br><span class="line">    |-每个进程之间是独立。操作系统在分配资源（例如：内存）时，是以进程为单位。</span><br><span class="line">    |-两个进程之间进行切换，通信（交换数据）等操作时，成本比较高。</span><br><span class="line">|-线程：</span><br><span class="line">    |-进程中的其中一条执行路径。</span><br><span class="line">    |-同一个进程中的多个线程之间是可以共享部分内存（方法区、堆），每个线程的有些内存又是独立（虚拟机栈、本地方法栈、程序计数器）。</span><br><span class="line">    |-线程之间可使用共享内存，在数据交换、线程间切换成本上较低，所以通常用多线程来代替多进程的方式，实现多任务开发。</span><br><span class="line">    |-线程是CPU调度的最小单位。</span><br><span class="line"><span class="comment">//并行：在同一时刻，有多条指令在多个处理器上同时执行。如多个线程同时运行。针对多个CPU、多核CPU，可同一时刻运行多个线程任务。</span></span><br><span class="line"><span class="comment">//并发：同一个时刻只能有一条指令执行，但多个进程的指令被快速轮换执行，使得在宏观上具有多个进程同时执行的效果。</span></span><br></pre></td></tr></table></figure>
<h3 id="进程">进程</h3>
<p>几乎所有操作系统都支持进程的概念，所有运行中的任务通常对应一条进程（Process），当一个程序进入内存运行，即变成一个进程。<br />
进程是处于运行过程中的程序，并且具有一定独立功能，进程是操作系统进行资源分配和调度的一个独立单位。</p>
<p>进程包含如下三个特性：<br />
（1）<strong>独立性</strong>：进程是操作系统进行资源分配和调度的一个独立单位，每一个进程都拥有自己私有的地址空间。在没有经过进程本身允许的情况下，一个用户进程不可以直接访问其他进程的地址空间。哪怕在同一台计算机上运行，进程之间通信可能也需要通过网络、独立于进程的文件来交换数据。<br />
（2）<strong>动态性</strong>：程序只是一个静态的指令的集合，而进程是一个正在系统中运行的活动的指令集合，即进程是处于运行过程中的程序。在进程中加入了时间的概念，进程具有自己的生命周期和各种不同状态，这些概念在程序中都是不具备的。<br />
（3）<strong>并发性</strong>：多个进程可以在单个处理器上并发执行，多个进程之间不会相互影响。</p>
<p>现代的操作系统都支持多进程的并发，但在具体的实现细节上可能因为硬件和操作系统的不同而采用不同的策略，目前大多数采用效率更高的抢占式多任务策略。<br />
对于一个CPU而言，它在某个时间点上只能执行一个程序，也就是只能运行一个进程，CPU不断的在这些进程之间轮换执行。那么我们为什么可以一边用开发工具写程序，一边听音乐，一边还上网查资料，还没有感觉到中断和轮换呢？这是因为CPU的执行速度相对于我们的感知速度来说实在是太快了，所以我们感觉像是同时运行一样。但是当我们启动足够多的程序时，依然可以感觉到运行速度下降的。</p>
<h3 id="线程">线程</h3>
<p>线程（Thread）也被称为轻量级进程。就像进程在操作系统中地位一样，线程在进程中也是独立的、并发的执行流。当进程被初始化后，主线程就被创建了，对于Java程序来说，main线程就是主线程，但我们可以在该进程内创建多条顺序执行路径，这些独立的顺序执行路径就是线程，而多线程扩展了多进程的概念，使得通一个进程可以同时并发处理多个任务。</p>
<p>进程中的每一个线程可以完成一定的任务，并且是独立的，线程可以拥有自己独立的堆栈、自己的程序计数器和自己的局部变量，但不再拥有系统资源，它与父进程的其他线程共享该进程所拥有的全部资源。<strong>由于线程间的通信是在同一个地址空间上进行的，所以不需要额外的通信机制，这就使得通信更简便而且信息传递的速度也更快，因此可以通过简单编程实现多线程相互协同来完成进程所要完成的任务</strong>。但是也存在安全问题，因为其中一个线程对共享的系统资源的操作都会给其他线程带来影响，由此可知，<strong>多线程中的同步是非常重要的问题</strong>。</p>
<p>线程的执行也是抢占式的，也就是说，当前运行的线程在任何时候都可能被挂起，以便另一个线程可以运行。我们说CPU在不同的进程之间轮换，进程又在不同的线程之间轮换，因此线程是CPU执行和调度的最小单元。</p>
<p>总之，<strong>一个程序运行后至少有一个进程，一个进程里可以包含多个线程，但至少要包含一个线程</strong>。当操作系统创建一个进程时，必须为该进程分配独立的内存空间，并分配大量的相关资源；但创建一个线程简单的多，而且多个线程共享同一个进程的虚拟空间，所以，使用多线程来实现并发比使用多进程实现并发的性能要高的多。</p>
<p>注意：并发性（concurrency）和并行性（parallel）是两个概念：<strong>并行是指在同一时刻，有多条指令在多个处理器上同时执行</strong>。<strong>并发是指在同一个时刻只能有一条指令执行，但多个进程的指令被快速轮换执行，使得在宏观上具有多个进程同时执行的效果</strong>。</p>
<p><strong>单线程</strong>：只有一条顺序执行流，程序从main方法开始执行，依次向下执行每行代码，如果程序执行某行代码遇到阻塞，则程序会停滞在该处。<br />
<strong>多线程</strong>：程序则包含多条执行路径，多条执行路径之间互不干扰。<br />
Java语言提供了非常优秀的多线程支持，包括创建、启动、控制线程，以及多线程的同步、通信操作，还可以通过线程池提高多线程性能。</p>
<h2 id="线程开发">线程开发</h2>
<h3 id="生命周期">生命周期</h3>
<p><img src="/images/Java简介和环境搭建/线程生命周期.png" width="60%"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">|-新建（New）</span><br><span class="line">    |-<span class="keyword">new</span>一个线程对象，此时它和普通的Java对象并没有区别，仅仅由JVM为其分配了内存，并初始化了实例变量的值。</span><br><span class="line">|-就绪（Runnable）</span><br><span class="line">    |-当线程对象调用了start方法之后，就从新建状态转为就绪状态。JVM会为其创建方法调用栈和程序计数器。</span><br><span class="line">    |-此状态的线程并没有开始运行，只是表示已具备了运行的条件，随时可以被调度。至于什么时候被调度，取决于JVM里线程调度器的调度。</span><br><span class="line">    |-就绪状态的线程是具备被CPU调用的能力和状态，也只有这个状态的线程才能被CPU调用。</span><br><span class="line">|-运行（Running）</span><br><span class="line">    |-当前线程获得了CPU，开始执行run方法的线程体代码，就是运行状态。</span><br><span class="line">    |-如果计算机只有一个CPU，在任何时刻只有一个线程处于运行状态，如果计算机有多个CPU，将会有多个线程并行执行。</span><br><span class="line">    |-抢占式策略的系统：</span><br><span class="line">        |-会给每个可执行的线程一小时间段来处理任务，当该时间用完，系统会剥夺该线程所占用的资源，让其回到就绪状态等待下一次被调度。</span><br><span class="line">        |-此时其他线程将获得执行机会，而在选择下一个线程时，系统会适当考虑线程的优先级。</span><br><span class="line">|-阻塞（Blocked）</span><br><span class="line">    |-当在运行过程中的线程遇到如下情况时，线程会进入阻塞状态：</span><br><span class="line">        |-线程调用了sleep方法，主动放弃所占用的CPU资源。</span><br><span class="line">        |-线程调用了一个阻塞式IO方法，在该方法返回之前，该线程被阻塞。</span><br><span class="line">        |-线程试图获取一个同步监视器，但该同步监视器正被其他线程持有。</span><br><span class="line">        |-线程执行过程中，同步监视器调用了wait方法，让它等待某个通知（notify）。</span><br><span class="line">        |-线程执行过程中，遇到了其他线程对象的加塞（join）。</span><br><span class="line">        |-线程被调用suspend方法被挂起（已过时，因为容易发生死锁）。</span><br><span class="line">    |-当发生如下情况时会解除阻塞，让该线程重新进入就绪状态，等待线程调度器再次调度它：</span><br><span class="line">        |-线程的sleep方法结束。</span><br><span class="line">        |-线程调用的阻塞式IO方法已经返回。</span><br><span class="line">        |-线程成功获得了同步监视器。</span><br><span class="line">        |-线程等到了通知(notify)。</span><br><span class="line">        |-加塞的线程结束了。</span><br><span class="line">        |-挂起的线程又被调用了resume恢复方法（已过时，因为容易发生死锁）。</span><br><span class="line">|-死亡（Dead）</span><br><span class="line">    |-正常死亡：run方法执行完成，线程正常结束。</span><br><span class="line">    |-意外死亡：线程执行过程中抛出了一个未捕获的异常（Exception）或错误（Error）。</span><br><span class="line">    |-他杀：其他线程调用该线程的stop方法来结束该线程（已过时，因为容易发生死锁）。</span><br></pre></td></tr></table></figure>
<h3 id="创建和启动">创建和启动</h3>
<p>1.两种使用线程方式的优缺点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">|-继承Thread类：</span><br><span class="line">    |-优点<span class="number">1</span>：直接创建对象启动，简单。</span><br><span class="line">    |-优点<span class="number">2</span>：线程体中访问当前线程，可直接使用<span class="built_in">this</span>。</span><br><span class="line">    |-缺点<span class="number">1</span>：有单继承，继承了Thread类，就不能再继承其他类了。</span><br><span class="line">    |-缺点<span class="number">2</span>：多个线程共享数据只能用<span class="keyword">static</span>，但范围又太大。</span><br><span class="line">|-实现Runnable接口：</span><br><span class="line">    |-优点<span class="number">1</span>：避免了单继承。</span><br><span class="line">    |-优点<span class="number">2</span>：多个线程能共享同一个实例，<span class="built_in">this</span>代表同一个实例了，可用于锁进行线程同步。</span><br><span class="line">    |-缺点<span class="number">1</span>：启动线程需要再<span class="keyword">new</span> <span class="title class_">Thread</span>的对象。</span><br><span class="line">    |-缺点<span class="number">2</span>：在线程体中要访问当前对象，需要用Thread.currentThread方法先获取当前线程对象。</span><br></pre></td></tr></table></figure></p>
<p>2.两种使用线程方式：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//线程执行任务的代码，称为线程执行体，Java使用run方法来封装这段代码。</span></span><br><span class="line">|-java.lang.Thread</span><br><span class="line">    |-编写线程类：继承Thread类，并重写该类的run方法（编写这个线程需要完成的任务）。</span><br><span class="line">    |-创建线程类实例：一个实例对象就是一个线程。</span><br><span class="line">    |-启动线程：调用线程对象的start方法（该方法是从Thread继承的），只能调用一次。</span><br><span class="line">|-java.lang.Runnable</span><br><span class="line">    |-实现线程接口：实现Runnable接口，并重写该类的run方法（编写这个线程需要完成的任务）。</span><br><span class="line">    |-创建线程类实例：一个实例对象就是一个线程。</span><br><span class="line">    |-启动线程：调用线程对象的start方法，只能调用一次。start方法只有Thread类有，需要把线程类实例放入Thread类的实例中启动。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="thread"><ul class="nav-tabs"><li class="tab active"><a href="#thread-1">Thread使用1</a></li><li class="tab"><a href="#thread-2">Thread使用2</a></li><li class="tab"><a href="#thread-3">Thread启动方式</a></li></ul><div class="tab-content"><div class="tab-pane active" id="thread-1"><figure class="highlight java"><figcaption><span>TestThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;<span class="comment">//继承Thread类，重写run方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//例如：这个线程要完成的任务是，打印1-3之间的数字</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;= <span class="number">3</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;自定义线程:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThread</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();<span class="comment">//创建线程实例</span></span><br><span class="line">        <span class="comment">// my.run();//这么调用，就不是开启多线程，而是普通对象调用方法</span></span><br><span class="line">        my.start();<span class="comment">//线程启动</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">3</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;main:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="thread-2"><figure class="highlight java"><figcaption><span>TestMyThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">3</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="built_in">super</span>.getName() + <span class="string">&quot;线程:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMyThread</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        my1.start();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        my2.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">3</span>; i&gt;=<span class="number">1</span>; i--) &#123;</span><br><span class="line">            <span class="comment">//currentThread方法返回当前在执行的线程对象</span></span><br><span class="line">            <span class="comment">//getName方法是Thread的实例方法，该方法返回当前线程对象的名字，</span></span><br><span class="line">            <span class="comment">//可以通过setName(String name)方法设置线程名称，默认依次为Thread-0，Thread-1...</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;线程:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="thread-3"><figure class="highlight java"><figcaption><span>TestThreadSum.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestThreadSum</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">//正常启动</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        my.start();<span class="comment">//线程对象启动</span></span><br><span class="line">        <span class="comment">//匿名线程对象</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">MyThread</span>().start();</span><br><span class="line">        <span class="comment">//匿名内部类对象</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>()&#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        <span class="comment">//匿名内部类多态引用</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">Thread</span>()&#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        t.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<div class="tabs" id="testrunnable"><ul class="nav-tabs"><li class="tab active"><a href="#testrunnable-1">Runnable</a></li><li class="tab"><a href="#testrunnable-2">Runnable启动方式</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testrunnable-1"><figure class="highlight java"><figcaption><span>TestRunnable.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//例如：这个线程要完成的任务是，打印1-3之间的数字</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">3</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;自定义线程：&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestRunnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">my</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="comment">//my.start();//错误，start方法只有Thread类才有</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(my);<span class="comment">//线程类对象放入Thread类的对象中启动</span></span><br><span class="line">        t.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">3</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;main:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testrunnable-2"><figure class="highlight java"><figcaption><span>TestRunnableSum.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestRunnableSum</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">//正常启动</span></span><br><span class="line">        <span class="type">MyRunnable</span> <span class="variable">my</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(my);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(my);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        <span class="comment">//匿名线程对象</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MyRunnable</span>()).start();</span><br><span class="line">        <span class="comment">//匿名内部类对象</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>()&#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">        &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="线程方法">线程方法</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">构造器：</span><br><span class="line">|-Thread()：创建新的Thread对象。</span><br><span class="line">|-Thread(String threadname)：创建线程并指定线程实例名。</span><br><span class="line">|-Thread(Runnable target)：指定创建线程的目标对象，它实现了Runnable接口中的run方法。</span><br><span class="line">|-Thread(Runnable target, String name)：创建新的Thread对象。</span><br><span class="line">编写线程体、启动线程：</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>：子类必须重写，它的方法体也称为线程体，即线程的任务代码。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span>：启动线程必须用它。</span><br><span class="line">线程信息、优先级：</span><br><span class="line">|-Thread <span class="title function_">currentThread</span><span class="params">()</span>：静态方法，总是返回当前在执行的线程对象。</span><br><span class="line">|-String <span class="title function_">getName</span><span class="params">()</span>：Thread的实例方法，返回当前线程对象的名字。主线程名称是main。其他线程默认是<span class="string">&quot;Thread-编号&quot;</span>。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isAlive</span><span class="params">()</span>：判断线程是否处于活动状态。线程处于就绪、运行、阻塞状态时返回<span class="literal">true</span>，线程处于新建、死亡状态时返回<span class="literal">false</span>。</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">getPriority</span><span class="params">()</span>：返回线程优先级。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">setPriority</span><span class="params">(<span class="type">int</span> newPriority)</span>：改变线程的优先级。整数，且范围在[<span class="number">1</span>,<span class="number">10</span>]之间。Thread类有三个优先级常量：</span><br><span class="line">    |-MAX_PRIORITY：<span class="number">10</span>，最高优先级。</span><br><span class="line">    |-NORM_PRIORITY：<span class="number">5</span>，普通优先级，默认main线程的优先级。</span><br><span class="line">    |-MIN_PRIORITY：<span class="number">1</span>，最低优先级。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span>：设置该线程名称。除main线程外，其他线程可在创建时、或通过此方法指定线程名称，否则默认是<span class="string">&quot;Thread-编号&quot;</span>。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="线程方法1"><ul class="nav-tabs"><li class="tab active"><a href="#线程方法1-1">构造器、线程命名</a></li><li class="tab"><a href="#线程方法1-2">线程信息、优先级</a></li></ul><div class="tab-content"><div class="tab-pane active" id="线程方法1-1"><figure class="highlight java"><figcaption><span>TestMethod.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;自定义线程&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testName1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">        System.out.println(t.getName());<span class="comment">//main，所有程序都是从main进入</span></span><br><span class="line">        MyThread my1= <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        System.out.println(my1.getName());<span class="comment">//Thread-0</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        System.out.println(my2.getName());<span class="comment">//Thread-1</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(<span class="string">&quot;线程3&quot;</span>);<span class="comment">//创建线程并指定线程实例名</span></span><br><span class="line">        System.out.println(my3.getName());<span class="comment">//线程3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="线程方法1-2"><figure class="highlight java"><figcaption><span>TestMethod.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;自定义线程&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPriority</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">        System.out.println(t.getPriority());<span class="comment">//5，当前main线程的优先级</span></span><br><span class="line">        MyThread my1= <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        System.out.println(my1.getPriority());<span class="comment">//5，my1线程的优先级</span></span><br><span class="line">        System.out.println(<span class="string">&quot;最高优先级：&quot;</span> + Thread.MAX_PRIORITY);<span class="comment">//最高优先级：10</span></span><br><span class="line">        System.out.println(<span class="string">&quot;最低优先级：&quot;</span> + Thread.MIN_PRIORITY);<span class="comment">//最低优先级：1</span></span><br><span class="line">        System.out.println(<span class="string">&quot;普通优先级：&quot;</span> + Thread.NORM_PRIORITY);<span class="comment">//普通优先级：5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">线程休眠：</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">sleep</span><span class="params">(<span class="type">long</span> millis)</span>：在指定的毫秒数内让当前正在执行的线程休眠（暂停执行），受系统计时器和调度程序精度影响。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">sleep</span><span class="params">(<span class="type">long</span> millis,<span class="type">int</span> nanos)</span>：在指定的毫秒+纳秒内让当前正在执行的线程休眠（暂停执行），受系统计时器和调度程序精度影响。</span><br><span class="line">线程中断：</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">interrupt</span><span class="params">()</span>：中断线程。</span><br><span class="line">线程加塞：当在某个线程的线程体中调用了另一个线程的join方法，当前线程将被阻塞，直到join进来的线程执行完它才能继续。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">join</span><span class="params">()</span>：等待该线程终止。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">join</span><span class="params">(<span class="type">long</span> millis)</span>：等待该线程终止的时间最长为millis毫秒。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">join</span><span class="params">(<span class="type">long</span> millis, <span class="type">int</span> nanos)</span>：等待该线程终止的时间最长为millis毫秒+nanos纳秒。</span><br><span class="line">线程让步：</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">yield</span><span class="params">()</span>：静态方法，让当前正在执行的线程暂停，不会阻塞，只是转入就绪状态，让出本次的CPU资源，加入下一次CPU的抢夺中。</span><br><span class="line">守护线程：后台运行，它的任务是为其他线程提供服务，比如JVM的垃圾回收线程。如果所有非守护线程都死亡，那么守护线程自动死亡。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">setDaemon</span><span class="params">(<span class="literal">true</span>)</span>：将线程设置为守护线程，必须在线程启动之前设置，否则会报IllegalThreadStateException异常。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isDaemon</span><span class="params">()</span>：判断线程是否是守护线程。</span><br><span class="line">停止线程：除了线程体未捕获异常且执行完能然停止，还可以由另一个线程检测到某个情况时，主动停止一个线程。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">stop</span><span class="params">()</span>：不具有安全性，已被标记为`<span class="meta">@Deprecated</span>`不建议再使用。</span><br><span class="line">|-自定义setFlag方法，来停止某个线程。</span><br><span class="line"><span class="comment">//volatile解决变量读时的可见性问题，但无法保证原子性。即线程共享的变量在多个线程互通可见，但不保证一致性（++操作不要用）。</span></span><br></pre></td></tr></table></figure>
<div class="tabs" id="线程方法2"><ul class="nav-tabs"><li class="tab active"><a href="#线程方法2-1">线程休眠</a></li><li class="tab"><a href="#线程方法2-2">线程中断</a></li><li class="tab"><a href="#线程方法2-3">线程加塞</a></li><li class="tab"><a href="#线程方法2-4">线程加塞（龟兔）</a></li><li class="tab"><a href="#线程方法2-5">线程让步</a></li><li class="tab"><a href="#线程方法2-6">守护线程</a></li><li class="tab"><a href="#线程方法2-7">停止线程（龟兔）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="线程方法2-1"><figure class="highlight java"><figcaption><span>TestSleep.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSleep</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">10</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);<span class="comment">//睡眠一秒</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;新年快乐！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="线程方法2-2"><figure class="highlight java"><figcaption><span>TestMethod.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;自定义线程&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">10000</span>);<span class="comment">//休眠10秒</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;自定义线程被打断&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;自定义线程休眠结束&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInterrupt</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">my1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        my1.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);<span class="comment">//主线程休眠3秒</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        my1.interrupt();<span class="comment">//中断MyThread线程</span></span><br><span class="line">        <span class="comment">//自定义线程</span></span><br><span class="line">        <span class="comment">//自定义线程被打断</span></span><br><span class="line">        <span class="comment">//java.lang.InterruptedException: sleep interrupted</span></span><br><span class="line">        <span class="comment">//自定义线程休眠结束</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="线程方法2-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ChatThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;是否结束？（Y、N）&quot;</span>);</span><br><span class="line">            <span class="type">char</span> <span class="variable">confirm</span> <span class="operator">=</span> input.next().charAt(<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span>(confirm == <span class="string">&#x27;Y&#x27;</span> || confirm == <span class="string">&#x27;y&#x27;</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJoin</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ChatThread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ChatThread</span>();</span><br><span class="line">        t.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;main:&quot;</span> + i);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">10</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//当main打印到5之后，需要等join进来的线程停止后才会继续了。</span></span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">5</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    t.join();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="线程方法2-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//赛道长30米，兔子速度10m/s，每10m休息10s，乌龟速度1m/s，每10m休息1s，都跑完才宣布结果。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Racer</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//运动员名字</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> runTime;<span class="comment">//每米需要时间，单位毫秒</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> restTime;<span class="comment">//每10米的休息时间，单位毫秒</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> distance;<span class="comment">//全程距离，单位米</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> time;<span class="comment">//跑完全程的总时间</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Racer</span><span class="params">(String name, <span class="type">long</span> distance, <span class="type">long</span> runTime, <span class="type">long</span> restTime)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.distance = distance;</span><br><span class="line">        <span class="built_in">this</span>.runTime = runTime;</span><br><span class="line">        <span class="built_in">this</span>.restTime = restTime;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">while</span> (sum &lt; distance) &#123;</span><br><span class="line">            System.out.println(name + <span class="string">&quot;正在跑...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(runTime);<span class="comment">// 每米距离，该运动员需要的时间</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            sum++;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (sum % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; sum &lt; distance) &#123;</span><br><span class="line">                    <span class="comment">// 每10米休息一下</span></span><br><span class="line">                    System.out.println(name+<span class="string">&quot;已经跑了&quot;</span>+sum+<span class="string">&quot;米正在休息....&quot;</span>);</span><br><span class="line">                    Thread.sleep(restTime);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        time = end - start;</span><br><span class="line">        System.out.println(name+<span class="string">&quot;跑了&quot;</span>+sum+<span class="string">&quot;米，已到达终点，共用时&quot;</span>+time/<span class="number">1000.0</span>+<span class="string">&quot;秒&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJoin2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Racer</span> <span class="variable">rabbit</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Racer</span>(<span class="string">&quot;兔子&quot;</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">10000</span>);</span><br><span class="line">        <span class="type">Racer</span> <span class="variable">turtoise</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Racer</span>(<span class="string">&quot;乌龟&quot;</span>, <span class="number">30</span>, <span class="number">1000</span>, <span class="number">1000</span>);</span><br><span class="line">        rabbit.start();</span><br><span class="line">        turtoise.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            rabbit.join();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            turtoise.join();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//因为要兔子和乌龟都跑完，才能公布结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;比赛结束&quot;</span>);</span><br><span class="line">        System.out.println(rabbit.getTime()&lt;turtoise.getTime()?<span class="string">&quot;兔子赢&quot;</span>:<span class="string">&quot;乌龟赢&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="线程方法2-5"><figure class="highlight java"><figcaption><span>TestMethod.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyYieldThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyYieldThread</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;:&quot;</span> +i);</span><br><span class="line">            Thread.<span class="keyword">yield</span>();<span class="comment">//主动释放</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestYield</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyYieldThread</span> <span class="variable">m1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyYieldThread</span>(<span class="string">&quot;低&quot;</span>);</span><br><span class="line">        m1.setPriority(Thread.MIN_PRIORITY);</span><br><span class="line">        <span class="type">MyYieldThread</span> <span class="variable">m2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyYieldThread</span>(<span class="string">&quot;高&quot;</span>);</span><br><span class="line">        m2.setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">        m1.start();</span><br><span class="line">        m2.start();</span><br><span class="line">        <span class="comment">//此时和高、低优先级无关了，而是随机的抢占</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="线程方法2-6"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyDaemon</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MyDaemon&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDaemon</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyDaemon</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyDaemon</span>();</span><br><span class="line">        m.setDaemon(<span class="literal">true</span>);<span class="comment">//将线程设置为守护，main结束它也结束了</span></span><br><span class="line">        m.start();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;main:&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="线程方法2-7"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Player</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;<span class="comment">//运动员名字</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> runTime;<span class="comment">//每米需要时间，单位毫秒</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> restTime;<span class="comment">//每10米的休息时间，单位毫秒</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> distance;<span class="comment">//全程距离，单位米</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> time;<span class="comment">//跑完全程的总时间</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">true</span>;<span class="comment">//用于标记是否继续跑，即结束线程的标记</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">ended</span> <span class="operator">=</span> <span class="literal">false</span>;<span class="comment">//用于标记是否到达终点</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Player</span><span class="params">(String name, <span class="type">long</span> distance, <span class="type">long</span> runTime, <span class="type">long</span> restTime)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.distance = distance;</span><br><span class="line">        <span class="built_in">this</span>.runTime = runTime;</span><br><span class="line">        <span class="built_in">this</span>.restTime = restTime;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">while</span> (sum &lt; distance &amp;&amp; flag) &#123;</span><br><span class="line">            System.out.println(name + <span class="string">&quot;正在跑...&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(runTime);<span class="comment">// 每米距离，该运动员需要的时间</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">            sum++;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (sum % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; sum &lt; distance &amp;&amp; flag) &#123;</span><br><span class="line">                    <span class="comment">// 每10米休息一下</span></span><br><span class="line">                    System.out.println(name+<span class="string">&quot;已经跑了&quot;</span>+sum+<span class="string">&quot;米正在休息....&quot;</span>);</span><br><span class="line">                    Thread.sleep(restTime);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                <span class="keyword">return</span> ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        time = end - start;</span><br><span class="line">        ended = sum == distance ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">        System.out.println(name+<span class="string">&quot;跑了&quot;</span>+sum+<span class="string">&quot;米，共用时&quot;</span>+time/<span class="number">1000.0</span>+<span class="string">&quot;秒&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlag</span><span class="params">(<span class="type">boolean</span> flag)</span> &#123;<span class="comment">//自定义线程停止方法</span></span><br><span class="line">        <span class="built_in">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEnded</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ended;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStop</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Thread.currentThread().setPriority(Thread.MAX_PRIORITY);</span><br><span class="line">        <span class="type">Player</span> <span class="variable">rabbit</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Player</span>(<span class="string">&quot;兔子&quot;</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">10000</span>);</span><br><span class="line">        <span class="type">Player</span> <span class="variable">turtoise</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Player</span>(<span class="string">&quot;乌龟&quot;</span>, <span class="number">30</span>, <span class="number">1000</span>, <span class="number">1000</span>);</span><br><span class="line">        rabbit.start();</span><br><span class="line">        turtoise.start();</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;<span class="comment">//只要有一个跑完，就结束比赛，并公布结果</span></span><br><span class="line">            <span class="keyword">if</span>(rabbit.isEnded() || turtoise.isEnded())&#123;</span><br><span class="line">                rabbit.setFlag(<span class="literal">false</span>);                           </span><br><span class="line">                turtoise.setFlag(<span class="literal">false</span>);                          </span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;比赛结束&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(rabbit.isEnded() &amp;&amp; turtoise.isEnded())&#123;</span><br><span class="line">            System.out.println(rabbit.getTime()&lt;turtoise.getTime()?<span class="string">&quot;兔子赢&quot;</span>:<span class="string">&quot;乌龟赢&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(rabbit.isEnded())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;兔子赢&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(turtoise.isEnded())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;乌龟赢&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="线程同步">线程同步</h3>
<p>多线程编程是有趣且复杂的事情，它常常容易突然出现“错误情况”，这是由于系统的线程调度具有一定的随机性。即使程序在运行过程中偶尔会出现问题，那也是由于我们的代码有问题导致的。当多个线程访问同一个数据时，非常容易出现线程安全问题。</p>
<p><strong>1.线程安全问题：</strong><br />
<figure class="highlight java"><figcaption><span>TestLock.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口一&quot;</span>);</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口二&quot;</span>);</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口三&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Ticket</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">5</span>;<span class="comment">//静态变量，共享总票数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Ticket</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(total &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(getName() + <span class="string">&quot;卖出一张票&quot;</span>);</span><br><span class="line">            total--;</span><br><span class="line">            System.out.println(<span class="string">&quot;剩余：&quot;</span> + total);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如上程序，当执行时，会出现下面的结果：<br />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">窗口一卖出一张票</span><br><span class="line">剩余：4</span><br><span class="line">窗口一卖出一张票</span><br><span class="line">剩余：3</span><br><span class="line">窗口一卖出一张票</span><br><span class="line">窗口三卖出一张票</span><br><span class="line">剩余：1</span><br><span class="line">窗口三卖出一张票</span><br><span class="line">剩余：0</span><br><span class="line">窗口二卖出一张票</span><br><span class="line">剩余：2</span><br><span class="line">剩余：-1</span><br></pre></td></tr></table></figure></p>
<p>程序中设定一共5张票，但为什么会出现 “剩余：-1”
这种情况呢？而且总共卖了6张票？<br />
可能出现了如下情况：当窗口一卖出一张票后，被其他线程抢占cpu执行了，此时窗口一若是卡在<code>total--;</code>语句等待再次运行，而当其他线程运行完毕时total等于0了，此时再回去执行窗口一的<code>total--;</code>语句，total就是-1了。而卖了6张票的原因，可能是第6次进入时，total值并不是0，因为其他线程没有来得及执行<code>total--;</code>就被抢占了，这就导致运行时线程数据不一致的安全问题。</p>
<p><strong>2.解决方案：</strong><br />
思路：对多条操作共享数据的语句，只能让一个线程都执行完，在执行过程中，其他线程不可以参与执行。<br />
Java的多线程引入同步监视器（锁）来解决这个问题，使用同步监视器（锁）的方式有两种：<strong>同步代码块、同步方法</strong>。</p>
<h4 id="同步代码块">同步代码块</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="keyword">synchronized</span>(同步监视器对象)&#123;&#125;</span><br><span class="line">|-同步监视器就是锁，锁的作用是在同一时刻，某一段代码，只允许一个线程运行（获得锁的线程）。</span><br><span class="line">|-只有获得锁的线程才能执行，没有获得锁的线程就会进入阻塞状态，到对方释放了锁。</span><br><span class="line">|-线程是继承Thread类实现的，<span class="built_in">this</span>不能当作锁使用，因为<span class="built_in">this</span>是不同的。</span><br><span class="line">|-线程是Runnable接口实现的，多个线程使用同一个Runnable接口对象时，<span class="built_in">this</span>可以当作锁，因为<span class="built_in">this</span>是同一个。</span><br><span class="line">|-锁的范围：最好精简到一次任务的代码，并且不影响其他线程获得锁，这个要靠经验来设定了。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="lock"><ul class="nav-tabs"><li class="tab active"><a href="#lock-1">同步代码块（Thread）</a></li><li class="tab"><a href="#lock-2">同步代码块（Runnable）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="lock-1"><figure class="highlight java"><figcaption><span>TestLock.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Ticket</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Object</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();<span class="comment">//单独造一个锁对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Ticket</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">/*在while外上锁，只有等票卖完才解锁，其他线程进不来</span></span><br><span class="line"><span class="comment">        synchronized (lock) &#123;</span></span><br><span class="line"><span class="comment">            while(total &gt; 0)&#123;</span></span><br><span class="line"><span class="comment">                System.out.println(getName() + &quot;卖出一张票&quot;);</span></span><br><span class="line"><span class="comment">                total--;</span></span><br><span class="line"><span class="comment">                System.out.println(&quot;剩余：&quot; + total);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;<span class="comment">//在执行while时，其他线程可以获得锁</span></span><br><span class="line">            <span class="keyword">synchronized</span> (lock) &#123;<span class="comment">//这里使用this不行，因为三个线程的this不是同一个</span></span><br><span class="line">                <span class="keyword">if</span>(total &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    System.out.println(getName() +<span class="string">&quot;卖出一张票&quot;</span>);</span><br><span class="line">                    total--;</span><br><span class="line">                    System.out.println(<span class="string">&quot;剩余：&quot;</span> + total);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口一&quot;</span>);</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口二&quot;</span>);</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口三&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="lock-2"><figure class="highlight java"><figcaption><span>TestLock2.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Ticket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">10</span>;<span class="comment">//可不写static，因为Thread用的是用一个Ticket对象</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(<span class="built_in">this</span>)&#123;<span class="comment">//可以用this当锁，因为三个线程使用同一个this对象</span></span><br><span class="line">                <span class="keyword">if</span>(total &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() +<span class="string">&quot;卖出一张票&quot;</span>);</span><br><span class="line">                    total--;</span><br><span class="line">                    System.out.println(<span class="string">&quot;剩余：&quot;</span> + total);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>();</span><br><span class="line">        <span class="comment">//使用同一个t</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t,<span class="string">&quot;窗口一&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t,<span class="string">&quot;窗口二&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t,<span class="string">&quot;窗口三&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="同步方法">同步方法</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&quot;synchronized [修饰符]&quot;也可以</span></span><br><span class="line">|-[修饰符] <span class="keyword">synchronized</span> 返回值类型 方法名([形参列表]) <span class="keyword">throws</span> 异常列表&#123;&#125;</span><br><span class="line">|-静态方法的锁对象默认<span class="string">&quot;当前类&quot;</span>。</span><br><span class="line">|-非静态方法的锁对象默认<span class="string">&quot;this&quot;</span>。</span><br><span class="line">|-根据以上特点建议，继承Thread方式用静态方法，实现Runnable接口方式静态非静态都行。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="lock1"><ul class="nav-tabs"><li class="tab active"><a href="#lock1-1">同步方法（Thread）</a></li><li class="tab"><a href="#lock1-2">同步方法（Runnable）</a></li></ul><div class="tab-content"><div class="tab-pane active" id="lock1-1"><figure class="highlight java"><figcaption><span>TestLock3.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Ticket</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;<span class="comment">//继承Thread方式</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Ticket</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(total &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            saleOneTicket();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//因为Thread方式，所以修饰静态方法。修饰非静态方法显然是错误的</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">saleOneTicket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(total &gt; <span class="number">0</span>)&#123;<span class="comment">//线程安全问题的条件</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;卖出一张票&quot;</span>);</span><br><span class="line">            total--;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;剩余：&quot;</span> + total);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口一&quot;</span>);</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口二&quot;</span>);</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>(<span class="string">&quot;窗口三&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="lock1-2"><figure class="highlight java"><figcaption><span>TestLock4.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Ticket</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;<span class="comment">//Runnable方式</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(total &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            saleOneTicket();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//因为Runnable方式，当前锁对象是this，多个线程this是同一个</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">saleOneTicket</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(total &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName() +<span class="string">&quot;卖出一张票&quot;</span>);</span><br><span class="line">            total--;</span><br><span class="line">            System.out.println(<span class="string">&quot;剩余：&quot;</span> + total);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Ticket</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Ticket</span>();</span><br><span class="line">        <span class="comment">//同一个t</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t,<span class="string">&quot;窗口一&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t,<span class="string">&quot;窗口二&quot;</span>);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">t3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t,<span class="string">&quot;窗口三&quot;</span>);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="锁的释放">锁的释放</h4>
<p>任何线程进入同步代码块、同步方法之前，必须先获得对同步监视器的锁定，那么何时会释放对同步监视器的锁定呢？<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意wait和sleep区别。</span></span><br><span class="line">释放锁的操作：</span><br><span class="line">|-同步代码块、同步方法执行结束。</span><br><span class="line">|-同步代码块、同步方法中遇到<span class="string">&quot;break、return&quot;</span>终止了代码继续执行。</span><br><span class="line">|-同步代码块、同步方法中出现了未处理的Error或Exception，导致当前线程异常结束。</span><br><span class="line">|-同步代码块、同步方法中执行了锁对象的<span class="string">&quot;wait&quot;</span>方法，当前线程进入阻塞状态（notify唤醒），并释放锁。</span><br><span class="line">不会释放锁的操作：</span><br><span class="line">|-同步代码块、同步方法中执行<span class="string">&quot;sleep、yield&quot;</span>方法暂停当前线程的执行。</span><br><span class="line">|-同步代码块、同步方法运行时，其他线程调用了该线程的suspend法将该该线程挂起。避免使用suspend、resume废弃的方法控制线程。</span><br></pre></td></tr></table></figure></p>
<p>经典的生产者与消费者问题，也称有限缓冲问题，是一个多线程同步问题的经典案例：有两个（多个）共享固定大小缓冲区的线程，叫做“生产者”和“消费者”，生产者生成一定量的数据放到缓冲区中，消费者在缓冲区消耗这些数据，该问题的关键就是要保证生产者不会在缓冲区满时加入数据，消费者也不会在缓冲区空时消耗数据。<br />
生产者与消费者问题中其实隐含了两个问题：<br />
（1）线程安全问题：因为生产者与消费者共享数据缓冲区，不过这个问题可以使用同步解决。<br />
（2）线程协调问题：要解决该问题，就必须让生产者线程在缓冲区满时进入等待（wait）阻塞状态，等消费者消耗了缓冲区的数据，通知（notify）正在等待的线程恢复到就绪状态，重新开始往缓冲区添加数据。同样，也可以让消费者线程在缓冲区空时进入等待（wait）阻塞状态，等到生产者往缓冲区添加数据之后，再通知（notify）正在等待的线程恢复到就绪状态。通过这样的通信机制来解决此类问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|-Object类提供了锁方法，由锁对象调用：</span><br><span class="line">    |-wait()：等待释放。</span><br><span class="line">    |-notify()：唤醒一个正在等待的线程（同一个锁对象）。双线程可用。</span><br><span class="line">    |-notifyAll()：唤醒所有正在等待的线程（同一个锁对象）。多线程建议用此，不然出现锁死情况。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="cook"><ul class="nav-tabs"><li class="tab active"><a href="#cook-1">if和notify</a></li><li class="tab"><a href="#cook-2">while和notifyAll</a></li></ul><div class="tab-content"><div class="tab-pane active" id="cook-1"><figure class="highlight java"><figcaption><span>TestProducerConsumer.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Workbench</span>&#123;<span class="comment">//缓冲区</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX</span> <span class="operator">=</span> <span class="number">10</span>;<span class="comment">//最多放10盘</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> count;<span class="comment">//就一个缓冲区，可不加static</span></span><br><span class="line">    <span class="comment">//生产</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">()</span>&#123;<span class="comment">//非静态方法锁对象是this，为了同步count</span></span><br><span class="line">        <span class="keyword">if</span>(count &gt;= MAX)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.wait();<span class="comment">//工作台满了，生产者要停下来。有synchronized，可省略this</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;放了一盘菜，剩余：&quot;</span> + count);</span><br><span class="line">        <span class="built_in">this</span>.notify();<span class="comment">//唤醒一个正在等待的线程，可能生产者，也可能是消费者。有生产就可以继续</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//消费</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">take</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//问题1：有多个消费者时，生产完一个后唤醒消费者，此消费者可能继续唤醒消费者，导致count为负数。</span></span><br><span class="line">        <span class="keyword">if</span>(count &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.wait();<span class="comment">//工作台空了，消费者要停下来。有synchronized，可省略this</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        count--;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;取走一盘菜，剩余：&quot;</span> + count);</span><br><span class="line">        <span class="built_in">this</span>.notify();<span class="comment">//唤醒一个正在等待的线程，可能生产者，也可能是消费者。有消费就可以继续</span></span><br><span class="line">        <span class="comment">//问题2：当达到max时生产者wait，然后消费者连续获得锁，最后也wait，形成死锁。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cook</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;<span class="comment">//生产者</span></span><br><span class="line">    <span class="keyword">private</span> Workbench tai;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Cook</span><span class="params">(String name, Workbench tai)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.tai = tai;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            tai.put();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Waiter</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;<span class="comment">//消费者</span></span><br><span class="line">    <span class="keyword">private</span> Workbench tai;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Waiter</span><span class="params">(String name, Workbench tai)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.tai = tai;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            tai.take();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestProducerConsumer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Workbench</span> <span class="variable">tai</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Workbench</span>();</span><br><span class="line">        <span class="type">Cook</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cook</span>(<span class="string">&quot;生产者&quot;</span>, tai);</span><br><span class="line">        <span class="type">Waiter</span> <span class="variable">w</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Waiter</span>(<span class="string">&quot;消费者&quot;</span>, tai);</span><br><span class="line">        c.start();</span><br><span class="line">        w.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="cook-2"><figure class="highlight java"><figcaption><span>TestProducerConsumer2.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Workbench</span>&#123;<span class="comment">//缓冲区</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX</span> <span class="operator">=</span> <span class="number">10</span>;<span class="comment">//最多放10盘</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> count;<span class="comment">//就一个缓冲区，可不加static</span></span><br><span class="line">    <span class="comment">//生产</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">()</span>&#123;<span class="comment">//非静态方法锁对象是this，为了同步count</span></span><br><span class="line">        <span class="keyword">while</span>(count &gt;= MAX)&#123;<span class="comment">//if改成while，wait后能再次判断</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();<span class="comment">//工作台满了，生产者要停下来。有synchronized，可省略this</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;放了一盘菜，剩余：&quot;</span> + count);</span><br><span class="line">        <span class="built_in">this</span>.notify();<span class="comment">//唤醒一个正在等待的线程，可能生产者，也可能是消费者。有生产就可以继续</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//消费</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">take</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(count &lt;= <span class="number">0</span>)&#123;<span class="comment">//if改成while，wait后能再次判断</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();<span class="comment">//工作台空了，消费者要停下来。有synchronized，可省略this</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        count--;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;取走一盘菜，剩余：&quot;</span> + count);</span><br><span class="line">        <span class="built_in">this</span>.notifyAll();<span class="comment">//全都唤醒，防止出现锁死，比如全wait的情况</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cook</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Workbench tai;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Cook</span><span class="params">(String name, Workbench tai)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.tai = tai;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            tai.put();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Waiter</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Workbench tai;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Waiter</span><span class="params">(String name, Workbench tai)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.tai = tai;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            tai.take();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestProducerConsumer2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Workbench</span> <span class="variable">tai</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Workbench</span>();</span><br><span class="line">        <span class="type">Cook</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cook</span>(<span class="string">&quot;生产者1&quot;</span>, tai);</span><br><span class="line">        <span class="type">Cook</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cook</span>(<span class="string">&quot;生产者2&quot;</span>, tai);</span><br><span class="line">        <span class="type">Waiter</span> <span class="variable">w1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Waiter</span>(<span class="string">&quot;消费者1&quot;</span>, tai);</span><br><span class="line">        <span class="type">Waiter</span> <span class="variable">w2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Waiter</span>(<span class="string">&quot;消费者2&quot;</span>, tai);</span><br><span class="line">        c1.start();</span><br><span class="line">        c2.start();</span><br><span class="line">        w1.start();</span><br><span class="line">        w2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="避免死锁">避免死锁</h4>
<p>不同的线程分别锁住对方的同步监视器对象不释放，都在等待对方先放弃时就形成了线程的死锁。一旦出现死锁，整个程序既不会发生异常，也不会给出任何提示，只是所有线程处于阻塞状态，无法继续。死锁是有一定概率发生的，并不是绝对的，但程序一定不要写这种运气代码。</p>
<p>简单讲，两个线程，互相持有，占有对方想要的锁，不放手。<br />
<figure class="highlight java"><figcaption><span>TestDeadLock.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Boy</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;<span class="comment">//男朋友</span></span><br><span class="line">    <span class="keyword">private</span> Object girl;</span><br><span class="line">    <span class="keyword">private</span> Object money;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Boy</span><span class="params">(Object girl, Object money)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.girl = girl;</span><br><span class="line">        <span class="built_in">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (money) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;你放了我女朋友，我给你500万&quot;</span>);</span><br><span class="line">            <span class="keyword">synchronized</span> (girl) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;给了对方500万&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bang</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;<span class="comment">//绑匪</span></span><br><span class="line">    <span class="keyword">private</span> Object girl;</span><br><span class="line">    <span class="keyword">private</span> Object money;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Bang</span><span class="params">(Object girl, Object money)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.girl = girl;</span><br><span class="line">        <span class="built_in">this</span>.money = money;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (girl) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;你给我500万，我放了你女朋友&quot;</span>);</span><br><span class="line">            <span class="keyword">synchronized</span> (money) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;放人&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDeadLock</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">g</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">        <span class="type">Boy</span> <span class="variable">boy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Boy</span>(g, m);</span><br><span class="line">        <span class="type">Bang</span> <span class="variable">bang</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Bang</span>(g, m);</span><br><span class="line">        boy.start();<span class="comment">//boy先锁money，等待girl</span></span><br><span class="line">        bang.start();<span class="comment">//bang先锁girl，等待money</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="综合示例">综合示例</h2>
<div class="tabs" id="pr2"><ul class="nav-tabs"><li class="tab active"><a href="#pr2-1">线程创建</a></li><li class="tab"><a href="#pr2-2">同步代码块</a></li><li class="tab"><a href="#pr2-3">同步方法（非静态实现）</a></li><li class="tab"><a href="#pr2-4">同步方法（静态实现）</a></li><li class="tab"><a href="#pr2-5">综合示例1</a></li><li class="tab"><a href="#pr2-6">综合示例2</a></li></ul><div class="tab-content"><div class="tab-pane active" id="pr2-1"><figure class="highlight java"><figcaption><span>Test01.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子线程中输出1-100之间的偶数，主线程输出1-100之间的奇数。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//子线程</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>()&#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;=<span class="number">100</span>; i+=<span class="number">2</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;子线程：&quot;</span> + i);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line">        <span class="comment">//主线程</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">100</span>; i+=<span class="number">2</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;主线程：&quot;</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="pr2-2"><figure class="highlight java"><figcaption><span>Test02.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建和启动2个子线程，一个打印1-10之间奇数，一个打印1-10之间偶数，</span></span><br><span class="line"><span class="comment">//要求每个线程要么不打印，要么就连续打印5个数，每个数打印间隔500毫秒，</span></span><br><span class="line"><span class="comment">//但两个线程不要求交替打印。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Odd</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;<span class="comment">//继承Thread类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Thread.class) &#123;<span class="comment">//同步代码块</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;奇数线程，第&quot;</span>  + i + <span class="string">&quot;个：&quot;</span> + (<span class="number">2</span>*i-<span class="number">1</span>));</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Even</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;<span class="comment">//继承Thread类</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Thread.class) &#123;<span class="comment">//同步代码块</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;偶数线程，第&quot;</span>  + i + <span class="string">&quot;个：&quot;</span> + <span class="number">2</span>*i);</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Thread.sleep(<span class="number">500</span>);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Odd</span> <span class="variable">o</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Odd</span>();</span><br><span class="line">        <span class="type">Even</span> <span class="variable">e</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Even</span>();</span><br><span class="line">        o.start();</span><br><span class="line">        e.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="pr2-3"><figure class="highlight java"><figcaption><span>Test03NonStatic.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建和启动2个子线程，一个打印奇数，一个打印偶数，</span></span><br><span class="line"><span class="comment">//要求实现交替打印，每个数打印间隔1秒。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test03NonStatic</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">PrintNumber</span>  <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintNumber</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(p);</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>(p);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrintNumber</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.notify();<span class="comment">//执行前，唤醒一个线程</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + num);</span><br><span class="line">            num++;</span><br><span class="line">            <span class="built_in">this</span>.wait();<span class="comment">//执行后，自己阻塞</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> PrintNumber p;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyThread</span><span class="params">(PrintNumber p)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.p = p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            p.print();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="pr2-4"><figure class="highlight java"><figcaption><span>Test03Static.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建和启动2个子线程，一个打印奇数，一个打印偶数，</span></span><br><span class="line"><span class="comment">//要求实现交替打印，每个数打印间隔1秒。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PrintNumber</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>&#123;<span class="comment">//静态方法</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            PrintNumber.class.notify();<span class="comment">//notify非静态方法，只能通过类调用</span></span><br><span class="line">            System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + num);</span><br><span class="line">            num++;</span><br><span class="line">            PrintNumber.class.wait();<span class="comment">//wait非静态方法，只能通过类调用</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            PrintNumber.print();<span class="comment">//print静态方法，通过类调用</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test03Static</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">t2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="pr2-5"><figure class="highlight java"><figcaption><span>Test04.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 案例：</span></span><br><span class="line"><span class="comment"> * 1、创建一个银行账户类，</span></span><br><span class="line"><span class="comment"> * （1）属性：账号，余额，</span></span><br><span class="line"><span class="comment"> * （2）get/set，</span></span><br><span class="line"><span class="comment"> * （3）toString()：返回：账户：xxx，余额：xxx</span></span><br><span class="line"><span class="comment"> * 2、创建一个丈夫类</span></span><br><span class="line"><span class="comment"> * （1）负责往里存钱，每次存款[0,10000)以内不等</span></span><br><span class="line"><span class="comment"> * 3、创建一个妻子类</span></span><br><span class="line"><span class="comment"> * （1）负责取钱，每次取款[0,10000)以内不等，如果余额不足，要等丈夫存够了才能取</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test04</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Account</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="string">&quot;1122&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="type">AccountManager</span> <span class="variable">am</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AccountManager</span>(a);</span><br><span class="line">        <span class="type">Husband</span> <span class="variable">h</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Husband</span>(<span class="string">&quot;新一&quot;</span>, am);</span><br><span class="line">        <span class="type">Wife</span> <span class="variable">w</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Wife</span>(<span class="string">&quot;小兰&quot;</span>, am);</span><br><span class="line">        h.start();</span><br><span class="line">        w.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Husband</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AccountManager am;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Husband</span><span class="params">(String name,AccountManager am)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.am = am;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            am.save();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Wife</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AccountManager am;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Wife</span><span class="params">(String name, AccountManager am)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">        <span class="built_in">this</span>.am = am;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            am.withdraw();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AccountManager</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Account account;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AccountManager</span><span class="params">(Account account)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.account = account;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> Math.random() * <span class="number">10000</span>;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;开始存钱，目前账户状态：&quot;</span> + account);</span><br><span class="line">        account.setBalance(account.getBalance() + money);<span class="comment">//重新设置余额</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName() +  <span class="string">&quot;存钱结束，目前账户状态： &quot;</span> + account);</span><br><span class="line">        <span class="built_in">this</span>.notify();<span class="comment">//存完钱，可以唤醒</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> Math.random() * <span class="number">10000</span>;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;开始取钱，目前账户状态：&quot;</span> + account);</span><br><span class="line">        <span class="keyword">while</span>(money &gt; account.getBalance())&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;本次想取钱的数量是：&quot;</span> + money + <span class="string">&quot;，余额不足....&quot;</span>);</span><br><span class="line">                <span class="built_in">this</span>.wait();<span class="comment">//只有取钱会wait</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        account.setBalance(account.getBalance() - money);<span class="comment">//重新设置余额</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName() +  <span class="string">&quot;取钱结束，目前账户状态： &quot;</span> + account);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> balance;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(String id, <span class="type">double</span> balance)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getBalance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBalance</span><span class="params">(<span class="type">double</span> balance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;账户：&quot;</span> + id + <span class="string">&quot;余额：&quot;</span> + balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="pr2-6"><figure class="highlight java"><figcaption><span>Test05.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 案例：请按要求编写多线程应用程序，模拟多个人通过一个山洞：</span></span><br><span class="line"><span class="comment"> * 1、这个山洞每次只能通过一个人，每个人通过山洞的时间为5秒；</span></span><br><span class="line"><span class="comment"> * 2、随机生成10个人，同时准备过此山洞</span></span><br><span class="line"><span class="comment"> * 3、定义一个变量用于记录通过隧道的人数</span></span><br><span class="line"><span class="comment"> * 4、显示每次通过山洞人的姓名，和通过顺序；</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test05</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Tunnel</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tunnel</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">th</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(t, <span class="string">&quot;Thread&quot;</span> + i);</span><br><span class="line">            th.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tunnel</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> num;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>&#123;</span><br><span class="line">        cross();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//每次只能由一个线程执行，相当于是一个人通过</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">cross</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">&quot;准备开始通过...&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        num++;</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">&quot;通过了隧道，TA是第&quot;</span> + num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h2 id="参考资料">参考资料</h2>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzQ5MTgzMjQ0L2FydGljbGUvZGV0YWlscy8xMjU0OTM2NzM=">Java中的volatile<i class="fa fa-external-link-alt"></i></span></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/01/Java/25.JavaIO%E6%B5%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/03/01/Java/25.JavaIO%E6%B5%81/" class="post-title-link" itemprop="url">JavaIO流</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-01 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-01T00:00:00+08:00">2020-03-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>30 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>
<h2 id="io">I/O</h2>
<p>I/O：Input/Output，常用于读、写文件、网络通讯等。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Java中通过java.io包下的类和接口来支持。</span></span><br><span class="line">I（Input）：输入，从别的地方（文件、键盘、网络、内存等）读取数据到当前程序中。</span><br><span class="line">O（Output）：输出，从程序把数据输出到文件、屏幕、控制台、网络、内存等中。</span><br></pre></td></tr></table></figure></p>
<h2 id="文件目录流">文件/目录流</h2>
<p>java.io.File类是java.io包下代表与平台无关的文件和目录，在程序中操作文件和目录都可用File类来完成，<strong>File类能新建、删除、重命名文件和目录</strong>。</p>
<h3 id="目录路径">目录/路径</h3>
<p>目录名也可也说是路径名，File类使用<strong>文件路径字符串</strong>来创建File实例，该字符串可以是<strong>绝对路径、相对路径（默认）</strong>，默认由系统属性“user.dir”解析相对路径，通常是运行Java虚拟机时的路径。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路径中如果出现“..”表示上一级目录，路径名如果以“/”开头，表示从“根目录”下开始导航。</span></span><br><span class="line">|-String <span class="title function_">getName</span><span class="params">()</span>：返回此File对象的所表示的文件名（返回最后一级）。</span><br><span class="line">|-String <span class="title function_">getPath</span><span class="params">()</span>：返回此File对象所对应的路径名。</span><br><span class="line">|-String <span class="title function_">getAbsolutePath</span><span class="params">()</span>：返回此File对象所对应的绝对路径名。</span><br><span class="line">|-File <span class="title function_">getAbsoluteFile</span><span class="params">()</span>：返回此File对象所对应的绝对路径名所对应的File对象。</span><br><span class="line">|-String <span class="title function_">getCanonicalPath</span><span class="params">()</span>：返回此File对象所对应的规范路径名。所谓规范路径名，即对路径中的“..”等进行解析后的路径名。</span><br><span class="line">|-File <span class="title function_">getCanonicalFile</span><span class="params">()</span>：返回此File对象所对应的规范路径名所对应的File对象。</span><br><span class="line">|-String <span class="title function_">getParent</span><span class="params">()</span>：返回此File对象的父目录名。</span><br><span class="line">|-File <span class="title function_">getParentFile</span><span class="params">()</span>：返回此File对象的父目录名所对应的File对象。</span><br><span class="line"><span class="comment">//window的路径分隔符使用“\”，而Java程序中的“\”表示转义字符，所以在Windows中表示路径，需要用“\\”。</span></span><br><span class="line"><span class="comment">//或者直接使用“/”也可以（建议使用此种方式），Java程序支持将“/”当成平台无关的路径分隔符。</span></span><br><span class="line"><span class="comment">//或者直接使用File.separator常量值表示。</span></span><br></pre></td></tr></table></figure>
<div class="tabs" id="路径"><ul class="nav-tabs"><li class="tab active"><a href="#路径-1">绝对路径</a></li><li class="tab"><a href="#路径-2">相对路径</a></li><li class="tab"><a href="#路径-3">..</a></li></ul><div class="tab-content"><div class="tab-pane active" id="路径-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFile</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;<span class="comment">//getCanonicalPath方法需throws</span></span><br><span class="line">        <span class="comment">//1.绝对路径：从根目录开始导航。下以下三种方式都可以：</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/memories/test/IO.java&quot;</span>);<span class="comment">//建议使用这种，win和其他平台都支持</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:\\memories\\test\\IO.java&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:&quot;</span> + File.separator + <span class="string">&quot;memories&quot;</span> + File.separator </span><br><span class="line">                            + <span class="string">&quot;test&quot;</span> + File.separator + <span class="string">&quot;IO.java&quot;</span>);</span><br><span class="line">        <span class="comment">//名称：IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;名称：&quot;</span> + f1.getName());</span><br><span class="line">        <span class="comment">//路径名：c:\memories\test\IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;路径名：&quot;</span> + f1.getPath());</span><br><span class="line">        <span class="comment">//绝对路径名：c:\memories\test\IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;绝对路径名：&quot;</span> + f1.getAbsolutePath());</span><br><span class="line">        <span class="comment">//规范路径名：C:\memories\test\IO.jav</span></span><br><span class="line">        System.out.println(<span class="string">&quot;规范路径名：&quot;</span> + f1.getCanonicalPath());</span><br><span class="line">        <span class="comment">//父目录名：c:\memories\test</span></span><br><span class="line">        System.out.println(<span class="string">&quot;父目录名：&quot;</span> + f1.getParent());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="路径-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFile</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">//2.相对路径：相对当前文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">f2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;IO.java&quot;</span>);<span class="comment">//会通过user.dir解析相对路径</span></span><br><span class="line">        <span class="comment">//user.dir：c:\Users\memories\Desktop\test</span></span><br><span class="line">        System.out.println(<span class="string">&quot;user.dir：&quot;</span> + System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line">        <span class="comment">//名称：IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;名称：&quot;</span> + f2.getName());</span><br><span class="line">        <span class="comment">//路径名：IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;路径名：&quot;</span> + f2.getPath());</span><br><span class="line">        <span class="comment">//绝对路径名：c:\Users\memories\Desktop\test\IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;绝对路径名：&quot;</span> + f2.getAbsolutePath());</span><br><span class="line">        <span class="comment">//规范路径名：C:\Users\memories\Desktop\test\IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;规范路径名：&quot;</span> + f2.getCanonicalPath());</span><br><span class="line">        <span class="comment">//父目录名：null</span></span><br><span class="line">        System.out.println(<span class="string">&quot;父目录名：&quot;</span> + f2.getParent());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="路径-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFile</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">f3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;../../IO.java&quot;</span>);</span><br><span class="line">        <span class="comment">//user.dir：c:\Users\memories\Desktop\test</span></span><br><span class="line">        System.out.println(<span class="string">&quot;user.dir：&quot;</span> + System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line">        <span class="comment">//名称：IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;名称：&quot;</span> + f3.getName());</span><br><span class="line">        <span class="comment">//路径名：..\..\IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;路径名：&quot;</span> + f3.getPath());</span><br><span class="line">        <span class="comment">//绝对路径名：c:\Users\memories\Desktop\test\..\..\IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;绝对路径名：&quot;</span> + f3.getAbsolutePath());</span><br><span class="line">        <span class="comment">//规范路径名：C:\Users\memories\IO.java</span></span><br><span class="line">        System.out.println(<span class="string">&quot;规范路径名：&quot;</span> + f3.getCanonicalPath());<span class="comment">//会解析掉..</span></span><br><span class="line">        <span class="comment">//父目录名：..\.</span></span><br><span class="line">        System.out.println(<span class="string">&quot;父目录名：&quot;</span> + f3.getParent());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="判断检测">判断检测</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">文件/目录检测：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">exists</span><span class="params">()</span>：判断File对象对应的文件或目录是否存在。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">canRead</span><span class="params">()</span>：判断File对象对应的文件或目录是否可读。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">canWrite</span><span class="params">()</span>：判断File对象对应的文件或目录是否可写。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isHidden</span><span class="params">()</span>：判断File对象对应的文件或目录是否是否隐藏。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isFile</span><span class="params">()</span>：判断File对象对应的是否是文件。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isDirectory</span><span class="params">()</span>：判断File对象对应的是否是目录。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isAbsolute</span><span class="params">()</span>：判断File对象对应的文件或目录是否是绝对路径。</span><br><span class="line">常规信息：</span><br><span class="line">|-<span class="type">long</span> <span class="title function_">lastModified</span><span class="params">()</span>：返回File对象对应的文件或目录的最后修改时间（毫秒值）。</span><br><span class="line">|-<span class="type">long</span> <span class="title function_">length</span><span class="params">()</span>：返回File对象对应的文件的内容的长度（字节数）。</span><br><span class="line">    |-如果File对象对应的是目录，则返回目录下面的所有的文件大小累加和。</span><br><span class="line">    |-如果File对象对应的文件或目录不存在，返回对应属性的默认值。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="检测"><ul class="nav-tabs"><li class="tab active"><a href="#检测-1">文件/目录检测</a></li><li class="tab"><a href="#检测-2">常规信息</a></li></ul><div class="tab-content"><div class="tab-pane active" id="检测-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/IO.java&quot;</span>);</span><br><span class="line">        System.out.println(file.exists());<span class="comment">//true</span></span><br><span class="line">        System.out.println(file.canRead());<span class="comment">//true</span></span><br><span class="line">        System.out.println(file.canWrite());<span class="comment">//true</span></span><br><span class="line">        System.out.println(file.isHidden());<span class="comment">//false</span></span><br><span class="line">        System.out.println(file.isFile());<span class="comment">//true</span></span><br><span class="line">        System.out.println(file.isDirectory());<span class="comment">//false</span></span><br><span class="line">        System.out.println(file.isAbsolute());<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="检测-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/IO.java&quot;</span>);</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss SSS&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> file.lastModified();</span><br><span class="line">        <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> sf.format(<span class="keyword">new</span> <span class="title class_">Date</span>(time));<span class="comment">//SimpleDateFormat的format方法只支持Date对象</span></span><br><span class="line">        System.out.println(<span class="string">&quot;最后修改时间：&quot;</span> + format);<span class="comment">//最后修改时间：2020-03-01 10:23:40 646</span></span><br><span class="line">        System.out.println(<span class="string">&quot;文件大小：&quot;</span> + file.length());<span class="comment">//文件大小：246</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="文件操作">文件操作</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">创建文件：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">createNewFile</span><span class="params">()</span>：File实例调用，创建指定的文件。</span><br><span class="line">    |-如果指定的文件不存在、并成功创建，则返回 <span class="literal">true</span>；</span><br><span class="line">    |-如果指定的文件已经存在，则返回 <span class="literal">false</span>。</span><br><span class="line">|-File <span class="title function_">createTempFile</span><span class="params">(String prefix, String suffix)</span>：在默认临时文件目录中创建一个空文件，使用给定前缀和后缀生成其名称。</span><br><span class="line">    |-prefix：前缀字符串，必须至少三个字符。</span><br><span class="line">    |-suffix：后缀字符串，如果为 <span class="literal">null</span>，则使用默认值 <span class="string">&quot;.tmp&quot;</span> 。</span><br><span class="line">|-File <span class="title function_">createTempFile</span><span class="params">(String prefix, String suffix, File directory)</span>：在指定目录中创建一个新的空文件，同上。</span><br><span class="line">    |-prefix：前缀字符串，必须至少三个字符。</span><br><span class="line">    |-suffix：后缀字符串，如果为 <span class="literal">null</span>，会使用默认值 <span class="string">&quot;.tmp&quot;</span> 。</span><br><span class="line">    |-directory：文件所在的目录，如果为 <span class="literal">null</span>，会使用默认临时文件目录。</span><br><span class="line">删除文件：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">delete</span><span class="params">()</span>：当且仅当成功删除文件时，返回 <span class="literal">true</span>；否则返回 <span class="literal">false</span>。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">deleteOnExit</span><span class="params">()</span>：当退出JVM时删除文件，一般用于删除临时文件，建议配合createTempFile方法使用。</span><br><span class="line">重命名、移动：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">renameTo</span><span class="params">(File dest)</span>：重命名、移动文件（在同一文件系统下）。</span><br><span class="line">    |-dest：File对象，表示文件的目标路径、新名字。</span><br><span class="line">    |-如果文件被成功重命名、移动，则返回 <span class="literal">true</span>；否则，返回 <span class="literal">false</span>。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="文件操作"><ul class="nav-tabs"><li class="tab active"><a href="#文件操作-1">创建文件</a></li><li class="tab"><a href="#文件操作-2">删除文件</a></li><li class="tab"><a href="#文件操作-3">重命名、移动</a></li></ul><div class="tab-content"><div class="tab-pane active" id="文件操作-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">//创建文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/IO.java&quot;</span>);</span><br><span class="line">        System.out.println(file.createNewFile());<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//创建临时文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">tempFile</span> <span class="operator">=</span> File.createTempFile(<span class="string">&quot;Hello&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//C:\Users\memories\AppData\Local\Temp\Hello13570132848344702261.tmp</span></span><br><span class="line">        System.out.println(tempFile.getAbsolutePath());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="文件操作-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">//删除文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/IO.java&quot;</span>);</span><br><span class="line">        System.out.println(file.delete());<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//删除临时文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">tempFile</span> <span class="operator">=</span> File.createTempFile(<span class="string">&quot;Hello&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">        tempFile.deleteOnExit();<span class="comment">//无返回值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="文件操作-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">//以下都是单独执行的结果</span></span><br><span class="line">        <span class="comment">//重命名</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/IO.java&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/destIO.java&quot;</span>);</span><br><span class="line">        System.out.println(src.renameTo(dest));<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//移动</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/IO.java&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/dest/IO.java&quot;</span>);</span><br><span class="line">        System.out.println(src.renameTo(dest));<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//移动+重命名</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">src</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/IO.java&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/dest/destIO.java&quot;</span>);</span><br><span class="line">        System.out.println(src.renameTo(dest));<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="目录操作">目录操作</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">创建目录：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">mkdir</span><span class="params">()</span>：必须确保父目录存在，否则创建失败。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">mkdirs</span><span class="params">()</span>：如果父目录链不存在，会一同创建父目录链。</span><br><span class="line">列出目录、文件：</span><br><span class="line">|-String[] list()：列出当前目录的下级目录或文件的名称。</span><br><span class="line">|-File[] listFiles()：列出当前目录的下级的目录或文件对应的File对象。配合递归可以列出下级的下级等。</span><br><span class="line">|-File[] listFiles(FileFilter filter)：返回所有满足指定过滤器的文件和目录。</span><br><span class="line">    |-如果filter为<span class="literal">null</span>，则接受所有路径名。</span><br><span class="line">    |-如果filter不为<span class="literal">null</span>，那么只有FileFilter.accept(java.io.File)方法返回<span class="literal">true</span>时，该路径名才满足过滤器。</span><br><span class="line">    |-如果当前File对象不表示一个目录，或者发生I/O错误，则返回<span class="literal">null</span>。</span><br><span class="line">|-File[] listFiles(FilenameFilter filter)：返回所有满足指定过滤器的文件和目录。</span><br><span class="line">    |-如果filter为<span class="literal">null</span>，则接受所有路径名。</span><br><span class="line">    |-如果filter不为<span class="literal">null</span>，那么只有FilenameFilter.accept(java.io.File, java.lang.String)方法返回<span class="literal">true</span>时，该路径名才满足过滤器。</span><br><span class="line">    |-如果当前File对象不表示一个目录，或者发生I/O错误，则返回<span class="literal">null</span>。</span><br><span class="line">|-File[] listRoots()：列出可用的文件系统根。</span><br><span class="line">删除目录：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">delete</span><span class="params">()</span>：只能删除空目录。否则需要先将目录下的所有内容删除才能将该目录删除。</span><br><span class="line">重命名目录：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">renameTo</span><span class="params">(File dest)</span>：如果是windows目录，只能在同一个盘下，不能从D盘移动到E盘。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="目录操作"><ul class="nav-tabs"><li class="tab active"><a href="#目录操作-1">创建目录</a></li><li class="tab"><a href="#目录操作-2">自定义列出目录、文件</a></li><li class="tab"><a href="#目录操作-3">目录总大小</a></li><li class="tab"><a href="#目录操作-4">目录过滤器</a></li><li class="tab"><a href="#目录操作-5">删除目录</a></li><li class="tab"><a href="#目录操作-6">重命名</a></li></ul><div class="tab-content"><div class="tab-pane active" id="目录操作-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/dest&quot;</span>);</span><br><span class="line">        System.out.println(dir.mkdir());<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/dest1/dest2&quot;</span>);<span class="comment">//dest2父目录没有也会被创建</span></span><br><span class="line">        System.out.println(dir.mkdirs());<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="目录操作-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test&quot;</span>);</span><br><span class="line">        listSubFiles(dir);<span class="comment">//列出test下所有目录、文件</span></span><br><span class="line">        <span class="comment">// c:\Users\memories\Desktop\test\.vscode\launch.json</span></span><br><span class="line">        <span class="comment">// c:\Users\memories\Desktop\test\.vscode</span></span><br><span class="line">        <span class="comment">// c:\Users\memories\Desktop\test\dest</span></span><br><span class="line">        <span class="comment">// c:\Users\memories\Desktop\test\dest1\dest2</span></span><br><span class="line">        <span class="comment">// c:\Users\memories\Desktop\test\dest1</span></span><br><span class="line">        <span class="comment">// c:\Users\memories\Desktop\test\Test.class</span></span><br><span class="line">        <span class="comment">// c:\Users\memories\Desktop\test\Test.java</span></span><br><span class="line">        <span class="comment">// c:\Users\memories\Desktop\test</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">listSubFiles</span><span class="params">(File dir)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (dir != <span class="literal">null</span> &amp;&amp; dir.isDirectory()) &#123;</span><br><span class="line">            File[] listFiles = dir.listFiles();<span class="comment">//得到当前目录下所有File对象</span></span><br><span class="line">            <span class="keyword">if</span> (listFiles != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (File sub : listFiles) &#123;</span><br><span class="line">                    listSubFiles(sub);<span class="comment">//递归</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(dir);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="目录操作-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;大小：&quot;</span> + getLength(dir));<span class="comment">//大小：3275</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">long</span> <span class="title function_">getLength</span><span class="params">(File dir)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (dir != <span class="literal">null</span> &amp;&amp; dir.isDirectory()) &#123;</span><br><span class="line">            File[] listFiles = dir.listFiles();</span><br><span class="line">            <span class="keyword">if</span>(listFiles != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (File sub : listFiles) &#123;</span><br><span class="line">                    sum += getLength(sub);<span class="comment">//递归</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> sum;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dir != <span class="literal">null</span> &amp;&amp; dir.isFile())&#123;</span><br><span class="line">            <span class="keyword">return</span> dir.length();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="目录操作-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FilenameFilter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test&quot;</span>);</span><br><span class="line">        listByFileFilter(dir);<span class="comment">//c:\Users\memories\Desktop\test\Test.java</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//列出目录、子目录下所有的.java文件</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">listByFileFilter</span><span class="params">(File file)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (file != <span class="literal">null</span> &amp;&amp; file.isDirectory()) &#123;</span><br><span class="line">            File[] listFiles = file.listFiles(<span class="keyword">new</span> <span class="title class_">FilenameFilter</span>() &#123;</span><br><span class="line">                <span class="comment">//重写accept方法，返回true是要保留的，那么.java和子目录都是要保留的</span></span><br><span class="line">                <span class="comment">//dir当前目录，name文件的名称</span></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">accept</span><span class="params">(File dir, String name)</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> name.endsWith(<span class="string">&quot;.java&quot;</span>) || <span class="keyword">new</span> <span class="title class_">File</span>(dir,name).isDirectory();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">if</span> (listFiles != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (File sub : listFiles) &#123;</span><br><span class="line">                    <span class="keyword">if</span>(sub.isFile())&#123;</span><br><span class="line">                        System.out.println(sub);</span><br><span class="line">                    &#125;</span><br><span class="line">                    listByFileFilter(sub);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="目录操作-5"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test&quot;</span>);</span><br><span class="line">        forceDeleteDir(dir);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">forceDeleteDir</span><span class="params">(File dir)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (dir != <span class="literal">null</span> &amp;&amp; dir.isDirectory()) &#123;</span><br><span class="line">            File[] listFiles = dir.listFiles();</span><br><span class="line">            <span class="keyword">if</span>(listFiles!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span> (File sub : listFiles) &#123;</span><br><span class="line">                    forceDeleteDir(sub);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dir.delete();<span class="comment">//删除目录</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="目录操作-6"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">//重命名</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/dest&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/dest1&quot;</span>);</span><br><span class="line">        System.out.println(dir.renameTo(dest));<span class="comment">//true</span></span><br><span class="line">        <span class="comment">// 移动</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/dest&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/dest&quot;</span>);</span><br><span class="line">        System.out.println(dir.renameTo(dest));<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//重命名+移动</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dir</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/test/dest&quot;</span>);</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;c:/Users/memories/Desktop/dest1&quot;</span>);</span><br><span class="line">        System.out.println(dir.renameTo(dest));<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h2 id="网络流">网络流</h2>
<h3 id="抽象基类">抽象基类</h3>
<p>I/O操作不仅仅是针对文件、目录，它可以从网络中输入和输出，其流类型如下：<br />
<img src="/images/Java简介和环境搭建/IO流.png" width="60%"></p>
<p>最基本的网络IO流只有四个，它们是网络IO流的超级父类，抽象基类：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">字节输入流：InputStream</span><br><span class="line">字节输出流：OutputStream</span><br><span class="line">字符输入流：Reader</span><br><span class="line">字符输出流：Writer</span><br></pre></td></tr></table></figure></p>
<h3 id="io流选取">IO流选取</h3>
<p>Java的IO流是单向的，只能从输入流（Input、Reader）中读取（read）数据，也只能往输出流（Output、Writer）中写（write、print）出数据。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//I/O流类的设计选用了装饰者设计模式（也叫包装模式），即IO流分为两大类：“被装饰”的组件（主功能）、“装饰”的组件（辅助功能）。</span></span><br><span class="line">角色：</span><br><span class="line">|-节点流：连接源头、目的地，是被装饰者。</span><br><span class="line">|-处理流：增强功能，提高性能，是装饰者。</span><br><span class="line">节点流是主主功能，处理流是辅助功能，处理流为节点流包装而不能单独存在。</span><br><span class="line">处理数据：</span><br><span class="line">|-字节流：一个字节一个字节处理，直接处理二进制，它<span class="string">&quot;适用于一切数据&quot;</span>，包括纯文本、图片、音频、视频等等。</span><br><span class="line">|-字符流：一个字符一个字符处理，<span class="string">&quot;只能纯文本类的数据&quot;</span>。</span><br></pre></td></tr></table></figure></p>
<h3 id="常用方法">常用方法</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">|-InputStream</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">read</span><span class="params">()</span>：从输入流中读取数据的下一个字节。只要有输入流就一直读取，如果到达流末尾没有可用的字节，则返回值-<span class="number">1</span>。范围[<span class="number">0</span>, <span class="number">255</span>]。</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">read</span><span class="params">(<span class="type">byte</span>[] b)</span>：将最多b.length个字节的数据读入一个<span class="type">byte</span>数组中。如果到达流末尾没有可用的字节，则返回值-<span class="number">1</span>。</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">read</span><span class="params">(<span class="type">byte</span>[] b,<span class="type">int</span> off,<span class="type">int</span> len)</span>：将最多len个数据字节读入<span class="type">byte</span>数组。</span><br><span class="line">        |-尝试读取len个字节，因字节不够len，所以读取的字节也可能小于该值。</span><br><span class="line">        |-如果到达流末尾没有可用的字节，则返回值-<span class="number">1</span>。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>：关闭此输入流并释放与该流关联的所有系统资源。</span><br><span class="line">|-OutputStream</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">int</span> b)</span>：将指定的字节写入此输出流。范围[<span class="number">0</span>, <span class="number">255</span>]。</span><br><span class="line">        |-write常规协定：是向输出流写入一个字节。要写入的字节是参数b的八个低位。b的<span class="number">24</span>个高位将被忽略。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">byte</span>[] b)</span>：将b.length个字节从指定的<span class="type">byte</span>数组写入此输出流。</span><br><span class="line">        |-write常规协定：应该与调用write(b, <span class="number">0</span>, b.length)的效果完全相同。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">byte</span>[] b,<span class="type">int</span> off,<span class="type">int</span> len)</span>：将指定<span class="type">byte</span>数组中从偏移量off开始的len个字节写入此输出流。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">flush</span><span class="params">()</span>：刷新此输出流并强制写出所有缓冲的输出字节，调用此方法指示应将这些字节立即写入它们预期的目标。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>：关闭此输出流并释放与该流关联的所有系统资源。 </span><br><span class="line">|-Reader</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">read</span><span class="params">()</span>：读取单个字符。返回字符的Unicode值，只要有输入流就一直读取，如果已到达流的末尾，则返回-<span class="number">1</span>。范围[<span class="number">0</span>, <span class="number">65535</span>]。</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">read</span><span class="params">(<span class="type">char</span>[] cbuf)</span>：将字符读入数组。返回本次读取的字符数，如果已到达流的末尾，则返回-<span class="number">1</span>。</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">read</span><span class="params">(<span class="type">char</span>[] cbuf,<span class="type">int</span> off,<span class="type">int</span> len)</span>：将字符读入数组的某一部分。</span><br><span class="line">        |-从off处开始，最多读len个字符，存到数组cbuf中。</span><br><span class="line">        |-返回本次读取的字符数，如果已到达流的末尾，则返回-<span class="number">1</span>。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>：关闭此输入流并释放与该流关联的所有系统资源。</span><br><span class="line">|-Writer</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">int</span> c)</span>、Writer <span class="title function_">append</span><span class="params">(<span class="type">char</span> c)</span>：写入单个字符。</span><br><span class="line">        |-要写入的字符包含在给定整数值的<span class="number">16</span>个低位中，<span class="number">16</span>个高位被忽略。 即写入[<span class="number">0</span>, <span class="number">65535</span>]的Unicode码。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">char</span>[] cbuf)</span>：写入字符数组。</span><br><span class="line">        |-Writer <span class="title function_">append</span><span class="params">(CharSequence csq)</span>：写入字符数组。 </span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">write</span><span class="params">(<span class="type">char</span>[] cbuf,<span class="type">int</span> off,<span class="type">int</span> len)</span>：写入字符数组的某一部分。</span><br><span class="line">        |-Writer <span class="title function_">append</span><span class="params">(CharSequence csq,<span class="type">int</span> start,<span class="type">int</span> end)</span>：写入字符数组的某一部分。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String str)</span>：写入字符串。 </span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String str,<span class="type">int</span> off,<span class="type">int</span> len)</span>：写入字符串的某一部分。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">flush</span><span class="params">()</span>：刷新该流的缓冲，则立即将它们写入预期目标。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span>：关闭此输出流并释放与该流关联的所有系统资源。 </span><br></pre></td></tr></table></figure>
<h3 id="io流使用">IO流使用</h3>
<p>1.读取数据的步骤：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">|-准备</span><br><span class="line">    |-明确数据类型：纯文本选字符流，否则选字节流。</span><br><span class="line">    |-节点流：根据数据源选择主功能。</span><br><span class="line">        |-如果从文件中：FileInputStream、FileReader。</span><br><span class="line">        |-如果从内存的数组中：ByteArrayInputStream、CharArrayReader。</span><br><span class="line">        |-如果从网络中：InputStream。</span><br><span class="line">    |-处理流：根据主功能选择辅助功能。</span><br><span class="line">        |-缓冲功能：BufferedReader、BufferedInputStream。</span><br><span class="line">        |-按行读：BufferedReader、Scanner。</span><br><span class="line">        |-从输入流中读取基本Java数据类型：DataInputStream。</span><br><span class="line">        |-对象的反序列化：ObjectInputStream。</span><br><span class="line">        |-对流中的数据进行解码或转换：InputStreamReader。</span><br><span class="line">|-读取方式：以read、readXxx方法为主，readInt()，readObject()，readUTF()等。</span><br><span class="line">    |-Reader.read()：读取单个字符，只要有输入流就一直读取，达流的末尾，则返回-<span class="number">1</span>。</span><br><span class="line">    |-BufferedReader.readLine()：读取行数据，遇到换行符<span class="string">&quot;\n&quot;</span>、<span class="string">&quot;\r&quot;</span>换行，返回值不包含终止符，到达末尾返回<span class="literal">null</span>。</span><br><span class="line">|-关闭close()。</span><br></pre></td></tr></table></figure></p>
<p>2、写数据的步骤：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">|-准备</span><br><span class="line">    |-明确数据类型：纯文本选字符流，否则选字节流。</span><br><span class="line">    |-节点流：根据数据源选择主功能。</span><br><span class="line">        |-如果写到文件中：FileOutputStream、FileWriter。</span><br><span class="line">        |-如果写到内存的数组中：ByteArrayOutputStream、CharArrayWriter。</span><br><span class="line">        |-如果写到网络中：OutputStream。</span><br><span class="line">    |-处理流：根据主功能选择辅助功能。</span><br><span class="line">        |-缓冲功能：BufferedOutputStream、BufferedWriter。</span><br><span class="line">        |-按行写：PrintStream、PrintWriter。</span><br><span class="line">        |-将基本Java数据类型写入输出流：DataInputStream。</span><br><span class="line">        |-对象的反序列化：ObjectInputStream。</span><br><span class="line">        |-对流中的数据进行编码或转换：OutputStreamWriter。</span><br><span class="line">|-读取方式：以write、writeXxx方法为主，writeInt()，writeDouble()，writeObject()等。</span><br><span class="line">    |-Writer.write()：写入单个字符。</span><br><span class="line">|-关闭close()。</span><br></pre></td></tr></table></figure></p>
<h3 id="常用示例">常用示例</h3>
<h4 id="读纯文本">读纯文本</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//读取文件时，必须保证该文件已存在，否则出异常。</span></span><br><span class="line">|-字节流：</span><br><span class="line">    |-FileInputStream：文件<span class="string">&quot;字节&quot;</span>输入流，可以读取任意类型的文件。</span><br><span class="line">    |-BufferedInputStream：<span class="string">&quot;字节&quot;</span>输入缓冲流，给InputStream系列增加缓冲效果。</span><br><span class="line">|-字符流（注意编码）：</span><br><span class="line">    |-FileReader：文件<span class="string">&quot;字符&quot;</span>输入流，只能读取纯文本的文件，按照平台默认的字符编码进行解码。</span><br><span class="line">    |-BufferedReader：<span class="string">&quot;字符&quot;</span>输入缓冲流，从字符输入流中读取文本，缓冲字符以提供高效读取，给Reader系列增加缓冲效果。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="testfilereader"><ul class="nav-tabs"><li class="tab active"><a href="#testfilereader-1">基本读取</a></li><li class="tab"><a href="#testfilereader-2">按行读取</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testfilereader-1"><figure class="highlight java"><figcaption><span>TestFileReader.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="comment">//读取message.txt文件中的内容（今天气温不错）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFileReader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//纯文本用FileReader</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fr = <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;message.txt&quot;</span>);</span><br><span class="line">            <span class="type">char</span>[] data = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">5</span>];<span class="comment">//存储字符的数组</span></span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fr.read(data)) != -<span class="number">1</span>)&#123;<span class="comment">//读取字符到data数组，判断字符数量是否合理</span></span><br><span class="line">                <span class="comment">//写len是保证读到新读取字符结束，不写最后一次会把上一次的也字符输出</span></span><br><span class="line">                System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(data,<span class="number">0</span>,len));<span class="comment">//今天气温不、错</span></span><br><span class="line">                System.out.println(data);<span class="comment">//今天气温不、错天气温不</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fr.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testfilereader-2"><figure class="highlight java"><figcaption><span>TestBufferedReader.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBufferedReader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            br = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;message.txt&quot;</span>));</span><br><span class="line">            String str;</span><br><span class="line">            <span class="keyword">while</span>((str = br.readLine()) != <span class="literal">null</span>)&#123;<span class="comment">//按行读取</span></span><br><span class="line">                System.out.println(str);<span class="comment">//今天气温不错</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                br.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="写纯文本">写纯文本</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//写入文件时，如果目录下有同名文件将被覆盖，除非是追加模式。</span></span><br><span class="line">|-字节流：</span><br><span class="line">    |-FileOutputStream：文件<span class="string">&quot;字节&quot;</span>输出流，可以把字节数据输出到任意类型的文件。</span><br><span class="line">    |-BufferedOutputStream：<span class="string">&quot;字节&quot;</span>输出缓冲流，给OutputStream系列增加缓冲效果。</span><br><span class="line">    |-PrintStream：<span class="string">&quot;字节&quot;</span>打印流，打印的所有字符都使用平台的默认字符编码转换为字节。</span><br><span class="line">|-字符流（注意编码）：</span><br><span class="line">    |-FileWriter：文件<span class="string">&quot;字符&quot;</span>输出流，只能把字符数据输出到纯文本文件。按照平台默认的字符编码进行编码。</span><br><span class="line">    |-BufferedWriter：<span class="string">&quot;字符&quot;</span>字符输出缓冲流，将文本写入字符输出流中，缓冲字符提高写入效率，给Writer系列增加缓冲效果。</span><br><span class="line">    |-PrintWriter：<span class="string">&quot;字符&quot;</span>打印流，可以指定字符编码。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="testfilewriter"><ul class="nav-tabs"><li class="tab active"><a href="#testfilewriter-1">基本输出</a></li><li class="tab"><a href="#testfilewriter-2">按行输出</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testfilewriter-1"><figure class="highlight java"><figcaption><span>TestFileWriter.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="comment">//从键盘输入，保存到message.txt文件中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFileWriter</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//终端输入按照&quot;UTF-8&quot;解码（如果和平台编码不一致会乱码）</span></span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in,<span class="string">&quot;UTF8&quot;</span>);</span><br><span class="line">        <span class="type">FileWriter</span> <span class="variable">fw</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//编码指定也可以用Charset.forName(&quot;UTF-8&quot;)/StandardCharsets.UTF_8。</span></span><br><span class="line">            <span class="comment">//默认覆盖模式，true表示追加模式。</span></span><br><span class="line">            fw = <span class="keyword">new</span> <span class="title class_">FileWriter</span>(<span class="string">&quot;message.txt&quot;</span>, Charset.forName(<span class="string">&quot;UTF8&quot;</span>), <span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请输入：&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> input.nextLine();</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;stop&quot;</span>.equals(message))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                fw.write(message);</span><br><span class="line">                System.out.println(<span class="string">&quot;结束请输入stop&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            input.close();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fw.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testfilewriter-2"><figure class="highlight java"><figcaption><span>TestPrintWriter.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestPrintWriter</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in, <span class="string">&quot;UTF8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">pw</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pw = <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="string">&quot;message.txt&quot;</span>, Charset.forName(<span class="string">&quot;UTF8&quot;</span>));</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请输入：&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> input.nextLine();</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;stop&quot;</span>.equals(message))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                pw.println(message);<span class="comment">//写入文件</span></span><br><span class="line">                System.out.println(<span class="string">&quot;结束请输入stop&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            input.close();</span><br><span class="line">            pw.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="复制文件">复制文件</h4>
<div class="tabs" id="testcopy"><ul class="nav-tabs"><li class="tab active"><a href="#testcopy-1">基本版</a></li><li class="tab"><a href="#testcopy-2">提升效率版</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testcopy-1"><figure class="highlight java"><figcaption><span>TestCopy.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="comment">//提示：使用缓冲流，可以提高效率。缓冲流的默认缓冲区大小是8192字节/字符。</span></span><br><span class="line"><span class="comment">//将文件”memories/file/1.jpg”复制到”memories/img/1.jpg”</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCopy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            copyFile(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;memories/file/1.jpg&quot;</span>), <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;memories/img/1.jpg&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;文件复制成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;文件复制失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="keyword">if</span>(!src.isFile())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(src.getPath() + <span class="string">&quot;不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src);<span class="comment">//字节输入流</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dest);<span class="comment">//字节输出流</span></span><br><span class="line">        <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = fis.read(data))!=-<span class="number">1</span>)&#123;<span class="comment">//输入</span></span><br><span class="line">            fos.write(data, <span class="number">0</span>, len);<span class="comment">//输出</span></span><br><span class="line">        &#125;</span><br><span class="line">        fos.close();</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testcopy-2"><figure class="highlight java"><figcaption><span>TestBufferedCopy.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBufferedCopy</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            copyFileInHighSpeed(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;memories/file/1.jpg&quot;</span>), <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;memories/img/1.jpg&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;文件复制成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;文件复制失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFileInHighSpeed</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="keyword">if</span>(!src.isFile())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(src.getPath() + <span class="string">&quot;不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src));</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dest));</span><br><span class="line">        <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = bis.read(data))!=-<span class="number">1</span>)&#123;<span class="comment">//输入</span></span><br><span class="line">            bos.write(data, <span class="number">0</span>, len);<span class="comment">//输出</span></span><br><span class="line">        &#125;</span><br><span class="line">        bos.close();</span><br><span class="line">        bis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="复制目录">复制目录</h4>
<div class="tabs" id="testfileutils"><ul class="nav-tabs"><li class="tab active"><a href="#testfileutils-1">拷贝/剪切</a></li><li class="tab"><a href="#testfileutils-2">使用</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testfileutils-1"><figure class="highlight java"><figcaption><span>FileUtils.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.io;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileUtils</span> &#123;</span><br><span class="line">    <span class="comment">//复制文件</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="keyword">if</span>(!src.isFile())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(src.getPath() + <span class="string">&quot;不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src);</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dest);</span><br><span class="line">        <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = fis.read(data))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(data, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        fos.close();</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//复制文件夹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyDirectory</span><span class="params">(File srcDir,File destDir)</span><span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="keyword">if</span>(destDir.getAbsolutePath().contains(srcDir.getAbsolutePath()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IOException</span>(<span class="string">&quot;父目录不能拷贝到子目录中&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!destDir.isDirectory())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IOException</span>(<span class="string">&quot;目标对象不是目录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(destDir,srcDir.getName());</span><br><span class="line">        <span class="comment">//如果srcDir是个文件，那么直接复制文件到destDir中</span></span><br><span class="line">        <span class="keyword">if</span>(srcDir.isFile())&#123;</span><br><span class="line">            copyFile(srcDir, dest);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dest.mkdirs();<span class="comment">//先在destPath目录中创建srcDir对应的文件夹</span></span><br><span class="line">            File[] list = srcDir.listFiles();<span class="comment">//准备复制srcDir的子目录或子文件</span></span><br><span class="line">            <span class="keyword">for</span>(File f: list)&#123;</span><br><span class="line">                copyDirectory(f,dest);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//剪切文件夹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">cutDirectory</span><span class="params">(File srcDir,File destDir)</span><span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="keyword">if</span>(destDir.getAbsolutePath().contains(srcDir.getAbsolutePath()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IOException</span>(<span class="string">&quot;父目录不能剪切到子目录中&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!destDir.isDirectory())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IOException</span>(<span class="string">&quot;目标对象不是目录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(destDir,srcDir.getName());</span><br><span class="line">        <span class="keyword">if</span>(srcDir.isFile())&#123;</span><br><span class="line">            copyFile(srcDir, dest);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dest.mkdirs();</span><br><span class="line">            File[] list = srcDir.listFiles();</span><br><span class="line">            <span class="keyword">for</span>(File f: list)&#123;</span><br><span class="line">                cutDirectory(f,dest);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        srcDir.delete();<span class="comment">//删除源文件夹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testfileutils-2"><figure class="highlight java"><figcaption><span>TestFileUtils.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.io;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFileUtils</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//将&quot;memories/download&quot;文件夹，复制到&quot;memories/temp&quot;目录中去</span></span><br><span class="line">        FileUtils.copyDirectory(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;memories/download&quot;</span>), <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;memories/temp&quot;</span>));</span><br><span class="line">        FileUtils.cutDirectory(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;memories/download&quot;</span>), <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;memories/temp&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="编码解码">编码解码</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|-字符流：</span><br><span class="line">    |-InputStreamReader：把<span class="string">&quot;字节&quot;</span>输入流转为<span class="string">&quot;字符&quot;</span>输入流，并且在转换的过程中，可以指定字符编码。</span><br><span class="line">    |-OutputStreamWriter：把<span class="string">&quot;字符&quot;</span>流转为<span class="string">&quot;字节&quot;</span>流输出，并且在转换的过程中，可以指定字符编码。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="testdecode"><ul class="nav-tabs"><li class="tab active"><a href="#testdecode-1">解码</a></li><li class="tab"><a href="#testdecode-2">编码</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testdecode-1"><figure class="highlight java"><figcaption><span>TestDecode.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDecode</span> &#123;</span><br><span class="line">    <span class="comment">//读取UTF-8编码的message.txt文件</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//读取&quot;UTF-8&quot;。GBK格式用&quot;GBK&quot;。</span></span><br><span class="line">            br = <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;message.txt&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">            String str;</span><br><span class="line">            <span class="keyword">while</span>((str = br.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                br.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testdecode-2"><figure class="highlight java"><figcaption><span>TestEncode.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestEncode</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        copy(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;test.txt&quot;</span>),<span class="string">&quot;GBK&quot;</span>, <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;other.txt&quot;</span>),<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//将GBK编码的test.txt文件，复制为UTF-8编码的other.txt。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy</span><span class="params">(File src, String srcCharset, File dest, String destCharset)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="keyword">if</span>(!src.isFile())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(src.getPath() + <span class="string">&quot;不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src), srcCharset));</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">bw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dest), destCharset));</span><br><span class="line">        String str;</span><br><span class="line">        <span class="keyword">while</span>((str = br.readLine()) != <span class="literal">null</span>)&#123;</span><br><span class="line">            bw.write(str);</span><br><span class="line">            bw.newLine();</span><br><span class="line">        &#125;</span><br><span class="line">        bw.close();</span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="基础类型字节流">基础类型（字节流）</h4>
<p>希望Java能够输出各种数据类型的数据，读取时能还原各种数据类型的数据，因为这些数据不是纯文本，只能选择字节流。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">|-字节流</span><br><span class="line">    |-DataInputStream：允许应用程序以与机器无关方式从底层输入流中读取基本 Java 数据类型。</span><br><span class="line">    |-DataOutputStream：允许应用程序以适当方式将基本 Java 数据类型写入输出流中。</span><br><span class="line"><span class="comment">//这俩实现类新增很多readXxx和writeXxx方法，使用时必须匹配使用。</span></span><br><span class="line"> DataInputStream            DataOutputStream</span><br><span class="line"> <span class="type">int</span> <span class="title function_">readInt</span><span class="params">()</span>              writeInt(xx)</span><br><span class="line"> <span class="type">double</span> <span class="title function_">readDouble</span><span class="params">()</span>        writeDouble(xx)</span><br><span class="line"> <span class="type">boolean</span> <span class="title function_">readBoolean</span><span class="params">()</span>      writeBoolean(xx)</span><br><span class="line"> <span class="type">long</span> <span class="title function_">readLong</span><span class="params">()</span>            writeLong(xx)</span><br><span class="line"> <span class="type">char</span> <span class="title function_">readChar</span><span class="params">()</span>            writeChar(xx)</span><br><span class="line"> <span class="type">byte</span> <span class="title function_">readByte</span><span class="params">()</span>            writeByte(xx)</span><br><span class="line"> <span class="type">short</span> <span class="title function_">readShort</span><span class="params">()</span>          writeShort(xx)</span><br><span class="line"> <span class="type">float</span> <span class="title function_">readFloat</span><span class="params">()</span>          writeFloat(xx)</span><br><span class="line"> String <span class="title function_">readUTF</span><span class="params">()</span>           writeUTF(String str)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><figcaption><span>TestData.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestData</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">//存储如下一组数据，到game.dat文件中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;巫师&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line">        <span class="type">char</span> <span class="variable">gender</span> <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">energy</span> <span class="operator">=</span> <span class="number">5000</span>;</span><br><span class="line">        <span class="type">double</span> <span class="variable">price</span> <span class="operator">=</span> <span class="number">75.5</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">relive</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="type">DataOutputStream</span> <span class="variable">dos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;game.dat&quot;</span>));</span><br><span class="line">        dos.writeUTF(name);</span><br><span class="line">        dos.writeInt(age);</span><br><span class="line">        dos.writeChar(gender);</span><br><span class="line">        dos.writeInt(energy);</span><br><span class="line">        dos.writeDouble(price);</span><br><span class="line">        dos.writeBoolean(relive);</span><br><span class="line">        dos.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//可以读取</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reload</span><span class="params">()</span><span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">DataInputStream</span> <span class="variable">dis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;game.dat&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> dis.readUTF();</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> dis.readInt();</span><br><span class="line">        <span class="type">char</span> <span class="variable">gender</span> <span class="operator">=</span> dis.readChar();</span><br><span class="line">        <span class="type">int</span> <span class="variable">energy</span> <span class="operator">=</span> dis.readInt();</span><br><span class="line">        <span class="type">double</span> <span class="variable">price</span> <span class="operator">=</span> dis.readDouble();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">relive</span> <span class="operator">=</span> dis.readBoolean();</span><br><span class="line">        System.out.println(name+<span class="string">&quot;,&quot;</span> + age + <span class="string">&quot;,&quot;</span> + gender + <span class="string">&quot;,&quot;</span> + energy + <span class="string">&quot;,&quot;</span> + price + <span class="string">&quot;,&quot;</span> + relive);</span><br><span class="line">        dis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="存储对象">存储对象</h4>
<p>如果程序要存储状态，可以选择DataOutputStream，对每一个对象逐个地把每一项变量的值写到特定格式的文件中。<br />
Java还提供了面向对象的处理方式：直接存储对象。不过，这种方式保存的数据，必须是由Java程序来读取，如果在程序所储存的文件数据需要给某些非Java应用程序所读取时，就不能选用这种方式了。</p>
<p>序列化与反序列化：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">|-ObjectOutputStream：对象序列化，把对象转为字节序列输出，writeObject(obj)方法可以输出对象。</span><br><span class="line">|-ObjectInputStream：对象反序列化，把字节序列重构成Java对象，Object <span class="title function_">readObject</span><span class="params">()</span>方法可以读取对象。</span><br><span class="line">前提准备：</span><br><span class="line">|-类本身、类内部属性的类型，都必须实现java.io.Serializable接口，或者其子接口。</span><br><span class="line">|-若完全控制某一对象及其超类型的流格式和内容，则要实现java.io.Externalizable接口的两个方法：</span><br><span class="line">    |-writeExternal：自定定制哪些属性要序列化，顺序是什么样。</span><br><span class="line">    |-readExternal：自定定制哪些属性要反序列化，顺序和writeExternal的方法中一致。</span><br><span class="line">不被序列化的属性：</span><br><span class="line">|-<span class="keyword">static</span>：代表类属性而不是实例属性，不会被序列化，反序列化时恢复为当前类变量的值。</span><br><span class="line">|-<span class="keyword">transient</span>：表示瞬时，不会被序列化，反序列化时被恢复为默认值。如果某个实例变量不需要被序列化，就把它标记为<span class="keyword">transient</span>的。</span><br><span class="line"><span class="comment">//如果某个属性的类型没有实现Serializable接口，而你又不能修改该类，那么只能把该属性标记为transient。</span></span><br><span class="line"><span class="comment">//或者动态数据只可以在执行时求出而不能或不必存储。</span></span><br><span class="line">序列化版本ID：</span><br><span class="line">|-默认serialVersionUID是自动生成的。</span><br><span class="line">|-但当本地对象发生变化，比如删除了某个实例变量、改变实例变量的类型，这导致序列化或反序列化不一致而失败。</span><br><span class="line">|-解决办法：实现java.io.Serializable接口时，增加一个<span class="type">long</span>类型的静态常量serialVersionUID。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="testobjectoutputstream"><ul class="nav-tabs"><li class="tab active"><a href="#testobjectoutputstream-1">序列化对象</a></li><li class="tab"><a href="#testobjectoutputstream-2">使用序列化</a></li><li class="tab"><a href="#testobjectoutputstream-3">序列化版本ID</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testobjectoutputstream-1"><figure class="highlight java"><figcaption><span>Account.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.io;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.io.Externalizable;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInput;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutput;</span><br><span class="line"><span class="comment">//想序列化，必须继承Serializable接口，标记可以被序列化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>, Externalizable&#123;</span><br><span class="line">    <span class="comment">//static的属性不会被序列化，反序列化时恢复为当前类变量的值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">double</span> interestRate;</span><br><span class="line">    <span class="keyword">private</span> String number;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> balance;</span><br><span class="line">    <span class="comment">//标记为transient，表示实例变量不能/不应该被序列化，在反序列化时，被恢复为默认值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">double</span> interest;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(String number, String name, String password, <span class="type">double</span> balance, <span class="type">double</span> interest)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.number = number;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">        <span class="built_in">this</span>.interest = interest;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">getInterestRate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> interestRate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setInterestRate</span><span class="params">(<span class="type">double</span> interestRate)</span> &#123;</span><br><span class="line">        Account.interestRate = interestRate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNumber</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNumber</span><span class="params">(String number)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getBalance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBalance</span><span class="params">(<span class="type">double</span> balance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getInterest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> interest;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setInterest</span><span class="params">(<span class="type">double</span> interest)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.interest = interest;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Account [number=&quot;</span> + number + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, password=&quot;</span> + password </span><br><span class="line">                + <span class="string">&quot;, balance=&quot;</span> + balance + <span class="string">&quot;, interest=&quot;</span> + interest + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">writeExternal</span><span class="params">(ObjectOutput out)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//程序员自己定制要序列化的内容，顺序等</span></span><br><span class="line">        <span class="comment">//这两个方法是在对象被序列化和反序列化的过程中，JVM帮我们调用</span></span><br><span class="line">        out.writeDouble(interestRate);<span class="comment">//设置静态的也序列化</span></span><br><span class="line">        out.writeUTF(name);</span><br><span class="line">        out.writeDouble(interest);<span class="comment">//设置有transient也序列化</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readExternal</span><span class="params">(ObjectInput in)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        <span class="comment">//程序员自己定制要反序列化的内容，顺序等，建议与序列化的顺序一致</span></span><br><span class="line">        interestRate = in.readDouble();</span><br><span class="line">        name = in.readUTF();</span><br><span class="line">        interest = in.readDouble();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testobjectoutputstream-2"><figure class="highlight java"><figcaption><span>TestObjectOutputStream.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.memories.io.Account;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestObjectOutputStream</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//序列化一个数组，要求元素类型实现Serializable接口。</span></span><br><span class="line">        Account.setInterestRate(<span class="number">0.0024</span>);</span><br><span class="line">        <span class="type">Account</span> <span class="variable">account</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="string">&quot;111000111&quot;</span>, <span class="string">&quot;memories&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">1000.0</span>, <span class="number">2.4</span>);</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            oos = <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;account.dat&quot;</span>));</span><br><span class="line">            oos.writeObject(account);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                oos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testobjectoutputstream-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Account</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;<span class="comment">//增加serialVersionUID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">double</span> interestRate;</span><br><span class="line">    <span class="comment">//...  </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="system相关">System相关</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">|-System.in：标准输入设备，默认键盘。InputStream类型。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">setIn</span><span class="params">(InputStream in)</span>：重定向。</span><br><span class="line">        |-文件输入：<span class="string">&quot;new FileInputStream(文件地址)&quot;</span></span><br><span class="line">        |-键盘输入：<span class="string">&quot;new FileInputStream(FileDescriptor.in)&quot;</span></span><br><span class="line">|-System.out/err：标准输出设备，默认显示器。PrintStream类型。</span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">setOut</span><span class="params">(PrintStream out)</span>：重定向。</span><br><span class="line">        |-输出到文件：<span class="string">&quot;new PrintStream(文件地址)&quot;</span></span><br><span class="line">        |-输出到控制台：<span class="string">&quot;new PrintStream(new FileOutputStream(FileDescriptor.out))&quot;</span></span><br><span class="line">    |-<span class="keyword">void</span> <span class="title function_">setErr</span><span class="params">(PrintStream err)</span>：重定向。</span><br><span class="line">        |-输出到文件：<span class="string">&quot;new PrintStream(文件地址)&quot;</span></span><br><span class="line">        |-输出到控制台：<span class="string">&quot;new PrintStream(new FileOutputStream(FileDescriptor.err))&quot;</span></span><br><span class="line">|-java.util.Scanner：是一个可以使用正则表达式来解析基本类型和字符串的简单文本扫描器。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="testsystemin"><ul class="nav-tabs"><li class="tab active"><a href="#testsystemin-1">重定向In</a></li><li class="tab"><a href="#testsystemin-2">重定向Out</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testsystemin-1"><figure class="highlight java"><figcaption><span>TestSystemIn.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileDescriptor;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSystemIn</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="comment">//重定向从文件输入</span></span><br><span class="line">        System.setIn(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;myjava\\info.txt&quot;</span>));</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span>(input.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> input.nextLine();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">        <span class="comment">//重定向回键盘输入</span></span><br><span class="line">        System.setIn(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(FileDescriptor.in));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testsystemin-2"><figure class="highlight java"><figcaption><span>TestSystemOut.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileDescriptor;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSystemOut</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="comment">//重定向输出到文件</span></span><br><span class="line">        System.setOut(<span class="keyword">new</span> <span class="title class_">PrintStream</span>(<span class="string">&quot;myjava\\print.txt&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">        <span class="comment">//重定向回控制台</span></span><br><span class="line">        System.setOut(<span class="keyword">new</span> <span class="title class_">PrintStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(FileDescriptor.out)));</span><br><span class="line">        System.out.println(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<div class="tabs" id="testscannersystemin"><ul class="nav-tabs"><li class="tab active"><a href="#testscannersystemin-1">从键盘输入数据</a></li><li class="tab"><a href="#testscannersystemin-2">从文件扫描数据</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testscannersystemin-1"><figure class="highlight java"><figcaption><span>TestScannerSystemIn.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestScannerSystemIn</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;姓名：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> input.nextLine();</span><br><span class="line">        System.out.print(<span class="string">&quot;性别：&quot;</span>);</span><br><span class="line">        <span class="type">char</span> <span class="variable">gender</span> <span class="operator">=</span> input.next().charAt(<span class="number">0</span>);</span><br><span class="line">        System.out.print(<span class="string">&quot;年龄：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;电话：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">phone</span> <span class="operator">=</span> input.next();</span><br><span class="line">        System.out.print(<span class="string">&quot;邮箱：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">email</span> <span class="operator">=</span> input.next();</span><br><span class="line">        System.out.println(<span class="string">&quot;姓名：&quot;</span> + name);</span><br><span class="line">        System.out.println(<span class="string">&quot;性别：&quot;</span> + gender);</span><br><span class="line">        System.out.println(<span class="string">&quot;年龄：&quot;</span> + age);</span><br><span class="line">        System.out.println(<span class="string">&quot;电话：&quot;</span> + phone);</span><br><span class="line">        System.out.println(<span class="string">&quot;邮箱：&quot;</span> + email);</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testscannersystemin-2"><figure class="highlight java"><figcaption><span>TestScanner.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestScanner</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;myjava\\info.txt&quot;</span>));</span><br><span class="line">        <span class="keyword">while</span>(input.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> input.nextLine();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="jdk1.7新特性">JDK1.7新特性</h3>
<p><code>try..with..resources</code>是为资源关闭专门设计的try..catch的语法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//凡是在try()中声明的资源对象，都会自动关闭，无论&#123;&#125;部分是否发生异常。</span></span><br><span class="line"><span class="keyword">try</span>(</span><br><span class="line">    <span class="comment">//多了()，这里声明需要自动关闭的资源对象</span></span><br><span class="line">)&#123;</span><br><span class="line">    <span class="comment">//逻辑代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型 e)&#123;</span><br><span class="line">    <span class="comment">//异常处理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTryWithResource</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy1</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">//只有try</span></span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src);</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dest);</span><br><span class="line">        )&#123;</span><br><span class="line">            <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                output.write(data, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copy2</span><span class="params">(File src, File dest)</span> &#123;</span><br><span class="line">        <span class="comment">//try..catch</span></span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src);</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">output</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(dest);</span><br><span class="line">        )&#123;</span><br><span class="line">            <span class="type">byte</span>[] data = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                output.write(data, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(FileNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="io和nio">IO和NIO</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">|-java.io：阻塞式IO。</span><br><span class="line">|-java.nio：非阻塞式的IO。使用复杂，需要很好的设计才能发挥效果，新手不建议使用。</span><br><span class="line">    |-提供了Path接口、和Paths工具类。</span><br><span class="line">    |-Path：接口，File类的升级版，但它和平台无关，用路径名表示一个目录或文件。</span><br><span class="line">    |-Paths：工具类，用来创建Path接口的对象。</span><br><span class="line">    |-Files：工具类，有大量静态的工具方法处理文件：</span><br><span class="line">        |-List&lt;String&gt; <span class="title function_">readAllLines</span><span class="params">(Path path, Charset cs)</span>：读取指定文件的所有文本行到一个列表中。</span><br><span class="line">        |-Stream&lt;String&gt; <span class="title function_">lines</span><span class="params">(Path path, Charset cs)</span>：返回一个Stream对象，用于读取指定文件的所有文本行。</span><br><span class="line">        |-Files.move(Path source, Path target, CopyOption... options)：剪切文件。</span><br><span class="line">        |-Files.copy(src, dest, CopyOption... options)：复制文件。</span><br><span class="line">        |-Files.delete(Path path)：功能类似于File类的delete()，不同的地方是当文件不存在时，会报异常。</span><br><span class="line">        |-Files.deleteIfExists(Path path)：功能相同于File类的delete()，存在就删除，不存在就什么也不干。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>TestNIO.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.StandardCopyOption;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestNIO</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//以前的IO操作</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;index.html&quot;</span>);</span><br><span class="line">        <span class="comment">//Java7开始可以这样写</span></span><br><span class="line">        <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;index.html&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">file</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;testIO&quot;</span>, <span class="string">&quot;java&quot;</span> ,<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//获取目录总共级别</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> file.getNameCount();</span><br><span class="line">        System.out.println(count);<span class="comment">//3</span></span><br><span class="line">        <span class="comment">//获取指定级的目录名</span></span><br><span class="line">        <span class="type">Path</span> <span class="variable">name</span> <span class="operator">=</span> file.getName(<span class="number">0</span>);</span><br><span class="line">        System.out.println(name);<span class="comment">//testIO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">src</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">dest</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;2.txt&quot;</span>);</span><br><span class="line">        <span class="type">Path</span> <span class="variable">newdest</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;testIO&quot;</span>,<span class="string">&quot;java&quot;</span>,<span class="string">&quot;2.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//REPLACE_EXISTING表示文件存在时替换</span></span><br><span class="line">        Files.copy(src, dest, StandardCopyOption.REPLACE_EXISTING);</span><br><span class="line">        <span class="comment">//文件不存在时报异常</span></span><br><span class="line">        Files.delete(src);</span><br><span class="line">        <span class="comment">//剪切</span></span><br><span class="line">        Files.move(dest, newdest, StandardCopyOption.REPLACE_EXISTING);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">Path</span> <span class="variable">file</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;testIO&quot;</span>,<span class="string">&quot;java&quot;</span>,<span class="string">&quot;2.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//读取所有行数据，不需要IO流、编码解码、缓冲流</span></span><br><span class="line">        List&lt;String&gt; allLines = Files.readAllLines(file, StandardCharsets.UTF_8);</span><br><span class="line">        <span class="keyword">for</span> (String string : allLines) &#123;</span><br><span class="line">            System.out.println(string);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//使用Stream对象</span></span><br><span class="line">        Stream&lt;String&gt; allLines = Files.lines(file, StandardCharsets.UTF_8);</span><br><span class="line">        lines.forEach(line -&gt; &#123;</span><br><span class="line">            String[] words = line.split(<span class="string">&quot;\\s+&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Line: &quot;</span> + line + <span class="string">&quot;, Word Count: &quot;</span> + words.length);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/27/Java/24.Java%E6%B3%9B%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/02/27/Java/24.Java%E6%B3%9B%E5%9E%8B/" class="post-title-link" itemprop="url">Java泛型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-27 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-27T00:00:00+08:00">2020-02-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>14 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="集合遇到问题">集合遇到问题</h2>
<p>前一章讲集合时，说过一个问题，集合在元素存入时都设置为Object类型，当从集合get后赋值给其他变量时要强制转换成存入时的类型，但我们不可能记住集合里每个元素的类型。</p>
<p>集合之所以讲元素存入设置成Object类型，是考虑具有很好的通用性，但这样做也带来了两个问题：<br />
1.<strong>集合对元素类型没有任何限制</strong>，这样可能引发一些问题：例如只想存储字符串对象，却不小心把Integer对象轻易的放进去，因为编译期间没有类型检查。<br />
2.由于把对象“丢进”集合时，在编译期间，集合就忘记了对象的实际类型，集合只知道它盛装的是Object，因此取出集合元素后，该对象的<strong>编译时类型就变成了Object类型</strong>（其实际的运行时类型没变），如果要<strong>使用还需要强制类型转换</strong>，这种强制类型转换既会增加编程的复杂度，也可能引发ClassCastException。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestListErr</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">List</span> <span class="variable">strList</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();<span class="comment">//</span></span><br><span class="line">        strList.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        strList.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">        strList.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        strList.add(<span class="number">666</span>);<span class="comment">//本来只想装字符串对象，“不小心”把Integer对象装进去了</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;strList.size(); i++) &#123;</span><br><span class="line">            <span class="comment">//取出元素是Object类型，要强转，最后一个元素不能强转String，报ClassCastException错误</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> (String) strList.get(i);</span><br><span class="line">            System.out.println( str + <span class="string">&quot;的长度：&quot;</span> + str.length());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="泛型解决问题">泛型解决问题</h2>
<p>如下所示，a、b因为不确定值，提供了<strong>形参</strong>这种方式，泛型作用相同，可看作是<strong>类型形参</strong>，在实际使用时指定具体类型，叫<strong>类型实参</strong>。<br />
<strong>类型形参</strong>、<strong>类型实参</strong>格式都是<code>&lt;类型&gt;</code>。<br />
<div class="tabs" id="形参"><ul class="nav-tabs"><li class="tab active"><a href="#形参-1">形参</a></li><li class="tab"><a href="#形参-2">泛型</a></li></ul><div class="tab-content"><div class="tab-pane active" id="形参-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;<span class="comment">//形参</span></span><br><span class="line">    ArrayList&lt;String&gt; strList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();<span class="comment">//泛型，String是类型实参</span></span><br><span class="line">    <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="形参-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;String&gt; strList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();<span class="comment">//泛型，String是类型实参</span></span><br><span class="line">        strList.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="comment">//strList.add(666);//编译器会阻止我们把Integer对象装进去</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;strList.size(); i++) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> strList.get(i); <span class="comment">//因为strList中都是String，所以不需要强制类型转换</span></span><br><span class="line">            System.out.println(str + <span class="string">&quot;的长度：&quot;</span> + str.length());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<p>有无泛型时的对比：<br />
<img src="/images/Java简介和环境搭建/泛型1.png" width="70%"><br />
<img src="/images/Java简介和环境搭建/泛型2.png" width="70%"></p>
<h2 id="类和接口中">类和接口中</h2>
<div class="tabs" id="片段"><ul class="nav-tabs"><li class="tab active"><a href="#片段-1">ArrayList</a></li><li class="tab"><a href="#片段-2">Iterator</a></li><li class="tab"><a href="#片段-3">Map</a></li></ul><div class="tab-content"><div class="tab-pane active" id="片段-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt;&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="片段-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;E&gt; &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line">    E <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="片段-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Map</span>&lt;K,V&gt; &#123;</span><br><span class="line">    V <span class="title function_">get</span><span class="params">(Object key)</span>;</span><br><span class="line">    V <span class="title function_">put</span><span class="params">(K key, V value)</span>;</span><br><span class="line">    Set&lt;K&gt; <span class="title function_">keySet</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p>从上面的代码中，可看出在定义类、接口时指定<strong>类型形参</strong>，例如：E、K、V，当使用这些集合时，就可以为E、K、V指定具体的<strong>类型实参</strong>。</p>
<h3 id="泛型形参">泛型形参</h3>
<p>1.泛型形参命名一般使用单个的大写字母，多个形参用逗号分割。常见形参字母和意思：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|-T：Type。</span><br><span class="line">|-K, V：Key，Value。</span><br><span class="line">|-E：Element。</span><br></pre></td></tr></table></figure></p>
<p>2.泛型形参的特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|-泛型可以用在任何类、接口的声明，还有其内部的属性类型、方法的形参类型、方法返回值类型等都可以使用泛型形参。</span><br><span class="line">|-但是<span class="string">&quot;类、接口上的泛型形参，不能用于声明静态变量，也不能用在静态方法中&quot;</span>。</span><br><span class="line">    |-因为静态成员的初始化是随着类的初始化而初始化的，此时泛型实参无法指定，那么泛型形参的类型就不确定。</span><br><span class="line">    |-所以请不要在静态成员上使用类、接口上的泛型形参。</span><br><span class="line">|-带泛型声明的类，为该类定义构造器时，不需要增加泛型声明。</span><br><span class="line">    |-例如：Student&lt;T&gt;类定义的构造器依然是Student()，而不是Student&lt;T&gt;。</span><br><span class="line">    |-但调用构造器时可使用Student&lt;T&gt;的形式，而且应该为T传入实际的类型实参。</span><br><span class="line">|-不能在<span class="keyword">try</span>-<span class="keyword">catch</span>中、<span class="keyword">throws</span>后面使用泛型形参。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义学生类，其中的学生成绩是整数、小数、字符串类型。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&lt;T&gt; &#123;<span class="comment">//泛型类</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> T score;<span class="comment">//泛型形参</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, T score)</span> &#123;<span class="comment">//泛型形参</span></span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getScore</span><span class="params">()</span> &#123;<span class="comment">//泛型方法</span></span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(T score)</span> &#123;<span class="comment">//泛型形参</span></span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestStudent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Student&lt;Integer&gt; s1 = <span class="keyword">new</span> <span class="title class_">Student</span>&lt;Integer&gt;(<span class="string">&quot;张三&quot;</span>,<span class="number">95</span>);<span class="comment">//泛型实参Integer</span></span><br><span class="line">        Student&lt;String&gt; s2 = <span class="keyword">new</span> <span class="title class_">Student</span>&lt;String&gt;(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;优秀&quot;</span>);<span class="comment">//泛型实参String</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Student&lt;Double&gt; s3 = <span class="keyword">new</span> <span class="title class_">Student</span>&lt;Double&gt;(<span class="string">&quot;张三&quot;</span>,<span class="number">80.5</span>);<span class="comment">//泛型实参Double</span></span><br><span class="line">        &#125;<span class="keyword">catch</span>(T t)&#123;&#125;<span class="comment">//错误，try-catch中不能使用泛型形参</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.如何继承父类、父接口的泛型形参：必须在父类、父接口、子类、子接口中都要<strong>保留一致的泛型</strong>。<br />
<div class="tabs" id="继承"><ul class="nav-tabs"><li class="tab active"><a href="#继承-1">自定义继承</a></li><li class="tab"><a href="#继承-2">集合的继承</a></li></ul><div class="tab-content"><div class="tab-pane active" id="继承-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SubArrayList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">ArrayList</span>&lt;E&gt;&#123;&#125;<span class="comment">//子类和父类泛型形参都是E</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubArrayList</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">ArrayList</span>&lt;T&gt;&#123;&#125;<span class="comment">//子类中泛型形参是T，父类中使用泛型形参的位置也自动修改为T</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="继承-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//集合中大量是继承泛型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterable</span>&lt;T&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Collection</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Iterable</span>&lt;E&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">List</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Collection</span>&lt;E&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt;</span><br><span class="line">       <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable&#123;&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<p>4.泛型形参范围：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|-泛型形参不设定上限可以代表任意引用数据类型。</span><br><span class="line">|-泛型形参设定了上限，那么只能指定为该父类本身或其各子类类型。</span><br><span class="line">|-泛型形参设定上限格式：</span><br><span class="line">    |-类至多一个上限：<span class="string">&quot;&lt;T extends 父类上限&gt;&quot;</span></span><br><span class="line">    |-接口可多个上限：<span class="string">&quot;&lt;T extends 父类上限 &amp; 接口上限1 &amp; 接口上限2...&gt;&quot;</span></span><br><span class="line">        |-表明该类型形参，必须是其父类本身或其子类，并且实现多个上限接口。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="范围"><ul class="nav-tabs"><li class="tab active"><a href="#范围-1">类上限</a></li><li class="tab"><a href="#范围-2">类+接口上限</a></li></ul><div class="tab-content"><div class="tab-pane active" id="范围-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义学生类，其中的学生成绩可以是Integer、Float、Double...</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Number</span>&gt; &#123;&#125;<span class="comment">//T上限类是Number</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="范围-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//T上限类是Number且实现了Serializable接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Number</span> &amp; java.io.Serializable&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="泛型实参">泛型实参</h3>
<p>泛型实参的要求：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|-泛型实参必须是引用数据类型，不能是基本数据类型，因为集合中只能存储对象。</span><br><span class="line">|-泛型实参什么时候指定：</span><br><span class="line">    |-声明泛型类、接口变量时。</span><br><span class="line">        |-泛型擦除：没指定泛型实参，自动使用泛型上限类型。</span><br><span class="line">    |-创建泛型类对象时。</span><br><span class="line">    |-继承泛型类、实现泛型接口时，如果子类不延续使用该泛型，那么必须明确指定实际类型，此时子类不再是泛型类了。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="泛型实参"><ul class="nav-tabs"><li class="tab active"><a href="#泛型实参-1">声明、创建对象</a></li><li class="tab"><a href="#泛型实参-2">泛型擦除</a></li><li class="tab"><a href="#泛型实参-3">继承、实现接口</a></li></ul><div class="tab-content"><div class="tab-pane active" id="泛型实参-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDK1.7之前（=号左边声明，右边创建对象）</span></span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="comment">//JDK1.7之后支持如下简化写法</span></span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//组长姓名作为key，多个组员姓名用ArrayList装起来作为value，放到HashMap中</span></span><br><span class="line">HashMap&lt;String, ArrayList&lt;String&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, ArrayList&lt;String&gt;&gt;();</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="泛型实参-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&lt;T <span class="keyword">extends</span> <span class="title class_">Number</span> &amp; java.io.Serializable&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> T score;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, T score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getScore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestErase</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();<span class="comment">//声明未指定泛型实参</span></span><br><span class="line">        list.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> list.get(<span class="number">1</span>);<span class="comment">//泛型默认上限Object处理</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">12</span>);<span class="comment">//声明未指定泛型实参</span></span><br><span class="line">        <span class="type">Number</span> <span class="variable">score</span> <span class="operator">=</span> stu.getScore();<span class="comment">//泛型默认上限Number处理</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="泛型实参-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//此处ArrayList&lt;String&gt;不能写成ArrayList&lt;E&gt;</span></span><br><span class="line"><span class="comment">//因为MyArrayList不再是泛型类了，因此E必须给出具体的类型</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyArrayList</span> <span class="keyword">extends</span> <span class="title class_">ArrayList</span>&lt;String&gt;&#123;&#125;<span class="comment">//继承泛型类</span></span><br><span class="line"><span class="comment">//实现泛型接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Employee&gt;&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Employee o)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="泛型方法">泛型方法</h3>
<p>1.泛型方法的声明：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修饰符后面多了泛型形参</span></span><br><span class="line">[修饰符] &lt;泛型形参列表&gt; 返回类型 方法名([形参列表]) 抛出的异常列表&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.泛型方法的特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//什么时候使用</span></span><br><span class="line">|-当定义类、接口时没有使用类型形参、或者定义的形参不合适，在某个方法（静态/非静态）定义时。</span><br><span class="line">|-当某个静态方法想要使用类型形参时。</span><br><span class="line"><span class="comment">//使用注意事项</span></span><br><span class="line">方法声明中定义的泛型形参，只能在当前方法中使用，和其他方法无关。</span><br><span class="line">方法声明中定义的泛型形参，无需显式传入实际类型参数，编译器可以根据实参类型直接推断形参的实际类型。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="comment">//写一个方法，将一个数组的所有元素添加到一个Collection集合中</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestGenericMethod</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        String[] array = &#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>,<span class="string">&quot;java&quot;</span>&#125;;</span><br><span class="line">        Collection&lt;String&gt; coll = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        fromArrayToCollection(array, coll);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//编译报错，因为形参Object不接收String实参，它俩不是父子类关系</span></span><br><span class="line">    <span class="comment">// public static void fromArrayToCollection(Object[] a, Collection&lt;Object&gt; c)&#123;</span></span><br><span class="line">    <span class="comment">//     for (Object object : a) &#123;</span></span><br><span class="line">    <span class="comment">//         c.add(object);</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">fromArrayToCollection</span><span class="params">(T[] a, Collection&lt;T&gt; c)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (T object : a) &#123;</span><br><span class="line">            c.add(object);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.泛型方法的范围，和泛型形参规则一样：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Graphic</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">double</span> <span class="title function_">getArea</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Circle</span> <span class="keyword">extends</span> <span class="title class_">Graphic</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> radius;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Circle</span><span class="params">(<span class="type">double</span> radius)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.radius = radius;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getArea</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.PI * radius * radius;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Rectangle</span> <span class="keyword">extends</span> <span class="title class_">Graphic</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> length;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> width;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.length = length;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getArea</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> length * width;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestGraphic</span> &#123;</span><br><span class="line">    <span class="comment">//定义一个方法，可以求多个图形的面积</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Graphic</span>&gt; <span class="keyword">void</span> <span class="title function_">printArea</span><span class="params">(List&lt;T&gt; graphics)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (T t : graphics) &#123;</span><br><span class="line">            System.out.println(t.getArea());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;Circle&gt; cList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Circle&gt;();<span class="comment">//实际使用方法时传入实参类型</span></span><br><span class="line">        cList.add(<span class="keyword">new</span> <span class="title class_">Circle</span>(<span class="number">1.2</span>));</span><br><span class="line">        cList.add(<span class="keyword">new</span> <span class="title class_">Circle</span>(<span class="number">2.3</span>));</span><br><span class="line">        printArea(cList);</span><br><span class="line">        ArrayList&lt;Rectangle&gt; rList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Rectangle&gt;();<span class="comment">//实际使用方法时传入实参类型</span></span><br><span class="line">        rList.add(<span class="keyword">new</span> <span class="title class_">Rectangle</span>(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line">        rList.add(<span class="keyword">new</span> <span class="title class_">Rectangle</span>(<span class="number">2</span>,<span class="number">3</span>));</span><br><span class="line">        printArea(rList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="泛型通配符">泛型通配符</h3>
<p>1.当声明泛型形参，但<strong>不确定具体泛型、且内部对形参无增删操作</strong>时，可使用泛型通配符。<br />
2.使用泛型通配符，有范围问题需要考虑：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|-泛型通配符表示可接受<span class="string">&quot;任意类型&quot;</span>，但有时想接收<span class="string">&quot;部分类型&quot;</span>：</span><br><span class="line">    |-单一参数，范围上限：<span class="string">&quot;&lt;? extends 泛型&gt;&quot;</span></span><br><span class="line">    |-多个参数，范围下限：<span class="string">&quot;&lt;? super 泛型&gt;&quot;</span></span><br><span class="line"><span class="comment">//上下限不能同时设定，会报错</span></span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="通配符"><ul class="nav-tabs"><li class="tab active"><a href="#通配符-1">泛型通配符</a></li><li class="tab"><a href="#通配符-2">泛型通配符上限</a></li><li class="tab"><a href="#通配符-3">泛型通配符下限</a></li><li class="tab"><a href="#通配符-4">泛型通配符不能同时出现</a></li></ul><div class="tab-content"><div class="tab-pane active" id="通配符-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//List是接口，且没指定List具体类型，所以有警告</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(List c)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; c.size(); i++) &#123;</span><br><span class="line">        System.out.println(c.get(i));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//List接口指定了类型为Object，泛型实参被限定为Object了</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">(List&lt;Object&gt; c)</span>&#123;&#125;</span><br><span class="line"><span class="comment">//声明成泛型方法，但只接受T类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">(List&lt;T&gt; c)</span>&#123;&#125;</span><br><span class="line"><span class="comment">//泛型通配符，可以是任意泛型，但内部对形参无增删操作，不能操作（因为不确定c具体类型）。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">(List&lt;?&gt; c)</span>&#123;&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="通配符-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抽象父类Graphic，其子类Circle和Rectangle已实现求面积printArea方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestGraphic</span> &#123;</span><br><span class="line">    <span class="comment">//之前使用泛型方法，限定为T类型，T上限为Graphic</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Graphic</span>&gt; <span class="keyword">void</span> <span class="title function_">printArea</span><span class="params">(List&lt;T&gt; graphics)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (T t : graphics) &#123;</span><br><span class="line">            System.out.println(t.getArea());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//现在使用通配符，但因为能接受任意类型，内部使用必须强转</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArea</span><span class="params">(List&lt;?&gt; graphics)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Object obj : graphics) &#123;</span><br><span class="line">            <span class="type">Graphic</span> <span class="variable">g</span> <span class="operator">=</span> (Graphic) obj;<span class="comment">//强转</span></span><br><span class="line">            System.out.println(g.getArea());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//使用通配符，加上限限定即可</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printArea</span><span class="params">(List&lt;? extends Graphic&gt; graphics)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Graphic g : graphics) &#123;</span><br><span class="line">            System.out.println(g.getArea());</span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="通配符-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//赋值src所有元素到dest，因为dest需要接受src的所有元素，所以隐含类型范围条件是dest&gt;=src</span></span><br><span class="line"><span class="comment">//1.忽略dest上限，限定src上限</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">copy</span><span class="params">(Collection&lt;T&gt; dest, Collection&lt;? extends T&gt; src)</span>&#123;</span><br><span class="line">    <span class="type">T</span> <span class="variable">last</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//返回最后一个元素</span></span><br><span class="line">    <span class="keyword">for</span> (T t : src) &#123;</span><br><span class="line">        dest.add(t);</span><br><span class="line">        last = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> last;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//上面有一个错误，因为src使用通配符，是不确定类型的，只知道上限是T类型，</span></span><br><span class="line"><span class="comment">//那么返回的last按照T类型返回，是Object类型，但这样丢失了src元素的类型String信息</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    ArrayList&lt;String&gt; src = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">    src.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    ArrayList&lt;Object&gt; dest = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Object&gt;();</span><br><span class="line">    <span class="type">Object</span> <span class="variable">last</span> <span class="operator">=</span> copy(dest, src);<span class="comment">//返回类型只能是Object</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.忽略src上限，限定dest下限</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">copy</span><span class="params">(Collection&lt;? <span class="built_in">super</span> T&gt; dest, Collection&lt;T&gt; src)</span>&#123;&#125;<span class="comment">//省略内部代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    ArrayList&lt;String&gt; src = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">    src.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    ArrayList&lt;Object&gt; dest = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Object&gt;();</span><br><span class="line">    <span class="type">String</span> <span class="variable">last</span> <span class="operator">=</span> copy(dest, src);<span class="comment">//记住了src返回类型是String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="通配符-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上下限同时出现会报错</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">copy</span><span class="params">(Collection&lt;? <span class="built_in">super</span> T&gt; dest,Collection&lt;T&gt; src)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">copy</span><span class="params">(Collection&lt;T&gt; dest,Collection&lt;? extends T&gt; src)</span>&#123;&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="泛型数组">泛型数组</h3>
<p>1.动态数组使用泛型时，看似生成了很多子类，但不能当成子类去用多态，这些子类也不会生成新的class文件，比如：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestArrayList</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ArrayList&lt;Integer&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">        ArrayList&lt;String&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        System.out.println(list1.getClass());<span class="comment">//ArrayList</span></span><br><span class="line">        System.out.println(list2.getClass());<span class="comment">//ArrayList</span></span><br><span class="line">        System.out.println(list1.getClass() == list2.getClass());<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//错误的，ArrayList&lt;String&gt;和ArrayList&lt;Object&gt;不能转换</span></span><br><span class="line">        ArrayList&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">        <span class="comment">//数组可以，String[]是Object[]子类，且生成新的class类</span></span><br><span class="line">        <span class="comment">//但不建议这样写，当存入非String元素时，编译不报错，运行时会</span></span><br><span class="line">        Object[] arr = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">5</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.泛型不支持instanceof判断，由于系统中并不会真正生成泛型类，所以如下操作也都是不允许的：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"><span class="keyword">if</span>(list <span class="keyword">instanceof</span> ArrayList&lt;String&gt;)&#123;&#125;<span class="comment">//编译错误，instanceof后面不能使用泛型类</span></span><br></pre></td></tr></table></figure></p>
<p>3.普通数组使用泛型时，数组的元素类型<strong>不能包含类型变量、类型形参，但可以是类型通配符（无范围限制的）</strong>：<br />
<div class="tabs" id="泛型数组1"><ul class="nav-tabs"><li class="tab active"><a href="#泛型数组1-1">正确使用</a></li><li class="tab"><a href="#泛型数组1-2">错误使用</a></li></ul><div class="tab-content"><div class="tab-pane active" id="泛型数组1-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;?&gt;[] arr = <span class="keyword">new</span> <span class="title class_">List</span>&lt;?&gt;[<span class="number">2</span>];<span class="comment">//泛型通配符，而且无范围限制</span></span><br><span class="line">    arr[<span class="number">0</span>] = Arrays.asList(<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>);</span><br><span class="line">    arr[<span class="number">1</span>] = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">for</span> (List&lt;?&gt; list : arr) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Object object : list) &#123;</span><br><span class="line">            System.out.println(object);<span class="comment">//hello、world、1、2、3</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="泛型数组1-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//编译错误</span></span><br><span class="line">    List&lt;String&gt;[] arr = <span class="keyword">new</span> <span class="title class_">List</span>&lt;String&gt;[<span class="number">2</span>];</span><br><span class="line">    ArrayList&lt;String&gt;[] array = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;[<span class="number">5</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>&lt;T&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> T[] arr;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyClass</span><span class="params">(<span class="type">int</span> length)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.arr = <span class="keyword">new</span> <span class="title class_">T</span>[length]; <span class="comment">//编译错误</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h2 id="综合练习">综合练习</h2>
<p>已知，有省份Provice类型（属性：省份编号id、名称name），有城市City类型（属性：城市编号id、名称name、所属省份编号pid）。<br />
如果要存储如下信息到一个Map中，该如何指定泛型呢？其中key为省份对象，value为该省份对应的所有城市对象。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>:北京市</span><br><span class="line">    <span class="number">1</span>:北京市</span><br><span class="line"><span class="number">2</span>:海南省</span><br><span class="line">    <span class="number">1</span>:海口市</span><br><span class="line">    <span class="number">2</span>:三亚市</span><br></pre></td></tr></table></figure></p>
<p>分析：key的类型为Provice，而value要保存多个城市对象，因此是一个List或Set，其泛型实参为City类型：<br />
<div class="tabs" id="练习"><ul class="nav-tabs"><li class="tab active"><a href="#练习-1">Province</a></li><li class="tab"><a href="#练习-2">City</a></li><li class="tab"><a href="#练习-3">使用</a></li></ul><div class="tab-content"><div class="tab-pane active" id="练习-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Province</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Province&gt;&#123;<span class="comment">//接口指定泛型实参</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Province</span><span class="params">(<span class="type">int</span> id, String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Province</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id + <span class="string">&quot;:&quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Province o)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.id - o.id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">City</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;City&gt;&#123;<span class="comment">//接口指定泛型实参</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> pid;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">City</span><span class="params">(<span class="type">int</span> id, String name, <span class="type">int</span> pid)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.pid = pid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">City</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getPid</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPid</span><span class="params">(<span class="type">int</span> pid)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pid = pid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id + <span class="string">&quot;:&quot;</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(City o)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.id - o.id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Map.Entry;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeMap;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AreaManager</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//TreeSet存储，它的key为Province，value是一个TreeSet&lt;City&gt;</span></span><br><span class="line">        TreeMap&lt;Province,TreeSet&lt;City&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;Province,TreeSet&lt;City&gt;&gt;();</span><br><span class="line"></span><br><span class="line">        TreeSet&lt;City&gt; bj = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;City&gt;();</span><br><span class="line">        bj.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="number">1</span>,<span class="string">&quot;北京市&quot;</span>,<span class="number">1</span>));</span><br><span class="line">        map.put(<span class="keyword">new</span> <span class="title class_">Province</span>(<span class="number">1</span>,<span class="string">&quot;北京市&quot;</span>), bj);</span><br><span class="line">        </span><br><span class="line">        TreeSet&lt;City&gt; hn = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;City&gt;();</span><br><span class="line">        hn.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="number">1</span>,<span class="string">&quot;海口市&quot;</span>,<span class="number">2</span>));</span><br><span class="line">        hn.add(<span class="keyword">new</span> <span class="title class_">City</span>(<span class="number">2</span>,<span class="string">&quot;三亚市&quot;</span>,<span class="number">2</span>));</span><br><span class="line">        map.put(<span class="keyword">new</span> <span class="title class_">Province</span>(<span class="number">2</span>,<span class="string">&quot;海南省&quot;</span>), hn);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//Map中实际存储的是一个个的Entry对象，所有的Entry就组成了一个Set集合</span></span><br><span class="line">        <span class="comment">//而Entry类型的key是Province，value是TreeSet&lt;City&gt;</span></span><br><span class="line">        Set&lt;Entry&lt;Province, TreeSet&lt;City&gt;&gt;&gt; entrySet = map.entrySet();</span><br><span class="line">        <span class="keyword">for</span> (Entry&lt;Province, TreeSet&lt;City&gt;&gt; entry : entrySet) &#123;</span><br><span class="line">            <span class="type">Province</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            System.out.println(key);</span><br><span class="line">            TreeSet&lt;City&gt; value = entry.getValue();</span><br><span class="line">            <span class="keyword">for</span> (City city : value) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;\t&quot;</span> + city);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/24/Java/23.Java%E9%9B%86%E5%90%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/02/24/Java/23.Java%E9%9B%86%E5%90%88/" class="post-title-link" itemprop="url">Java集合</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-24 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-24T00:00:00+08:00">2020-02-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>15k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>54 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="数据结构">数据结构</h2>
<p>数据结构本质上都可看作容器，就是用来装对象的。要搞清楚两点：（1）<strong>如何存储</strong>（2）<strong>存储特点</strong>。</p>
<p>1.数据结构的分类、特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">|-逻辑结构：以物理结构为基础，在其上进行操作。同一种逻辑结构可以有多种物理结构，比如树可以用顺序存储，也可以用链式存储。</span><br><span class="line">    |-线性结构：数据元素之间存在着<span class="string">&quot;一对一&quot;</span>的线性关系。</span><br><span class="line">        |-动态数组</span><br><span class="line">        |-栈</span><br><span class="line">        |-队列</span><br><span class="line">    |-非线性结构：数据元素之间存在着<span class="string">&quot;一对多&quot;</span>的非线性关系。</span><br><span class="line">        |-树</span><br><span class="line">        |-图</span><br><span class="line">|-物理结构：就是存储结构，包括数据元素的表示和关系的表示。</span><br><span class="line">    |-顺序存储（顺序表）：元素是相邻的，内存中需要开辟连续的存储空间。</span><br><span class="line">        |-访问速度快，因为有了首地址，然后根据下标，直接就可以找到对应的元素。</span><br><span class="line">        |-内存比较吃紧时，找一整块空间不好找。</span><br><span class="line">    |-链式存储（链表）：元素不一定是相邻的，内存中可用非连续的存储空间。</span><br><span class="line">        |-不要求空间连续，可以插空。</span><br><span class="line">        |-访问速度慢，要从头，挨个遍历。</span><br></pre></td></tr></table></figure></p>
<h3 id="数组">数组</h3>
<p>1.数组特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|-逻辑结构：线性结构。</span><br><span class="line">|-物理结构：顺序存储。</span><br><span class="line">意味着数组一个元素对应一个具体的对象、存储空间是连续的。</span><br></pre></td></tr></table></figure></p>
<p>2.数组操作：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增、删效率低，要移动元素，需要total辅助</span></span><br><span class="line">|-查：下标快速定位，每一个元素都有一个下标。</span><br><span class="line">|-增：total记录总数组元素个数</span><br><span class="line">    |-尾部增加<span class="string">&quot;数组名[total++]=新元素;&quot;</span></span><br><span class="line">    |-index位置插入<span class="string">&quot;先把index位置开始所有元素后移，然后`数组名[total++]=新元素;&quot;</span>。</span><br><span class="line">|-删：先把index后面的元素前移，然后<span class="string">&quot;数组名[total--]=null;&quot;</span>。</span><br><span class="line">|-改：直接重新赋值，<span class="string">&quot;数组名[index]=新元素;&quot;</span>。</span><br></pre></td></tr></table></figure></p>
<h3 id="动态数组">动态数组</h3>
<p>动态数组的物理结构基础是数组，逻辑结构增加可自动扩容、自动记录有效元素个数功能。<br />
Java自带的动态数组ArrayList在【List集合】中讲解。</p>
<p>自定义、使用动态数组：<br />
<div class="tabs" id="list"><ul class="nav-tabs"><li class="tab active"><a href="#list-1">自定义动态数组</a></li><li class="tab"><a href="#list-2">使用自定义动态数组</a></li></ul><div class="tab-content"><div class="tab-pane active" id="list-1"><figure class="highlight java"><figcaption><span>MyArrayList.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyArrayList</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] data;<span class="comment">//为什么使用Object，因为只是说这个容器是用来装对象的，但是不知道用来装什么对象。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> total;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyArrayList</span><span class="params">()</span>&#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">5</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkCapacity</span><span class="params">()</span> &#123;<span class="comment">//检查是否扩容</span></span><br><span class="line">        <span class="keyword">if</span>(total &gt;= data.length)&#123;</span><br><span class="line">            data = Arrays.copyOf(data, data.length*<span class="number">2</span>);<span class="comment">//如果data满了，就扩容为原来的2倍</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;<span class="comment">//返回实际元素的个数</span></span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">capacity</span><span class="params">()</span>&#123;<span class="comment">//返回数组的实际容量</span></span><br><span class="line">        <span class="keyword">return</span> data.length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object[] getAll()&#123;<span class="comment">//返回所有实际存储的元素</span></span><br><span class="line">        <span class="keyword">return</span> Arrays.copyOf(data, total);<span class="comment">//返回total个</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>&#123;<span class="comment">//获取[index]位置的元素</span></span><br><span class="line">        checkIndex(index);<span class="comment">//校验index的合理性范围</span></span><br><span class="line">        <span class="keyword">return</span> data[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkIndex</span><span class="params">(<span class="type">int</span> index)</span>&#123;<span class="comment">//检查[index]位置元素是否存在</span></span><br><span class="line">        <span class="keyword">if</span>(index&lt;<span class="number">0</span> || index&gt;=total)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(index+<span class="string">&quot;对应位置的元素不存在&quot;</span>);</span><br><span class="line">            <span class="comment">//throw new IndexOutOfBoundsException(index+&quot;越界&quot;);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查询某个元素的下标</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; total; i++) &#123;</span></span><br><span class="line">        <span class="comment">//     if(obj.equals(data[i]))&#123;//当obj是null对象时，obj.equals(data[i])和data[i].equals(obj)写法都有风险</span></span><br><span class="line">        <span class="comment">//         return i;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(data[i] == <span class="literal">null</span>)&#123;<span class="comment">//等价于 if(data[i] == obj)</span></span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(obj.equals(data[i]))&#123;<span class="comment">//内容相等即可，不需要严格的==</span></span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Object obj)</span>&#123;<span class="comment">//添加一个元素</span></span><br><span class="line">        checkCapacity();<span class="comment">//检查是否需要扩容</span></span><br><span class="line">        data[total++] = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, Object value)</span>&#123;<span class="comment">//在[index]位置插入元素value</span></span><br><span class="line">        checkIndex(index);<span class="comment">//1.校验index的合理性范围</span></span><br><span class="line">        checkCapacity();<span class="comment">//2.总长度是否够，需不需要扩容</span></span><br><span class="line">        <span class="comment">//3.[index]以及后面的元素往后移动，把[index]位置腾出来，total-index移动元素的个数</span></span><br><span class="line">        System.arraycopy(data, index, data, index+<span class="number">1</span>, total-index);</span><br><span class="line">        data[index] = value;<span class="comment">//4.放入新元素</span></span><br><span class="line">        total++;<span class="comment">//5.总元素个数增加</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span>&#123;<span class="comment">//删除[index]位置的元素</span></span><br><span class="line">        checkIndex(index);<span class="comment">//1.校验index的合理性范围</span></span><br><span class="line">        <span class="comment">//2.把[index+1]以及后面的元素往前移动，total-index-1移动元素的个数</span></span><br><span class="line">        System.arraycopy(data, index+<span class="number">1</span>, data, index, total-index-<span class="number">1</span>);</span><br><span class="line">        data[total-<span class="number">1</span>] = <span class="literal">null</span>;<span class="comment">//3.让垃圾回收器尽快回收</span></span><br><span class="line">        total--;<span class="comment">//4.总元素个数减少</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Object obj)</span>&#123;<span class="comment">//删除值为obj元素，重复的只删除第一个</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> indexOf(obj);<span class="comment">//1.查询obj的[index]</span></span><br><span class="line">        <span class="keyword">if</span>(index != -<span class="number">1</span>)&#123;<span class="comment">//2.1存在，删除元素</span></span><br><span class="line">            remove(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(obj + <span class="string">&quot;不存在&quot;</span>);<span class="comment">//2.2不存在，可以什么也不做，也可以抛异常</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, Object value)</span>&#123;<span class="comment">//修改[index]位置的元素</span></span><br><span class="line">        checkIndex(index);<span class="comment">//校验index的合理性范围</span></span><br><span class="line">        data[index] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">change</span><span class="params">(Object old, Object value)</span>&#123;<span class="comment">//修改值为old元素</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> indexOf(old);<span class="comment">//1.查询old的[index]</span></span><br><span class="line">        <span class="keyword">if</span>(index!=-<span class="number">1</span>)&#123;<span class="comment">//2.1存在，修改元素</span></span><br><span class="line">            set(index, value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(old + <span class="string">&quot;不存在&quot;</span>);<span class="comment">//2.2不存在，可以什么也不做，也可以抛异常</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="list-2"><figure class="highlight java"><figcaption><span>TestMyArrayList.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMyArrayList</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MyArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyArrayList</span>();<span class="comment">//创建一个容器对象</span></span><br><span class="line">        <span class="comment">//增加类、字符串、整数对象</span></span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Apple</span>());</span><br><span class="line">        list.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">            list.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;元素的个数：&quot;</span> + list.size());<span class="comment">//元素的个数：7</span></span><br><span class="line">        System.out.println(<span class="string">&quot;实际的容量：&quot;</span> + list.capacity());<span class="comment">//实际的容量：10，自动扩容了</span></span><br><span class="line">        <span class="comment">//增：插入</span></span><br><span class="line">        list.insert(<span class="number">0</span>, <span class="string">&quot;aa&quot;</span>);</span><br><span class="line">        list.insert(<span class="number">0</span>, <span class="string">&quot;bb&quot;</span>);</span><br><span class="line">        list.insert(<span class="number">0</span>, <span class="string">&quot;cc&quot;</span>);</span><br><span class="line">        list.insert(<span class="number">0</span>, <span class="string">&quot;dd&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;元素的个数：&quot;</span> + list.size());<span class="comment">//元素的个数：11</span></span><br><span class="line">        System.out.println(<span class="string">&quot;实际的容量：&quot;</span> + list.capacity());<span class="comment">//实际的容量：20，自动扩容了</span></span><br><span class="line">        <span class="comment">//增：null也可以作为有效元素</span></span><br><span class="line">        list.add(<span class="literal">null</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> list.indexOf(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(<span class="literal">null</span> + <span class="string">&quot;在容器的位置：&quot;</span> + index);<span class="comment">//null在容器的位置：11</span></span><br><span class="line">        <span class="comment">//查：下标为[5]的元素</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> list.get(<span class="number">5</span>);</span><br><span class="line">        System.out.println(obj);<span class="comment">//hello</span></span><br><span class="line">        <span class="comment">//改：下标为[5]的元素</span></span><br><span class="line">        list.set(<span class="number">5</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line">        obj = list.get(<span class="number">5</span>);</span><br><span class="line">        System.out.println(obj);<span class="comment">//world</span></span><br><span class="line">        <span class="comment">//删：下标为[2]的元素</span></span><br><span class="line">        Object[] all = list.getAll();</span><br><span class="line">        System.out.println(<span class="string">&quot;删除前：&quot;</span> + Arrays.toString(all));</span><br><span class="line">        <span class="comment">//删除前：[dd, cc, bb, aa, Apple@1fb3ebeb, world, 1, 2, 3, 4, 5, null]</span></span><br><span class="line">        list.remove(<span class="number">2</span>);</span><br><span class="line">        all = list.getAll();</span><br><span class="line">        System.out.println(<span class="string">&quot;删除后：&quot;</span> + Arrays.toString(all));</span><br><span class="line">        <span class="comment">//删除后：[dd, cc, aa, Apple@1fb3ebeb, world, 1, 2, 3, 4, 5, null]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="链表">链表</h3>
<p>1.二叉树的结点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单向链表结点</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node1</span>&#123;</span><br><span class="line">    Object data;<span class="comment">//数据</span></span><br><span class="line">    Node next;<span class="comment">//下个结点地址</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//双向链表结点</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node2</span>&#123;</span><br><span class="line">    Object data;<span class="comment">//数据</span></span><br><span class="line">    Node pre;<span class="comment">//上个结点地址</span></span><br><span class="line">    Node next;<span class="comment">//下个结点地址</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//二叉树结点</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node3</span>&#123;</span><br><span class="line">    Node parent;<span class="comment">//父结点地址</span></span><br><span class="line">    Object data;<span class="comment">//数据</span></span><br><span class="line">    Node left;<span class="comment">//左结点地址</span></span><br><span class="line">    Node right;<span class="comment">//右结点地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="单向链表"><ul class="nav-tabs"><li class="tab active"><a href="#单向链表-1">自定义单向链表</a></li><li class="tab"><a href="#单向链表-2">使用自定义单向链表</a></li></ul><div class="tab-content"><div class="tab-pane active" id="单向链表-1"><figure class="highlight java"><figcaption><span>SingleLinkedLista.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleLinkedList</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Node first;<span class="comment">//记录第一个结点的地址</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> total;<span class="comment">//总元素个数</span></span><br><span class="line">    <span class="comment">//内部类，因为这种Node结点的类型，只在单向链表中有用，用于存储和表示它的结点关系。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">        <span class="comment">//data、next没有私有化，是希望在外部类中可以不需要get/set，而是直接“结点对象.xx&quot;使用</span></span><br><span class="line">        Object data;<span class="comment">//因为数据可以是任意类型的对象，所以设计为Object</span></span><br><span class="line">        Node next;<span class="comment">//记录下一个结点的地址，因此类型是结点类型，并不是存储下一个结点对象</span></span><br><span class="line">        Node(Object data, Node next)&#123;</span><br><span class="line">            <span class="built_in">this</span>.data = data;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;<span class="comment">//返回链表长度</span></span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Object obj)</span>&#123;<span class="comment">//添加数据</span></span><br><span class="line">        <span class="comment">//1.把obj的数据，包装成一个Node类型结点对象，next为null表示新结点是最后一个结点</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(obj, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//2.把新结点“链接”当前链表的最后</span></span><br><span class="line">        <span class="keyword">if</span>(first == <span class="literal">null</span>)&#123;<span class="comment">//2.1 第一个节点为null，那么newNode是第一个节点</span></span><br><span class="line">            first = newNode;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//2.2 先找到目前的最后一个，把新结点链接到它的next中</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first;</span><br><span class="line">            <span class="keyword">while</span>(node.next != <span class="literal">null</span>)&#123;<span class="comment">//从头遍历到尾，得到尾结点</span></span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">            node.next = newNode;<span class="comment">//把newNode链接到尾结点的next中</span></span><br><span class="line">        &#125;</span><br><span class="line">        total++;<span class="comment">//3.总元素个数增加</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object[] getAll()&#123;<span class="comment">//返回链表全部元素</span></span><br><span class="line">        Object[] all = <span class="keyword">new</span> <span class="title class_">Object</span>[total];<span class="comment">//1.创建一个长度为total的数组</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;total; i++) &#123;<span class="comment">//2.遍历单向链表，每个结点的值存入all数组中</span></span><br><span class="line">            all[i] = node.data;</span><br><span class="line">            node = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> all;<span class="comment">//3.返回数组</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Object obj)</span>&#123;<span class="comment">//删除链表中的某个元素</span></span><br><span class="line">        <span class="comment">//1.先考虑obj是否为null</span></span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//2.考虑是否是第一个</span></span><br><span class="line">            <span class="keyword">if</span>(first != <span class="literal">null</span>)&#123;<span class="comment">//2.1第一个是否为null</span></span><br><span class="line">                <span class="keyword">if</span>(first.data == <span class="literal">null</span>)&#123;<span class="comment">//要删除的结点正好是第一个结点</span></span><br><span class="line">                    first = first.next;<span class="comment">//让第一个结点指向它的下一个</span></span><br><span class="line">                    total--;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//2.2要删除的不是第一个结点</span></span><br><span class="line">                <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first.next;</span><br><span class="line">                <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> first;</span><br><span class="line">                <span class="comment">//这里不包括最后一个，当node.next==null时不进入循环，而node.next==null是最后一个</span></span><br><span class="line">                <span class="keyword">while</span>(node.next != <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(node.data == <span class="literal">null</span>)&#123;</span><br><span class="line">                        last.next = node.next;</span><br><span class="line">                        total--;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    last = node;</span><br><span class="line">                    node = node.next;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(node.data == <span class="literal">null</span>)&#123;<span class="comment">//单独判断最后一个是否是要删除的结点</span></span><br><span class="line">                    last.next = <span class="literal">null</span>;<span class="comment">//要删除的是最后一个结点</span></span><br><span class="line">                    total--;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//2.考虑是否是第一个</span></span><br><span class="line">            <span class="keyword">if</span>(first != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(obj.equals(first.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">                    first = first.next;</span><br><span class="line">                    total--;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//2.2要删除的不是第一个结点</span></span><br><span class="line">                <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first.next;</span><br><span class="line">                <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> first;</span><br><span class="line">                <span class="keyword">while</span>(node.next!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(obj.equals(node.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">                        last.next = node.next;</span><br><span class="line">                        total--;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    last = node;</span><br><span class="line">                    node = node.next;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//单独判断最后一个是否是要删除的结点</span></span><br><span class="line">                <span class="keyword">if</span>(obj.equals(node.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">                    last.next = <span class="literal">null</span>;</span><br><span class="line">                    total--;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object obj)</span>&#123;<span class="comment">//查找元素下标：效率不高，链表不需要</span></span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(node.data == <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(obj.equals(node.data))&#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="单向链表-2"><figure class="highlight java"><figcaption><span>TestSingleLinkedList.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSingleLinkedList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SingleLinkedList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleLinkedList</span>();</span><br><span class="line">        list.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        list.add(<span class="literal">null</span>);</span><br><span class="line">        Object[] all = list.getAll();</span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[1, 2, 3, null]</span></span><br><span class="line">        list.remove(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        all = list.getAll();</span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[2, 3, null]</span></span><br><span class="line">        list.remove(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        all = list.getAll();</span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[2, null]</span></span><br><span class="line">        list.remove(<span class="literal">null</span>);</span><br><span class="line">        all = list.getAll();</span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[2]</span></span><br><span class="line"></span><br><span class="line">        System.out.println(list.indexOf(<span class="string">&quot;1&quot;</span>));<span class="comment">//-1</span></span><br><span class="line">        System.out.println(list.indexOf(<span class="string">&quot;3&quot;</span>));<span class="comment">//-1</span></span><br><span class="line">        System.out.println(list.indexOf(<span class="literal">null</span>));<span class="comment">//-1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/02/24/Java/23.Java%E9%9B%86%E5%90%88/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/22/Java/22.%E7%BB%83%E4%B9%A0%E4%B8%89%EF%BC%9A%E5%9B%A2%E9%98%9F%E4%BA%BA%E5%91%98%E8%B0%83%E5%BA%A6%E8%BD%AF%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/02/22/Java/22.%E7%BB%83%E4%B9%A0%E4%B8%89%EF%BC%9A%E5%9B%A2%E9%98%9F%E4%BA%BA%E5%91%98%E8%B0%83%E5%BA%A6%E8%BD%AF%E4%BB%B6/" class="post-title-link" itemprop="url">练习三：团队人员调度软件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-22 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-22T00:00:00+08:00">2020-02-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>23 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="团队人员调度软件">团队人员调度软件</h2>
<p>模拟实现一个基于文本界面的《团队人员调度软件》。<br />
熟悉Java面向对象的高级特性，进一步掌握编程技巧和调试技巧。<br />
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/02/22/Java/22.%E7%BB%83%E4%B9%A0%E4%B8%89%EF%BC%9A%E5%9B%A2%E9%98%9F%E4%BA%BA%E5%91%98%E8%B0%83%E5%BA%A6%E8%BD%AF%E4%BB%B6/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/12/Java/21.Java%E5%B8%B8%E7%94%A8%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/02/12/Java/21.Java%E5%B8%B8%E7%94%A8%E7%B1%BB/" class="post-title-link" itemprop="url">Java常用类</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-12 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-12T00:00:00+08:00">2020-02-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>34 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="包装类">包装类</h2>
<p>Java初期延续使用了C语言的8种基本数据类型，因为它们效率高、空间利用率低，但它们不属于对象，但后面很多的新特性只支持对象，所以<strong>Java将8种基本数据类型通过包装类（Wrapper）转化为对象</strong>。</p>
<p>1.基本数据类型、包装类的对应关系、缓存情况：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">基本       包装类(java.lang)    缓存(valueOf方法)</span><br><span class="line"><span class="type">boolean</span>     Boolean             <span class="literal">true</span>/<span class="literal">false</span></span><br><span class="line"><span class="type">byte</span>        Byte                -<span class="number">128</span>~<span class="number">127</span></span><br><span class="line"><span class="type">short</span>       Short               -<span class="number">128</span>~<span class="number">127</span></span><br><span class="line"><span class="type">int</span>         Integer             -<span class="number">128</span>~<span class="number">127</span></span><br><span class="line"><span class="type">long</span>        Long                -<span class="number">128</span>~<span class="number">127</span></span><br><span class="line"><span class="type">float</span>       Float                 无缓存</span><br><span class="line"><span class="type">double</span>      Double                无缓存</span><br><span class="line"><span class="type">char</span>        Character             <span class="number">0</span>~<span class="number">127</span></span><br><span class="line"><span class="comment">//byte、short、int、long、float、double这六个继承自java.lang.Number。</span></span><br></pre></td></tr></table></figure></p>
<p>2.装箱与拆箱<br />
<strong>装箱（auto_boxing）</strong>：把基本数据类型的数据，包装为包装类的对象。<br />
<strong>拆箱（unboxing）</strong>：把包装类的对象，拆解为基本数据类型的数据。<br />
JDK1.5之前装箱、拆箱要手动，之后支持自动。<br />
<div class="tabs" id="auto"><ul class="nav-tabs"><li class="tab active"><a href="#auto-1">装箱/拆箱</a></li><li class="tab"><a href="#auto-2">缓存问题</a></li></ul><div class="tab-content"><div class="tab-pane active" id="auto-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestWrapper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//自动装箱</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">//本质上编译器编译时为我们添加了Integer i = new Integer(1);</span></span><br><span class="line">        <span class="comment">//自动拆箱</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> i;<span class="comment">//本质上编译器编译时为我们添加了int a = i.intValue();</span></span><br><span class="line">        <span class="comment">//手动装箱</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//手动拆箱</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> i.intValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="auto-2"><figure class="highlight java"><figcaption><span>TestWrapper.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestWrapper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i2</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i3</span> <span class="operator">=</span> <span class="number">128</span>;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i4</span> <span class="operator">=</span> <span class="number">128</span>;</span><br><span class="line">        System.out.println(i1 == i2);<span class="comment">//true</span></span><br><span class="line">        System.out.println(i2 == i3);<span class="comment">//false</span></span><br><span class="line">        <span class="comment">//自动装箱是调用包装类的valueOf方法将将基本类型包装成对应包装类对象。</span></span><br><span class="line">        <span class="comment">//valueOf方法会判断类型范围（int为-128~127），在范围内使用缓存中同一个对象处理，否则重新new一个对象。</span></span><br><span class="line">        <span class="comment">//所以包装类比较数值，使用equals方法不要用==</span></span><br><span class="line"></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">127</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">127</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i7</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">128</span>);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">i8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">128</span>);</span><br><span class="line">        System.out.println(i5 == i6);<span class="comment">//false</span></span><br><span class="line">        System.out.println(i7 == i8);<span class="comment">//false</span></span><br><span class="line">        <span class="comment">//i5、i6、i7、i8都是不同对象，所以结果都是false</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">i9</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line">        System.out.println(i1 == i9);<span class="comment">//true</span></span><br><span class="line">        System.out.println(i5 == i9);<span class="comment">//true</span></span><br><span class="line">        <span class="comment">//基本类型和包装类型==比较时，包装类通过调用xxxValue方法得到对象常量值比较，也就是数值比较，所以都为true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Double</span> <span class="variable">d1</span> <span class="operator">=</span> <span class="number">1.0</span>;</span><br><span class="line">        <span class="type">Double</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="number">1.0</span>;</span><br><span class="line">        System.out.println(d1 == d2);<span class="comment">//false</span></span><br><span class="line">        <span class="comment">//Double、float是无缓存的，都是新对象</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="type">Double</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">1.0</span>;</span><br><span class="line">        <span class="comment">//System.out.println(a == b);//错误，不同包装类对象不能比较</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<p>3.包装类的作用：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">|-数字型包装类有：MIN_VALUE正最大值、MAX_VALUE正最小值。</span><br><span class="line">|-Float、Double：额外有POSITIVE_INFINITY无穷大、NEGATIVE_INFINITY负无穷大，NaN非数，表示错误结果。</span><br><span class="line">|-字符串转成包装类对象：</span><br><span class="line">    |-使用包装类型的构造方法：<span class="string">&quot;Integer i = new Integer(&quot;</span><span class="number">500</span><span class="string">&quot;);&quot;</span><span class="comment">//参数是字符串，字符串的值是必须对应的数值</span></span><br><span class="line">    |-使用包装类的valueOf方法：<span class="string">&quot;Integer i = Integer.valueOf(&quot;</span><span class="number">500</span><span class="string">&quot;);&quot;</span></span><br><span class="line">|-字符串转成基本数据类型：</span><br><span class="line">    |-通过包装类的<span class="string">&quot;parseXxx(String s)&quot;</span>静态方法：<span class="string">&quot;int i = Integer.parseInt(&quot;</span><span class="number">500</span><span class="string">&quot;);&quot;</span></span><br><span class="line">|-Integer其他方法：</span><br><span class="line">    |-<span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">toBinaryString</span><span class="params">(<span class="type">int</span> i)</span><span class="comment">//把十进制转成二进制</span></span><br><span class="line">    |-<span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">toHexString</span><span class="params">(<span class="type">int</span> i)</span><span class="comment">//把十进制转成十六进制</span></span><br><span class="line">    |-<span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">toOctalString</span><span class="params">(<span class="type">int</span> i)</span><span class="comment">//把十进制转成八进制</span></span><br><span class="line">|-Character其他方法：</span><br><span class="line">    |-<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">char</span> <span class="title function_">toUpperCase</span><span class="params">(<span class="type">char</span> ch)</span><span class="comment">//转成大写字母</span></span><br><span class="line">    |-<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">char</span> <span class="title function_">toLowerCase</span><span class="params">(<span class="type">char</span> ch)</span><span class="comment">//转成小写字母</span></span><br><span class="line">|-共有方法：</span><br><span class="line">    |-equals：按照包装的基本数据类型的值比较。</span><br><span class="line">    |-compareTo：按照包装的基本数据类型的值比较。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="转换"><ul class="nav-tabs"><li class="tab active"><a href="#转换-1">最大最小值</a></li><li class="tab"><a href="#转换-2">基本转字符</a></li><li class="tab"><a href="#转换-3">字符转包装</a></li><li class="tab"><a href="#转换-4">Integer进制转换</a></li><li class="tab"><a href="#转换-5">Character大小写转换</a></li></ul><div class="tab-content"><div class="tab-pane active" id="转换-1"><figure class="highlight java"><figcaption><span>TestWrapper.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestWrapper</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test10</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(Byte.MAX_VALUE);<span class="comment">//Byte的最大值</span></span><br><span class="line">        System.out.println(Byte.MIN_VALUE);<span class="comment">//Byte的最小值</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(Integer.MAX_VALUE);<span class="comment">//Integer的最大值</span></span><br><span class="line">        System.out.println(Integer.MIN_VALUE);<span class="comment">//Integer的最小值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="转换-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">//String str = a; //错误</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> a + <span class="string">&quot;&quot;</span>;<span class="comment">//方式一：</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> String.valueOf(a);<span class="comment">//方式二：</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="转换-3"><figure class="highlight java"><figcaption><span>TestWrapper.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestWrapper</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">num1</span> <span class="operator">=</span> Integer.parseInt(<span class="string">&quot;123&quot;</span>);<span class="comment">//字符串转成包装类对象</span></span><br><span class="line">        <span class="type">Double</span> <span class="variable">num2</span> <span class="operator">=</span> Double.parseDouble(<span class="string">&quot;123.05&quot;</span>);<span class="comment">//字符串转成包装类对象</span></span><br><span class="line">        System.out.println(num1);<span class="comment">//123</span></span><br><span class="line">        System.out.println(num2);<span class="comment">//123.05</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> Integer.valueOf(<span class="string">&quot;123&quot;</span>);<span class="comment">//先转成Integer对象，后拆箱为int</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> Double.valueOf(<span class="string">&quot;125.05&quot;</span>);<span class="comment">//同理</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="转换-4"><figure class="highlight java"><figcaption><span>TestWrapper.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestWrapper</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(Integer.toBinaryString(<span class="number">10</span>));<span class="comment">//转为二进制</span></span><br><span class="line">        System.out.println(Integer.toOctalString(<span class="number">10</span>));<span class="comment">//转为八进制</span></span><br><span class="line">        System.out.println(Integer.toHexString(<span class="number">10</span>));<span class="comment">//转为十六进制</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="转换-5"><figure class="highlight java"><figcaption><span>TestWrapper.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestWrapper</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(Character.toUpperCase(<span class="string">&#x27;a&#x27;</span>));<span class="comment">//转大写</span></span><br><span class="line">        System.out.println(Character.toLowerCase(<span class="string">&#x27;T&#x27;</span>));<span class="comment">//转小写</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h2 id="string类">String类</h2>
<p>1.String类特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">String</span><span class="comment">//是个final类</span></span><br><span class="line">    <span class="keyword">implements</span> <span class="title class_">java</span>.io.Serializable, Comparable&lt;String&gt;, CharSequence &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">char</span> value[];</span><br><span class="line">    <span class="comment">//value[]字符内容是存储在一个字符数组中，final是不可变的字符序列，private外面无法直接获取字符数组（无get和set）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Cache the hash code for the string */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> hash; <span class="comment">// Default to 0</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>2.String类方法：<br />
<div class="tabs" id="方法"><ul class="nav-tabs"><li class="tab active"><a href="#方法-1">常用</a></li><li class="tab"><a href="#方法-2">头尾判断</a></li><li class="tab"><a href="#方法-3">替换</a></li><li class="tab"><a href="#方法-4">查找</a></li><li class="tab"><a href="#方法-5">截取</a></li><li class="tab"><a href="#方法-6">拆分</a></li><li class="tab"><a href="#方法-7">正则匹配</a></li><li class="tab"><a href="#方法-8">字节字符</a></li></ul><div class="tab-content"><div class="tab-pane active" id="方法-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="type">int</span> <span class="title function_">length</span><span class="params">()</span>：返回字符串的长度，<span class="string">&quot;return value.length;&quot;</span>。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>：判断是否是空字符串，<span class="string">&quot;return value.length == 0;&quot;</span>。</span><br><span class="line">|-String <span class="title function_">toLowerCase</span><span class="params">()</span>：使用默认语言环境的规则将此String中的所有字符都转换为小写。</span><br><span class="line">|-String <span class="title function_">toUpperCase</span><span class="params">()</span>：使用默认语言环境的规则将此String中的所有字符都转换为大写。</span><br><span class="line">|-String <span class="title function_">trim</span><span class="params">()</span>：返回字符串的副本，忽略前导空白和尾部空白。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span>：比较字符串的内容。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">equalsIgnoreCase</span><span class="params">(String anotherString)</span>：与equals方法类似，忽略大小写。</span><br><span class="line">|-String <span class="title function_">concat</span><span class="params">(String str)</span>：将指定字符串连接到此字符串的结尾，等价于用<span class="string">&quot;+&quot;</span>。</span><br><span class="line">|-str.intern()：把str放在常量池中。</span><br><span class="line">|-空字符串四种比较方式：</span><br><span class="line">    |-<span class="keyword">if</span>(<span class="string">&quot;&quot;</span>.equals(str))<span class="comment">//推荐这种，比较的时候常量在前</span></span><br><span class="line">    |-<span class="keyword">if</span>(str!=<span class="literal">null</span> &amp;&amp; str.length()==<span class="number">0</span>)</span><br><span class="line">    |-<span class="keyword">if</span>(str!=<span class="literal">null</span> &amp;&amp; str.isEmpty())</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="方法-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="type">boolean</span> <span class="title function_">endsWith</span><span class="params">(String suffix)</span>：测试此字符串是否以指定的后缀结束。 </span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">startsWith</span><span class="params">(String prefix)</span>：测试此字符串是否以指定的前缀开始。 </span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">startsWith</span><span class="params">(String prefix, <span class="type">int</span> toffset)</span>：测试此字符串从指定索引开始的子字符串是否以指定前缀开始。</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="方法-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|-String <span class="title function_">replace</span><span class="params">(<span class="type">char</span> oldChar, <span class="type">char</span> newChar)</span>：</span><br><span class="line">    |-返回一个新的字符串，它是通过用newChar替换此字符串中出现的所有oldChar得到的。 </span><br><span class="line">|-String <span class="title function_">replace</span><span class="params">(CharSequence target, CharSequence replacement)</span>：</span><br><span class="line">    |-使用指定的replacement序列替换此字符串所有匹配target序列的子字符串。 </span><br><span class="line">|-String <span class="title function_">replaceAll</span><span class="params">(String regex, String replacement)</span>：</span><br><span class="line">    |-使用给定的replacement替换此字符串所有匹配给定的正则表达式的子字符串。 </span><br><span class="line">|-String <span class="title function_">replaceFirst</span><span class="params">(String regex, String replacement)</span>：</span><br><span class="line">    |-使用给定的replacement替换此字符串匹配给定的正则表达式的第一个子字符串。</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="方法-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(CharSequence s)</span>：当且仅当此字符串包含指定的<span class="type">char</span>值序列时，返回<span class="literal">true</span>。</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(<span class="type">int</span> ch)</span>：返回指定字符在此字符串中第一次出现处的索引。 </span><br><span class="line">|-<span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(<span class="type">int</span> ch, <span class="type">int</span> fromIndex)</span>：返回在此字符串中第一次出现指定字符处的索引，从指定的索引开始搜索。 </span><br><span class="line">|-<span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(String str)</span>：返回指定子字符串在此字符串中第一次出现处的索引。 </span><br><span class="line">|-<span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(String str, <span class="type">int</span> fromIndex)</span>：返回指定子字符串在此字符串中第一次出现处的索引，从指定的索引开始。 </span><br><span class="line">|-<span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(<span class="type">int</span> ch)</span>：返回指定字符在此字符串中最后一次出现处的索引。 </span><br><span class="line">|-<span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(<span class="type">int</span> ch, <span class="type">int</span> fromIndex)</span>：返回指定字符在此字符串中最后一次出现处的索引，从指定的索引处开始进行反向搜索。 </span><br><span class="line">|-<span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(String str)</span>：返回指定子字符串在此字符串中最右边出现处的索引。 </span><br><span class="line">|-<span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(String str, <span class="type">int</span> fromIndex)</span>：返回指定子字符串在此字符串中最后一次出现处的索引，从指定的索引开始反向搜索。 </span><br><span class="line">indexOf和lastIndexOf方法如果未找到都是返回-<span class="number">1</span>。</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="方法-5"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">|-String <span class="title function_">substring</span><span class="params">(<span class="type">int</span> beginIndex)</span>：返回一个新的字符串，范围[beginIndex, end]。 </span><br><span class="line">|-String <span class="title function_">substring</span><span class="params">(<span class="type">int</span> beginIndex, <span class="type">int</span> endIndex)</span>：返回一个新字符串，范围为[beginIndex, endIndex)。 </span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="方法-6"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|-String[] split(String regex)：</span><br><span class="line">    |-根据给定正则表达式的匹配拆分此字符串。 </span><br><span class="line">|-String[] split(String regex, <span class="type">int</span> limit)：</span><br><span class="line">    |-根据匹配给定的正则表达式来拆分此字符串，最多不超过limit个，如果超过了，剩下的全部都放到最后一个元素中。 </span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="方法-7"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(String regex)</span>：告知此字符串是否匹配给定的正则表达式。</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="方法-8"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">字符相关：</span><br><span class="line">|-<span class="type">char</span> <span class="title function_">charAt</span><span class="params">(<span class="type">int</span> index)</span>：返回某索引处的字符，<span class="string">&quot;return value[index];&quot;</span>。</span><br><span class="line">|-<span class="type">char</span>[] toCharArray()：将此字符串转换为一个新的字符数组。</span><br><span class="line">|-String(<span class="type">char</span>[] value)：分配一个新的String，使其表示字符数组参数中当前包含的字符序列。 </span><br><span class="line">|-String(<span class="type">char</span>[] value, <span class="type">int</span> offset, <span class="type">int</span> count)：分配一个新的String，它包含取自字符数组参数一个子数组的字符。</span><br><span class="line">字符转字节：</span><br><span class="line">|-<span class="type">byte</span>[] getBytes()：使用平台的默认字符集将此String编码为<span class="type">byte</span>序列，并将结果存储到一个新的<span class="type">byte</span>数组中。</span><br><span class="line">|-<span class="type">byte</span>[] getBytes(Charset charset) ：使用给定的charset将此String编码到<span class="type">byte</span>序列，并将结果存储到新的<span class="type">byte</span>数组。</span><br><span class="line">|-<span class="type">byte</span>[] getBytes(String charsetName) ：使用指定的字符集将此String编码为<span class="type">byte</span>序列，并将结果存储到一个新的<span class="type">byte</span>数组中。</span><br><span class="line">字节转字符：</span><br><span class="line">|-String(<span class="type">byte</span>[] bytes) ：使用平台默认字符集解码指定的<span class="type">byte</span>数组，构造一个新的String。 </span><br><span class="line">|-String(<span class="type">byte</span>[] bytes, Charset charset)：使用指定charset解码指定的<span class="type">byte</span>数组，构造一个新的String。 </span><br><span class="line">|-String(<span class="type">byte</span>[] bytes, <span class="type">int</span> offset, <span class="type">int</span> length) ：使用平台默认字符集解码指定的<span class="type">byte</span>子数组，构造一个新的String。 </span><br><span class="line">|-String(<span class="type">byte</span>[] bytes, <span class="type">int</span> offset, <span class="type">int</span> length, Charset charset)：使用指定charset解码指定的<span class="type">byte</span>子数组，构造一个新的String。 </span><br><span class="line">|-String(<span class="type">byte</span>[] bytes, <span class="type">int</span> offset, <span class="type">int</span> length, String charsetName)：使用指定字符集解码指定的<span class="type">byte</span>子数组，构造一个新的String。 </span><br><span class="line">|-String(<span class="type">byte</span>[] bytes, String charsetName)：使用指定charset解码指定的<span class="type">byte</span>数组，构造一个新的String。</span><br></pre></td></tr></table></figure></div></div></div></p>
<div class="tabs" id="练习1"><ul class="nav-tabs"><li class="tab active"><a href="#练习1-1">常用</a></li><li class="tab"><a href="#练习1-2">头尾判断</a></li><li class="tab"><a href="#练习1-3">替换</a></li><li class="tab"><a href="#练习1-4">查找</a></li><li class="tab"><a href="#练习1-5">截取</a></li><li class="tab"><a href="#练习1-6">拆分</a></li><li class="tab"><a href="#练习1-7">正则匹配</a></li><li class="tab"><a href="#练习1-8">字符字节</a></li></ul><div class="tab-content"><div class="tab-pane active" id="练习1-1"><figure class="highlight java"><figcaption><span>TestString.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestString</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;<span class="comment">//s1是变量，&quot;hello&quot;在常量池中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;world&quot;</span>;<span class="comment">//s2是变量，&quot;world&quot;在常量池中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;helloworld&quot;</span>;<span class="comment">//s3是变量，&quot;helloworld&quot;在常量池中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> s1 + <span class="string">&quot;world&quot;</span>;<span class="comment">//s4=helloworld，变量+常量的结果，在堆中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> s1 + s2;<span class="comment">//s5=helloworld，变量+变量的结果，在堆中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s6</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span> + <span class="string">&quot;world&quot;</span>;<span class="comment">//常量+常量的结果，在常量池中（编译时就能确定结果）</span></span><br><span class="line">        System.out.println(s3 == s4);<span class="comment">//false</span></span><br><span class="line">        System.out.println(s3 == s5);<span class="comment">//false</span></span><br><span class="line">        System.out.println(s3 == s6);<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;<span class="comment">//s1是常量，&quot;hello&quot;在常量池中</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;world&quot;</span>;<span class="comment">//s2是常量，&quot;world&quot;在常量池中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;helloworld&quot;</span>;<span class="comment">//s3是变量，&quot;helloworld&quot;在常量池中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> s1 + <span class="string">&quot;world&quot;</span>;<span class="comment">//s4=helloworld，常量+常量的结果，在常量池中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> s1 + s2;<span class="comment">//s5=helloworld，常量+常量的结果，在常量池中</span></span><br><span class="line">        System.out.println(s3 == s4);<span class="comment">//true</span></span><br><span class="line">        System.out.println(s3 == s5);<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;world&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;helloworld&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> (s1 + <span class="string">&quot;world&quot;</span>).intern();<span class="comment">//把结果放到常量池中</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> (s1 + s2).intern();<span class="comment">//把结果放到常量池中</span></span><br><span class="line">        System.out.println(s3 == s4);<span class="comment">//true</span></span><br><span class="line">        System.out.println(s3 == s5);<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span>&#123;</span><br><span class="line">        String s1;<span class="comment">//未初始化</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//初始化null</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;<span class="comment">//空字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>();<span class="comment">//两个对象，s4指向堆，堆指向常量池中空字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;&quot;</span>);<span class="comment">//两个对象，s5指向堆，堆指向常量池中空字符串</span></span><br><span class="line">        <span class="comment">//System.out.println(s1);//错误，String未初始化，无法使用</span></span><br><span class="line">        <span class="comment">//System.out.println(s2.length());//错误，空指针异常</span></span><br><span class="line">        System.out.println(s3==s4);<span class="comment">//false，==对象时比较地址值，s3指向常量池，s4指向堆</span></span><br><span class="line">        System.out.println(s3==s5);<span class="comment">//false，==对象时比较地址值，s3指向常量池，s5指向堆</span></span><br><span class="line">        System.out.println(s4==s5);<span class="comment">//false，==对象时比较地址值，s4和s5是不同的空对象</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test05</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        System.out.println(test06(str));<span class="comment">//false</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        System.out.println(test06(str2));<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//判断str是否是空字符串，是就返回true，不是返回false</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test06</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;&quot;</span>.equals(str))&#123;<span class="comment">//推荐</span></span><br><span class="line">        <span class="comment">// if(str!=null &amp;&amp; str.isEmpty())&#123;</span></span><br><span class="line">        <span class="comment">// if(str!=null &amp;&amp; str.length()==0)&#123;</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习1-2"><figure class="highlight java"><figcaption><span>TestMethod.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;Hello.class&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(fileName.endsWith(<span class="string">&quot;.java&quot;</span>))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;源文件&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(fileName.endsWith(<span class="string">&quot;.class&quot;</span>))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;字节码文件&quot;</span>);<span class="comment">//字节码文件</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(fileName.startsWith(<span class="string">&quot;Hello&quot;</span>))&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello文件&quot;</span>);<span class="comment">//Hello文件</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;非Hello文件&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习1-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestReplace</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;12hello34world5java7891mysql456&quot;</span>;</span><br><span class="line">        <span class="comment">//字符串中的数字替换成&quot;,&quot;，最后去掉开头和结尾的&quot;,&quot;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">string</span> <span class="operator">=</span> str.replaceAll(<span class="string">&quot;\\d+&quot;</span>, <span class="string">&quot;,&quot;</span>).replaceAll(<span class="string">&quot;^,|,$&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        System.out.println(string);<span class="comment">//hello,world,java,mysql</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习1-4"><figure class="highlight java"><figcaption><span>TestMethod.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;Hello.java.txt&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index1</span> <span class="operator">=</span> fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>);<span class="comment">//如果不存在返回-1，否则返回最后一次出现处的索引</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index2</span> <span class="operator">=</span> fileName.indexOf(<span class="string">&quot;.&quot;</span>);<span class="comment">//如果不存在返回-1，否则返回第一次出现处的索引</span></span><br><span class="line">        System.out.println(index1);<span class="comment">//10</span></span><br><span class="line">        System.out.println(index2);<span class="comment">//5</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;123.45&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(str.contains(<span class="string">&quot;.&quot;</span>))&#123;<span class="comment">//是否包含.</span></span><br><span class="line">            System.out.println(<span class="string">&quot;包含&quot;</span>);<span class="comment">//包含</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习1-5"><figure class="highlight java"><figcaption><span>TestMethod.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethod</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;Hello.java.txt&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> fileName.lastIndexOf(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (index != -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sub</span> <span class="operator">=</span> fileName.substring(index);<span class="comment">//截取到尾部</span></span><br><span class="line">            System.out.println(sub);<span class="comment">//.txt</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello.world.java&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sub</span> <span class="operator">=</span> str.substring(<span class="number">5</span>, <span class="number">11</span>);</span><br><span class="line">        System.out.println(sub);<span class="comment">//.world</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习1-6"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSplit</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello|world|java&quot;</span>;</span><br><span class="line">        String[] strings = str.split(<span class="string">&quot;\\|&quot;</span>);<span class="comment">//按照&quot;|&quot;切分</span></span><br><span class="line">        <span class="keyword">for</span> (String string : strings) &#123;</span><br><span class="line">            System.out.println(string);<span class="comment">//hello、world、java</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot;hello.world.java&quot;</span>;</span><br><span class="line">        String[] strings2 = str2.split(<span class="string">&quot;\\.&quot;</span>);<span class="comment">//按照&quot;.&quot;切分</span></span><br><span class="line">        <span class="keyword">for</span> (String string : strings2) &#123;</span><br><span class="line">            System.out.println(string);<span class="comment">//hello、world、java</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习1-7"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestRegex</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;12345&quot;</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">matches</span> <span class="operator">=</span> str.matches(<span class="string">&quot;\\d+&quot;</span>);<span class="comment">//判断str字符串是否全部由数字组成</span></span><br><span class="line">        System.out.println(matches);<span class="comment">//true</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">tel</span> <span class="operator">=</span> <span class="string">&quot;0571-4534289&quot;</span>;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> tel.matches(<span class="string">&quot;0571-\\d&#123;7,8&#125;&quot;</span>);<span class="comment">//判断这是否是一个杭州的固定电话</span></span><br><span class="line">        System.out.println(result);<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习1-8"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestChange</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;中&quot;</span>;</span><br><span class="line">        System.out.println(s.getBytes(<span class="string">&quot;ISO8859-1&quot;</span>).length);<span class="comment">//1</span></span><br><span class="line">        System.out.println(s.getBytes(<span class="string">&quot;GBK&quot;</span>).length);<span class="comment">//2</span></span><br><span class="line">        System.out.println(s.getBytes(<span class="string">&quot;UTF-8&quot;</span>).length);<span class="comment">//3</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(s.getBytes(<span class="string">&quot;ISO8859-1&quot;</span>),<span class="string">&quot;ISO8859-1&quot;</span>));<span class="comment">//乱码，表示不了中文</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(s.getBytes(<span class="string">&quot;GBK&quot;</span>),<span class="string">&quot;GBK&quot;</span>));<span class="comment">//中</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(s.getBytes(<span class="string">&quot;UTF-8&quot;</span>),<span class="string">&quot;UTF-8&quot;</span>));<span class="comment">//中</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//转错的不一定能转回去</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="comment">//能正确转回去</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;中&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] b1 = s.getBytes(<span class="string">&quot;GBK&quot;</span>);<span class="comment">//2个字节</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(b1, <span class="string">&quot;ISO8859-1&quot;</span>);<span class="comment">//错误</span></span><br><span class="line">        <span class="type">byte</span>[] b2 = s1.getBytes(<span class="string">&quot;ISO8859-1&quot;</span>);<span class="comment">//再次用ISO8859-1编码，重新变回2个字节</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(b2, <span class="string">&quot;GBK&quot;</span>);<span class="comment">//再次用GBK解码</span></span><br><span class="line">        System.out.println(s2);<span class="comment">//中</span></span><br><span class="line">        <span class="comment">//不能正确转回去</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;中&quot;</span>;</span><br><span class="line">        <span class="type">byte</span>[] b1 = s.getBytes(<span class="string">&quot;GBK&quot;</span>);<span class="comment">//2个字节</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(b1, <span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//错误</span></span><br><span class="line">        <span class="type">byte</span>[] b2 = s1.getBytes(<span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//再次用UTF-8编码，重新解码变成6个字节</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(b2, <span class="string">&quot;GBK&quot;</span>);<span class="comment">//再次用GBK解码</span></span><br><span class="line">        System.out.println(s2);<span class="comment">//乱码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p>3.String、StringBuilder、StringBuffer三个类的区别：<br />
<img src="/images/Java简介和环境搭建/StingBuffer等.png" width="60%"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">|-String：</span><br><span class="line">    |-不可变的字符序列，一旦创建不可改变。</span><br><span class="line">    |-每次修改都会创建新对象，这可能会导致内存开销和性能问题。</span><br><span class="line">    |-适用于存储不需要频繁修改的字符串。</span><br><span class="line">|-StringBuilder：</span><br><span class="line">    |-可变的字符序列。</span><br><span class="line">    |-直接在原始对象上进行修改。</span><br><span class="line">    |-非线程安全的，适用于单线程环境。</span><br><span class="line">|-StringBuffer：</span><br><span class="line">    |-可变的字符序列。</span><br><span class="line">    |-直接在原始对象上进行修改。</span><br><span class="line">    |-线程安全的，适用于多线程环境。</span><br><span class="line">效率上：StringBuilder &gt; StringBuffer，不可变使用String。</span><br></pre></td></tr></table></figure>
<p>4.StringBuffer的常用方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//StringBuffer对象必须new创建，2倍+2。</span></span><br><span class="line">构造器：</span><br><span class="line">StringBuffer()：默认初始容量为<span class="number">16</span>的字符串缓冲区。</span><br><span class="line">StringBuffer(<span class="type">int</span> size)：构造指定容量的字符串缓冲区，实际长度不够自动扩容<span class="number">2</span>倍+<span class="number">2</span>。</span><br><span class="line">StringBuffer(String str)：将内容初始化为指定字符串内容，实际长度不够自动扩容<span class="number">2</span>倍+<span class="number">2</span>。</span><br><span class="line">其他方法：</span><br><span class="line">StringBuffer <span class="title function_">append</span><span class="params">(String s)</span>：将指定的字符串追加到此字符序列。</span><br><span class="line">StringBuffer <span class="title function_">reverse</span><span class="params">()</span>：将此字符序列用其反转形式取代。</span><br><span class="line">delete(<span class="type">int</span> start, <span class="type">int</span> end)：移除此序列的子字符串中的字符。</span><br><span class="line">insert(<span class="type">int</span> offset, <span class="type">int</span> i)：将<span class="type">int</span>参数的字符串表示形式插入此序列中。</span><br><span class="line">insert(<span class="type">int</span> offset, String str)：将str参数的字符串插入此序列中。</span><br><span class="line">replace(<span class="type">int</span> start, <span class="type">int</span> end, String str)：使用给定String中的字符替换此序列的子字符串中的字符。</span><br></pre></td></tr></table></figure></p>
<p>示例：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span>&#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sl</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="number">10</span>);</span><br><span class="line">        sl.append(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        System.out.println(sl);<span class="comment">//Hello</span></span><br><span class="line">        sl.append(<span class="string">&quot;World&quot;</span>);</span><br><span class="line">        System.out.println(sl);<span class="comment">//HelloWorld</span></span><br><span class="line">        sl.insert(<span class="number">8</span>, <span class="string">&quot;Java&quot;</span>);</span><br><span class="line">        System.out.println(sl);<span class="comment">//HelloWorJavald</span></span><br><span class="line">        sl.delete(<span class="number">5</span>, <span class="number">8</span>);</span><br><span class="line">        System.out.println(sl);<span class="comment">//HelloJavald</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="system类">System类</h2>
<p>1.System类特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">System类不能被实例化。</span><br><span class="line">它有标准输入、输出、错误输出流。</span><br><span class="line">可对外部定义的属性、环境变量访问。</span><br><span class="line">有加载文件和库的方法。</span><br><span class="line">有快速复制数组的一部分的实用方法。</span><br></pre></td></tr></table></figure></p>
<p>2.System类常见属性、方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">|-PrintStream out：<span class="string">&quot;标准&quot;</span>输出流。</span><br><span class="line">|-PrintStream err：<span class="string">&quot;标准&quot;</span>错误输出流。</span><br><span class="line">|-InputStream in：<span class="string">&quot;标准&quot;</span>输入流。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">arraycopy</span><span class="params">(Object src, <span class="type">int</span> srcPos, Object dest, <span class="type">int</span> destPos, <span class="type">int</span> length)</span></span><br><span class="line">    |-从指定源数组中复制一个数组，复制从指定的位置开始，到目标数组的指定位置结束。</span><br><span class="line">    |-src：原数组对象。</span><br><span class="line">    |-srcPos：从原数组的[srcPos]下标开始复制。</span><br><span class="line">    |-dest：目标数组对象。</span><br><span class="line">    |-destPos：目标数组从[destPos]开始存储。</span><br><span class="line">    |-length：表示从原数组复制几个元素。</span><br><span class="line">    |-length：表示从原数组复制几个元素。</span><br><span class="line">    |-如果src和dest是同一个数组的话，那么就会实现数组的元素的移动效果。</span><br><span class="line">        |-srcPos &gt; destPos：往左移动，一般用于删除。</span><br><span class="line">        |-srcPos &lt; destPos：往右移动，一般用于插入。</span><br><span class="line">|-<span class="type">long</span> <span class="title function_">currentTimeMillis</span><span class="params">()</span>：</span><br><span class="line">    |-返回以毫秒为单位的，当前时间和<span class="number">1970.1</span><span class="number">.1</span> <span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>的时间差。  </span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">exit</span><span class="params">(<span class="type">int</span> status)</span>：</span><br><span class="line">    |-终止当前正在运行的Java虚拟机。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">gc</span><span class="params">()</span>：</span><br><span class="line">    |-运行垃圾回收器。  </span><br><span class="line">|-Properties <span class="title function_">getProperties</span><span class="params">()</span>：</span><br><span class="line">    |-确定当前的系统属性。 </span><br><span class="line">|-String <span class="title function_">getProperty</span><span class="params">(String key)</span>：</span><br><span class="line">    |-获取指定键指示的系统属性。 </span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">setErr</span><span class="params">(PrintStream err)</span>：</span><br><span class="line">    |-重新分配<span class="string">&quot;标准&quot;</span>错误输出流。 </span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">setIn</span><span class="params">(InputStream in)</span>：</span><br><span class="line">    |-重新分配<span class="string">&quot;标准&quot;</span>输入流。 </span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">setOut</span><span class="params">(PrintStream out)</span>：</span><br><span class="line">    |-重新分配<span class="string">&quot;标准&quot;</span>输出流。 </span><br><span class="line">|-String <span class="title function_">setProperty</span><span class="params">(String key, String value)</span>：</span><br><span class="line">    |-设置指定键指示的系统属性。</span><br></pre></td></tr></table></figure></p>
<p>示例：<br />
<div class="tabs" id="练习2"><ul class="nav-tabs"><li class="tab active"><a href="#练习2-1">输入输出流</a></li><li class="tab"><a href="#练习2-2">arraycopy</a></li></ul><div class="tab-content"><div class="tab-pane active" id="练习2-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestSystem</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">		<span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">		System.out.print(<span class="string">&quot;请输入成绩：&quot;</span>);</span><br><span class="line">		<span class="type">int</span> <span class="variable">score</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">		<span class="keyword">if</span>(score&gt;=<span class="number">0</span> &amp;&amp; score&lt;=<span class="number">100</span>)&#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;成绩是：&quot;</span> + score);<span class="comment">//&quot;标准&quot;输出流。</span></span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			System.err.println(<span class="string">&quot;输入有误，成绩应该在[0,100]&quot;</span>);<span class="comment">//&quot;标准&quot;错误输出流。</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="练习2-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSystemArrayCopy</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] arr = &#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;world&quot;</span>,<span class="string">&quot;java&quot;</span>,<span class="literal">null</span>,<span class="literal">null</span>&#125;;</span><br><span class="line">        <span class="type">int</span> <span class="variable">total</span> <span class="operator">=</span> <span class="number">3</span>;<span class="comment">//实际的总元素</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//实现删除arr[0]元素</span></span><br><span class="line">        System.arraycopy(arr, <span class="number">1</span>, arr, <span class="number">0</span>, <span class="number">2</span>); <span class="comment">//[world, java, java, null, null]</span></span><br><span class="line">        arr[<span class="number">2</span>] = <span class="literal">null</span>; <span class="comment">//[world, java, null, null, null]</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//实现在“hello&quot;和&quot;world&quot;中间插入&quot;memories&quot;</span></span><br><span class="line">        System.arraycopy(arr, <span class="number">1</span>, arr, <span class="number">2</span>, <span class="number">2</span>);<span class="comment">//[hello, world, world, java, null]</span></span><br><span class="line">        arr[<span class="number">1</span>] = <span class="string">&quot;memories&quot;</span>;<span class="comment">//[hello, memories, world, java, null]</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h2 id="java.util.scanner">java.util.Scanner</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">next()：遇到空白符，输入结束。</span><br><span class="line">nextLine()：遇到换行符，输入结束。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>TestNextLine.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestNextLine</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入整数：&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入小数：&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">d</span> <span class="operator">=</span> input.nextDouble();<span class="comment">//不会读取换行符</span></span><br><span class="line">        input.nextLine();<span class="comment">//读取上一个输入流的换行符，防止下面直接读取结束</span></span><br><span class="line">        System.out.print(<span class="string">&quot;请输入字符串：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> input.nextLine();</span><br><span class="line">        <span class="comment">// String str = input.next();</span></span><br><span class="line">        System.out.println(num);</span><br><span class="line">        System.out.println(d);</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="java.util.arrays">java.util.Arrays</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">toString</span><span class="params">(<span class="type">int</span>[] a)</span></span><br><span class="line">    |-把a数组的元素，遍历，拼接为一个字符串返回，效果[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>]。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch</span><span class="params">(<span class="type">int</span>[] a,<span class="type">int</span> key)</span></span><br><span class="line">    |-使用二分搜索法来搜索指定的 <span class="type">int</span> 型数组，以获得指定的值。</span><br><span class="line">    |-要求数组是有序的，否则结果不确定。</span><br><span class="line">    |-如果key在a数组中存在，就返回找到的第一个的下标，如果不存在返回负数（-(插入点)-<span class="number">1</span>），插入点是值应在的位置。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] copyOf(<span class="type">int</span>[] original, <span class="type">int</span> newLength)</span><br><span class="line">    |-从original原数组中复制得到一个新数组，新数组的长度为newLength。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] copyOfRange(<span class="type">int</span>[] original, <span class="type">int</span> from, <span class="type">int</span> to)</span><br><span class="line">    |-从original原数组中把[from,to)复制出来，构成新数组。</span><br><span class="line">    |-要求from必须在original的合理下标范围内，to可以超过长度。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span>[] a2)</span></span><br><span class="line">    |-比较两个数组的长度和内容是否一致。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">fill</span><span class="params">(<span class="type">int</span>[] a, <span class="type">int</span> val)</span></span><br><span class="line">    |-把a数组的元素中val填充。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span></span><br><span class="line">    |-把数组a按照升序排列。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Object[] arr)</span>：</span><br><span class="line">    |-根据元素的自然顺序对指定对象数组按升序进行排序。数组中的所有元素都必须实现 Comparable 接口。</span><br><span class="line">|-<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Object[] arr, Comparator c)</span></span><br><span class="line">    |-根据<span class="string">&quot;指定比较器&quot;</span>产生的顺序对指定对象数组进行排序。数组中的所有元素都必须是通过<span class="string">&quot;指定比较器&quot;</span>可相互比较的。</span><br><span class="line">以上排序，默认返回正数的排序在最后，也就是从小到大排序，想从大到小排序，把返回正数的改成负数即可。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="数组"><ul class="nav-tabs"><li class="tab active"><a href="#数组-1">拷贝</a></li><li class="tab"><a href="#数组-2">比较</a></li></ul><div class="tab-content"><div class="tab-pane active" id="数组-1"><figure class="highlight java"><figcaption><span>TestArrays.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestArrays</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//以下每个部分都是独立的结果</span></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.binarySearch(arr, <span class="number">4</span>)); <span class="comment">//插入点是4应在arr的位置，为2，按-(插入点)-1计算得-3</span></span><br><span class="line">        System.out.println(Arrays.binarySearch(arr, <span class="number">7</span>)); <span class="comment">//3</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] newArr = Arrays.copyOf(arr, <span class="number">5</span>); <span class="comment">//1 3 5 7 9</span></span><br><span class="line">        <span class="type">int</span>[] newArr = Arrays.copyOf(arr, <span class="number">15</span>); <span class="comment">//1 3 5 7 9 0 0 0 0 0 0 0 0 0 0</span></span><br><span class="line">        <span class="type">int</span>[] newArr = Arrays.copyOf(arr, <span class="number">3</span>); <span class="comment">//1 3 5</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; newArr.length; i++) &#123;</span><br><span class="line">            System.out.print(newArr[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] newArr = Arrays.copyOfRange(arr, <span class="number">1</span>, <span class="number">3</span>); <span class="comment">//3 5 </span></span><br><span class="line">        <span class="type">int</span>[] newArr = Arrays.copyOfRange(arr, <span class="number">1</span>, <span class="number">13</span>); <span class="comment">//3 5 7 9 0 0 0 0 0 0 0 0 </span></span><br><span class="line">        <span class="type">int</span>[] newArr = Arrays.copyOfRange(arr, <span class="number">10</span>, <span class="number">13</span>); <span class="comment">//java.lang.ArrayIndexOutOfBoundsException错误</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; newArr.length; i++) &#123;</span><br><span class="line">            System.out.print(newArr[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr1 = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        <span class="type">int</span>[] arr2 = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.equals(arr1, arr2)); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">5</span>];</span><br><span class="line">        Arrays.fill(arr, <span class="number">1</span>); <span class="comment">//1 1 1 1 1 </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">4</span>&#125;;</span><br><span class="line">        Arrays.sort(arr); <span class="comment">//2 4 4 7 9 </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i]+<span class="string">&quot; &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span>[] arr = &#123;<span class="number">4</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">4</span>&#125;;</span><br><span class="line">        System.out.println(Arrays.toString(arr));<span class="comment">//[4, 2, 7, 9, 4]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="数组-2"><figure class="highlight java"><figcaption><span>TestArrays.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> score;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getScore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(<span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, score=&quot;</span> + score + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="comment">//this与obj比较，this和obj都是学生对象</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">other</span> <span class="operator">=</span> (Student) obj;</span><br><span class="line">        <span class="comment">//成绩排名，下面和return两种方法都可以</span></span><br><span class="line">        <span class="comment">// if(this.score &gt; other.score)&#123;</span></span><br><span class="line">        <span class="comment">//     return 1;</span></span><br><span class="line">        <span class="comment">// &#125;else if(this.score &lt; other.score)&#123;</span></span><br><span class="line">        <span class="comment">//     return -1;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// return 0;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.score - other.score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestArrays</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Student[] all = <span class="keyword">new</span> <span class="title class_">Student</span>[<span class="number">5</span>];</span><br><span class="line">        all[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张一&quot;</span>, <span class="number">24</span>, <span class="number">89</span>);</span><br><span class="line">        all[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李二&quot;</span>, <span class="number">23</span>, <span class="number">100</span>);</span><br><span class="line">        all[<span class="number">2</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">23</span>, <span class="number">88</span>);</span><br><span class="line">        all[<span class="number">3</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">24</span>, <span class="number">44</span>);</span><br><span class="line">        all[<span class="number">4</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">25</span>, <span class="number">45</span>);</span><br><span class="line">        <span class="comment">//这里面排序过程中，调用了元素本身的compareTo()方法</span></span><br><span class="line">        <span class="comment">//Student实现了java.lang.Comparable接口，有比较大小的能力</span></span><br><span class="line">        Arrays.sort(all);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; all.length; i++) &#123;</span><br><span class="line">            System.out.println(all[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h2 id="比较器">比较器</h2>
<h3 id="java.util.comparator">java.util.Comparator</h3>
<p>1.Comparator：接口，强行对某个对象进行整体排序的比较函数。<br />
2.Comparator接口实现：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|-java.util.Comparator&lt;T&gt;</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">compare</span><span class="params">(T o1, T o2)</span><span class="comment">//&lt;T&gt;是泛型，暂时把T看成Object</span></span><br><span class="line">        |-如果你认为o1 &gt; o2，就返回正整数表示。</span><br><span class="line">        |-如果你认为o1 &lt; o2，就返回负整数表示。</span><br><span class="line">        |-如果你认为o1 = o2，就返回<span class="number">0</span>表示。</span><br></pre></td></tr></table></figure></p>
<p>3.另一个接口<code>java.lang.Comparable</code>，它是类本身实现的排序。当类不方便实现Comparable、实现了Comparable但不适合当前情况时，可以考虑使用Comparator的对象来定制排序。<br />
<figure class="highlight java"><figcaption><span>TestComparator.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AgeComparator</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&#123;<span class="comment">//年龄比较</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">        <span class="comment">//向下转型</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> (Student) o1;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> (Student) o2;</span><br><span class="line">        <span class="comment">//开始比较</span></span><br><span class="line">        <span class="keyword">if</span>(s1.getAge() &gt; s2.getAge())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s1.getAge() &lt; s2.getAge())&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ScoreComparator</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&#123;<span class="comment">//成绩比较</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">        <span class="comment">//向下转型</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> (Student) o1;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> (Student) o2;</span><br><span class="line">        <span class="comment">//开始比较</span></span><br><span class="line">        <span class="keyword">if</span>(s1.getScore() &gt; s2.getScore())&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s1.getScore() &lt; s2.getScore())&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> score;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getScore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(<span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, score=&quot;</span> + score + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestComparator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张一&quot;</span>, <span class="number">24</span>, <span class="number">89</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李二&quot;</span>, <span class="number">23</span>, <span class="number">100</span>);</span><br><span class="line">        <span class="comment">// if(s1 &gt; s2)&#123;//错误，Student无比较方法</span></span><br><span class="line">        <span class="comment">//     System.out.println(&quot;s1 &gt; s2&quot;);</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="type">AgeComparator</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AgeComparator</span>();</span><br><span class="line">        <span class="keyword">if</span>(c.compare(s1, s2) &gt; <span class="number">0</span>)&#123;<span class="comment">//比较s1，s2的结果是正整数，说明s1&gt;s2</span></span><br><span class="line">            System.out.println(<span class="string">&quot;s1 &gt; s2的年龄&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(c.compare(s1, s2) &lt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 &lt; s2的年龄&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 = s2的年龄&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">ScoreComparator</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ScoreComparator</span>();</span><br><span class="line">        <span class="keyword">if</span>(s.compare(s1, s2) &gt; <span class="number">0</span>)&#123;<span class="comment">//比较s1，s2的结果是正整数，说明s1&gt;s2</span></span><br><span class="line">            System.out.println(<span class="string">&quot;s1 &gt; s2的成绩&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s.compare(s1, s2) &lt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 &lt; s2的成绩&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 = s2的成绩&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;-------------------------------------&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        Student[] all = <span class="keyword">new</span> <span class="title class_">Student</span>[<span class="number">5</span>];</span><br><span class="line">        all[<span class="number">0</span>] = s1;</span><br><span class="line">        all[<span class="number">1</span>] = s2;</span><br><span class="line">        all[<span class="number">2</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">23</span>,<span class="number">88</span>);</span><br><span class="line">        all[<span class="number">3</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>,<span class="number">24</span>,<span class="number">44</span>);</span><br><span class="line">        all[<span class="number">4</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>,<span class="number">25</span>,<span class="number">45</span>);</span><br><span class="line">        <span class="comment">//Arrays.sort(all);//错误，Student没实现Comparator</span></span><br><span class="line">        <span class="comment">//Arrays的sort(Object[] arr, Comparator c)</span></span><br><span class="line">        Arrays.sort(all, <span class="keyword">new</span> <span class="title class_">AgeComparator</span>());<span class="comment">//按年龄比较</span></span><br><span class="line">        Arrays.sort(all, <span class="keyword">new</span> <span class="title class_">ScoreComparator</span>());<span class="comment">//按成绩比较</span></span><br><span class="line">        <span class="comment">//查看比较结果</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; all.length; i++) &#123;</span><br><span class="line">            System.out.println(all[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>编写一个MyArrays的数组工具类，这个工具类，想要为任意的对象数组，进行升序排序？<br />
<div class="tabs" id="comparator"><ul class="nav-tabs"><li class="tab active"><a href="#comparator-1">TestComparator2</a></li><li class="tab"><a href="#comparator-2">MyArrays</a></li><li class="tab"><a href="#comparator-3">AgeComparator</a></li><li class="tab"><a href="#comparator-4">Student</a></li></ul><div class="tab-content"><div class="tab-pane active" id="comparator-1"><figure class="highlight java"><figcaption><span>TestComparator2.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.mycomparator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestComparator2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Student[] all = <span class="keyword">new</span> <span class="title class_">Student</span>[<span class="number">5</span>];</span><br><span class="line">        all[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张一&quot;</span>, <span class="number">24</span>, <span class="number">89</span>);</span><br><span class="line">        all[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李二&quot;</span>, <span class="number">23</span>, <span class="number">100</span>);</span><br><span class="line">        all[<span class="number">2</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">23</span>,<span class="number">88</span>);</span><br><span class="line">        all[<span class="number">3</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>,<span class="number">24</span>,<span class="number">44</span>);</span><br><span class="line">        all[<span class="number">4</span>] = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>,<span class="number">25</span>,<span class="number">45</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="type">AgeComparator</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AgeComparator</span>();</span><br><span class="line">        MyArrays.sort(all, c);<span class="comment">//输入比较对象、比较器</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; all.length; i++) &#123;</span><br><span class="line">            System.out.println(all[i]);<span class="comment">//打印对象，自动调用对象toString</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comparator-2"><figure class="highlight java"><figcaption><span>MyArrays.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.mycomparator;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyArrays</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(Object[] arr, Comparator c)</span>&#123;<span class="comment">//冒泡比较</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="comment">//System.out.println(&quot;第&quot; + i +&quot;轮&quot;);//测试代码</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length-i; j++) &#123;</span><br><span class="line">                <span class="comment">//测试代码</span></span><br><span class="line">                <span class="comment">// System.out.println(&quot;比较：arr[&quot;+j+&quot;]和arr[&quot;+(j+1)+&quot;]&quot;);</span></span><br><span class="line">                <span class="comment">// System.out.println(arr[j]);</span></span><br><span class="line">                <span class="comment">// System.out.println(arr[j+1]);</span></span><br><span class="line">                <span class="comment">// System.out.println();</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment">//对象无法arr[j] &gt; arr[j+1]这么比较</span></span><br><span class="line">                <span class="keyword">if</span>(c.compare(arr[j], arr[j+<span class="number">1</span>]) &gt; <span class="number">0</span>)&#123;<span class="comment">//使用c的compare方法比较</span></span><br><span class="line">                    <span class="type">Object</span> <span class="variable">temp</span> <span class="operator">=</span> arr[j];</span><br><span class="line">                    arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                    arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comparator-3"><figure class="highlight java"><figcaption><span>AgeComparator.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.mycomparator;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AgeComparator</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> (Student) o1;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> (Student) o2;</span><br><span class="line">        <span class="keyword">return</span> s1.getAge() - s2.getAge();<span class="comment">//s1.getAge() 大于 s2.getAge() 正整数</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comparator-4"><figure class="highlight java"><figcaption><span>Student.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.mycomparator;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> score;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getScore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(<span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, score=&quot;</span> + score + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="java.lang.comparable">java.lang.Comparable</h3>
<p>1.Comparable接口：是类本身的排序方法实现，和Comparator比<strong>不用创建比较器实例</strong>。<br />
2.Comparable接口实现：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">|-java.lang.Comparable</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object obj)</span></span><br><span class="line">        |-<span class="built_in">this</span>与obj对象比较，<span class="built_in">this</span> &gt; obj，返回正整数。</span><br><span class="line">        |-<span class="built_in">this</span>与obj对象比较，<span class="built_in">this</span> &lt; obj，返回负整数。</span><br><span class="line">        |-<span class="built_in">this</span>与obj对象比较，<span class="built_in">this</span> = obj，返回<span class="number">0</span>。</span><br><span class="line">|-Comparable的典型实现：</span><br><span class="line">    |-String：按照字符串中字符的Unicode值进行比较。</span><br><span class="line">    |-Character：按照字符的Unicode值来进行比较。</span><br><span class="line">    |-数值类型对应的包装类以及BigInteger、BigDecimal：按照它们对应的数值大小进行比较。</span><br><span class="line">    |-Date、Time等：后面的日期时间比前面的日期时间大。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="comparable"><ul class="nav-tabs"><li class="tab active"><a href="#comparable-1">Comparable</a></li><li class="tab"><a href="#comparable-2">TestString</a></li></ul><div class="tab-content"><div class="tab-pane active" id="comparable-1"><figure class="highlight java"><figcaption><span>TestComparable.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> score;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getScore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(<span class="type">int</span> score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;, score=&quot;</span> + score + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        <span class="comment">//this与obj比较，this和obj都是学生对象</span></span><br><span class="line">        <span class="type">Student</span> <span class="variable">other</span> <span class="operator">=</span> (Student) obj;</span><br><span class="line">        <span class="comment">///成绩排名，下面和return两种方法都可以</span></span><br><span class="line">        <span class="comment">// if(this.score &gt; other.score)&#123;</span></span><br><span class="line">        <span class="comment">//     return 1;</span></span><br><span class="line">        <span class="comment">// &#125;else if(this.score &lt; other.score)&#123;</span></span><br><span class="line">        <span class="comment">//     return -1;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// return 0;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.score - other.score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestComparable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张一&quot;</span>, <span class="number">24</span>, <span class="number">89</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李二&quot;</span>, <span class="number">23</span>, <span class="number">100</span>);</span><br><span class="line">        <span class="comment">//按成绩比较</span></span><br><span class="line">        <span class="keyword">if</span>(s1.compareTo(s2)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 &gt; s2成绩&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s1.compareTo(s2)&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 &lt; s2成绩&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 = s2成绩&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="comparable-2"><figure class="highlight java"><figcaption><span>TestString.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestString</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//String实现了Comparable接口的compareTo方法</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;cai&quot;</span>;</span><br><span class="line">        <span class="comment">//因为String类型是引用数据类型，是无法直接用&gt;和&lt;等比较运算符比较大小的</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//按顺序单个字符比较，h和c比较，h&gt;c，直接就决定了s1&gt;s2</span></span><br><span class="line">        <span class="keyword">if</span>(s1.compareTo(s2)&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 &gt; s2&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(s1.compareTo(s2)&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 &lt; s2&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;s1 = s2&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h2 id="时间相关类">时间相关类</h2>
<h3 id="java.util.date">java.util.Date</h3>
<p>类似System类的<code>currentTimeMillis()</code>：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">构造方法：</span><br><span class="line">|-Date()：返回当前时间和<span class="number">1970.1</span><span class="number">.1</span> <span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>的时间差对象，源代码使用<span class="string">&quot;this(System.currentTimeMillis());&quot;</span>。</span><br><span class="line">|-Date(<span class="type">long</span> date)：返回date和<span class="number">1970.1</span><span class="number">.1</span> <span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>的时间差对象。</span><br><span class="line">常用方法：</span><br><span class="line">|-getTime()：返回Date对象和<span class="number">1970.1</span><span class="number">.1</span> <span class="number">0</span>:<span class="number">0</span>:<span class="number">0</span>的时间差，单位毫秒。</span><br><span class="line">|-toString()：把此Date对象转换为`dow mon dd hh:mm:ss zzz yyyy`形式的String。 </span><br><span class="line">    |-dow是一周中的某一天，Sun, Mon, Tue, Wed, Thu, Fri, Sat。</span><br><span class="line">    |-zzz是时间标准。</span><br></pre></td></tr></table></figure></p>
<h3 id="java.util.calendar">java.util.Calendar</h3>
<p>Calendar类是一个抽象类，为日历提供转换方法。<br />
GregorianCalendar（公历）是Calendar的一个具体子类，提供了世界上大多数国家/地区使用的标准日历系统。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//月份起始为0（一月），星期起始为1（周日）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Calendar <span class="title function_">getInstance</span><span class="params">()</span>：使用默认时区和语言环境获得一个基于当前时间的日历。</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Calendar <span class="title function_">getInstance</span><span class="params">(TimeZone zone, Locale aLocale)</span>：使用指定时区和语言环境获得一个基于当前时间的日历。</span><br></pre></td></tr></table></figure></p>
<h3 id="java.util.locale和timezone">java.util.Locale和TimeZone</h3>
<p>Locale对象表示了特定的地区。<br />
TimeZone可获取时区。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Locale构造方法：</span><br><span class="line">|-Locale(String language)</span><br><span class="line">|-Locale(String language, String country)</span><br><span class="line">Locale的值：</span><br><span class="line">|-Locale.CHINA、Locale.US...</span><br><span class="line">TimeZone的方法：</span><br><span class="line">|-getDefault()：获取当前时区。<span class="string">&quot;TimeZone.getDefault();&quot;</span></span><br><span class="line">|-getTimeZone(String ID)：根据时区ID获取时区。<span class="string">&quot;TimeZone.getTimeZone(&quot;</span>Asia/Shanghai<span class="string">&quot;);&quot;</span></span><br></pre></td></tr></table></figure></p>
<h3
id="java.text.dateformat和simpledateformat">java.text.DateFormat和SimpleDateFormat</h3>
<p>DateFormat和SimpleDateFormat，都是字符串、时间对象的转化：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String <span class="title function_">format</span><span class="params">(date)</span>：时间对象 -&gt; 字符串。</span><br><span class="line">Date <span class="title function_">parse</span><span class="params">(string)</span>：字符串 -&gt; 时间对象。</span><br></pre></td></tr></table></figure><br />
<img src="/images/Java简介和环境搭建/时间格式化.png" width="60%"></p>
<div class="tabs" id="dateformat"><ul class="nav-tabs"><li class="tab active"><a href="#dateformat-1">TestDate</a></li><li class="tab"><a href="#dateformat-2">TestCalendar</a></li></ul><div class="tab-content"><div class="tab-pane active" id="dateformat-1"><figure class="highlight java"><figcaption><span>TestDate.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.TimeZone;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDate</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test10</span><span class="params">()</span> <span class="keyword">throws</span> ParseException&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;2019年06月06日 16时03分14秒 545毫秒 星期四 +0800&quot;</span>;</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy年MM月dd日 HH时mm分ss秒 SSS毫秒 E Z&quot;</span>);</span><br><span class="line">        <span class="type">Date</span> <span class="variable">d</span> <span class="operator">=</span> sf.parse(str);<span class="comment">//字符串 -&gt; 时间对象</span></span><br><span class="line">        System.out.println(d);<span class="comment">//Thu Jun 06 16:03:14 CST 2019</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test9</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;Thu Jun 06 16:03:14 CST 2019&quot;</span>);</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy年MM月dd日 HH时mm分ss秒 SSS毫秒 E Z&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> sf.format(d);<span class="comment">//时间对象 -&gt; 字符串</span></span><br><span class="line">        System.out.println(str);<span class="comment">//2019年06月07日 06时03分14秒 000毫秒 周五 +0800</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test8</span><span class="params">()</span>&#123;</span><br><span class="line">        String[] all = TimeZone.getAvailableIDs();<span class="comment">//获取所有可用ID</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; all.length; i++) &#123;</span><br><span class="line">            System.out.println(all[i]);<span class="comment">//Africa/Abidjan、Africa/Accr...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test7</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">TimeZone</span> <span class="variable">t</span> <span class="operator">=</span> TimeZone.getTimeZone(<span class="string">&quot;America/Los_Angeles&quot;</span>);<span class="comment">//美国洛杉矶的时区对象</span></span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> Calendar.getInstance(t);<span class="comment">//用时区对象创建日历</span></span><br><span class="line">        System.out.println(c);<span class="comment">//c是java.util.GregorianCalendar对象</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> Calendar.getInstance();<span class="comment">//获取一个子类对象</span></span><br><span class="line">        System.out.println(c);<span class="comment">//c是java.util.GregorianCalendar对象</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> c.get(Calendar.YEAR);</span><br><span class="line">        System.out.println(year);<span class="comment">//2019</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> c.get(Calendar.MONTH) + <span class="number">1</span>;</span><br><span class="line">        System.out.println(month);<span class="comment">//7</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> Long.MAX_VALUE;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(time);</span><br><span class="line">        System.out.println(d);<span class="comment">//Sun Aug 17 15:12:55 CST 292278994</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> <span class="number">1559807047979L</span>;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(time);</span><br><span class="line">        System.out.println(d);<span class="comment">//Thu Jun 06 15:44:07 CST 2019</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> d.getTime();</span><br><span class="line">        System.out.println(time);<span class="comment">//1559807047979</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(time);<span class="comment">//1559806982971</span></span><br><span class="line">        <span class="comment">//当前系统时间距离1970-1-1 0:0:0 0毫秒的时间差，毫秒为单位</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        System.out.println(d);<span class="comment">//Thu Jun 06 15:44:07 CST 2019</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="dateformat-2"><figure class="highlight java"><figcaption><span>TestCalendar.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.TimeZone;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCalendar</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GregorianCalendar</span>();<span class="comment">//默认语言环境的时间（时区）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> c.get(Calendar.YEAR);</span><br><span class="line">        <span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> c.get(Calendar.MONTH);</span><br><span class="line">        <span class="type">int</span> <span class="variable">date</span> <span class="operator">=</span> c.get(Calendar.DAY_OF_MONTH);</span><br><span class="line">        <span class="type">int</span> <span class="variable">hour</span> <span class="operator">=</span> c.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">        <span class="type">int</span> <span class="variable">minute</span> <span class="operator">=</span> c.get(Calendar.MINUTE);</span><br><span class="line">        <span class="type">int</span> <span class="variable">second</span> <span class="operator">=</span> c.get(Calendar.SECOND);</span><br><span class="line">        <span class="type">int</span> <span class="variable">mill</span> <span class="operator">=</span> c.get(Calendar.MILLISECOND);</span><br><span class="line">        <span class="type">int</span> <span class="variable">week</span> <span class="operator">=</span> c.get(Calendar.DAY_OF_WEEK);</span><br><span class="line">        </span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">dateStr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        dateStr.append(year).append(<span class="string">&quot;年&quot;</span>);</span><br><span class="line">        dateStr.append(month + <span class="number">1</span>).append(<span class="string">&quot;月&quot;</span>);</span><br><span class="line">        dateStr.append(date).append(<span class="string">&quot;日&quot;</span>).append(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">        dateStr.append(hour).append(<span class="string">&quot;时&quot;</span>);</span><br><span class="line">        dateStr.append(minute).append(<span class="string">&quot;分&quot;</span>);</span><br><span class="line">        dateStr.append(second).append(<span class="string">&quot;秒&quot;</span>);</span><br><span class="line">        dateStr.append(mill).append(<span class="string">&quot;毫秒&quot;</span>).append(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">        </span><br><span class="line">        String[] weeks = &#123;<span class="string">&quot;日&quot;</span>,<span class="string">&quot;一&quot;</span>,<span class="string">&quot;二&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;四&quot;</span>,<span class="string">&quot;五&quot;</span>,<span class="string">&quot;六&quot;</span>&#125;;</span><br><span class="line">        dateStr.append(<span class="string">&quot;星期&quot;</span>).append(weeks[week - <span class="number">1</span>]);</span><br><span class="line">        System.out.println(dateStr);<span class="comment">//2019年6月7日 17时19分44秒491毫秒 星期五</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GregorianCalendar</span>(<span class="number">2015</span>, <span class="number">6</span>, <span class="number">13</span>);</span><br><span class="line">        <span class="comment">// c.set(2016, Calendar.DECEMBER, 4, 12, 12, 0);//设置成2016年</span></span><br><span class="line">        <span class="comment">// c.setTime(new Date());//设置成当前时间</span></span><br><span class="line">        <span class="comment">// c.add(Calendar.DATE, 15);//15天之后</span></span><br><span class="line">        <span class="comment">// c.add(Calendar.DAY_OF_MONTH, -2);//2个月之前</span></span><br><span class="line">        <span class="comment">// c.add(Calendar.HOUR, 12);//12小时之后</span></span><br><span class="line">        <span class="type">Date</span> <span class="variable">time</span> <span class="operator">=</span> c.getTime();<span class="comment">//转成日期</span></span><br><span class="line">        System.out.println(time);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="java.time">java.time</h3>
<p>JDK1.8之后，之前的都废弃，新的包如下：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java.time：包含值对象的基础包。</span><br><span class="line">java.time.chrono：提供对不同的日历系统的访问。</span><br><span class="line">java.time.format：格式化和解析时间和日期。</span><br><span class="line">java.time.temporal：包括底层框架和扩展特性。</span><br><span class="line">java.time.zone：包含时区支持的类。</span><br></pre></td></tr></table></figure></p>
<p>1.java.time基本类型：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这三个代替原来的java.util.Date和java.util.Calendar。</span></span><br><span class="line"><span class="number">1.</span>LocalDate：本地日期。代表IOS格式（yyyy-MM-dd）的日期，可以存储生日、纪念日等日期。</span><br><span class="line"><span class="number">2.</span>LocalTime：本地时间。表示一个时间，而不是日期。</span><br><span class="line"><span class="number">3.</span>LocalDateTime：本地日期时间。</span><br></pre></td></tr></table></figure></p>
<p>2.基本方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">now() / now(ZoneId zone)：静态方法，根据当前时间创建对象/指定时区的对象。</span><br><span class="line">of()：静态方法，根据指定日期/时间创建对象。</span><br><span class="line">getDayOfMonth()/getDayOfYear()：获得月份天数(<span class="number">1</span>-<span class="number">31</span>) /获得年份天数(<span class="number">1</span>-<span class="number">366</span>)。</span><br><span class="line">getDayOfWeek()：获得星期几(返回一个 DayOfWeek 枚举值)。</span><br><span class="line">getMonth()：获得月份, 返回一个 Month 枚举值。</span><br><span class="line">getMonthValue() / getYear()：获得月份(<span class="number">1</span>-<span class="number">12</span>) /获得年份。</span><br><span class="line">getHours()/getMinute()/getSecond()：获得当前对象对应的小时、分钟、秒。</span><br><span class="line">withDayOfMonth()/withDayOfYear()/withMonth()/withYear()：将月份天数、年份天数、月份、年份修改为指定的值并返回新的对象。</span><br><span class="line">with(TemporalAdjuster  t)：将当前日期时间设置为校对器指定的日期时间。</span><br><span class="line">plusDays(), plusWeeks(), plusMonths(), plusYears(),plusHours()：向当前对象添加几天、几周、几个月、几年、几小时。</span><br><span class="line">minusMonths() / minusWeeks()/minusDays()/minusYears()/minusHours()：从当前对象减去几月、几周、几天、几年、几小时。</span><br><span class="line">plus(TemporalAmount t)/minus(TemporalAmount t)：添加或减少一个 Duration 或 Period。</span><br><span class="line">isBefore()/isAfter()：比较两个 LocalDate。</span><br><span class="line">isLeapYear()：判断是否是闰年（在LocalDate类中声明）。</span><br><span class="line">format(DateTimeFormatter  t)：格式化本地日期、时间，返回一个字符串。</span><br><span class="line">parse(Charsequence text)：将指定格式的字符串解析为日期、时间。</span><br></pre></td></tr></table></figure></p>
<p>3.java.time.format方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DateTimeFormatter类提供了3种格式化方法，代替原来的java.text.SimpleDateFormat：</span></span><br><span class="line"><span class="number">1.</span>预定义的标准格式。如：ISO_DATE_TIME、ISO_DATE。</span><br><span class="line"><span class="number">2.</span>本地化相关的格式。如：ofLocalizedDate(FormatStyle.MEDIUM)。</span><br><span class="line"><span class="number">3.</span>自定义的格式。如：ofPattern(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>)。</span><br></pre></td></tr></table></figure></p>
<p>Java 8 吸收了 Joda-Time 的精华，新的 java.time
中包含了所有关于时钟（Clock），本地日期（LocalDate）、本地时间（LocalTime）、本地日期时间（LocalDateTime）、时区（ZonedDateTime）和持续时间（Duration）的类。<br />
同时，历史悠久的 Date 类新增了 toInstant() 方法，用于把 Date
转换成新的表示形式。这些新增的本地化时间日期 API
大大简化了了日期时间和本地化的管理。<br />
<div class="note info"><p>说明：大多数开发者只会用到基础包和format包，也可能会用到temporal包。因此，尽管有68个新的公开类型，大多数开发者，大概将只会用到其中的很少一部分。</p>
</div></p>
<figure class="highlight java"><figcaption><span>TestDate2.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> java.time.format.FormatStyle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDate2</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test10</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="comment">//本地化相关的格式</span></span><br><span class="line">        <span class="type">DateTimeFormatter</span> <span class="variable">d1</span> <span class="operator">=</span> DateTimeFormatter.ofLocalizedDateTime(FormatStyle.LONG).withZone(ZoneId.systemDefault());</span><br><span class="line">        <span class="type">DateTimeFormatter</span> <span class="variable">d2</span> <span class="operator">=</span> DateTimeFormatter.ofLocalizedDateTime(FormatStyle.SHORT).withZone(ZoneId.systemDefault());</span><br><span class="line">        <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> d1.format(now);</span><br><span class="line">        <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> d2.format(now);</span><br><span class="line">        System.out.println(s1);<span class="comment">//2019年6月6日 CST 17:39:36</span></span><br><span class="line">        System.out.println(s2);<span class="comment">//19/6/6 17:39</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test9</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="comment">//预定义的标准格式</span></span><br><span class="line">        <span class="type">DateTimeFormatter</span> <span class="variable">df</span> <span class="operator">=</span> DateTimeFormatter.ISO_DATE_TIME;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> df.format(now);</span><br><span class="line">        System.out.println(str);<span class="comment">//2019-06-06T16:38:23.8106464</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test8</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">        <span class="comment">//自定义的格式</span></span><br><span class="line">        <span class="type">DateTimeFormatter</span> <span class="variable">df</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy年MM月dd日 HH时mm分ss秒  SSS毫秒  E 是这一年的D天&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> df.format(now);</span><br><span class="line">        System.out.println(str);<span class="comment">//2024年05月24日 17时41分38秒 202毫秒 周五 是这一年的145天</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test7</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">now</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">before</span> <span class="operator">=</span> now.minusDays(<span class="number">100</span>);<span class="comment">//减去天数</span></span><br><span class="line">        System.out.println(before);<span class="comment">//2019-02-26</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test06</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">lai</span> <span class="operator">=</span> LocalDate.of(<span class="number">2019</span>, <span class="number">5</span>, <span class="number">13</span>);</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">go</span> <span class="operator">=</span> lai.plusDays(<span class="number">160</span>);<span class="comment">//增加天数</span></span><br><span class="line">        System.out.println(go);<span class="comment">//2019-10-20</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test05</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">lai</span> <span class="operator">=</span> LocalDate.of(<span class="number">2019</span>, <span class="number">5</span>, <span class="number">13</span>);</span><br><span class="line">        System.out.println(lai.getDayOfYear());<span class="comment">//133</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">lai</span> <span class="operator">=</span> LocalDate.of(<span class="number">2019</span>, <span class="number">5</span>, <span class="number">13</span>);<span class="comment">//自定义日期对象</span></span><br><span class="line">        System.out.println(lai);<span class="comment">//2019-05-13</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDateTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalDateTime.now();<span class="comment">//日期+时间</span></span><br><span class="line">        System.out.println(now);<span class="comment">//2024-05-24T17:43:25.448598700</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalTime</span> <span class="variable">now</span> <span class="operator">=</span> LocalTime.now();<span class="comment">//时间</span></span><br><span class="line">        System.out.println(now);<span class="comment">//17:43:39.644471400</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">now</span> <span class="operator">=</span> LocalDate.now();<span class="comment">//日期</span></span><br><span class="line">        System.out.println(now);<span class="comment">//2024-05-24</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数学相关类">数学相关类</h2>
<h3 id="java.lang.math">java.lang.Math</h3>
<p>java.lang.Math提供了一系列静态方法用于科学计算：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法的参数、返回值类型一般为double型</span></span><br><span class="line">max(<span class="type">double</span> a, <span class="type">double</span> b)：最大值。</span><br><span class="line">min(<span class="type">double</span> a, <span class="type">double</span> b)：最小值。</span><br><span class="line">abs(<span class="type">double</span> a)：绝对值。</span><br><span class="line">sqrt(<span class="type">double</span> a)：平方根。</span><br><span class="line">log(<span class="type">double</span> a)：自然对数。</span><br><span class="line">exp(<span class="type">double</span> a)：e为底指数。</span><br><span class="line">random()：返回[<span class="number">0.0</span>, <span class="number">1.0</span>)的随机数。</span><br><span class="line">pow(<span class="type">double</span> a, doble b)：a的b次幂。</span><br><span class="line">acos(<span class="type">double</span> a), asin(<span class="type">double</span> a), atan(<span class="type">double</span> a), cos(<span class="type">double</span> a), sin(<span class="type">double</span> a), tan(<span class="type">double</span> a)：三角函数。</span><br><span class="line">toDegrees(<span class="type">double</span> angrad)：弧度 —&gt; 角度。</span><br><span class="line">toRadians(<span class="type">double</span> angdeg)：角度 —&gt; 弧度。</span><br><span class="line"><span class="type">long</span> <span class="title function_">round</span><span class="params">(<span class="type">double</span> a)</span>：四舍五入，<span class="type">double</span>型数据a转换为<span class="type">long</span>型。</span><br><span class="line"><span class="type">double</span> <span class="title function_">floor</span><span class="params">(<span class="type">double</span> a)</span>：向下取。</span><br><span class="line"><span class="type">double</span> <span class="title function_">ceil</span><span class="params">(<span class="type">double</span> a)</span>：向上取。</span><br></pre></td></tr></table></figure></p>
<h3 id="java.math">java.math</h3>
<p>java.math.BigInteger：不可变的任意精度的整数。除了提供java.lang.Math的所有相关方法，还增加了
模算术、GCD 计算、质数测试、素数生成、位操作等方法。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">构造方法：</span><br><span class="line">BigInteger(String val)：根据字符串构建BigInteger对象。</span><br><span class="line">常用方法：</span><br><span class="line">BigInteger <span class="title function_">add</span><span class="params">(BigInteger val)</span>：返回其值为 (<span class="built_in">this</span> + val) 的 BigInteger。 </span><br><span class="line">BigInteger <span class="title function_">subtract</span><span class="params">(BigInteger val)</span>：返回其值为 (<span class="built_in">this</span> - val) 的 BigInteger。</span><br><span class="line">BigInteger <span class="title function_">multiply</span><span class="params">(BigInteger val)</span>：返回其值为 (<span class="built_in">this</span> * val) 的 BigInteger。</span><br><span class="line">BigInteger <span class="title function_">divide</span><span class="params">(BigInteger val)</span>：返回其值为 (<span class="built_in">this</span> / val) 的 BigInteger。整数相除只保留整数部分。</span><br><span class="line">BigInteger <span class="title function_">remainder</span><span class="params">(BigInteger val)</span>：返回其值为 (<span class="built_in">this</span> % val) 的 BigInteger。</span><br><span class="line">BigInteger[] divideAndRemainder(BigInteger val)：返回包含 (<span class="built_in">this</span> / val) 后跟 (<span class="built_in">this</span> % val) 的两个 BigInteger 的数组。</span><br><span class="line">BigInteger <span class="title function_">pow</span><span class="params">(<span class="type">int</span> exponent)</span>：返回其值为 (thisexponent) 的 BigInteger。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><figcaption><span>TestMath.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMath</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">big1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;72.345678912345678912345678&quot;</span>);</span><br><span class="line">        <span class="type">BigDecimal</span> <span class="variable">big2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigDecimal</span>(<span class="string">&quot;4.2345678912345678912345678&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;加：&quot;</span> + big1.add(big2));</span><br><span class="line">        System.out.println(<span class="string">&quot;减：&quot;</span> + big1.subtract(big2));</span><br><span class="line">        System.out.println(<span class="string">&quot;乘：&quot;</span> + big1.multiply(big2));</span><br><span class="line">        <span class="comment">// System.out.println(&quot;除：&quot; + big1.divide(big2));//错误，除不尽会报异常</span></span><br><span class="line">        <span class="comment">// divide(BigDecimal divisor, int scale, int roundingMode)</span></span><br><span class="line">        System.out.println(<span class="string">&quot;除：&quot;</span> + big1.divide(big2, <span class="number">10</span>, BigDecimal.ROUND_CEILING));</span><br><span class="line">        System.out.println(<span class="string">&quot;余：&quot;</span> + big1.remainder(big2));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// long big = 12345678912345678912345678L;</span></span><br><span class="line">        <span class="type">BigInteger</span> <span class="variable">big1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;72345678912345678912345678&quot;</span>);</span><br><span class="line">        <span class="type">BigInteger</span> <span class="variable">big2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="string">&quot;42345678912345678912345678&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;加：&quot;</span> + big1.add(big2));</span><br><span class="line">        System.out.println(<span class="string">&quot;减：&quot;</span> + big1.subtract(big2));</span><br><span class="line">        System.out.println(<span class="string">&quot;乘：&quot;</span> + big1.multiply(big2));</span><br><span class="line">        System.out.println(<span class="string">&quot;除：&quot;</span> + big1.divide(big2));</span><br><span class="line">        System.out.println(<span class="string">&quot;余：&quot;</span> + big1.remainder(big2));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(Math.ceil(<span class="number">2.1</span>));<span class="comment">//3.0</span></span><br><span class="line">        System.out.println(Math.floor(<span class="number">2.1</span>));<span class="comment">//2.0</span></span><br><span class="line">        System.out.println(Math.round(<span class="number">2.1</span>));<span class="comment">//2，四舍五入</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(Math.ceil(<span class="number">2.6</span>));<span class="comment">//3.0</span></span><br><span class="line">        System.out.println(Math.floor(<span class="number">2.6</span>));<span class="comment">//2.0</span></span><br><span class="line">        System.out.println(Math.round(<span class="number">2.6</span>));<span class="comment">//3，四舍五入</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(Math.ceil(-<span class="number">2.1</span>));<span class="comment">//-2.0</span></span><br><span class="line">        System.out.println(Math.floor(-<span class="number">2.1</span>));<span class="comment">//-3.0</span></span><br><span class="line">        System.out.println(Math.round(-<span class="number">2.1</span>));<span class="comment">//-2，四舍五入</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(Math.ceil(-<span class="number">2.6</span>));<span class="comment">//-2.0</span></span><br><span class="line">        System.out.println(Math.floor(-<span class="number">2.6</span>));<span class="comment">//-3.0</span></span><br><span class="line">        System.out.println(Math.round(-<span class="number">2.6</span>));<span class="comment">//-3</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(Math.ceil(<span class="number">2.1</span>));<span class="comment">//3.0</span></span><br><span class="line">        System.out.println(Math.PI);<span class="comment">//3.141592653589793</span></span><br><span class="line">        System.out.println(Math.sqrt(<span class="number">9</span>));<span class="comment">//3.0</span></span><br><span class="line">        System.out.println(Math.pow(<span class="number">2</span>, <span class="number">8</span>));<span class="comment">//256.0</span></span><br><span class="line">        System.out.println(Math.max(<span class="number">5</span>, <span class="number">9</span>));<span class="comment">//9</span></span><br><span class="line">        System.out.println(Math.min(<span class="number">3</span>, <span class="number">9</span>));<span class="comment">//3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参考资料">参考资料</h2>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMxMzUxMDcxL2FydGljbGUvZGV0YWlscy8xMjk5MTU4NjY=">Java的==符号<i class="fa fa-external-link-alt"></i></span><br />
<span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9qYXZhL2phdmEtc3RyaW5nYnVmZmVyLmh0bWw=">StringBuilder和StringBuilder<i class="fa fa-external-link-alt"></i></span><br />
<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC82NTM1MDc2MTk=">String,StringBuilder,StringBuffer的区别<i class="fa fa-external-link-alt"></i></span></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/10/Java/20.Java%E5%BC%82%E5%B8%B8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/02/10/Java/20.Java%E5%BC%82%E5%B8%B8/" class="post-title-link" itemprop="url">Java异常</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-10 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-10T00:00:00+08:00">2020-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>10 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="异常">异常</h2>
<p><strong>异常：指不可预知的非正常的情况，是一种对程序运行过程中发生错误时进行通知的机制。</strong><br />
注意，<strong>语法错误</strong>是编译不通过的、<strong>逻辑错误</strong>属于BUG，这俩都不属于异常。</p>
<p><strong>抛出异常</strong>：在执行一个方法时，如果在某句代码发生异常，则会在该句代码处生成代表该异常的一个对象，停止当前执行路径，并把异常对象提交给JRE，不同的异常对象中封装了相应的错误信息。<br />
<strong>捕获异常</strong>：JRE得到该异常后，寻找相应的代码来处理该异常。JRE在方法的调用栈中查找，从生成异常的方法开始回溯，直到找到相应的异常处理代码为止。如果没有找到处理代码，那么程序终止运行。</p>
<h3 id="分类">分类</h3>
<p><img src="/images/Java简介和环境搭建/异常分类.png" width="80%"></p>
<p>异常、错误详解：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|-Throwable：所有错误或异常的超类。当对象是此类或其子类的实例时，才能<span class="keyword">throw</span>抛出、作为<span class="keyword">catch</span>中参数类型。</span><br><span class="line">    |-Error：Throwable的子类，程序中无法处理的<span class="string">&quot;错误&quot;</span>。OutOfMemoryError内存不足错误。</span><br><span class="line">    |-Exception：Throwable的子类，程序本身可以捕获并且可以处理的<span class="string">&quot;异常&quot;</span>。NullPointerException空指针异常。</span><br><span class="line">        |-编译时异常（受检异常）：指程序中必须接受检查和处理的异常，由Exception类表示。</span><br><span class="line">        |-运行时异常（非受检异常）：程序中可以不接受检查和处理，或致命性错误异常，由RuntimeException类表示。</span><br></pre></td></tr></table></figure></p>
<p>一些常见的异常：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NullPointerException：空指针异常-&gt;对象.属性、对象.方法、如果对象是<span class="literal">null</span>，就会发生空指针异常。</span><br><span class="line">ArrayIndexOutOfBoundsException：数组下标越界异常-&gt;下标超过了[<span class="number">0</span>,长度-<span class="number">1</span>]。</span><br><span class="line">ClassCastException：类型转换异常-&gt;在向下转型时，可能会发生。</span><br><span class="line">ArithmeticException：算术异常-&gt;分母为零。</span><br><span class="line">InputMisMatchException：输入类型不匹配异常。</span><br><span class="line">IllegalAugmentException：非法参数异常。</span><br></pre></td></tr></table></figure></p>
<h3 id="处理">处理</h3>
<p>1.异常处理的过程：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">|-当程序运行到某一句时，发生了异常，那么程序会先停下来；</span><br><span class="line">|-程序会在这句代码处，查看原因，生成一个合理<span class="string">&quot;异常对象&quot;</span>，然后<span class="string">&quot;抛出&quot;</span>；</span><br><span class="line">|-JVM会检测在这句代码的外围，是否有<span class="string">&quot;try..catch&quot;</span>结构来<span class="string">&quot;捕获&quot;</span>它：</span><br><span class="line">    |-如果可以捕获，那么程序再处理完异常后，继续下面的运行，不会崩溃；</span><br><span class="line">    |-如果不能捕获，那么会把这个异常继续抛给<span class="string">&quot;上级&quot;</span>；</span><br><span class="line">        |-如果<span class="string">&quot;上级&quot;</span>能处理，那么程序从<span class="string">&quot;上级&quot;</span>处理完的代码后面继续运行；</span><br><span class="line">        |-如果<span class="string">&quot;上级&quot;</span>也不能处理，那么继续往上抛，一直到达JVM，那么就<span class="string">&quot;崩溃&quot;</span>。</span><br></pre></td></tr></table></figure></p>
<p>2.异常处理方式：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可使用多个catch子句捕获多个异常</span></span><br><span class="line"><span class="comment">//可组合方式：try-catch、try-finally、try-catch-finally</span></span><br><span class="line"><span class="comment">//1.try中代码无异常，那么try中代码会正常执行，catch部分不执行，finally中会执行。</span></span><br><span class="line"><span class="comment">//2.try中代码有异常，那么try中发生异常代码的后面不执行了，找匹配的catch分支执行，finally中会执行。</span></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    可能发生异常的代码</span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">1</span>  异常对象名)&#123;<span class="comment">//异常对象名绝大多数都是写e</span></span><br><span class="line">    处理这个异常的代码</span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型<span class="number">2</span>  异常对象名)&#123;</span><br><span class="line">    处理这个异常的代码</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    不管<span class="keyword">try</span>中是否发生异常，也不管<span class="keyword">catch</span>是否可以捕获异常，这里代码都必须执行</span><br><span class="line">    一般用于编写释放资源，断开连接等代码</span><br><span class="line">    特殊情况，可以没有<span class="keyword">catch</span>部分</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3.异常抛出方式：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">|-声明抛出：用于方法出现受检异常，但不确定如何/不立即处理时，表明该方法将不对这些异常进行处理，而由该方法的<span class="string">&quot;调用者&quot;</span>负责处理。</span><br><span class="line">    |-格式：<span class="string">&quot;throws 异常1, 异常2..&quot;</span></span><br><span class="line">    |-使用带有<span class="keyword">throws</span>的方法，要么<span class="keyword">try</span>-<span class="keyword">catch</span>处理，要么继续<span class="keyword">throws</span>，否则报错。</span><br><span class="line">    |-遇到重写时，父类没有声明<span class="keyword">throws</span>，子类也不能声明<span class="keyword">throws</span>。</span><br><span class="line">    |-遇到重写时，子类不能抛出范围大于父类异常的类型。</span><br><span class="line">    |-遇到重写时，多态情况下，对重写方法的调用、异常的捕获按父类声明的异常处理。</span><br><span class="line">|-手动抛出：手动创建异常对象，并抛出。异常对象必须是Throwable或其子类实例。</span><br><span class="line">    |-格式：<span class="string">&quot;throw 异常对象;&quot;</span></span><br></pre></td></tr></table></figure></p>
<p>4.自定义异常：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>必须继承Throwable或它的子类，但是实际开发中，一般继承RuntimeException和Exception。</span><br><span class="line"><span class="number">2.</span>建议包含两种构造器：无参构造器、带有详细信息的构造器（message属性）。</span><br><span class="line"><span class="number">3.</span>建议增加serialVersionUID，防止序列化和反序列不一致。</span><br><span class="line"><span class="number">4.</span>只能通过<span class="keyword">throw</span>手动抛出，它不能由JVM自动抛出。</span><br><span class="line"><span class="number">5.</span>异常类的名字起好，可以根据名字判断异常类型。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="异常"><ul class="nav-tabs"><li class="tab active"><a href="#异常-1">异常处理</a></li><li class="tab"><a href="#异常-2">声明抛出</a></li><li class="tab"><a href="#异常-3">声明抛出+重写</a></li><li class="tab"><a href="#异常-4">手动抛出</a></li><li class="tab"><a href="#异常-5">自定义异常</a></li></ul><div class="tab-content"><div class="tab-pane active" id="异常-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestException</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> Integer.parseInt(args[<span class="number">0</span>]);</span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> Integer.parseInt(args[<span class="number">1</span>]);</span><br><span class="line">            System.out.println(a + <span class="string">&quot;/&quot;</span> + b + <span class="string">&quot;=&quot;</span> + a/b);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;程序继续...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="异常-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFileReader2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            readFile(<span class="string">&quot;d:/a.txt&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//声明抛出</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readFile</span><span class="params">(String filename)</span> <span class="keyword">throws</span> FileNotFoundException,IOException&#123;</span><br><span class="line">        <span class="type">FileReader</span> <span class="variable">fr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileReader</span>(<span class="string">&quot;d:/a.txt&quot;</span>);</span><br><span class="line">        <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> (<span class="type">char</span>) fr.read();</span><br><span class="line">        System.out.println(c);</span><br><span class="line">        fr.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="异常-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span><span class="keyword">throws</span> IOException&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> <span class="keyword">throws</span> FileNotFoundException&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> <span class="keyword">throws</span> IOException,FileNotFoundException&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">E</span> <span class="keyword">extends</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> <span class="keyword">throws</span> IOException,RuntimeException&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// class F extends A&#123;</span></span><br><span class="line"><span class="comment">//     public void method() throws Exception &#123;&#125;//错误，子类Exception范围大于IOException了</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="异常-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThrow</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">check</span><span class="params">(String username,String password)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(username==<span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(username.trim()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户名不能为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(password==<span class="literal">null</span> || <span class="string">&quot;&quot;</span>.equals(password.trim()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;密码不能为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="异常-5"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义异常，表示金额不能为负数</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MoneyCannotNegativeException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;<span class="comment">//名字易懂</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MoneyCannotNegativeException</span><span class="params">()</span> &#123;<span class="comment">//无参构造器</span></span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MoneyCannotNegativeException</span><span class="params">(String message)</span> &#123;<span class="comment">//带有详细信息的构造器</span></span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Account</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> balance;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Account</span><span class="params">(<span class="type">double</span> balance)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">double</span> money)</span> <span class="keyword">throws</span> MoneyCannotNegativeException&#123;</span><br><span class="line">        <span class="keyword">if</span>(money &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MoneyCannotNegativeException</span>(<span class="string">&quot;取款金额&quot;</span> + money + <span class="string">&quot;有问题，取款金额不能小于0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(money &gt; balance)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;余额不足&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        balance -= money;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDefine</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Account</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Account</span>(<span class="number">100</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            a.withdraw(-<span class="number">100</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MoneyCannotNegativeException e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());<span class="comment">//取款金额-100.0有问题，取款金额不能小于0</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p>5.finally与return混用，执行顺序：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span>有两个阶段：给返回值赋值；结束方法运行。</span><br><span class="line"><span class="number">1.</span>执行<span class="keyword">try</span>、<span class="keyword">catch</span>，给<span class="keyword">return</span>的返回值临时变量赋值。</span><br><span class="line"><span class="number">2.</span>执行<span class="keyword">finally</span>，有<span class="keyword">return</span>就覆盖掉。</span><br><span class="line"></span><br><span class="line"><span class="keyword">finally</span>中的代码都必须执行，不管<span class="keyword">try</span>中有无异常、<span class="keyword">catch</span>有无捕获异常、<span class="keyword">try</span>/<span class="keyword">catch</span>中有无<span class="keyword">return</span>。</span><br><span class="line"><span class="keyword">finally</span>中有<span class="keyword">return</span>，就从这<span class="keyword">return</span>回去。即使<span class="keyword">try</span>或<span class="keyword">catch</span>有<span class="keyword">return</span>，也是临时赋值，所以<span class="keyword">finally</span>中的<span class="keyword">return</span>会覆盖刚刚的返回值。</span><br><span class="line"><span class="keyword">finally</span>中无<span class="keyword">return</span>，那么先把<span class="keyword">try</span>或<span class="keyword">catch</span>执行完，临时赋值后，走一下<span class="keyword">finally</span>，然后回去结束当前方法。</span><br></pre></td></tr></table></figure><br />
<div class="tabs" id="异常1"><ul class="nav-tabs"><li class="tab active"><a href="#异常1-1">finally返回</a></li><li class="tab"><a href="#异常1-2">catch返回</a></li><li class="tab"><a href="#异常1-3">try返回</a></li><li class="tab"><a href="#异常1-4">return两个阶段</a></li></ul><div class="tab-content"><div class="tab-pane active" id="异常1-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestReturn</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> test(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        System.out.println(result);<span class="comment">//test结束、0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">test</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Integer.parseInt(str);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;test结束&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//finally有return覆盖try、catch的</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="异常1-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestReturn</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> test(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        System.out.println(result);<span class="comment">//test结束、-1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">test</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Integer.parseInt(str);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;<span class="comment">//finally无return，正常走</span></span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;test结束&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="异常1-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestReturn</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> test(<span class="string">&quot;12&quot;</span>);</span><br><span class="line">        System.out.println(result);<span class="comment">//test结束、1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">test</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Integer.parseInt(str);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;<span class="comment">//finally无return，正常走</span></span><br><span class="line">        &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;test结束&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="异常1-4"><figure class="highlight java"><figcaption><span>TestFinallyNoReturn.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestFinallyNoReturn</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> getNum(<span class="number">4</span>);</span><br><span class="line">        System.out.println(num);<span class="comment">//exception、finally、0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getNum</span><span class="params">(<span class="type">int</span> a)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            System.out.println(a/<span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span>(a &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                result = <span class="number">20</span>;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a &lt; <span class="number">0</span>)&#123;</span><br><span class="line">                result = -<span class="number">20</span>;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;exception&quot;</span>);</span><br><span class="line">            result = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span> result;<span class="comment">//在执行finally前，result就压栈了，此时finally中的result改变不影响这里的result</span></span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            result = <span class="number">30</span>;</span><br><span class="line">            System.out.println(<span class="string">&quot;finally&quot;</span>);</span><br><span class="line">            <span class="comment">//return result;//如果有这句，结果就变成30</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="方法">方法</h3>
<p>1.异常对象的常用方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">e.printStackTrace()：打印异常的详细信息，包括追踪跟踪信息，即这个异常对象一路经过了哪些方法。</span><br><span class="line">e.getMessage()：返回异常对象中简单的错误信息提示。</span><br><span class="line">System.err.println(xx)：打印错误信息，红字。</span><br><span class="line">System.out.println(xx)：打印正常信息，黑字。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><figcaption><span>TestTryCatch.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestTryCatch</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> Integer.parseInt(args[<span class="number">0</span>]);<span class="comment">//第一个参数赋值给a变量</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> Integer.parseInt(args[<span class="number">1</span>]);<span class="comment">//第二个参数赋值给b变量</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">shang</span> <span class="operator">=</span> a/b;</span><br><span class="line">            System.out.println(a +<span class="string">&quot;/&quot;</span> + b + <span class="string">&quot;=&quot;</span> + shang);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">            e.printStackTrace();<span class="comment">//标准的</span></span><br><span class="line">            <span class="comment">//System.err.println(e.getMessage());//打印出来是红字</span></span><br><span class="line">            <span class="comment">//System.out.println(e.getMessage());//打印出来是黑字</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e)&#123;<span class="comment">//Exception不能放在前面，它会捕获所有异常</span></span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;其他的代码....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="tabs" id="习题"><ul class="nav-tabs"><li class="tab active"><a href="#习题-1">习题1</a></li><li class="tab"><a href="#习题-2">习题2</a></li><li class="tab"><a href="#习题-3">练习3</a></li></ul><div class="tab-content"><div class="tab-pane active" id="习题-1"><figure class="highlight java"><figcaption><span>TestExer.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.InputMismatchException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">//从键盘输入两个整数a,b，求两个数的和、差、积、商，</span></span><br><span class="line"><span class="comment">//并且尝试使用try...catch处理可能发生的异常。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestExer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入一个整数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">            System.out.print(<span class="string">&quot;请输入另一个整数：&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">            System.out.println(<span class="string">&quot;和：&quot;</span> + (a+b));</span><br><span class="line">            System.out.println(<span class="string">&quot;差：&quot;</span> + (a-b));</span><br><span class="line">            System.out.println(<span class="string">&quot;积：&quot;</span> + (a*b));</span><br><span class="line">            System.out.println(<span class="string">&quot;商：&quot;</span> + (a/b));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InputMismatchException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;输入错误，应该输入整数&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.err.println(<span class="string">&quot;除数不能为0&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            input.close();<span class="comment">//资源关闭</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="习题-2"><figure class="highlight java"><figcaption><span>TestExer2.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.InputMismatchException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">//从键盘输入两个整数a,b，求两个数的和、差、积、商，</span></span><br><span class="line"><span class="comment">//并且尝试使用try...catch处理可能发生的异常。</span></span><br><span class="line"><span class="comment">//增加要求：如果输入有问题，提示错误信息后重新输入，如果没问题，就不重新输入</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestExer2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">input</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.print(<span class="string">&quot;请输入一个整数：&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> input.nextInt();<span class="comment">//&quot;a&quot;</span></span><br><span class="line">                System.out.print(<span class="string">&quot;请输入另一个整数：&quot;</span>);</span><br><span class="line">                <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> input.nextInt();</span><br><span class="line">                System.out.println(<span class="string">&quot;和：&quot;</span> + (a+b));</span><br><span class="line">                System.out.println(<span class="string">&quot;差：&quot;</span> + (a-b));</span><br><span class="line">                System.out.println(<span class="string">&quot;积：&quot;</span> + (a*b));</span><br><span class="line">                System.out.println(<span class="string">&quot;商：&quot;</span> + (a/b));</span><br><span class="line">                <span class="keyword">break</span>;<span class="comment">//正确执行完退出</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (InputMismatchException e) &#123;</span><br><span class="line">                System.err.println(<span class="string">&quot;输入错误，应该输入整数&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> input.nextLine();<span class="comment">//读取当前行所有内容，我没有接受，就表示丢弃了</span></span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">                System.err.println(<span class="string">&quot;除数不能为0&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="comment">// finally&#123;//错误，while第一次执行完就会关闭，下次无法输入，放外面</span></span><br><span class="line">            <span class="comment">//     input.close();//资源关闭</span></span><br><span class="line">            <span class="comment">// &#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">        input.close();<span class="comment">//只能放在while外面结束</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="习题-3"><figure class="highlight java"><figcaption><span>TestExer3.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestExer3</span> &#123;</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    TestExer3()&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getOut</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;2&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;3&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//类初始化：静态变量的显示赋值（这里没有）、静态代码块</span></span><br><span class="line">        <span class="comment">//这里没有创建实例，所以不会走非静态初始化</span></span><br><span class="line">        System.out.println(getOut());<span class="comment">//a、3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p>2.补充：finally、final、finalize的区别：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">finally</span>：最终块，论<span class="keyword">try</span>中是否有异常，无论<span class="keyword">catch</span>是否可以捕获异常，也不管<span class="keyword">try</span>和<span class="keyword">catch</span>中是否有<span class="keyword">return</span>，都一定要执行的部分。</span><br><span class="line"><span class="keyword">final</span>：修饰符，修饰类表示不能被继承。修饰方法表示不能被重写。修饰变量表示常量，值不能修改。</span><br><span class="line">finalize：方法名，在Object类中声明的，当对象被GC回收之前调用。</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/09/Java/19.Java%E6%9E%9A%E4%B8%BE%E4%B8%8E%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/02/09/Java/19.Java%E6%9E%9A%E4%B8%BE%E4%B8%8E%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">Java枚举与注解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-09 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-09T00:00:00+08:00">2020-02-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="枚举">枚举</h2>
<p>1.<strong>枚举：是一种特殊的类，因为它的对象是有限的常量对象。</strong>比如星期类，只有7个值。</p>
<p>2.枚举类的创建（JDK1.5之后）：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用enum定义的枚举类，默认继承了java.lang.Enum类，因此不能再继承其他类。</span></span><br><span class="line">[权限修饰符] <span class="keyword">enum</span> 枚举类&#123;常量对象列表;其他成员...&#125;</span><br></pre></td></tr></table></figure></p>
<p>3.枚举类的特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>枚举类的所有构造器只能使用<span class="string">&quot;private&quot;</span>。</span><br><span class="line"><span class="number">2.</span>枚举类的所有常量必须显式列出，<span class="string">&quot;,&quot;</span>分隔，<span class="string">&quot;;&quot;</span>结尾，这些常量默认<span class="string">&quot;public static final&quot;</span>修饰的。</span><br><span class="line"><span class="number">3.</span>可以在<span class="string">&quot;switch&quot;</span>表达式中使用枚举类对象作为表达式，<span class="string">&quot;case&quot;</span>子句可以直接使用枚举值的名字。</span><br></pre></td></tr></table></figure></p>
<p>4.<code>java.lang.Enum</code>类的方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">除了toString方法，都是<span class="keyword">final</span>修饰的方法，因此都不能重写。</span><br><span class="line"><span class="number">1.</span>values：返回枚举类型的对象数组。该方法可以很方便地遍历所有的枚举值。</span><br><span class="line"><span class="number">2.</span>valueOf：接收枚举类型的类对象/枚举常量名称，返回和参数匹配的枚举常量，匹配不上会有运行时异常。</span><br><span class="line"><span class="number">4.</span>toSting：得到当前枚举常量的名称。可通过重写这个方法来使得到的结果更易读。</span><br><span class="line"><span class="number">5.</span>name：得到当前枚举常量的名称。</span><br><span class="line"><span class="number">6.</span>ordinal：得到当前枚举常量的次序。</span><br><span class="line"><span class="number">7.</span>compareTo：枚举类型实现了Comparable接口，这样可以比较两个枚举常量的大小（按照声明的顺序排列）。</span><br><span class="line"><span class="number">8.</span>equals：比较引用地址是否相同，枚举中它和<span class="string">&quot;==&quot;</span>一样判断值是否相等，它的目的是为了在Set、List、Map中使用。</span><br><span class="line"><span class="number">9.</span>hashCode：Enum实现了hashCode()来和equals()保持一致。</span><br><span class="line"><span class="number">10.</span>getDeclaringClass：得到枚举常量所属枚举类型的Class对象。可以用它来判断两个枚举常量是否属于同一个枚举类型。</span><br><span class="line"><span class="number">11.</span>clone：枚举类型不能被克隆，为防止子类实现克隆方法，Enum实现了一个抛出异常的Clone()。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="enum"><ul class="nav-tabs"><li class="tab active"><a href="#enum-1">枚举创建</a></li><li class="tab"><a href="#enum-2">JDK1.5后</a></li><li class="tab"><a href="#enum-3">枚举+接口</a></li><li class="tab"><a href="#enum-4">JDK1.5前</a></li></ul><div class="tab-content"><div class="tab-pane active" id="enum-1"><figure class="highlight java"><figcaption><span>TestEnumCase.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Season</span>&#123;<span class="comment">//枚举类</span></span><br><span class="line">    SPRING, SUMMER, AUTUMN, WINTER;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestEnumCase</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Season</span> <span class="variable">s</span> <span class="operator">=</span> Season.SPRING;</span><br><span class="line">        <span class="keyword">switch</span>(s)&#123;</span><br><span class="line">        <span class="keyword">case</span> SPRING:</span><br><span class="line">            System.out.println(<span class="string">&quot;春&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> SUMMER:</span><br><span class="line">            System.out.println(<span class="string">&quot;夏&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> AUTUMN:</span><br><span class="line">            System.out.println(<span class="string">&quot;秋&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> WINTER:</span><br><span class="line">            System.out.println(<span class="string">&quot;冬&quot;</span>);<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="enum-2"><figure class="highlight java"><figcaption><span>TestEnum2.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Season</span>&#123;<span class="comment">//枚举类</span></span><br><span class="line">    SPRING(<span class="string">&quot;春&quot;</span>), SUMMER, AUTUMN, WINTER;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Season</span><span class="params">()</span>&#123;&#125;<span class="comment">//无参构造器</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Season</span><span class="params">(String description)</span>&#123;<span class="comment">//有参构造器</span></span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span>&#123;<span class="comment">//println自动调用toString</span></span><br><span class="line">        <span class="keyword">return</span> name() + <span class="string">&quot;=&quot;</span> + description;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestEnum2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Season</span> <span class="variable">s</span> <span class="operator">=</span> Season.SPRING;</span><br><span class="line">        System.out.println(s);<span class="comment">//SPRING=春</span></span><br><span class="line">        System.out.println(s.name());<span class="comment">//SPRING</span></span><br><span class="line">        System.out.println(s.ordinal());<span class="comment">//0</span></span><br><span class="line">        Season[] all = Season.values();<span class="comment">//获取枚举对象数组</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; all.length; i++) &#123;</span><br><span class="line">            System.out.println(all[i]);<span class="comment">//SPRING=春、SUMMER=null、FALL=null、WINTER=nul</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Season</span> <span class="variable">winter</span> <span class="operator">=</span> Season.valueOf(<span class="string">&quot;WINTER&quot;</span>);<span class="comment">//获取WINTER枚举常量</span></span><br><span class="line">        System.out.println(winter);<span class="comment">//WINTER=null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="enum-3"><figure class="highlight java"><figcaption><span>TestEnum3.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInter</span>&#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">MyEnum1</span> <span class="keyword">implements</span> <span class="title class_">MyInter</span>&#123;<span class="comment">//枚举+继承</span></span><br><span class="line">    <span class="comment">//A、B实现各自的接口方法</span></span><br><span class="line">    A&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;A&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,B&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">MyEnum2</span> <span class="keyword">implements</span> <span class="title class_">MyInter</span>&#123;<span class="comment">//枚举+继承</span></span><br><span class="line">    A, B;<span class="comment">//实现统一的接口方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AB&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestEnum3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyEnum1</span> <span class="variable">a</span> <span class="operator">=</span> MyEnum1.A;</span><br><span class="line">        a.test();<span class="comment">//A</span></span><br><span class="line">        <span class="type">MyEnum1</span> <span class="variable">b</span> <span class="operator">=</span> MyEnum1.B;</span><br><span class="line">        b.test();<span class="comment">//B</span></span><br><span class="line">        <span class="type">MyEnum2</span> <span class="variable">c</span> <span class="operator">=</span> MyEnum2.A;</span><br><span class="line">        c.test();<span class="comment">//AB</span></span><br><span class="line">        <span class="type">MyEnum2</span> <span class="variable">d</span> <span class="operator">=</span> MyEnum2.B;</span><br><span class="line">        d.test();<span class="comment">//AB</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="enum-4"><figure class="highlight java"><figcaption><span>TestEnum.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.私有化类的构造器，保证不能在类的外部创建其对象</span></span><br><span class="line"><span class="comment">//2.在类的内部创建枚举类的实例，声明为：public static final</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Gender</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Gender</span> <span class="variable">NAN</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gender</span>(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Gender</span> <span class="variable">NV</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gender</span>(<span class="string">&quot;女&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Gender</span><span class="params">(String description)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestEnum</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//Gender g1 = new Gender();//无法随意创建对象</span></span><br><span class="line">        <span class="type">Gender</span> <span class="variable">nan1</span> <span class="operator">=</span> Gender.NAN;</span><br><span class="line">        <span class="type">Gender</span> <span class="variable">nan2</span> <span class="operator">=</span> Gender.NAN;</span><br><span class="line">        System.out.println(nan1 == nan2);<span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h2 id="注解">注解</h2>
<p>1.注解：可以对程序做出解释，可被其他程序（编译器等）读取。<br />
2.注解的格式：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@注释名</span><br><span class="line"><span class="meta">@SuppressWarnings(value=”unchecked”)</span><span class="comment">//示例</span></span><br></pre></td></tr></table></figure></p>
<p>3.注解的常见功能：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">生成文档:</span><br><span class="line">    |-<span class="meta">@author</span>：标明开发该类模块的作者，多个作者之间使用<span class="string">&quot;,&quot;</span>分割。</span><br><span class="line">    |-<span class="meta">@version</span>：标明该类模块的版本。</span><br><span class="line">    |-<span class="meta">@see</span>：参考转向，也就是相关主题。</span><br><span class="line">    |-<span class="meta">@since</span>：从哪个版本开始增加的。</span><br><span class="line">    |-<span class="meta">@param</span>：对方法某个参数的说明，如果没有参数就不能写。<span class="string">&quot;@param 形参名 形参类型  形参说明&quot;</span></span><br><span class="line">    |-<span class="meta">@return</span>：对方法返回值的说明，如果返回类型是<span class="keyword">void</span>就不能写。<span class="string">&quot;@return 返回值类型 返回值说明&quot;</span></span><br><span class="line">    |-<span class="meta">@throws</span>/<span class="meta">@exception</span>：对方法可能抛出的异常进行说明，必须<span class="keyword">throws</span>抛出，否则不能写。<span class="string">&quot;@exception 异常类型 异常说明&quot;</span></span><br><span class="line">编译检查：</span><br><span class="line">    |-<span class="meta">@Override</span>：按照重写的要求检查方法的格式。</span><br><span class="line">    |-<span class="meta">@Deprecated</span>：过时的，表示不鼓励程序员使用这样的元素，因为存在危险或有更好的实现。</span><br><span class="line">    |-<span class="meta">@SuppressWarnings</span>：抑制警告。需要添加至少一个参数才能使用。</span><br><span class="line">        |-deprecation：使用了过时的类/方法的警告。</span><br><span class="line">        |-unchecked：执行了未检查的转换时的警告，比如使用集合时未指定泛型。</span><br><span class="line">        |-fallthrough：当在<span class="keyword">switch</span>语句使用时发生<span class="keyword">case</span>穿透。</span><br><span class="line">        |-path：当类路径、源文件路径等中有不存在路径的警告。</span><br><span class="line">        |-serial：当在可序列化的类上缺少serialVersionUID定义时的警告。</span><br><span class="line">        |-<span class="keyword">finally</span>：任何<span class="keyword">finally</span>子句不能完成时的警告。</span><br><span class="line">        |-all：关于以上所有情况的警告。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="注释"><ul class="nav-tabs"><li class="tab active"><a href="#注释-1">生成文档</a></li><li class="tab"><a href="#注释-2">编译检查</a></li></ul><div class="tab-content"><div class="tab-pane active" id="注释-1"><figure class="highlight java"><figcaption><span>TestJavadoc.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.annotation.javadoc;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> soundmemories</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> Math.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJavadoc</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 程序的主方法，程序的入口</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args String[] 命令行参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;&#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 求两个整数中最大值的方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a int 其中一个整数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b int 另一个整数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int 返回最大值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">getMax</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 复制一个文件的方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> src String 源文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dest  String 目标文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> FileNotFoundException 当源文件找不到时会抛出该异常</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(String src, String dest)</span> <span class="keyword">throws</span> FileNotFoundException&#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(src);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="注释-2"><figure class="highlight java"><figcaption><span>TestAnnotation.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestAnnotation</span> &#123;</span><br><span class="line">    <span class="comment">//@SuppressWarnings(&#123; &quot;unchecked&quot;, &quot;rawtypes&quot; &#125;)//（2）抑制警告，unchecked不检查强转，rawtypes泛型不指定</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span><span class="comment">//所有警告</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] all = &#123;<span class="string">&quot;hello&quot;</span>,<span class="string">&quot;Hai&quot;</span>,<span class="string">&quot;Java&quot;</span>,<span class="string">&quot;chai&quot;</span>&#125;;</span><br><span class="line">        Arrays.sort(all, <span class="keyword">new</span> <span class="title class_">Comparator</span>()&#123;<span class="comment">//没写泛型会有黄色警告</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> (String) o1;</span><br><span class="line">                <span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> (String) o2;</span><br><span class="line">                <span class="keyword">return</span> s1.compareToIgnoreCase(s2);<span class="comment">//不区分大小写的排序</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">/*写泛型的</span></span><br><span class="line"><span class="comment">        Arrays.sort(all, new Comparator&lt;String&gt;()&#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public int compare(String o1, String o2) &#123;</span></span><br><span class="line"><span class="comment">                return o1.compareToIgnoreCase(o2);</span></span><br><span class="line"><span class="comment">            &#125;    </span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">//打印排序后的结果</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; all.length; i++) &#123;</span><br><span class="line">            System.out.println(all[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//这个Date就是（3）已过时</span></span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">2019</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">println</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;父类的方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_">Father</span>&#123;</span><br><span class="line">    <span class="comment">/*（1）检查重写</span></span><br><span class="line"><span class="comment">    @Override</span></span><br><span class="line"><span class="comment">    public void print1n()&#123;//这个是数字1，@Override会提示错误</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;子类的方法&quot;);</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p>4.自定义注解<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【修饰符】 <span class="meta">@interface</span> 注解名&#123;&#125;</span><br><span class="line"><span class="comment">//示例</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation&#123;</span><br><span class="line">	String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>自定义注解特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>配置参数指方法名，使用无参数方法，返回类型可以为基础类型、String、Class、<span class="keyword">enum</span>、Annotation和其数组。</span><br><span class="line"><span class="number">2.</span>可在定义成员变量时，用<span class="string">&quot;default&quot;</span>为其指定初始值。如果只有一个参数成员，建议使用参数名为<span class="string">&quot;value&quot;</span>。</span><br><span class="line"><span class="number">3.</span>在使用时，如果没有默认值，那么必须指定参数值，参数值为数组类型时用<span class="string">&quot;&#123;参数值&#125;&quot;</span>。</span><br><span class="line"><span class="number">4.</span>想获取配置参数的值，可以<span class="string">&quot;自定义注解对象.配置参数()&quot;</span>来获取。</span><br></pre></td></tr></table></figure></p>
<p>5.元注解：在注解上面的注解，就叫做元注解。四个标准的元注解类型：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">|-java.lang.annotation</span><br><span class="line">    |-<span class="meta">@Target</span>：用于描述注解的使用范围，它由ElementType枚举值决定。</span><br><span class="line">        |-CONSTRUCTOR：构造器。</span><br><span class="line">        |-METHOD：方法。</span><br><span class="line">        |-LOCAL_VARIABLE：局部变量。</span><br><span class="line">        |-Type：类、接口、<span class="keyword">enum</span>声明。</span><br><span class="line">        |-FIELD：域。</span><br><span class="line">        |-PACKAGE：包。</span><br><span class="line">        |-PARAMETER：参数。</span><br><span class="line">        |-TYPE_PARAMETER：能在类型变量的声明语句中使用。</span><br><span class="line">        |-TYPE_USE：能写在使用类型的任何语句中。</span><br><span class="line">    |-<span class="meta">@Retention</span>：用于描述注解的生命周期，它由RetentionPolicy枚举值决定。</span><br><span class="line">        |-SOURCE：在源文件中有效（javac.exe）。</span><br><span class="line">        |-CLASS：默认值，在.class文件中有效（java.exe）。</span><br><span class="line">        |-RUNTIME：在运行时有效，当运行Java程序时，JVM会保留注释，程序可以通过反射获取该注释。</span><br><span class="line">    |-<span class="meta">@Documented</span>：表明这个注解应该被javadoc工具记录。</span><br><span class="line">    |-<span class="meta">@Inherited</span>：允许子类继承父类中的注解。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><figcaption><span>TestMyAnnotation.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.*;<span class="comment">//导入静态成员</span></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MyAnnotation(value=&quot;hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMyAnnotation</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Class</span> <span class="variable">clazz</span> <span class="operator">=</span> TestMyAnnotation.class;<span class="comment">//反射，可看完反射一章再来</span></span><br><span class="line">        <span class="type">Annotation</span> <span class="variable">a</span> <span class="operator">=</span> clazz.getAnnotation(MyAnnotation.class);</span><br><span class="line">        <span class="type">MyAnnotation</span> <span class="variable">m</span> <span class="operator">=</span> (MyAnnotation) a;</span><br><span class="line">        <span class="type">String</span> <span class="variable">info</span> <span class="operator">=</span> m.value();</span><br><span class="line">        System.out.println(info);<span class="comment">//hello</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span><span class="comment">//元注解，表示运行时有效</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD, ElementType.TYPE&#125;)</span><span class="comment">//表示可以用在方法和类型上面，有静态导入可直接写&#123;METHOD,TYPE&#125;</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation&#123;<span class="comment">//自定义注解</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;world&quot;</span>;<span class="comment">//返回类型String，default默认值为&quot;world&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">SoundMemories</span>
  </div>
  <div class="powered-by">由 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9tdXNlLw==">NexT.Muse</span> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.12/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"neutral","dark":"neutral"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.3/mermaid.min.js","integrity":"sha256-JFptYy4KzJ5OQP+Q9fubNf3cxpPPmZKqUOovyEONKrQ="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://soundmemories.github.io/page/8/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
