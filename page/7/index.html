<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Monda:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"soundmemories.github.io","root":"/","images":"/images","scheme":"Muse","version":"8.0.2","exturl":true,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>

  <meta name="description" content="今日事，今日毕">
<meta property="og:type" content="website">
<meta property="og:title" content="SoundMemories">
<meta property="og:url" content="https://soundmemories.github.io/page/7/index.html">
<meta property="og:site_name" content="SoundMemories">
<meta property="og:description" content="今日事，今日毕">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="SoundMemories">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://soundmemories.github.io/page/7/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>SoundMemories</title>
  






  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">SoundMemories</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-主页">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>主页</a>

  </li>
        <li class="menu-item menu-item-分类">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-标签">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-归档">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>
	   
		  
      <div class="sidebar-panel-container">
        <!--noindex-->
        <section class="post-toc-wrap sidebar-panel">
        </section>
        <!--/noindex-->

        <section class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SoundMemories"
      src="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
  <p class="site-author-name" itemprop="name">SoundMemories</p>
  <div class="site-description" itemprop="description">今日事，今日毕</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">120</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NvdW5kbWVtb3JpZXM=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;soundmemories"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnNvdW5kbWVtb3JpZXNAMTYzLmNvbQ==" title="E-Mail → mailto:soundmemories@163.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></span>
  </div>



        </section>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
      

      
    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/17/Java/50.Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/17/Java/50.Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">Java设计模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-17 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-17T00:00:00+08:00">2020-03-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>12k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>11 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h2><p>说白了，就是解决问题的套路，代码结构。<br>Java中常用的设计模式有23种。</p>
<p>JavaSE阶段给大家普及几个：<br>（1）模板设计模式（做到能模仿（3星））<br>（2）单例设计模式（做到脱稿能写（5星））<br>（3）工厂设计模式（做到会调用工厂类的方法（2星））<br>（4）代理设计模式（做到能模仿（3星））<br>（5）迭代器设计模式（了解）<br>（6）装饰者设计模式（了解）<br>其他复杂设计模式，做到能看懂代码，能认识。<br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/03/17/Java/50.Java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/14/Java/30.Java%20Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/14/Java/30.Java%20Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/" class="post-title-link" itemprop="url">Java Lambda表达式与函数式接口</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-14 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-14T00:00:00+08:00">2020-03-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>31k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>28 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h2>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/03/14/Java/30.Java%20Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/10/Java/29.Java%E5%8F%8D%E5%B0%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/10/Java/29.Java%E5%8F%8D%E5%B0%84/" class="post-title-link" itemprop="url">Java反射</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-10 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-10T00:00:00+08:00">2020-03-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>32k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>29 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="类的加载、连接和初始化"><a href="#类的加载、连接和初始化" class="headerlink" title="类的加载、连接和初始化"></a>类的加载、连接和初始化</h2><p>当程序主动使用某个类时，如果该类还未被加载到JVM内存中，系统会通过加载、连接、初始化三个步骤来对该类进行初始化，如果没有意外，JVM将会连续完成这三个步骤，所以也把这三个步骤统称为类加载或类初始化。大多数情况下是这三步一起完成的，但是有的时候初始化不一起完成。<br><img src="https://i.loli.net/2021/04/08/vT6NlPw83mCZgpn.png"><br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/03/10/Java/29.Java%E5%8F%8D%E5%B0%84/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/07/Java/28.Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/07/Java/28.Java%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="post-title-link" itemprop="url">Java网络编程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-07 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-07T00:00:00+08:00">2020-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>35k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>31 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="网络编程的基础知识"><a href="#网络编程的基础知识" class="headerlink" title="网络编程的基础知识"></a>网络编程的基础知识</h2><p>Java程序可以非常方便的访问互联网上的HTTP服务、FTP服务等，并可以直接取得互联网上的远程资源，还可以向远程资源发送GET、POST请求。</p>
<h3 id="网络的概念和分类"><a href="#网络的概念和分类" class="headerlink" title="网络的概念和分类"></a>网络的概念和分类</h3><p>所谓计算机网络就是把分布在不同地理区域的计算机与专门的外部设备用通信线路互连成一个规模大、功能强的网络系统，从而使众多的计算机可以方便地互相传递信息、共享硬件、软件、数据信息等资源。</p>
<p>计算机网络有很多种：<br>按照网络的传输介质划分：双绞线网、同轴电缆网、光纤网、卫星网等。还有无线传输的，例如Wife的传输介质是红外线，蓝牙的传输介质是无线电波，都是电磁波的一种。<br>按照网络的拓扑结构来划分，可以分为星型网络、总线网络、环线网络、树型网络、网状网络、混合型网络等。<br><img src="https://i.loli.net/2021/04/05/4A5wce6bN3iuHQP.png" alt=""><br>按照规模来分类：<br>（1）局域网（Local Area Network，LAN）是指在某一区域内由多台计算机互联成的计算机组。一般是方圆几千米以内。局域网可以实现文件管理、应用软件共享、打印机共享、工作组内的日程安排、电子邮件和传真通信服务等功能。局域网是封闭型的，可以由办公室内的两台计算机组成，也可以由一个公司内的上千台计算机组成。<br>（2）城域网(Metropolitan Area Network，MAN)是在一个城市范围内所建立的计算机通信网，属宽带局域网。由于采用具有有源交换元件的局域网技术，网中传输时延较小，它的传输媒介主要采用光缆，传输速率在100兆比特/秒以上。MAN的一个重要用途是用作骨干网，通过它将位于同一城市内不同地点的主机、数据库，以及LAN等互相联接起来，这与WAN的作用有相似之处，但两者在实现方法与性能上有很大差别。<br>（3）广域网（Wide Area Network， WAN），又称外网、公网，是连接不同地区局域网或城域网计算机通信的远程网。通常跨接很大的物理范围，所覆盖的范围从几十公里到几千公里，它能连接多个地区、城市和国家，或横跨几个洲并能提供远距离通信，形成国际性的远程网络。</p>
<p>那么什么是互联网、因特网、万维网呢？<br>（1）凡是由能彼此通信的设备组成的网络就叫互联网，即使仅有两台机器（计算机、手机等），不论用何种技术使其彼此通信，都叫互联网，所以，互联网有广域网、城域网及局域网之分。国际标准的互联网写法是internet，字母i小写！<br>（2）因特网是互联网中的一种，它可不是仅有两台机器组成的网络，而是由上千万台设备组成的网络（该网络具备一定规模）。国际标准的因特网写法是Internet，字母I大写！<br>（3）因特网是基于TCP/IP协议实现的，TCP/IP协议由很多协议组成，不同类型的协议又被放在不同的层，其中，位于应用层的协议就有很多，比如FTP、SMTP、HTTP。所以，因特网提供的服务一般包括有：www（万维网）服务、电子邮件服务（outlook）、远程登录（QQ）服务、文件传输（FTP）服务、网络电话等等。只要应用层使用的是HTTP协议，就称为万维网(World Wide Web)。</p>
<h3 id="网络协议"><a href="#网络协议" class="headerlink" title="网络协议"></a>网络协议</h3><p>不管处于那种网络，那么通信是网络最基本的要求，而计算机网络中实现通信必须有一些约定，即通信协议。对速率、传输代码、代码结构、传输控制步骤、出错控制等制定标准。<br>网络通信必须有硬件和软件方面的支持，由于世界上大型计算机厂商推出各自不同的网络体系结构，影响了网络通信的统一性，因此国际标准化组织ISO于1978年提出了著名的OSI（Open System Interconnection）开放系统互连参考模型。它把计算机网络分成物理层、数据链路层、网络层、传输层、会话层、表示层、应用层等七层。<br>（1）应用层：网络服务与最终用户的一个接口。协议有：HTTP、FTP、SMTP、DNS、TELNET、HTTPS、POP3等等。<br>（2）表示层：数据的表示、安全、压缩。格式有：JPEG、ASCll、DECOIC、加密格式等。<br>（3）会话层：建立、管理、终止会话。对应主机进程，指本地主机与远程主机正在进行的会话<br>（4）传输层：定义传输数据的协议端口号，以及流控和差错校验。协议有：TCP、UDP。<br>（5）网络层：进行逻辑地址寻址，实现不同网络之间的路径选择。协议有：ICMP、IGMP、IP（IPV4 IPV6）、ARP、RARP。<br>（6）数据链路层：建立逻辑连接、进行硬件地址寻址、差错校验等功能。将比特组合成字节再组合成帧，用MAC地址访问介质，错误可以被发现但不能纠正。<br>（7）物理层：建立、维护、断开物理连接。</p>
<p>而IP协议是一种非常重要的协议。IP（internet protocal）又称为互联网协议。IP的责任就是把数据从源传送到目的地。它在源地址和目的地址之间传送一种称之为数据包的东西，它还提供对数据大小的重新组装功能，以适应不同网络对包大小的要求。经常与IP协议放在一起的还有TCP（Transmission Control Protocol）协议，即传输控制协议，是一种面向连接的、可靠的、基于字节流的传输层通信协议。而通常我们说的TCP/IP协议，其实是指TCP/IP协议族，因为该协议家族的两个最核心协议：TCP（传输控制协议）和IP（网际协议），为该家族中最早通过的标准，所以简称为TCP/IP协议。</p>
<p>按照TCP/IP协议模型，网络通常被分为四层：网络访问层、互联网层、传输层和应用层。<br><img src="https://i.loli.net/2021/04/05/jM2EYHVxnWBt1bG.png" width="40%" height="40%"></p>
<p>TCP：(Transmission Control Protocol，传输控制协议)面向连接的，可靠的，基于字节流的，适用于大数据量的传输的协议。<br>UDP：(User Datagram Protocol，用户数据报协议)非面向连接，不可靠的，基于用户数据报（报文），只支持64k以内的数据的发送。</p>
<h3 id="IP地址"><a href="#IP地址" class="headerlink" title="IP地址"></a>IP地址</h3><p>IP地址用于标识网络中的一个通信实体，这个通信实体可以是一台计算机，也可以是一台打印机，或者是路由器的一个端口。而在基于IP协议网络中传输的数据包，都必须使用IP地址来进行标识。</p>
<p>IP地址是一个32位的整数，但为了便于记忆，通常把它分为4个8位的二进制数组成，每8位之间用圆点隔开，格式：X.X.X.X，其中每个X表示地址中的8位，用十进制[0,255]之间值表示，因此我们看到的IP常常是：222.222.88.104。<br>Internet委员会定义了5种IP地址类型以适合不同容量的网络，即A类~E类。其中A、B、C这3类由Internet NIC在全球范围内统一分配，D、E类为特殊地址。<br><img src="https://i.loli.net/2021/04/05/42CEPYt9ergV7Zz.png" alt=""><br>IP地址还分为IPV4和IPV6。由于IPv4最大的问题在于网络地址资源有限，严重制约了互联网的应用和发展。IPv6是IETF（Internet Engineering Task Force）设计的用于替代现行版本IP协议（IPv4）的下一代IP协议，号称可以为全世界的每一粒沙子编上一个网址。IPv4和IPv6地址格式不相同，因此在很长一段时间里，互联网中出现IPv4和IPv6长期共存的局面。IPv6的地址长度为128位，是IPv4地址长度的4倍，格式为X:X:X:X:X:X:X:X，其中每个X表示地址中的16位，以十六进制表示。</p>
<h3 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h3><p>IP地址可以唯一的确定网络上的一个通信实体，但是一个通信实体可以有多个通信程序同时提供网络服务，此时还需要使用端口。IP地址就好比通信的计算机地址，我们通过IP地址可以找到计算机，但是要具体找到某程序/进程，还需要端口号。</p>
<p>端口号是一个16位的整数，即在[0,65535]之间，通常它可以分为三类：<br>（1）公认端口（Well-Known Ports）范围从0到1023，这些端口号一般固定分配给一些服务。比如，21端口分配给FTP（文件传输协议）服务，25端口分配给SMTP（简单邮件传输协议）服务，80端口分配给HTTP服务。<br>（2）注册端口（Registered Ports）：端口号从1024到49151。它们松散地绑定于一些服务。例如：Tomcat（8080），JBOSS（8080），Oracle（1521）,MySQL（3306），SQL Server（1433），QQ（1080）。<br>（3）动态/私有端口（Dynamic and/Private Ports）：端口的范围从49152到65535，这些端口号一般不固定分配给某个服务。只要运行的程序向系统提出访问网络的申请，那么系统就可以从这些端口号中分配一个供该程序使用。理论上，不应为服务分配这些端口。</p>
<p>然而实际生活中，要常人识记IP地址还是有些困难的，所以就有了域名。比如百度的域名：www.baidu.com。域名和IP地址是相对应的，网域名称系统（DNS，Domain Name System）是因特网的一项核心服务，它作为可以将域名和IP地址相互映射的一个分布式数据库，能够使人更方便的访问互联网，而不用去记住能够被机器直接读取的IP地址数串。</p>
<h2 id="基本的网络API"><a href="#基本的网络API" class="headerlink" title="基本的网络API"></a>基本的网络API</h2><h3 id="InetAddress"><a href="#InetAddress" class="headerlink" title="InetAddress"></a>InetAddress</h3><p>此类表示互联网协议 (IP) 地址，它有两个子类Inet4Address和Inet6Address，分别对应IPV4和IPV6。<br>InetAddress类没有提供公共的构造器，而是提供了如下几个静态方法来获取InetAddress实例：<br>（1）<code>public static InetAddress getLocalHost()</code><br>（2）<code>public static InetAddress getByAddress(byte[] addr)</code><br>（3）<code>public static InetAddress getByName(String host)</code><br>InetAddress提供了如下几个常用的方法：<br>（1）<code>public String getHostAddress()</code>：返回 IP 地址字符串（以文本表现形式）。<br>（2）<code>public String getHostName()</code>：获取此 IP 地址的主机名<br>（3）<code>public String getCanonicalHostName()</code>：获取此 IP 地址的完全限定域名<br>（4）<code>public boolean isReachable(int timeout)</code>：测试是否可以达到该地址。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInetAddress</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        InetAddress ip1 = InetAddress.getLocalHost();</span><br><span class="line">        System.out.println(ip1);<span class="comment">//DESKTOP-LUGF5AH/192.168.18.1</span></span><br><span class="line">        </span><br><span class="line">        InetAddress ip2 = InetAddress.getByName(<span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line">        System.out.println(ip2);<span class="comment">//www.baidu.com/110.242.68.4</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">byte</span>[] ip = &#123;(<span class="keyword">byte</span>)<span class="number">222</span>,(<span class="keyword">byte</span>)<span class="number">222</span>,<span class="number">88</span>,<span class="number">102</span>&#125;;<span class="comment">//强转在getByAddress中有处理，不会出错</span></span><br><span class="line">        InetAddress ip3 = InetAddress.getByAddress(ip);</span><br><span class="line">        <span class="comment">//输出ip而不是域名。如果这个IP地址不存在或DNS服务器不允许进行 ip-&gt;域名 的映射，</span></span><br><span class="line">        <span class="comment">//那么getHostName()方法就直接返回这个IP地址</span></span><br><span class="line">        System.out.println(ip3);<span class="comment">///222.222.88.102</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><p>URI(Uniform resource identifier)：表示一个统一资源标识符 (URI) 引用，用来唯一的标识一个资源。<br>URL(Uniform Resource Locator)：类 URL 代表一个统一资源定位符，它是指向互联网“资源”的指针。资源可以是简单的文件或目录，也可以是对更为复杂的对象的引用，例如对数据库或搜索引擎的查询。它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何locate这个资源。URI不能用于定位任何资源，它的唯一作用是解析，而URL则包含一个可打开到达该资源的输入流。 URL的基本结构由5部分组成：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;传输协议&gt;:&#x2F;&#x2F;&lt;主机名&gt;:&lt;端口号&gt;&#x2F;&lt;文件名&gt;#片段名</span><br><span class="line">&lt;传输协议&gt;:&#x2F;&#x2F;&lt;主机名&gt;:&lt;端口号&gt;&#x2F;&lt;文件名&gt;?参数列表</span><br></pre></td></tr></table></figure><br>“#片段名”：即锚点，例如看小说，直接定位到章节。<br>“参数列表”格式：参数名=参数值&amp;参数名=参数值….。</p>
<p>URL构造方法：<br>（1）<code>public URL (String spec)</code>：根据 String 表示形式创建 URL 对象。<br>（2）<code>public URL(URL context, String spec)</code>：通过基 URL 和相对 URL 构造一个 URL 对象。<br>（3）<code>public URL(String protocol, String host, String file)</code>：根据指定的 protocol 名称、host 名称和 file 名称创建 URL。<br>（4）<code>public URL(String protocol, String host, int port, String file)</code>：根据指定 protocol、host、port 号和 file 创建 URL 对象。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> URL (<span class="string">&quot;http://www.baidu.com/&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> URL(url, <span class="string">&quot;download.html&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> URL(<span class="string">&quot;http&quot;</span>, <span class="string">&quot;www.baidu.com&quot;</span>, <span class="string">&quot;download. html&quot;</span>);</span><br><span class="line"><span class="keyword">new</span> URL(<span class="string">&quot;http&quot;</span>, <span class="string">&quot;www.baidu.com&quot;</span>, <span class="number">80</span>, <span class="string">&quot;download.html&quot;</span>);</span><br></pre></td></tr></table></figure><br>URL的常用方法：<br>（1）<code>public String getProtocol()</code>：获取该URL的协议名。<br>（2）<code>public String getHost()</code>：获取该URL的主机名。<br>（3）<code>public String getPort()</code>：获取该URL的端口号。<br>（4）<code>public String getPath()</code>：获取该URL的文件路径，即tomcat的webapps目录下级目录名也就是资源路径名。<br>（5）<code>public String getFile()</code>：获取该URL的文件名。<br>（6）<code>public String getRef()</code>：获取该URL在文件中的相对位置。<br>（7）<code>public String getQuery()</code>：获取该URL的查询名。<br>（8）<code>public final InputStream openStream()</code>：返回一个用于从该连接读入的 InputStream。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestURL</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MalformedURLException </span>&#123;</span><br><span class="line">        URL url = <span class="keyword">new</span> URL(<span class="string">&quot;http://www.baidu.com:80/index.html?keyword=java&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;协议：&quot;</span> + url.getProtocol());</span><br><span class="line">        System.out.println(<span class="string">&quot;主机名：&quot;</span> + url.getHost());</span><br><span class="line">        System.out.println(<span class="string">&quot;端口号：&quot;</span> + url.getPort());</span><br><span class="line">        System.out.println(<span class="string">&quot;路径名：&quot;</span> + url.getPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件名：&quot;</span> + url.getFile());</span><br><span class="line">        System.out.println(<span class="string">&quot;锚点：&quot;</span> + url.getRef());</span><br><span class="line">        <span class="comment">//注意如果存在锚点，那么查询名返回null，因为#后面全部当做锚点了</span></span><br><span class="line">        System.out.println(<span class="string">&quot;查询名：&quot;</span> + url.getQuery());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>案例：获取百度首页的资源<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestURLRead</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        URL url = <span class="keyword">new</span> URL(<span class="string">&quot;http://www.baidu.com/index.html&quot;</span>);</span><br><span class="line">        <span class="comment">/*html标签（格式化数据）、css：皮肤（美化数据）、js：互动（交互数据）、数据：*/</span></span><br><span class="line">        InputStream input = url.openStream();</span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len=input.read(data))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(data,<span class="number">0</span>,len,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="URLConnection"><a href="#URLConnection" class="headerlink" title="URLConnection"></a>URLConnection</h3><p>URL的方法openStream()，能从网络上读取数据，但是无法给服务器端发送数据，若希望给服务器端发送数据，则需要URLConnection。<br>它代表应用程序和 URL 之间的通信链接。此类的实例可用于读取和写入此 URL 引用的资源。通常，创建一个到 URL 的连接需要几个步骤：<br>（1）通过 URL对象调用 openConnection 方法创建URLConnection连接对象。<br>（2）处理设置参数和一般请求属性。<br>（3）使用 connect 方法建立到远程对象的实际连接。<br>（4）远程对象变为可用。远程对象的头字段和内容变为可访问。 </p>
<p>URLConnection的常用方法：<br>（1）<code>public void setDoOutput(boolean dooutput)</code>：如果打算使用 URL 连接进行输出，例如给服务器传递请求参数，则将 DoOutput 标志设置为 true；如果不打算使用，则设置为 false。默认值为 false。 必须在所有getXXX()和connect()方法之前。<br>（2）<code>public String getContentEncoding()</code>：返回 content-encoding 头字段的值。<br>（3）<code>public int getContentLength()</code>：返回 content-length 头字段的值。<br>（4）<code>public String getContentType()</code>：返回 content-type 头字段的值。<br>（5）<code>public long getDate()</code>：返回 date 头字段的值。<br>（6）<code>public long getLastModified()</code>：返回 last-modified 头字段的值。结果为距离格林威治标准时间 1970 年 1 月 1 日的毫秒数。<br>（7）<code>public String getHeaderField(String name)</code>：返回指定的头字段的值。<br>（8）<code>public InputStream getInputStream()</code>：返回从此打开的连接读取的输入流。<br>（9）<code>public OutputStream getOutputStream()</code>：返回写入到此连接的输出流。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLConnection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestURLConnection</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        URL url = <span class="keyword">new</span> URL(<span class="string">&quot;http://localhost/web1/denglu&quot;</span>);</span><br><span class="line">        <span class="comment">//通过 URL对象调用 openConnection 方法创建URLConnection连接对象</span></span><br><span class="line">        URLConnection uc = url.openConnection();</span><br><span class="line">        <span class="comment">//处理设置参数</span></span><br><span class="line">        uc.setDoOutput(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//给服务器发送请求参数</span></span><br><span class="line">        uc.getOutputStream().write(<span class="string">&quot;username=admin&amp;password=123&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">//使用 connect 方法建立到远程对象的实际连接。</span></span><br><span class="line">        uc.connect();</span><br><span class="line">        <span class="comment">//获取资源</span></span><br><span class="line">        InputStream is = uc.getInputStream();</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(is,<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        String str;</span><br><span class="line">        <span class="keyword">while</span>((str=br.readLine())!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h3><p>通信的两端都要有Socket套接字，是两台机器间通信的端点，能和网卡驱动进行交流。负责把数据交给网卡驱动，或从网卡驱动中提取数据。<br>网络通信其实就是Socket间的通信。Socket可以分为：<br>（1）流套接字（stream socket）：使用TCP提供可依赖的字节流服务。ServerSocket类和Socket类。<br>（2）数据报套接字（datagram socket）：使用UDP提供“尽力而为”的数据报服务。DatagramSocket类。<br><img src="https://i.loli.net/2021/04/06/cX8FjNHSRK9nh1M.png" width="90%" height="90%"></p>
<p>Socket类的常用构造方法：<br>（1）<code>public Socket(InetAddress address,int port)</code>：创建一个流套接字并将其连接到指定 IP 地址的指定端口号。<br>（2）<code>public Socket(String host,int port)</code>：创建一个流套接字并将其连接到指定主机上的指定端口号。<br>Socket类的常用方法：<br>（1）<code>public InputStream getInputStream()</code>：返回此套接字的输入流，可以用于接收消息。<br>（2）<code>public OutputStream getOutputStream()</code>：返回此套接字的输出流，可以用于发送消息。<br>（3）<code>public InetAddress getInetAddress()</code>：此套接字连接到的远程 IP 地址；如果套接字是未连接的，则返回 null。<br>（4）<code>public InetAddress getLocalAddress()</code>：获取套接字绑定的本地地址。<br>（5）<code>public int getPort()</code>：此套接字连接到的远程端口号；如果尚未连接套接字，则返回 0。<br>（6）<code>public int getLocalPort()</code>：返回此套接字绑定到的本地端口。如果尚未绑定套接字，则返回 -1。<br>（7）<code>public void close()</code>：关闭此套接字。套接字被关闭后，便不可在以后的网络连接中使用（即无法重新连接或重新绑定）。需要创建新的套接字对象。 关闭此套接字也将会关闭该套接字的 InputStream 和 OutputStream。<br>（8）<code>public void shutdownInput()</code>：如果在套接字上调用 shutdownInput() 后从套接字输入流读取内容，则流将返回 EOF（文件结束符）。 即不能在从此套接字的输入流中接收任何数据。<br>（9）<code>public void shutdownOutput()</code>：禁用此套接字的输出流。对于 TCP 套接字，任何以前写入的数据都将被发送，并且后跟 TCP 的正常连接终止序列。 如果在套接字上调用 shutdownOutput() 后写入套接字输出流，则该流将抛出 IOException。 即不能通过此套接字的输出流发送任何数据。</p>
<p id="div-border-left-blue">
先后调用Socket的shutdownInput()和shutdownOutput()方法，仅仅关闭了输入流和输出流，并不等于调用Socket的close()方法。<br>
在通信结束后，仍然要调用Scoket的close()方法，因为只有该方法才会释放Socket占用的资源，比如占用的本地端口号等。
</p>

<h2 id="基于TCP协议的网络编程"><a href="#基于TCP协议的网络编程" class="headerlink" title="基于TCP协议的网络编程"></a>基于TCP协议的网络编程</h2><p>TCP(Transmission Control Protocol，传输控制协议)被称作一种端对端协议。是一种面向连接的、可靠的、基于字节流的传输层的通信协议，可以连续传输大量的数据。类似于打电话的效果。<br>当一台计算机需要与另一台远程计算机连接时，TCP协议会采用“三次握手”方式让它们建立一个连接，用于发送和接收数据的虚拟链路。数据传输完毕TCP协议会采用“四次挥手”方式断开连接。<br>TCP协议负责收集这些信息包，并将其按适当的次序放好传送，在接收端收到后再将其正确的还原。TCP协议保证了数据包在传送中准确无误。TCP协议使用重发机制，当一个通信实体发送一个消息给另一个通信实体后，需要收到另一个通信实体确认信息，如果没有收到另一个通信实体确认信息，则会再次重复刚才发送的消息。</p>
<h3 id="基于TCP协议的网络通信程序结构"><a href="#基于TCP协议的网络通信程序结构" class="headerlink" title="基于TCP协议的网络通信程序结构"></a>基于TCP协议的网络通信程序结构</h3><p>Java语言的基于套接字TCP编程分为服务端编程和客户端编程，其通信模型如图所示：<br><img src="https://i.loli.net/2021/04/06/3qldpZhBrmXVw6y.png" width="70%" height="70%"></p>
<p>服务器程序的工作过程包含以下五个基本的步骤：<br>（1）使用<code>ServerSocket(int port)</code>：创建一个服务器端套接字，并绑定到指定端口上。用于监听客户端的请求。<br>（2）调用<code>accept()</code>方法：监听连接请求，若客户端请求连接，则接受连接，创建与该客户端的Socket对象。否则它将一直处于等待状态。<br>（3）调用 该Socket对象的<code>getOutputStream()</code>和<code>getInputStream()</code>：获取输出流和输入流，开始网络数据的发送和接收。<br>（4）关闭Socket对象：某客户端访问结束，关闭与之通信的套接字。<br>（5）关闭ServerSocket：如果不再接收任何客户端的连接的话，调用<code>close()</code>进行关闭。</p>
<p>客户端Socket的工作过程包含以下四个基本的步骤：<br>（1）创建 Socket：根据指定服务端的 IP 地址或端口号构造 Socket 类对象，创建的同时会自动向服务器方发起连接。若服务器端响应，则建立客户端到服务器的通信线路。若连接失败，会出现异常。<br>（2）打开连接到Socket的输入/输出流：使用<code>getInputStream()</code>或<code>getOutputStream()</code>方法获得输入流或输出流，进行数据传输。<br>（3）进行读/写操作：通过输入流读取服务器发送的信息，通过输出流将信息发送给服务器。<br>（4）关闭 Socket：断开客户端到服务器的连接。</p>
<p id="div-border-left-blue">
客户端和服务器端在获取输入流和输出流时要对应，否则容易死锁。<br>
例如，客户端先获取字节输出流（先写），那么服务器端就先获取字节输入流（先读）；反过来客户端先获取字节输入流（先读），那么服务器端就先获取字节输出流（先写）。
</p>

<h3 id="案例：一个客户端与服务器单次通信"><a href="#案例：一个客户端与服务器单次通信" class="headerlink" title="案例：一个客户端与服务器单次通信"></a>案例：一个客户端与服务器单次通信</h3><p>需求：客户端连接服务器，连接成功后给服务发送“lalala”，服务器收到消息后，给客户端返回“欢迎登录”<br>运行程序时，必须先启动服务器端程序，主动接收客户端程序的连接请求。<br><div class="tabs" id="one"><ul class="nav-tabs"><li class="tab active"><a href="#one-1">Server</a></li><li class="tab"><a href="#one-2">Client</a></li></ul><div class="tab-content"><div class="tab-pane active" id="one-1"><figure class="highlight java"><figcaption><span>Server.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.one;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//1、准备一个ServerSocket对象，并绑定8888端口</span></span><br><span class="line">        ServerSocket server =  <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;等待连接....&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2、在8888端口监听客户端的连接，该方法是个阻塞方法，若没有客户端连接，将一直等待</span></span><br><span class="line">        Socket socket = server.accept();</span><br><span class="line">        System.out.println(<span class="string">&quot;一个客户端连接成功！！&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3、获取输入流，用来接收该客户端发送给服务器的数据</span></span><br><span class="line">        InputStream input = socket.getInputStream();</span><br><span class="line">        <span class="comment">//接收数据</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            s.append(<span class="keyword">new</span> String(data, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;客户端发送的消息是：&quot;</span> + s);</span><br><span class="line">                </span><br><span class="line">        <span class="comment">//4、获取输出流，用来发送数据给该客户端</span></span><br><span class="line">        OutputStream out = socket.getOutputStream();</span><br><span class="line">        <span class="comment">//发送数据</span></span><br><span class="line">        out.write(<span class="string">&quot;欢迎登录&quot;</span>.getBytes());</span><br><span class="line">        out.flush();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//5、关闭socket，不再与该客户端通信</span></span><br><span class="line">        <span class="comment">//socket关闭，意味着InputStream和OutputStream也关闭了</span></span><br><span class="line">        socket.close();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//6、如果不再接收任何客户端通信，可以关闭ServerSocket</span></span><br><span class="line">        server.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="one-2"><figure class="highlight java"><figcaption><span>Client.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.one;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1、准备Socket，连接服务器，需要指定服务器的IP地址和端口号</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、获取输出流，用来发送数据给服务器</span></span><br><span class="line">        OutputStream out = socket.getOutputStream();</span><br><span class="line">        <span class="comment">// 发送数据</span></span><br><span class="line">        out.write(<span class="string">&quot;lalala&quot;</span>.getBytes());</span><br><span class="line">        <span class="comment">//会在流末尾写入一个“流的末尾”标记，对方才能读到-1，否则对方的读取方法会一致阻塞</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3、获取输入流，用来接收服务器发送给该客户端的数据</span></span><br><span class="line">        InputStream input = socket.getInputStream();</span><br><span class="line">        <span class="comment">// 接收数据</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            s.append(<span class="keyword">new</span> String(data, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;服务器返回的消息是：&quot;</span> + s);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//4、关闭socket，不再与服务器通信，即断开与服务器的连接</span></span><br><span class="line">        <span class="comment">//socket关闭，意味着InputStream和OutputStream也关闭了</span></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="案例：多个客户端与服务器之间的多次通信"><a href="#案例：多个客户端与服务器之间的多次通信" class="headerlink" title="案例：多个客户端与服务器之间的多次通信"></a>案例：多个客户端与服务器之间的多次通信</h3><p>通常情况下，服务器不应该只接受一个客户端请求，而应该不断地接受来自客户端的所有请求，所以Java程序通常会通过循环，不断地调用ServerSocket的accept()方法。<br>如果服务器端要“同时”处理多个客户端的请求，因此服务器端需要为每一个客户端单独分配一个线程来处理，否则无法实现“同时”。<br>在<a href="https://soundmemories.github.io/2020/03/04/Java/27.JavaIO%E6%B5%81/">JavaIO流</a>文章中，提到过装饰者设计模式，该设计使得不管底层IO流是怎样的节点流：文件流也好，网络Socket产生的流也好，程序都可以将其包装成处理流，甚至可以多层包装，从而提供更多方便的处理。</p>
<p>案例需求：多个客户端连接服务器，并进行多次通信<br>（1）每一个客户端连接成功后，从键盘输入英文单词或中国成语，并发送给服务器。<br>（2）服务器收到客户端的消息后，把词语“反转”后返回给客户端。<br>（3）客户端接收服务器返回的“词语”，打印显示。<br>（4）当客户端输入“stop”时断开与服务器的连接。<br>（5）多个客户端可以同时给服务器发送“词语”，服务器可以“同时”处理多个客户端的请求。<br>服务器端要“同时”处理多个客户端的请求，那么必须使用多线程，每一个客户端的通信需要单独的线程来处理。</p>
<div class="tabs" id="echo"><ul class="nav-tabs"><li class="tab active"><a href="#echo-1">Server</a></li><li class="tab"><a href="#echo-2">ServerThread</a></li><li class="tab"><a href="#echo-3">Client</a></li></ul><div class="tab-content"><div class="tab-pane active" id="echo-1"><figure class="highlight java"><figcaption><span>Server.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.echo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1、准备一个ServerSocket</span></span><br><span class="line">        ServerSocket server = <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;等待连接...&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">// 2、监听一个客户端的连接</span></span><br><span class="line">            Socket socket = server.accept();</span><br><span class="line">            System.out.println(<span class="string">&quot;第&quot;</span> + ++count + <span class="string">&quot;个客户端连接成功！！&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            ClientHandlerThread ct = <span class="keyword">new</span> ClientHandlerThread(socket);</span><br><span class="line">            ct.start();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//这里没有关闭server，永远监听</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="echo-2"><figure class="highlight java"><figcaption><span>ClientHandlerThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.echo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientHandlerThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClientHandlerThread</span><span class="params">(Socket socket)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">//（1）获取输入流，用来接收该客户端发送给服务器的数据</span></span><br><span class="line">            BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">            <span class="comment">//（2）获取输出流，用来发送数据给该客户端</span></span><br><span class="line">            PrintStream ps = <span class="keyword">new</span> PrintStream(socket.getOutputStream());</span><br><span class="line">            String str;</span><br><span class="line">            <span class="comment">// （3）接收数据</span></span><br><span class="line">            <span class="keyword">while</span> ((str = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">//（4）反转</span></span><br><span class="line">                StringBuilder word = <span class="keyword">new</span> StringBuilder(str);</span><br><span class="line">                word.reverse();</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//（5）返回给客户端</span></span><br><span class="line">                ps.println(word);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception  e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//（6）断开连接</span></span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="echo-3"><figure class="highlight java"><figcaption><span>Client.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.echo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1、准备Socket，连接服务器，需要指定服务器的IP地址和端口号</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、获取输出流，用来发送数据给服务器</span></span><br><span class="line">        OutputStream out = socket.getOutputStream();</span><br><span class="line">        PrintStream ps = <span class="keyword">new</span> PrintStream(out);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 3、获取输入流，用来接收服务器发送给该客户端的数据</span></span><br><span class="line">        InputStream input = socket.getInputStream();</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(input));</span><br><span class="line">        </span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;输入发送给服务器的单词或成语：&quot;</span>);</span><br><span class="line">            String message = scanner.nextLine();</span><br><span class="line">            <span class="keyword">if</span>(message.equals(<span class="string">&quot;stop&quot;</span>))&#123;</span><br><span class="line">                socket.shutdownOutput();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 4、发送数据</span></span><br><span class="line">            ps.println(message);</span><br><span class="line">            <span class="comment">// 接收数据</span></span><br><span class="line">            String feedback  = br.readLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;从服务器收到的反馈是：&quot;</span> + feedback);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//5、关闭socket，断开与服务器的连接</span></span><br><span class="line">        scanner.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="案例：多个客户端上传文件"><a href="#案例：多个客户端上传文件" class="headerlink" title="案例：多个客户端上传文件"></a>案例：多个客户端上传文件</h3><p>需求：每一个客户端启动后都可以给服务器上传一个文件，服务器接收到文件后保存到一个upload目录中。可以同时接收多个客户端的文件上传。<br>（1）服务器端要“同时”处理多个客户端的请求，那么必须使用多线程，每一个客户端的通信需要单独的线程来处理。<br>（2）服务器保存上传文件的目录只有一个upload，而每个客户端给服务器发送的文件可能重名，所以需要保证文件名的唯一。我们可以使用“时间戳”作为文件名，而后缀名不变。<br>（3）客户端需要给服务器上传文件名（含后缀名）以及文件内容。而文件名是字符串，文件内容不一定是纯文本的，因此选择DataOutputStream和DataInputStream。</p>
<div class="tabs" id="fileupload"><ul class="nav-tabs"><li class="tab active"><a href="#fileupload-1">Server</a></li><li class="tab"><a href="#fileupload-2">ServerThread</a></li><li class="tab"><a href="#fileupload-3">Client</a></li></ul><div class="tab-content"><div class="tab-pane active" id="fileupload-1"><figure class="highlight java"><figcaption><span>Server.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.fileupload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//服务器在8888端口号监听数据</span></span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;resource&quot;)</span></span><br><span class="line">        ServerSocket server = <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">//(2)等待连接 </span></span><br><span class="line">            <span class="comment">//这句代码执行一次，意味着一个客户端连接</span></span><br><span class="line">            Socket accept = server.accept();</span><br><span class="line">        </span><br><span class="line">            FileUploadThread ft = <span class="keyword">new</span> FileUploadThread(accept);</span><br><span class="line">            ft.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="fileupload-2"><figure class="highlight java"><figcaption><span>FileUploadThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.tcp.fileupload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileUploadThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line">    <span class="keyword">private</span> String dir = <span class="string">&quot;upload/&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FileUploadThread</span><span class="params">(Socket socket)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            InputStream is = socket.getInputStream();</span><br><span class="line">            DataInputStream dis = <span class="keyword">new</span> DataInputStream(is);    </span><br><span class="line">            </span><br><span class="line">            <span class="comment">//读取文件名（含后缀名）</span></span><br><span class="line">            String filename = dis.readUTF();</span><br><span class="line">            <span class="comment">//截取后缀名</span></span><br><span class="line">            String ext = filename.substring(filename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">            <span class="comment">//生成时间戳</span></span><br><span class="line">            SimpleDateFormat sf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyyMMddHHmmssSSS&quot;</span>);</span><br><span class="line">            filename = sf.format(<span class="keyword">new</span> Date());</span><br><span class="line">            <span class="comment">//用新文件路径构建文件输出流</span></span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(dir + filename + ext);</span><br><span class="line">            <span class="comment">//接收文件内容</span></span><br><span class="line">            <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                <span class="keyword">int</span> len = is.read(data);</span><br><span class="line">                <span class="keyword">if</span>(len==-<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                fos.write(data, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//返回结果</span></span><br><span class="line">            OutputStream out = socket.getOutputStream();</span><br><span class="line">            PrintStream ps = <span class="keyword">new</span> PrintStream(out);</span><br><span class="line">            ps.println(filename + ext + <span class="string">&quot;：已上传完毕&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="fileupload-3"><figure class="highlight java"><figcaption><span>Client.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.fileupload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// (1)连接服务器</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;192.168.34.53&quot;</span>, <span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//(2)从键盘输入文件的路径和名称</span></span><br><span class="line">        System.out.print(<span class="string">&quot;请选择要上传的文件：&quot;</span>);</span><br><span class="line">        String path = input.nextLine();</span><br><span class="line">        File file = <span class="keyword">new</span> File(path);</span><br><span class="line">        </span><br><span class="line">        OutputStream out = socket.getOutputStream();</span><br><span class="line">        <span class="comment">//用DataOutputStream的目的是为了既可以单独传一个字符串，又可以写字节内容</span></span><br><span class="line">        DataOutputStream dos = <span class="keyword">new</span> DataOutputStream(out);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//先发送文件名（含后缀名）</span></span><br><span class="line">        dos.writeUTF(file.getName());<span class="comment">//单独发一个字符串</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//还需要一个IO流，从文件读取内容，给服务器发过去</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">                </span><br><span class="line">        <span class="comment">//（3）把文件内容给服务器传过去，类似与复制文件</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> len = fis.read(data);</span><br><span class="line">            <span class="keyword">if</span>(len==-<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            dos.write(data, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//(4)接收服务器返回的结果</span></span><br><span class="line">        InputStream is = socket.getInputStream();</span><br><span class="line">        InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(is);<span class="comment">//把字节流转成字符流</span></span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);</span><br><span class="line">        String result = br.readLine();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//(5)关闭</span></span><br><span class="line">        fis.close();</span><br><span class="line">        input.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="案例：多个客户端群聊"><a href="#案例：多个客户端群聊" class="headerlink" title="案例：多个客户端群聊"></a>案例：多个客户端群聊</h3><p>需求：模拟聊天室群聊。客户端要先登录，登录成功之后才能发送和接收消息。<br>（1）服务器端，需要为每个客户端开启一个线程通信，这样才能实现多个客户端“同时”与服务器通信。<br>（2）客户端，需要把收消息功能与发消息功能分开两个线程，这样才能“同时收发”，即可以发消息，也可以接收其他客户端的聊天消息。<br>（3）服务器端要分别处理客户端的“登录”、“退出”、“聊天”的消息，所以这里设计了Code常量类，用状态值区分“登录”、“退出”、“聊天”。<br>（4）这里设计Message类，包含code属性，区别是“登录”、“退出”、“聊天”，username属性表示用户名，表明消息是谁发的，content属性，存储消息内容，如果是登录，就用来存储密码。<br>（5）这里消息是Message对象，因此在客户端与服务器之间传输的是对象，所以选择ObjectOutputStream和ObjectInputStream。<br>（6）这里的Message类与Code类是服务器端和客户端“共享”的，要保持一致。特别注意包名和序列化版本ID。<br><div class="tabs" id="chat"><ul class="nav-tabs"><li class="tab active"><a href="#chat-1">Code</a></li><li class="tab"><a href="#chat-2">Message</a></li><li class="tab"><a href="#chat-3">ServiceUserManager</a></li><li class="tab"><a href="#chat-4">Server</a></li><li class="tab"><a href="#chat-5">ServerThread</a></li><li class="tab"><a href="#chat-6">Client</a></li><li class="tab"><a href="#chat-7">ClientSendThread</a></li><li class="tab"><a href="#chat-8">ClientReceiveThread</a></li></ul><div class="tab-content"><div class="tab-pane active" id="chat-1"><figure class="highlight java"><figcaption><span>Code.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Code</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOGIN = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CHAT = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> LOGOUT = <span class="number">3</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SUCCESS = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> FAIL = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-2"><figure class="highlight java"><figcaption><span>Message.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> code;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Message</span><span class="params">(<span class="keyword">int</span> code, String username, String content)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Message</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCode</span><span class="params">(<span class="keyword">int</span> code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getContent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setContent</span><span class="params">(String content)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-3"><figure class="highlight java"><figcaption><span>UserManager.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserManager</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;String,String&gt; allUsers = <span class="keyword">new</span> HashMap&lt;String,String&gt;();</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        allUsers.put(<span class="string">&quot;gangge&quot;</span>, <span class="string">&quot;123&quot;</span>);</span><br><span class="line">        allUsers.put(<span class="string">&quot;xiaobai&quot;</span>, <span class="string">&quot;456&quot;</span>);</span><br><span class="line">        allUsers.put(<span class="string">&quot;gujie&quot;</span>, <span class="string">&quot;789&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String username, String password)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(allUsers.get(username)!=<span class="keyword">null</span> &amp;&amp; allUsers.get(username).equals(password))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-4"><figure class="highlight java"><figcaption><span>Server.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;resource&quot;)</span></span><br><span class="line">        ServerSocket server = <span class="keyword">new</span> ServerSocket(<span class="number">9999</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            Socket socket = server.accept();</span><br><span class="line">            </span><br><span class="line">            ClientHandlerThread ct = <span class="keyword">new</span> ClientHandlerThread(socket);</span><br><span class="line">            ct.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-5"><figure class="highlight java"><figcaption><span>ClientHandlerThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.server;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Code;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientHandlerThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Set&lt;ObjectOutputStream&gt; online = Collections.synchronizedSet(<span class="keyword">new</span> HashSet&lt;ObjectOutputStream&gt;());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> ObjectInputStream ois;</span><br><span class="line">    <span class="keyword">private</span> ObjectOutputStream oos;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ClientHandlerThread</span><span class="params">(Socket socket)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.socket = socket;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Message message = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            ois = <span class="keyword">new</span> ObjectInputStream(socket.getInputStream());</span><br><span class="line">            oos = <span class="keyword">new</span> ObjectOutputStream(socket.getOutputStream());</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//接收数据</span></span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                message = (Message) ois.readObject();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(message.getCode() == Code.LOGIN)&#123;</span><br><span class="line">                    <span class="comment">//如果是登录，则验证用户名密码</span></span><br><span class="line">                    username = message.getUsername();</span><br><span class="line">                    String password = message.getContent();</span><br><span class="line">                    <span class="keyword">if</span>(UserManager.login(username, password))&#123;</span><br><span class="line">                        message.setCode(Code.SUCCESS);</span><br><span class="line">                        oos.writeObject(message);</span><br><span class="line">                        </span><br><span class="line">                        <span class="comment">//并将该用户添加到在线人员名单中</span></span><br><span class="line">                        online.add(oos);</span><br><span class="line">                        </span><br><span class="line">                        message.setCode(Code.CHAT);</span><br><span class="line">                        message.setContent(<span class="string">&quot;上线了&quot;</span>);</span><br><span class="line">                        <span class="comment">//通知其他人，xx上线了</span></span><br><span class="line">                        sendToOther(message);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        message.setCode(Code.FAIL);</span><br><span class="line">                        oos.writeObject(message);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(message.getCode() == Code.CHAT)&#123;</span><br><span class="line">                    <span class="comment">//如果是聊天信息，把消息转发给其他在线客户端</span></span><br><span class="line">                    sendToOther(message);</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(message.getCode() == Code.LOGOUT)&#123;</span><br><span class="line">                    <span class="comment">//通知其他人，xx下线了</span></span><br><span class="line">                    message.setContent(<span class="string">&quot;下线了&quot;</span>);</span><br><span class="line">                    sendToOther(message);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception  e)&#123;</span><br><span class="line">            <span class="comment">//通知其他人，xx掉线了</span></span><br><span class="line">            <span class="keyword">if</span>(message!=<span class="keyword">null</span> &amp;&amp; username!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                message.setCode(Code.LOGOUT);</span><br><span class="line">                message.setContent(<span class="string">&quot;掉线了&quot;</span>);</span><br><span class="line">                sendToOther(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">//从在线人员中移除并断开当前客户端</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                online.remove(oos);</span><br><span class="line">                socket.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendToOther</span><span class="params">(Message message)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;ObjectOutputStream&gt; offline = <span class="keyword">new</span> ArrayList&lt;ObjectOutputStream&gt;();</span><br><span class="line">        <span class="keyword">for</span> (ObjectOutputStream on : online) &#123;</span><br><span class="line">            <span class="comment">//只给其他客户端转发</span></span><br><span class="line">            <span class="keyword">if</span>(!on.equals(oos))&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    on.writeObject(message);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    <span class="comment">//说明on这个客户端要么下线了，要么掉线了</span></span><br><span class="line">                    offline.add(on);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//把下线人员从在线人员中删除</span></span><br><span class="line">        <span class="keyword">for</span> (ObjectOutputStream off : offline) &#123;</span><br><span class="line">            online.remove(off);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        //遍历所有online的客户端</span></span><br><span class="line"><span class="comment">        Iterator&lt;ObjectOutputStream&gt; iterator = online.iterator();</span></span><br><span class="line"><span class="comment">        while(iterator.hasNext())&#123;</span></span><br><span class="line"><span class="comment">            ObjectOutputStream on = iterator.next();</span></span><br><span class="line"><span class="comment">            if(!on.equals(oos))&#123;//只给其他客户端转发</span></span><br><span class="line"><span class="comment">                try &#123;</span></span><br><span class="line"><span class="comment">                    on.writeObject(message);</span></span><br><span class="line"><span class="comment">                &#125; catch (IOException e) &#123;</span></span><br><span class="line"><span class="comment">                    //说明on这个客户端要么下线了，要么掉线了</span></span><br><span class="line"><span class="comment">                    //把下线人员从在线人员中删除</span></span><br><span class="line"><span class="comment">                    iterator.remove();</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-6"><figure class="highlight java"><figcaption><span>Client.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Code;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">&quot;192.168.1.107&quot;</span>, <span class="number">9999</span>);</span><br><span class="line">        </span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(socket.getOutputStream());</span><br><span class="line">        ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(socket.getInputStream());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//先登录</span></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        String username;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">//输入登录信息</span></span><br><span class="line">            System.out.println(<span class="string">&quot;用户名：&quot;</span>);</span><br><span class="line">            username = scanner.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;密码：&quot;</span>);</span><br><span class="line">            String password = scanner.nextLine();</span><br><span class="line">            </span><br><span class="line">            Message msg = <span class="keyword">new</span> Message(Code.LOGIN, username, password);</span><br><span class="line">            <span class="comment">//发送登录数据</span></span><br><span class="line">            oos.writeObject(msg);</span><br><span class="line">            <span class="comment">//接收登录结果</span></span><br><span class="line">            msg = (Message) ois.readObject();</span><br><span class="line">            <span class="keyword">if</span>(msg.getCode() == Code.SUCCESS)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;登录成功！&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(msg.getCode() == Code.FAIL)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;用户名或密码错误，登录失败，重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//启动收消息和发消息线程</span></span><br><span class="line">        SendThread s = <span class="keyword">new</span> SendThread(oos,username);</span><br><span class="line">        ReceiveThread r = <span class="keyword">new</span> ReceiveThread(ois);</span><br><span class="line">        s.start();</span><br><span class="line">        r.start();</span><br><span class="line">        </span><br><span class="line">        s.join();<span class="comment">//等待s线程终止</span></span><br><span class="line">        r.setFlag(<span class="keyword">false</span>);<span class="comment">//s终止，r也终止</span></span><br><span class="line">        r.join();<span class="comment">//等待r线程终止</span></span><br><span class="line">        </span><br><span class="line">        scanner.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-7"><figure class="highlight java"><figcaption><span>SendThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Code;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SendThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ObjectOutputStream oos;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SendThread</span><span class="params">(ObjectOutputStream oos,String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.oos = oos;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请输入消息内容：&quot;</span>);</span><br><span class="line">                String content = scanner.nextLine();</span><br><span class="line">                Message msg;</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;bye&quot;</span>.equals(content))&#123;</span><br><span class="line">                    msg = <span class="keyword">new</span> Message(Code.LOGOUT, username, content);</span><br><span class="line">                    oos.writeObject(msg);</span><br><span class="line">                    scanner.close();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    msg = <span class="keyword">new</span> Message(Code.CHAT, username, content);</span><br><span class="line">                    oos.writeObject(msg);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="chat-8"><figure class="highlight java"><figcaption><span>ReceiveThread.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.tcp.chat.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> com.memories.tcp.chat.bean.Message;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReceiveThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ObjectInputStream ois;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ReceiveThread</span><span class="params">(ObjectInputStream ois)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.ois = ois;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(flag)&#123;</span><br><span class="line">                Message msg = (Message) ois.readObject();</span><br><span class="line">                System.out.println(msg.getUsername() + <span class="string">&quot;:&quot;</span> + msg.getContent());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请重新登录&quot;</span>);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFlag</span><span class="params">(<span class="keyword">boolean</span> flag)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.flag = flag;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h2 id="基于UDP协议的网络编程"><a href="#基于UDP协议的网络编程" class="headerlink" title="基于UDP协议的网络编程"></a>基于UDP协议的网络编程</h2><p>UDP(User Datagram Protocol，用户数据报协议)：是一个<strong>无连接</strong>的传输层协议、提供面向事务的简单<strong>不可靠</strong>的信息传送服务，类似于短信。</p>
<p>UDP协议是一种<strong>面向非连接</strong>的协议，面向非连接指的是在正式通信前不必与对方先建立连接，不管对方状态就直接发送，至于对方是否可以接收到这些数据内容，UDP协议无法控制，因此说，UDP协议是一种<strong>不可靠</strong>的协议。无连接的好处就是快，省内存空间和流量，因为维护连接需要创建大量的数据结构。UDP会尽最大努力交付数据，但不保证可靠交付，没有TCP的确认机制、重传机制，如果因为网络原因没有传送到对端，UDP也不会给应用层返回错误信息。</p>
<p>UDP协议是面向数据报文的信息传送服务。UDP在发送端没有缓冲区，对于应用层交付下来的报文在添加了首部之后就直接交付于ip层，不会进行合并，也不会进行拆分，而是一次交付一个完整的报文。比如我们要发送100个字节的报文，我们调用一次send()方法就会发送100字节，接收方也需要用receive()方法一次性接收100字节，不能使用循环每次获取10个字节，获取十次这样的做法。</p>
<p>UDP协议没有拥塞控制，所以当网络出现的拥塞不会导致主机发送数据的速率降低。虽然UDP的接收端有缓冲区，但是这个缓冲区只负责接收，并不会保证UDP报文的到达顺序是否和发送的顺序一致。因为网络传输的时候，由于网络拥塞的存在是很大的可能导致先发的报文比后发的报文晚到达。如果此时缓冲区满了，后面到达的报文将直接被丢弃。这个对实时应用来说很重要，比如：视频通话、直播等应用。<br>因此UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境，数据报大小限制在64K以下。</p>
<h3 id="基于UDP协议的网络编程-1"><a href="#基于UDP协议的网络编程-1" class="headerlink" title="基于UDP协议的网络编程"></a>基于UDP协议的网络编程</h3><p>基于UDP协议的网络编程仍然需要在通信实例的两端各建立一个Socket，但这两个Socket之间并没有虚拟链路，这两个Socket只是发送、接收数据报的对象，Java提供了DatagramSocket对象作为基于UDP协议的Socket，使用DatagramPacket代表DatagramSocket发送、接收的数据报。</p>
<p><strong>DatagramSocket 类的常用方法：</strong><br>（1）<code>public DatagramSocket(int port)</code>：创建数据报套接字并将其绑定到本地主机上的指定端口。套接字将被绑定到通配符地址，IP 地址由内核来选择。<br>（2）<code>public DatagramSocket(int port,InetAddress laddr)</code>：创建数据报套接字，将其绑定到指定的本地地址。本地端口必须在 0 到 65535 之间（包括两者）。如果 IP 地址为 0.0.0.0，套接字将被绑定到通配符地址，IP 地址由内核选择。<br>（3）<code>public void close()</code>：关闭此数据报套接字。<br>（4）<code>public void send(DatagramPacket p)</code>：从此套接字发送数据报包。DatagramPacket 包含的信息指示：将要发送的数据、其长度、远程主机的 IP 地址和远程主机的端口号。<br>（5）<code>public void receive(DatagramPacket p)</code>：从此套接字接收数据报包。当此方法返回时，DatagramPacket 的缓冲区填充了接收的数据。数据报包也包含发送方的 IP 地址和发送方机器上的端口号。 此方法在接收到数据报前一直阻塞。数据报包对象的 length 字段包含所接收信息的长度。如果信息比包的长度长，该信息将被截短。 </p>
<p><strong>DatagramPacket类的常用方法：</strong><br>（6）<code>public DatagramPacket(byte[] buf,int length)</code>：构造DatagramPacket，用来接收长度为 length 的数据包。 length 参数必须小于等于 buf.length。<br>（7）<code>public DatagramPacket(byte[] buf,int length,InetAddress address,int port)</code>：构造数据报包，用来将长度为 length 的包发送到指定主机上的指定端口号。length 参数必须小于等于 buf.length。<br>（8）<code>public int getLength()</code>：返回将要发送或接收到的数据的长度。 </p>
<p><strong>1、“发送端”</strong><br>步骤流程：<br>1、建立发送端DatagramSocket，需要指定本端的端口号。<br>2、建立数据包DatagramPacket，数据、接收端的IP地址、接收端的端口号。<br>3、调用DatagramSocket的发送方法。<br>4、关闭DatagramSocket。<br><figure class="highlight java"><figcaption><span>Send.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.udp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Send</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//1、建立发送端的DatagramSocket</span></span><br><span class="line">        DatagramSocket ds = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//要发送的数据</span></span><br><span class="line">        ArrayList&lt;String&gt; all = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        all.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        all.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">        all.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        all.add(<span class="string">&quot;great&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//接收方的IP地址</span></span><br><span class="line">        InetAddress ip = InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">        <span class="comment">//接收方的监听端口号</span></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">9999</span>;</span><br><span class="line">         <span class="comment">//发送多个数据报</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; all.size(); i++) &#123;</span><br><span class="line">            <span class="comment">//2、建立数据包DatagramPacket</span></span><br><span class="line">            <span class="keyword">byte</span>[] data = all.get(i).getBytes();</span><br><span class="line">            DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(data, data.length, ip, port);</span><br><span class="line">            <span class="comment">//3、调用Socket的发送方法</span></span><br><span class="line">            ds.send(dp);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//4、关闭Socket</span></span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>2、“接收端”</strong><br>步骤流程：<br>1、建立接收端DatagramSocket，需要指定本端的IP地址和端口号。<br>2、建立数据包DatagramPacket，需要指定装数据的数组。<br>3、调用Socket的接收方法。<br>4、拆封数据。<br>5、关闭Socke。<br><figure class="highlight java"><figcaption><span>Receive.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.udp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Receive</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//1、建立接收端的DatagramSocket，需要指定本端的监听端口号</span></span><br><span class="line">        DatagramSocket ds = <span class="keyword">new</span> DatagramSocket(<span class="number">9999</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//一直监听数据</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">//2、建立数据包DatagramPacket</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>*<span class="number">64</span>];</span><br><span class="line">            DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(buffer , buffer.length);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//3、调用Socket的接收方法</span></span><br><span class="line">            ds.receive(dp);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//4、拆封数据</span></span><br><span class="line">            String str = <span class="keyword">new</span> String(buffer,<span class="number">0</span>,dp.getLength());</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="使用MulticastSocket实现多点广播"><a href="#使用MulticastSocket实现多点广播" class="headerlink" title="使用MulticastSocket实现多点广播"></a>使用MulticastSocket实现多点广播</h3><p>Datagram只允许数据报发送给指定的目标地址，而MulticastSocket可以将数据报以广播方式发送到数量不等的多个客户端。<br>IP协议为多点广播提供了这批特殊的IP地址，这些IP地址的范围是224.0.0.0至239.255.255.255。<br>MulticastSocket常用的方法：<br>（1）<code>MulticastSocket(int port)</code>：创建多播套接字并将其绑定到特定端口。创建一个MulticastSocket对象后，还需要将该MulticastSocket加入到指定的多点广播地址，如果结束也需要脱离多点广播地址。<br>（2）<code>void joinGroup(InetAddress mcastaddr)</code>：加入多播组。<br>（3）<code>void leaveGroup(InetAddress mcastaddr)</code>：离开多播组。<br>（4）<code>void setLoopbackMode(boolean disable)</code>：启用/禁用多播数据报的本地回送。true 表示禁用 LoopbackMode。<br><figure class="highlight java"><figcaption><span>Chat.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.udp.multi;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.MulticastSocket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Chat</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> <span class="keyword">boolean</span> exit = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        MulticastSocket socket = <span class="keyword">new</span> MulticastSocket(<span class="number">9999</span>);</span><br><span class="line">        InetAddress ip = InetAddress.getByName(<span class="string">&quot;230.0.0.1&quot;</span>);</span><br><span class="line">        socket.joinGroup(ip);</span><br><span class="line">        socket.setLoopbackMode(<span class="keyword">false</span>);</span><br><span class="line">        </span><br><span class="line">        System.out.print(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">        username = input.nextLine();</span><br><span class="line">        </span><br><span class="line">        SendThread s = <span class="keyword">new</span> SendThread(socket,ip);</span><br><span class="line">        ReceiveThread r = <span class="keyword">new</span> ReceiveThread(socket);</span><br><span class="line">        </span><br><span class="line">        s.start();</span><br><span class="line">        r.start();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            s.join();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        socket.close();</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SendThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> MulticastSocket socket;</span><br><span class="line">        <span class="keyword">private</span> InetAddress ip;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SendThread</span><span class="params">(MulticastSocket socket,InetAddress ip)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">            <span class="keyword">this</span>.socket = socket;</span><br><span class="line">            <span class="keyword">this</span>.ip = ip;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (!exit) &#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;输入广播消息：&quot;</span>);</span><br><span class="line">                    String message = input.nextLine();</span><br><span class="line">                    <span class="keyword">if</span> (<span class="string">&quot;bye&quot;</span>.equals(message)) &#123;</span><br><span class="line">                        exit = <span class="keyword">true</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">    </span><br><span class="line">                    <span class="keyword">byte</span>[] data = (username+<span class="string">&quot;:&quot;</span>+message).getBytes();</span><br><span class="line">                    DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(data, data.length, ip, <span class="number">9999</span>);</span><br><span class="line">    </span><br><span class="line">                    socket.send(dp);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ReceiveThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> MulticastSocket socket;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ReceiveThread</span><span class="params">(MulticastSocket socket)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">            <span class="keyword">this</span>.socket = socket;</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (!exit) &#123;</span><br><span class="line">                    <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                    DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(data, data.length);</span><br><span class="line">                    socket.receive(dp);</span><br><span class="line">                    String str = <span class="keyword">new</span> String(data, <span class="number">0</span>, dp.getLength());</span><br><span class="line">                    System.out.println(str);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                exit = <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>本文重点介绍了Java网络编程的相关知识。通过本文的学习，了解了计算机网络的相关知识，并介绍了IP地址和端口、网络协议的概念，这是进行网络编程的基础。</p>
<p>本文介绍了Java提供的InetAddress、URLConnection等，并通过它获取了远程资源。</p>
<p>本文还介绍了ServerSocket、Socket类，程序可以通过这两个类实现了TCP服务器、TCP客户端，通过编写案例，我们发现编写基于TCP协议的网络编程对于IO流、多线程知识的应用也有了更好的体会。</p>
<p>本文也介绍了DatagramSocket，DatagramPacket和MulticastSocket，并通过一个局域网通信案例示范了如何使用它们。</p>

      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/04/Java/27.JavaIO%E6%B5%81/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/04/Java/27.JavaIO%E6%B5%81/" class="post-title-link" itemprop="url">JavaIO流</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-04 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-04T00:00:00+08:00">2020-03-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>37k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>34 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <a id="more"></a>
<h2 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h2><p>I/O是Input/Output的缩写， I/O技术是非常实用的技术，如读/写文件，网络通讯等等。Java的IO支持通过java.io包下的类和接口来支持。<br>（1）I(Input)：输入，从别的地方（文件、键盘、网络、内存等）读取数据到当前程序中。<br>（2）O(Output)：输出，从程序把数据写/输出到文件、屏幕（控制台）、网络、内存等中。</p>
<h2 id="java-io-File类"><a href="#java-io-File类" class="headerlink" title="java.io.File类"></a>java.io.File类</h2><p>File类是文件或目录的路径，而不是文件本身，因此File类不能直接访问文件内容本身，如果需要访问文件内容本身，则要使用输入/输出流。<br>File类是java.io包下代表与平台无关的文件或目录，还可以操作文件和目录，File类能新建、删除、重命名文件和目录。<br><div class="note info"><p>File类代表磁盘或网络中某个文件或目录的路径名称，如：/memories/javase/io/API.jpg<br>但它不能直接通过File对象读取和写入数据，若要操作文件存储的数据，需要IO流。就好比“地址/名字”不代表“水库”，要“存取”里面的水到你“家里”，需要“管道”。</p>
</div></p>
<h3 id="路径名的方法"><a href="#路径名的方法" class="headerlink" title="路径名的方法"></a>路径名的方法</h3><p>File类可以使用文件路径字符串来创建File实例，该文件路径字符串既可以是绝对路径，也可以是相对路径，默认情况下，系统总是依据用户的工作路径来解释相对路径，这个路径由系统属性“user.dir”指定，通常也就是运行Java虚拟机时所作的路径。<br>（1）<code>String getName()</code>：返回此File对象的所表示的文件名（返回最后一级）。<br>（2）<code>String getPath()</code>：返回此File对象所对应的路径名。<br>（3）<code>String getAbsolutePath()</code>：返回此File对象所对应的绝对路径名。<br>（4）<code>File getAbsoluteFile()</code>：返回此File对象所对应的绝对路径名所对应的File对象。<br>（5）<code>String getCanonicalPath()</code>：返回此File对象所对应的规范路径名。所谓规范路径名，即对路径中的“..”等进行解析后的路径名。<br>（6）<code>File getCanonicalFile()</code>：返回此File对象所对应的规范路径名所对应的File对象。<br>（7）<code>String getParent()</code>：返回此File对象的父目录名。<br>（8）<code>File getParentFile()</code>：返回此File对象的父目录名所对应的File对象。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test01File</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="comment">//下面三种方式都可以</span></span><br><span class="line">        <span class="comment">////绝对路径：从根目录开始导航，就是绝对路径</span></span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/HelloIO.java&quot;</span>);<span class="comment">//建议使用这种，win和其他平台都支持</span></span><br><span class="line">        <span class="comment">//File f1 = new File(&quot;d:\\memories\\javase\\HelloIO.java&quot;);</span></span><br><span class="line">        <span class="comment">//File f1 = new File(&quot;d:&quot;+File.separator+&quot;memories&quot;+File.separator+&quot;javase&quot;+File.separator+&quot;HelloIO.java&quot;);</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的名称：&quot;</span> + f1.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的路径名：&quot;</span> + f1.getPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的绝对路径名：&quot;</span> + f1.getAbsolutePath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的规范路径名：&quot;</span> + f1.getCanonicalPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的父目录名：&quot;</span> + f1.getParent());</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        文件/目录的名称：HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的路径名：d:\memories\javase\HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的绝对路径名：d:\memories\javase\HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的规范路径名：D:\memories\javase\HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的父目录名：d:\memories\javase</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="comment">//相对路径：相对当前的项目</span></span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">&quot;HelloIO.java&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;user.dir =&quot;</span> + System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的名称：&quot;</span> + f2.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的路径名：&quot;</span> + f2.getPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的绝对路径名：&quot;</span> + f2.getAbsolutePath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的规范路径名：&quot;</span> + f2.getCanonicalPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的父目录名：&quot;</span> + f2.getParent());</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        user.dir =D:\memories\temp\JDK18\test_io</span></span><br><span class="line"><span class="comment">        文件/目录的名称：HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的路径名：HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的绝对路径名：D:\memories\temp\JDK18\test_io\HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的规范路径名：D:\memories\temp\JDK18\test_io\HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的父目录名：null</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        File f3 = <span class="keyword">new</span> File(<span class="string">&quot;../../HelloIO.java&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;user.dir =&quot;</span> + System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的名称：&quot;</span> + f3.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的路径名：&quot;</span> + f3.getPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的绝对路径名：&quot;</span> + f3.getAbsolutePath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的规范路径名：&quot;</span> + f3.getCanonicalPath());</span><br><span class="line">        System.out.println(<span class="string">&quot;文件/目录的父目录名：&quot;</span> + f3.getParent());</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        user.dir =D:\memories\temp\JDK18\test_io</span></span><br><span class="line"><span class="comment">        文件/目录的名称：HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的路径名：..\..\HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的绝对路径名：D:\memories\temp\JDK18\test_io\..\..\HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的规范路径名：D:\memories\temp\HelloIO.java</span></span><br><span class="line"><span class="comment">        文件/目录的父目录名：..\..</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>路径中如果出现“..”表示上一级目录，路径名如果以“/”开头，表示从“根目录”下开始导航。<br>window的路径分隔符使用“\”，而Java程序中的“\”表示转义字符，所以在Windows中表示路径，需要用“\\\”。或者直接使用“/”也可以（建议使用此种方式），Java程序支持将“/”当成平台无关的路径分隔符。或者直接使用File.separator常量值表示。</p>
<h3 id="获取其他信息的方法"><a href="#获取其他信息的方法" class="headerlink" title="获取其他信息的方法"></a>获取其他信息的方法</h3><p>文件和目录检测方法：<br>（1）<code>boolean exists()</code>：判断File对象对应的文件或目录是否存在。<br>（2）<code>canRead()</code>：判断File对象对应的文件或目录是否可读。<br>（3）<code>canWrite()</code>：判断File对象对应的文件或目录是否可写。<br>（4）<code>isHidden()</code>：判断File对象对应的文件或目录是否是否隐藏。<br>（5）<code>isFile()</code>：判断File对象对应的是否是文件。<br>（6）<code>isDirectory()</code>：判断File对象对应的是否是目录。<br>（7）<code>isAbsolute()</code>：判断File对象对应的文件或目录是否是绝对路径。<br>获取常规信息：<br>（1）<code>long lastModified()</code>：返回File对象对应的文件或目录的最后修改时间（毫秒值）。<br>（2）<code>long length()</code>：返回File对象对应的文件的内容的长度（字节数），<strong>如果File对象对应的是目录，则结果是不确定的：目录下面的所有的文件大小累加和</strong>。<br>以上都是对应于File对象的属性信息，<strong>如果File对象对应的文件或目录不存在，返回的都是对应属性的默认值</strong>。<br>例如：<code>length()</code>返回为0，<code>isFile()</code>和<code>isDirectory()</code>返回为false等。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/HelloIO.java&quot;</span>);</span><br><span class="line">    <span class="keyword">long</span> time = file.lastModified();</span><br><span class="line">    SimpleDateFormat sf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;yyyy-MM-dd HH:mm:ss SSS&quot;</span>);</span><br><span class="line">    String format = sf.format(<span class="keyword">new</span> Date(time));<span class="comment">//format只支持Date对象，强转time</span></span><br><span class="line">    System.out.println(<span class="string">&quot;最后修改时间：&quot;</span> + format);</span><br><span class="line">    System.out.println(<span class="string">&quot;文件大小：&quot;</span> + file.length());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h3><p><strong>1、创建文件</strong><br>（1）创建文件：<code>boolean createNewFile()throws IOException</code>如果指定的文件不存在并成功地创建，则返回 true；如果指定的文件已经存在，则返回 false。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/HelloIO.java&quot;</span>);</span><br><span class="line">    file.createNewFile();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>（2）创建临时文件，通常会结合deleteOnExit()使用：<br><code>public static File createTempFile(String prefix,String suffix) throws IOException</code>在默认临时文件目录中创建一个空文件，使用给定前缀和后缀生成其名称。调用此方法等同于调用 createTempFile(prefix, suffix, null)。<br>　　prefix - 用于生成文件名的前缀字符串；必须至少三个字符。<br>　　suffix - 用于生成文件名的后缀字符串；如果为 null，默认为 “.tmp”<br><code>public static File createTempFile(String prefix,String suffix,File directory)throws IOException</code>在指定目录中创建一个新的空文件，使用给定的前缀和后缀字符串生成其名称。<br>　　prefix - 用于生成文件名的前缀字符串；必须至少三个字符。<br>　　suffix - 用于生成文件名的后缀字符串；如果为 null，默认为 “.tmp”<br>　　directory - 将创建的文件所在的目录；如果使用默认临时文件目录，则该参数为 null<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">    File tempFile = File.createTempFile(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;.tmp&quot;</span>);</span><br><span class="line">    System.out.println(tempFile.getAbsolutePath());</span><br><span class="line">    <span class="comment">//C:\Users\memories\AppData\Local\Temp\Hello2541131191749214481.tmp</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>2、删除文件</strong><br>（1）<code>boolean delete()</code>：当且仅当成功删除文件时，返回 true；否则返回 false。<br>（2）<code>public void deleteOnExit()</code>：当退出JVM时，删除文件，一般用于删除临时文件。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/HelloIO.java&quot;</span>);</span><br><span class="line">    file.delete();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test8</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">    File tempFile = File.createTempFile(<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;.tmp&quot;</span>);</span><br><span class="line">    <span class="comment">//....省略代码</span></span><br><span class="line">    tempFile.deleteOnExit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>3、文件重命名</strong><br><code>boolean renameTo(File dest)</code>：此方法行为的许多方面都是与平台有关的：重命名操作无法将一个文件从一个文件系统移动到另一个文件系统，该操作不是不可分的，如果已经存在具有目标抽象路径名的文件，那么该操作可能无法获得成功。应该始终检查返回值，以确保重命名操作成功。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test9</span><span class="params">()</span></span>&#123;</span><br><span class="line">    File src = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/HelloIO.java&quot;</span>);</span><br><span class="line">    File dest = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/HelloFile.java&quot;</span>);</span><br><span class="line">    src.renameTo(dest);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test10</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    File src = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/HelloIO.java&quot;</span>);</span><br><span class="line">    File dest = <span class="keyword">new</span> File(<span class="string">&quot;e:/HelloFile.java&quot;</span>);</span><br><span class="line">        <span class="comment">//D盘和E盘相同的文件系统可以成功，例如都是NTFS。</span></span><br><span class="line">    src.renameTo(dest);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="操作目录"><a href="#操作目录" class="headerlink" title="操作目录"></a>操作目录</h3><p><strong>1、创建目录</strong><br>（1）<code>boolean mkdir()</code> ：必须确保父目录存在，否则创建失败。<br>（2）<code>boolean mkdirs()</code>：如果父目录链不存在，会一同创建父目录链。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    File dir = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/io&quot;</span>);</span><br><span class="line">    dir.mkdir();</span><br><span class="line">    <span class="comment">//如果d:/memories/javase不存在不会报错，只是没创建成功</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    File dir = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories/javase/io&quot;</span>);</span><br><span class="line">    dir.mkdirs();</span><br><span class="line">    <span class="comment">//如果d:/memories/javase不存在，会一并创建</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>2、列出目录内容</strong><br>（1）<code>public String[] list()</code>：列出当前目录的下级目录或文件的名称。<br>（2）<code>public File[] listFiles()</code>：列出当前目录的下级的目录或文件对应的File对象。 配合递归可以列出下级的下级等等。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File dir = <span class="keyword">new</span> File(<span class="string">&quot;d:/memories&quot;</span>);</span><br><span class="line">        listSubFiles(dir);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listSubFiles</span><span class="params">(File dir)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dir != <span class="keyword">null</span> &amp;&amp; dir.isDirectory()) &#123;</span><br><span class="line">        File[] listFiles = dir.listFiles();</span><br><span class="line">        <span class="keyword">if</span> (listFiles != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (File sub : listFiles) &#123;</span><br><span class="line">                listSubFiles(sub);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(dir);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>示例代码：求目录总大小。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File dir = <span class="keyword">new</span> File(<span class="string">&quot;D:/memories&quot;</span>);</span><br><span class="line">        <span class="keyword">long</span> length = getLength(dir);</span><br><span class="line">        System.out.println(<span class="string">&quot;大小：&quot;</span> + length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getLength</span><span class="params">(File dir)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dir != <span class="keyword">null</span> &amp;&amp; dir.isDirectory()) &#123;</span><br><span class="line">        File[] listFiles = dir.listFiles();</span><br><span class="line">        <span class="keyword">if</span>(listFiles != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (File sub : listFiles) &#123;</span><br><span class="line">                sum += getLength(sub);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(dir != <span class="keyword">null</span> &amp;&amp; dir.isFile())&#123;</span><br><span class="line">        <span class="keyword">return</span> dir.length();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>（3）<code>public File[] listFiles(FileFilter filter)：</code>返回所有满足指定过滤器的文件和目录。如果给定 filter 为 null，则接受所有路径名。否则，当且仅当在路径名上调用过滤器的 FileFilter.accept(java.io.File) 方法返回 true 时，该路径名才满足过滤器。如果当前File对象不表示一个目录，或者发生 I/O 错误，则返回 null。<br>（4）<code>public File[] listFiles(FilenameFilter filter)</code>：返回所有满足指定过滤器的文件和目录。如果给定 filter 为 null，则接受所有路径名。否则，当且仅当在路径名上调用过滤器的 <code>FilenameFilter.accept(java.io.File, java.lang.String)</code> 方法返回 true 时，该路径名才满足过滤器。如果当前File对象不表示一个目录，或者发生 I/O 错误，则返回 null。<br>（5）<code>public static File[] listRoots()</code>：列出可用的文件系统根。</p>
<p>示例代码：列出“D:/memories/javaee/JavaSE”该目录以及子目录下所有的.java文件。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File dir = <span class="keyword">new</span> File(<span class="string">&quot;D:/memories/javaee/JavaSE&quot;</span>);</span><br><span class="line">        listByFileFilter(dir);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listByFileFilter</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (file != <span class="keyword">null</span> &amp;&amp; file.isDirectory()) &#123;</span><br><span class="line">        File[] listFiles = file.listFiles(<span class="keyword">new</span> FilenameFilter() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir, String name)</span> </span>&#123;<span class="comment">//这个方法返回true，说明是要保留的</span></span><br><span class="line">                <span class="comment">//dir被找到的文件所在的目录，name文件的名称</span></span><br><span class="line">                <span class="comment">//.java文件 或 子目录 都要返回true</span></span><br><span class="line">                <span class="keyword">return</span> name.endsWith(<span class="string">&quot;.java&quot;</span>) || <span class="keyword">new</span> File(dir,name).isDirectory();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (listFiles != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (File sub : listFiles) &#123;</span><br><span class="line">                <span class="keyword">if</span>(sub.isFile())&#123;</span><br><span class="line">                    System.out.println(sub);</span><br><span class="line">                &#125;</span><br><span class="line">                listByFileFilter(sub);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>3、删除目录</strong><br><code>boolean delete()</code>：只能删除空目录。否则需要先将目录下的所有内容删除才能将该目录删除。</p>
<p>示例代码：删除”D:/memories/javase”目录，包括它的下一级。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File dir = <span class="keyword">new</span> File(<span class="string">&quot;D:/memories/javase&quot;</span>);</span><br><span class="line">        forceDeleteDir(dir);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">forceDeleteDir</span><span class="params">(File dir)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dir != <span class="keyword">null</span> &amp;&amp; dir.isDirectory()) &#123;</span><br><span class="line">        File[] listFiles = dir.listFiles();</span><br><span class="line">        <span class="keyword">if</span>(listFiles!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (File sub : listFiles) &#123;</span><br><span class="line">                forceDeleteDir(sub);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dir.delete();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>4、重命名目录</strong><br><code>boolean renameTo(File dest)</code>：如果是windows目录，只能在同一个盘下，不能从D盘移动到E盘。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    File dir = <span class="keyword">new</span> File(<span class="string">&quot;D:/memories/javase&quot;</span>);</span><br><span class="line">    File dest = <span class="keyword">new</span> File(<span class="string">&quot;D:/memories/java代码&quot;</span>);</span><br><span class="line">    dir.renameTo(dest);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test8</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    File dir = <span class="keyword">new</span> File(<span class="string">&quot;D:/memories/javase&quot;</span>);</span><br><span class="line">    File dest = <span class="keyword">new</span> File(<span class="string">&quot;D:/temp&quot;</span>);<span class="comment">//windows下是错误的</span></span><br><span class="line">    dir.renameTo(dest);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="IO流的分类与设计"><a href="#IO流的分类与设计" class="headerlink" title="IO流的分类与设计"></a>IO流的分类与设计</h2><p>如果对于File对象来说，输入和输出操作只能针对文件，不能针对目录。<br>IO操作不仅仅是针对文件，它可以从网络中输入和输出等等。</p>
<h3 id="java-io包中的IO流"><a href="#java-io包中的IO流" class="headerlink" title="java.io包中的IO流"></a>java.io包中的IO流</h3><p>java.io包中类太多了，简直是“琳琅满目”“眼花缭乱”。看到这些API时，放心，你不是唯一受到惊吓和困扰的人。但是，如果你好好梳理他们的关系，并掌握几个经典代表的使用方式，其他的也就等于掌握了。</p>
<p>1、其实不管有多少种IO流，最基本的只有四个，IO的四个超级父类，抽象基类。<br>（1）字节输入流：InputStream<br>（2）字节输出流：OutputStream<br>（3）字符输入流：Reader<br>（4）字符输出流：Writer</p>
<p>2、IO流类的设计选用了“装饰者”设计模式，即IO流分为两大类，“被装饰”的组件和“装饰”的组件。以InputStream为例：<br>（1）其中FileInputStream、ByteArrayInputStream等是“被装饰”的组件，依次用来连接和读取“文件”、“内存中的字节数组”的等。<br>（2）而BufferedInputStream、DataInputStream、ObjectInputStream等是用来“装饰”的组件，依次是给其他InputStream的IO流提供装饰的辅助功能的，依次可以增加“提高效率的缓冲功能”、“按照Java数据类型读取数据的能力”、“读取并恢复Java对象的能力”等。你会发现OutputStream、Reader、Writer系列的流设计方式也是一样的。</p>
<p>3、IO流的选取：<br>Java的IO流是单向的，只能从输入流（Input、Reader）中读取（read）数据，也只能往输出流（Output、Writer）中写（write、print）出数据。<br>按照IO流的处理数据的基本单位分：<br>（1）字节流（XxxStream）：直接处理二进制，一个字节一个字节处理，它适用于一切数据，包括纯文本、图片、音频、视频等等。<br>（2）字符流（XxxReader和XxxWriter）：一个字符一个字符处理，<strong>只能纯文本类的数据</strong>。<br>按照角色分：<br>（1）节点流：连接源头、目的地，即被装饰者IO流。<br>（2）处理流：增强功能，提高性能，即装饰者IO流。<br>节点流处于IO操作的第一线，所有操作必须通过他们进行；处理流是通过包装节点流来完成功能的，处理流可以增加很多层。处理流必须依赖和包装节点流，而不能单独存在。<br><div class="note info"><p>装饰模式（Decorator Pattern）也称为包装模式（Wrapper Pattern），其使用一种对客户端透明的方式来动态地扩展对象的功能，它是通过继承扩展功能的替代方案之一。在现实生活中你也有很多装饰者的例子，例如：人需要各种各样的衣着，不管你穿着怎样，但是，对于你个人本质来说是不变的，充其量只是在外面加上了一些装饰。</p>
</div></p>
<h3 id="常见IO流"><a href="#常见IO流" class="headerlink" title="常见IO流"></a>常见IO流</h3><table border=0 cellpadding=0 cellspacing=0 width=513 style='border-collapse:
 collapse;table-layout:fixed;width:385pt'>
 <col width=72 style='width:54pt'>
 <col width=241 style='mso-width-source:userset;mso-width-alt:7712;width:181pt'>
 <col width=200 style='mso-width-source:userset;mso-width-alt:6400;width:150pt'>
 <tr height=20 style='mso-height-source:userset;height:15.0pt'>
  <td rowspan=4 height=80 class=xl66 width=72 style='height:60.0pt;width:54pt'>文件<font
  class="font5">IO</font><font class="font6">流</font></td>
  <td rowspan=2 class=xl66 width=241 style='width:181pt'>从文件读取</td>
  <td class=xl65 width=200 style='border-left:none;width:150pt'>FileInputStream</td>
 </tr>
 <tr height=20 style='mso-height-source:userset;height:15.0pt'>
  <td height=20 class=xl65 width=200 style='height:15.0pt;border-top:none;
  border-left:none;width:150pt'>FileReader</td>
 </tr>
 <tr height=20 style='mso-height-source:userset;height:15.0pt'>
  <td rowspan=2 height=40 class=xl66 width=241 style='height:30.0pt;border-top:
  none;width:181pt'>写入到文件</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>FileOutputStream</td>
 </tr>
 <tr height=20 style='mso-height-source:userset;height:15.0pt'>
  <td height=20 class=xl65 width=200 style='height:15.0pt;border-top:none;
  border-left:none;width:150pt'>FileWriter</td>
 </tr>
 <tr height=20 style='mso-height-source:userset;height:15.0pt'>
  <td rowspan=4 height=80 class=xl66 width=72 style='height:60.0pt;border-top:
  none;width:54pt'>缓冲<font class="font5">IO</font><font class="font6">流</font></td>
  <td rowspan=2 class=xl66 width=241 style='border-top:none;width:181pt'>从其他输入流中读取</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>BufferedInputStream</td>
 </tr>
 <tr height=20 style='mso-height-source:userset;height:15.0pt'>
  <td height=20 class=xl65 width=200 style='height:15.0pt;border-top:none;
  border-left:none;width:150pt'>BufferedReader</td>
 </tr>
 <tr height=20 style='mso-height-source:userset;height:15.0pt'>
  <td rowspan=2 height=40 class=xl66 width=241 style='height:30.0pt;border-top:
  none;width:181pt'>写入到其他输出流中</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>BufferedOutputStream</td>
 </tr>
 <tr height=20 style='mso-height-source:userset;height:15.0pt'>
  <td height=20 class=xl65 width=200 style='height:15.0pt;border-top:none;
  border-left:none;width:150pt'>BufferedWriter</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td rowspan=2 height=80 class=xl66 width=72 style='height:60.0pt;border-top:
  none;width:54pt'>转换流</td>
  <td class=xl66 width=241 style='border-top:none;border-left:none;width:181pt'>从其他输入流读取，并解码</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>InputStreamReader</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td class=xl66 width=241 style='border-top:none;border-left:none;width:181pt'>写入到其他输出流中，并编码</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>OutputStreamWriter</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td rowspan=2 height=80 class=xl66 width=72 style='height:60.0pt;border-top:
  none;width:54pt'>数据流</td>
  <td class=xl66 width=241 style='border-top:none;border-left:none;width:181pt'>以与机器无关方式从底层输入流中读取基本<font
  class="font5"> Java </font><font class="font6">数据类型</font></td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>DataInputStream</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td height=40 class=xl66 width=241 style='height:30.0pt;border-top:none;
  border-left:none;width:181pt'>以适当方式将基本<font class="font5"> Java </font><font
  class="font6">数据类型写入输出流中</font></td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>DataOutputStream</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td rowspan=2 height=80 class=xl66 width=72 style='height:60.0pt;border-top:
  none;width:54pt'>对象流</td>
  <td class=xl66 width=241 style='border-top:none;border-left:none;width:181pt'>序列化</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>ObjectOutputStream</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td height=40 class=xl66 width=241 style='height:30.0pt;border-top:none;
  border-left:none;width:181pt'>反序列化</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>ObjectInputStream</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td rowspan=2 height=80 class=xl66 width=72 style='height:60.0pt;border-top:
  none;width:54pt'>打印流</td>
  <td class=xl65 width=241 style='border-top:none;border-left:none;width:181pt'>　</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>PrintStream</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td class=xl65 width=241 style='border-top:none;border-left:none;width:181pt'>　</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>PrintWriter</td>
 </tr>
 <tr height=40 style='mso-height-source:userset;height:30.0pt'>
  <td height=40 class=xl66 width=72 style='height:30.0pt;border-top:none;width:54pt'>其他</td>
  <td class=xl65 width=241 style='border-top:none;border-left:none;width:181pt'>......</td>
  <td class=xl65 width=200 style='border-top:none;border-left:none;width:150pt'>　</td>
 </tr>
 <![if supportMisalignedColumns]>
 <tr height=0 style='display:none'>
  <td width=72 style='width:54pt'></td>
  <td width=241 style='width:181pt'></td>
  <td width=200 style='width:150pt'></td>
 </tr>
 <![endif]>
</table>

<h3 id="抽象基类的常用方法"><a href="#抽象基类的常用方法" class="headerlink" title="抽象基类的常用方法"></a>抽象基类的常用方法</h3><p><strong>1、InputStream</strong><br>（1）<code>int read()</code>：读取数据的一个字节。返回 0 到 255 范围内的 int 字节值。如果因为已经到达流末尾而没有可用的字节，则返回值 -1。<br>（2）<code>int read(byte[] b)</code>：将最多 b.length 个字节的数据读入一个 byte 数组中。如果因为已经到达流末尾而没有可用的字节，则返回值 -1。否则以整数形式返回实际读取的字节数。<br>（3）<code>int read(byte[] b, int off,int len)</code>：将最多 len 个数据字节读入 byte 数组。尝试读取 len 个字节，但读取的字节也可能小于该值。以整数形式返回实际读取的字节数。如果因为流位于文件末尾而没有可用的字节，则返回值-1。<br>（4）<code>public void close() throws IOException</code>：关闭此输入流并释放与该流关联的所有系统资源。<br><strong>2、OutputStream</strong><br>（1）<code>void write(int b)</code>：将指定的字节写入此输出流。write 的常规协定是：向输出流写入一个字节。要写入的字节是参数 b 的八个低位。b 的 24 个高位将被忽略。 即写入0~255范围的。<br>（2）<code>void write(byte[] b)</code>：将 b.length 个字节从指定的 byte 数组写入此输出流。write(b) 的常规协定是：应该与调用 write(b, 0, b.length) 的效果完全相同。<br>（3）<code>void write(byte[] b,int off,int len)</code>：将指定 byte 数组中从偏移量 off 开始的 len 个字节写入此输出流。<br>（4）<code>public void flush()throws IOException</code>：刷新此输出流并强制写出所有缓冲的输出字节，调用此方法指示应将这些字节立即写入它们预期的目标。<br>（5）<code>public void close() throws IOException</code>：关闭此输出流并释放与该流关联的所有系统资源。<br><strong>3、Reader</strong><br>（1）<code>int read()</code>：读取单个字符。正常返回是该字符的Unicode编码值，范围在 0 到 65535 之间 ，如果已到达流的末尾，则返回 -1 。<br>（2）<code>int read(char[] cbuf)</code>：将字符读入数组。返回本次读取的字符数，如果已到达流的末尾，则返回 -1。<br>（3）<code>int read(char[] cbuf,int off,int len)</code>：将字符读入数组的某一部分。存到数组cbuf中，从off处开始存储，最多读len个字符。返回本次读取的字符数，如果已到达流的末尾，则返回 -1。<br>（4）<code>public void close() throws IOException</code>：关闭此输入流并释放与该流关联的所有系统资源。<br><strong>4、Writer</strong><br>（1）<code>void write(int c)</code>、<code>Writer append(char c)</code>：写入单个字符。要写入的字符包含在给定整数值的 16 个低位中，16 高位被忽略。 即写入0 到 65535 之间的Unicode码。<br>（2）<code>void write(char[] cbuf)</code>、<code>Writer append(CharSequence csq)</code>：写入字符数组。<br>（3）<code>void write(char[] cbuf,int off,int len)</code>、<code>Writer append(CharSequence csq, int start, int end)</code>：写入字符数组的某一部分。从off开始，写入len个字符。<br>（4）<code>void write(String str)</code>：写入字符串。<br>（5）<code>void write(String str,int off,int len)</code>：写入字符串的某一部分。<br>（6）<code>void flush()</code>：刷新该流的缓冲，则立即将它们写入预期目标。<br>（7）<code>public void close() throws IOException</code>：关闭此输出流并释放与该流关联的所有系统资源。 </p>
<h3 id="IO流使用步骤"><a href="#IO流使用步骤" class="headerlink" title="IO流使用步骤"></a>IO流使用步骤</h3><p><strong>1、读取/接收数据的步骤</strong><br>第一步：选择IO流<br>1、选择节点流，明确你要从哪里读取数据，即数据源是什么？<br>　　如果从文件中，就选择FileInputStream、FileReader；<br>　　如果从内存的数组中，就选择ByteArrayInputStream、CharArrayReader；<br>　　如果从网络中，就选择InputStream；<br>2、选择字节流还是字符流？<br>　　看数据是否为纯文本，若是纯文本且文本的编码方式与当前平台的一致，那么选择字符流的效率更高，否则选择字节流。<br>3、是否需要增加额外的辅助功能？<br>　　缓冲功能：BufferedReader、BufferedInputStream<br>　　是否需要按行读：BufferedReader、Scanner<br>　　是否需要以与机器无关方式从底层输入流中读取基本 Java 数据类型：DataInputStream<br>　　是否需要对象的反序列化：ObjectInputStream<br>　　是否需要对流中的数据进行解码或转换：InputStreamReader<br>第二步：循环读取数据？<br>　　read()<br>　　readLine()<br>　　readXxx()，例如：readInt()，readObject()，readUTF()等<br>第三步：关闭close()。</p>
<p><strong>2、写/发送数据的步骤</strong><br>第一步：选择IO流<br>1、选择节点流，明确你要把数据写到哪里去，即数据的目的地是哪里？<br>　　如果写到文件中，就选择FileOutputStream、FileWriter；<br>　　如果写到内存某数组中，就选择ByteArrayOutputStream、CharArrayWriter；<br>　　如果发送到网络中，就选择OutputStream；<br>2、选择字节流还是字符流？<br>　　看数据是否为纯文本，若是纯文本且文本的编码方式与当前平台的一致，那么选择字符流的效率更高，否则选择字节流。<br>3、是否需要增加额外的辅助功能？<br>　　缓冲功能：BufferedOutputStream、BufferedWriter<br>　　是否需要按行写：PrintStream、PrintWriter<br>　　是否需要以以适当方式将基本 Java 数据类型写入输出流：DataOutputStream<br>　　是否需要将对象的序列化：ObjectOutputStream<br>　　是否需要对流中的数据进行编码或转换：OutputStreamWriter<br>第二步：循环写数据？<br>　　write(xx)<br>　　print(xx)和println(xx)<br>　　writeXxx：例如：writeInt(xx)、writeDouble(xx)、writeObject(xx)等<br>第三步：关闭IO流close()。</p>
<h2 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h2><h3 id="输出纯文本数据"><a href="#输出纯文本数据" class="headerlink" title="输出纯文本数据"></a>输出纯文本数据</h3><p>FileOutputStream：文件字节输出流，可以把字节数据输出到任意类型的文件。<br>FileWriter：文件字符输出流，只能把字符数据输出到纯文本文件。按照平台默认的字符编码进行编码。</p>
<p>PrintStream和PrintWriter是两个打印流，可以实现将Java基本数据类型的数据格式转化为字符串输出，引用类型的数据自动调用toString()。这两个类提供了一系列重载的print()和println()方法，用于多种数据类型的输出，用于不会抛出 I/O 异常。<br>PrintStream 打印的所有字符都使用平台的默认字符编码转换为字节。在需要写入字符时应该使用 PrintWriter 类，它可以指定字符编码。<br>PrintWriter 与 PrintStream 类不同，如果启用了自动刷新，则只有在调用 println、printf 或 format 的其中一个方法时才可能完成此操作，而不是每当正好输出换行符时才完成。这些方法使用平台自有的行分隔符概念，而不是换行符。</p>
<p>1、如果要实现按行读取，可选择什么类型？<br>BufferedReader：<code>String readLine()</code><br>Scanner：<code>String nextLine()</code></p>
<p>2、如果要按行输出，可以选择什么类型？<br>（1）自己处理“\r\n”<br>（2）BufferedWriter：<code>newLine()</code><br>（3）PrintStream和PrintWriter：<code>println()</code></p>
<p>案例：把用户的留言保存到message.txt文件中，从键盘输入留言。<br><div class="tabs" id="testfilewriter"><ul class="nav-tabs"><li class="tab active"><a href="#testfilewriter-1">基本输出</a></li><li class="tab"><a href="#testfilewriter-2">按行输出</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testfilewriter-1"><figure class="highlight java"><figcaption><span>TestFileWriter.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileWriter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fw = <span class="keyword">new</span> FileWriter(<span class="string">&quot;message.txt&quot;</span>,<span class="keyword">true</span>);<span class="comment">//true表示追加模式，默认是覆盖模式</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请输入留言：&quot;</span>);</span><br><span class="line">                String message = input.nextLine();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;stop&quot;</span>.equals(message))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                fw.write(message);</span><br><span class="line">                System.out.println(<span class="string">&quot;结束留言，请输入stop&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            input.close();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fw.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testfilewriter-2"><figure class="highlight java"><figcaption><span>TestPrintWriter.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPrintWriter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        PrintWriter pw = <span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pw = <span class="keyword">new</span> PrintWriter(<span class="string">&quot;message.txt&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请输入留言：&quot;</span>);</span><br><span class="line">                String message = input.nextLine();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;stop&quot;</span>.equals(message))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                pw.println(message);</span><br><span class="line">                System.out.println(<span class="string">&quot;结束留言，请输入stop&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            input.close();</span><br><span class="line">            pw.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="读取纯文本数据"><a href="#读取纯文本数据" class="headerlink" title="读取纯文本数据"></a>读取纯文本数据</h3><p>FileInputStream：文件字节输入流，可以读取任意类型的文件。<br>FileReader：文件字符输入流，只能读取纯文本的文件。按照平台默认的字符编码进行解码。</p>
<p>案例：读取用户留言信息message.txt文件中的内容。<br><div class="tabs" id="testfilereader"><ul class="nav-tabs"><li class="tab active"><a href="#testfilereader-1">基本读取</a></li><li class="tab"><a href="#testfilereader-2">按行读取</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testfilereader-1"><figure class="highlight java"><figcaption><span>TestFileReader.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileReader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        FileReader fr = <span class="keyword">null</span>;<span class="comment">//纯文本选用字符流</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fr = <span class="keyword">new</span> FileReader(<span class="string">&quot;message.txt&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">char</span>[] data = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">while</span>((len = fr.read(data)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="comment">//[0,len)，保证打印的是数组中新读取的字符</span></span><br><span class="line">                <span class="comment">//如果不写范围，可能最后一次打印数组中有旧字符</span></span><br><span class="line">                System.out.println(<span class="keyword">new</span> String(data,<span class="number">0</span>,len));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fr.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testfilereader-2"><figure class="highlight java"><figcaption><span>TestBufferedReader.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBufferedReader</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">&quot;message.txt&quot;</span>));</span><br><span class="line">            </span><br><span class="line">            String str;</span><br><span class="line">            <span class="keyword">while</span>((str = br.readLine())!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                br.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h3><p>文件IO流，和文件的数据传输：<br>（1）文件字节输入流：FileInputStream<br>（2）文件字节输出流：FileOutputStream<br>（3）文件字符输入流：FileReader，只能按照平台默认的编码方式读取数据<br>（4）文件字符输出流：FileWriter，只能按照平台默认的编码方式写入数据<br><div class="note info"><ul>
<li>在写入一个文件时，如果目录下有同名文件将被覆盖，除非是追加模式。</li>
<li>在读取文件时，必须保证该文件已存在，否则出异常。</li>
</ul>
</div></p>
<p>BufferedInputStream：字节输入缓冲流，给InputStream系列IO流增加缓冲效果。<br>BufferedOutputStream：字节输出缓冲流，给OutputStream系列IO流增加缓冲效果。<br>BufferedReader：字符输入缓冲流，给Reader系列IO流增加缓冲效果。<br>BufferedWriter：字符输出缓冲流，给Writer系列IO流增加缓冲效果。</p>
<p>案例：将文件”memories/file/1.jpg”复制”memories/img/1.jpg”：<br>提示：使用缓冲流，可以提高效率。缓冲流的默认缓冲区大小是8192字节/字符。<br><div class="tabs" id="testcopy"><ul class="nav-tabs"><li class="tab active"><a href="#testcopy-1">基本版</a></li><li class="tab"><a href="#testcopy-2">提升效率版</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testcopy-1"><figure class="highlight java"><figcaption><span>TestCopy.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCopy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            copyFile(<span class="keyword">new</span> File(<span class="string">&quot;memories/file/1.jpg&quot;</span>), </span><br><span class="line">                <span class="keyword">new</span> File(<span class="string">&quot;memories/img/1.jpg&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;文件复制成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;文件复制失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFile</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!src.isFile())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(src.getPath() + <span class="string">&quot;不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(src);</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(dest);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = fis.read(data))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(data, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        fos.close();</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testcopy-2"><figure class="highlight java"><figcaption><span>TestBufferedCopy.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBufferedCopy</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            copyFileInHighSpeed(<span class="keyword">new</span> File(<span class="string">&quot;memories/file/1.jpg&quot;</span>), </span><br><span class="line">                <span class="keyword">new</span> File(<span class="string">&quot;memories/img/1.jpg&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;文件复制成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;文件复制失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFileInHighSpeed</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!src.isFile())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(src.getPath() + <span class="string">&quot;不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//增加缓冲功能，增加了一个方法：Srting readLine()读取一行，但它会吃掉换行符</span></span><br><span class="line">        <span class="comment">//可以在write后，添加一个 void newLine()方法，增加一个换行符</span></span><br><span class="line">        BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(src));</span><br><span class="line">        BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(dest));</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = bis.read(data))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(data, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        String str;//readLine返回的是一行字符串</span></span><br><span class="line"><span class="comment">        while((str = bis.readLine(data))!=null)&#123;</span></span><br><span class="line"><span class="comment">            bos.write(data, 0, len);</span></span><br><span class="line"><span class="comment">            bos.newLine();//增加一个换行符</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        bis.close();</span><br><span class="line">        bos.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="读写纯文本数据的同时进行编码和解码"><a href="#读写纯文本数据的同时进行编码和解码" class="headerlink" title="读写纯文本数据的同时进行编码和解码"></a>读写纯文本数据的同时进行编码和解码</h3><p>解码，即把二进制的字节序列按照指定字符编码解码为可以被正确识别的字符内容。编码，是解码的逆向过程。<br>OutputStreamWriter：可以把字符流转为字节流输出，并且在转换的过程中，可以指定字符编码。<br>InputStreamReader：可以把字节输入流转为字符输入流，并且在转换的过程中，可以指定字符编码。</p>
<p>案例：当前系统平台的字符编码方式是GBK，需要读取一个UTF-8的文件内容，到当前系统中。<br>案例：编写程序实现将一个编码为“GBK”的纯文本文件test.txt，复制为编码是“UTF-8”的文件other.txt。<br><div class="tabs" id="testdecode"><ul class="nav-tabs"><li class="tab active"><a href="#testdecode-1">解码</a></li><li class="tab"><a href="#testdecode-2">编码</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testdecode-1"><figure class="highlight java"><figcaption><span>TestDecode.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDecode</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//平台GBk，读取utf-8</span></span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;test_utf8.txt&quot;</span>)));</span><br><span class="line">            <span class="comment">//平台utf-8，读取GBK</span></span><br><span class="line">            <span class="comment">//br = new BufferedReader(new InputStreamReader(new FileInputStream(&quot;test_utf8.txt&quot;),&quot;GBK&quot;));</span></span><br><span class="line">            </span><br><span class="line">            String str;</span><br><span class="line">            <span class="keyword">while</span>((str = br.readLine())!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                br.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testdecode-2"><figure class="highlight java"><figcaption><span>TestEncode.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestEncode</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        copy(<span class="keyword">new</span> File(<span class="string">&quot;test.txt&quot;</span>),<span class="string">&quot;GBK&quot;</span>,<span class="keyword">new</span> File(<span class="string">&quot;other.txt&quot;</span>),<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copy</span><span class="params">(File src, String srcCharset, File dest, String destCharset)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!src.isFile())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(src.getPath() + <span class="string">&quot;不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(src),srcCharset));</span><br><span class="line">        BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(dest),destCharset));</span><br><span class="line">        </span><br><span class="line">        String str;</span><br><span class="line">        <span class="keyword">while</span>((str = br.readLine())!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            bw.write(str);</span><br><span class="line">            bw.newLine();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        bw.close();</span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="操作Java各种数据类型的数据"><a href="#操作Java各种数据类型的数据" class="headerlink" title="操作Java各种数据类型的数据"></a>操作Java各种数据类型的数据</h3><p>希望Java能够输出各种数据类型的数据，读取时能还原各种数据类型的数据。因为这些数据不是纯文本，只能选择字节流。<br>DataInputStream：允许应用程序以与机器无关方式从底层输入流中读取基本 Java 数据类型。<br>DataOutputStream：允许应用程序以适当方式将基本 Java 数据类型写入输出流中。<br>DataInputStream和DataOutputStream新增很多 readXxx()和writeXxx() 方法。可以读和写各种类型数据，读的顺序要与写的顺序一致，且必须配对使用。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>DataOutputStream</th>
<th>DataInputStream</th>
</tr>
</thead>
<tbody>
<tr>
<td>writeInt(xx)</td>
<td>int readInt()</td>
</tr>
<tr>
<td>writeDouble(xx)</td>
<td>double readDouble()</td>
</tr>
<tr>
<td>writeBoolean(xx)</td>
<td>boolean readBoolean()</td>
</tr>
<tr>
<td>writeLong(xx)</td>
<td>long readLong()</td>
</tr>
<tr>
<td>writeChar(xx)</td>
<td>char readChar()</td>
</tr>
<tr>
<td>writeByte(xx)</td>
<td>byte readByte()</td>
</tr>
<tr>
<td>writeShort(xx)</td>
<td>short readShort()</td>
</tr>
<tr>
<td>writeFloat(xx)</td>
<td>float readFloat()</td>
</tr>
<tr>
<td>writeUTF(String str)</td>
<td>String readUTF()</td>
</tr>
</tbody>
</table>
</div>
<p>如果要存储如下一组数据，到game.dat文件中，并在后面可以重写读取。程序运行过程中临时退出，下次希望从这个状态继续恢复执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String name &#x3D; “巫师”;</span><br><span class="line">int age &#x3D; 300;</span><br><span class="line">char gender &#x3D; ‘男’;</span><br><span class="line">int energy &#x3D; 5000;</span><br><span class="line">double price &#x3D; 75.5;</span><br><span class="line">boolean relive &#x3D; true;</span><br></pre></td></tr></table></figure><br>完成这个需求，可以使用DataOutputStream进行写，随后用DataInputStream进行读取，而且顺序要一致。<br><figure class="highlight java"><figcaption><span>TestData.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestData</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        String name = <span class="string">&quot;巫师&quot;</span>;</span><br><span class="line">        <span class="keyword">int</span> age = <span class="number">300</span>;</span><br><span class="line">        <span class="keyword">char</span> gender = <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line">        <span class="keyword">int</span> energy = <span class="number">5000</span>;</span><br><span class="line">        <span class="keyword">double</span> price = <span class="number">75.5</span>;</span><br><span class="line">        <span class="keyword">boolean</span> relive = <span class="keyword">true</span>;</span><br><span class="line">        </span><br><span class="line">        DataOutputStream dos = <span class="keyword">new</span> DataOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;game.dat&quot;</span>));</span><br><span class="line">        dos.writeUTF(name);</span><br><span class="line">        dos.writeInt(age);</span><br><span class="line">        dos.writeChar(gender);</span><br><span class="line">        dos.writeInt(energy);</span><br><span class="line">        dos.writeDouble(price);</span><br><span class="line">        dos.writeBoolean(relive);</span><br><span class="line">        dos.close();</span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reload</span><span class="params">()</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        DataInputStream dis = <span class="keyword">new</span> DataInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;game.dat&quot;</span>));</span><br><span class="line">        String name = dis.readUTF();</span><br><span class="line">        <span class="keyword">int</span> age = dis.readInt();</span><br><span class="line">        <span class="keyword">char</span> gender = dis.readChar();</span><br><span class="line">        <span class="keyword">int</span> energy = dis.readInt();</span><br><span class="line">        <span class="keyword">double</span> price = dis.readDouble();</span><br><span class="line">        <span class="keyword">boolean</span> relive = dis.readBoolean();</span><br><span class="line">        </span><br><span class="line">        System.out.println(name+<span class="string">&quot;,&quot;</span> + age + <span class="string">&quot;,&quot;</span> + gender + <span class="string">&quot;,&quot;</span> + energy + <span class="string">&quot;,&quot;</span> + price + <span class="string">&quot;,&quot;</span> + relive);</span><br><span class="line">        </span><br><span class="line">        dis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="保存对象类型数据"><a href="#保存对象类型数据" class="headerlink" title="保存对象类型数据"></a>保存对象类型数据</h3><p>如果你正在编写游戏，就得有存储和恢复游戏的功能。如果程序要存储状态，你可以选择上面的方式（DataOutputStream），对每一个对象逐个地把每一项变量的值写到特定格式的文件中。但是其实，Java还提供了面向对象的处理方式——直接存储对象。不过，这种方式保存的数据，必须是由Java程序来读取。如果在程序所储存的文件数据需要给某些非Java应用程序所读取时，就不能选用这种方式了。<br><strong>1、序列化与反序列化</strong><br>ObjectOutputStream：对象序列化，输出对象，把对象转为字节序列输出，它有一个<code>writeObject(obj)</code>方法可以输出对象。<br>ObjectInputStream：对象反序列化，读取对象，把字节序列重构成Java对象，它有一个<code>Object readObject()</code>方法可以读取对象。</p>
<p>序列化需要注意哪些内容？<br>（1）必须实现java.io.Serializable接口的类或其子类的对象才能序列化，而且如果该对象的属性也是引用数据类型，该属性的类型或其父类也要实现Serializable接口，否则会报java.io.NotSerializableException异常。如果实现java.io.Serializable接口，对象如何序列化，各个属性序列化的顺序是什么，都是默认的，程序员无法指定，也不用关心。<br>（2）序列化一个数组，要求元素类型实现Serializable接口。</p>
<p>除了java.io.Serializable接口，还有其他序列化接口吗？<br>（1）有java.io.Externalizable接口，若某个要完全控制某一对象及其超类型的流格式和内容，则它要实现 Externalizable 接口的 writeExternal 和 readExternal 方法。<br>（2）程序员在writeExternal方法中，自定定制哪些属性要序列化，顺序是什么样。程序员在readExternal方法中，自定定制哪些属性要反序列化，顺序和writeExternal的方法中一致。<br><div class="tabs" id="testobjectoutputstream"><ul class="nav-tabs"><li class="tab active"><a href="#testobjectoutputstream-1">序列化</a></li><li class="tab"><a href="#testobjectoutputstream-2">Account</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testobjectoutputstream-1"><figure class="highlight java"><figcaption><span>TestObjectOutputStream.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.memories.io.Account;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestObjectOutputStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Account.setInterestRate(<span class="number">0.0024</span>);</span><br><span class="line">        Account account = <span class="keyword">new</span> Account(<span class="string">&quot;111000111&quot;</span>, <span class="string">&quot;memories&quot;</span>, <span class="string">&quot;123456&quot;</span>, <span class="number">1000.0</span>, <span class="number">2.4</span>);</span><br><span class="line">        </span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;account.dat&quot;</span>));</span><br><span class="line">            oos.writeObject(account);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                oos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testobjectoutputstream-2"><figure class="highlight java"><figcaption><span>Account.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.io;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="comment">//想序列化，必须继承Serializable接口，标记可以被序列化</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> interestRate;</span><br><span class="line">    <span class="keyword">private</span> String number;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> balance;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">double</span> interest;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(String number, String name, String password, <span class="keyword">double</span> balance, <span class="keyword">double</span> interest)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.number = number;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">        <span class="keyword">this</span>.balance = balance;</span><br><span class="line">        <span class="keyword">this</span>.interest = interest;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getInterestRate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> interestRate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setInterestRate</span><span class="params">(<span class="keyword">double</span> interestRate)</span> </span>&#123;</span><br><span class="line">        Account.interestRate = interestRate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNumber</span><span class="params">(String number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getBalance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBalance</span><span class="params">(<span class="keyword">double</span> balance)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getInterest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> interest;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInterest</span><span class="params">(<span class="keyword">double</span> interest)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.interest = interest;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Account [number=&quot;</span> + number + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;, password=&quot;</span> + password </span><br><span class="line">                + <span class="string">&quot;, balance=&quot;</span> + balance + <span class="string">&quot;, interest=&quot;</span> + interest + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public class Account implements Serializable&#123;</span></span><br><span class="line"><span class="comment">    private static double interestRate;</span></span><br><span class="line"><span class="comment">    private String number;</span></span><br><span class="line"><span class="comment">    private String name;</span></span><br><span class="line"><span class="comment">    private String password;</span></span><br><span class="line"><span class="comment">    private double balance;</span></span><br><span class="line"><span class="comment">    private double interest;</span></span><br><span class="line"><span class="comment">    ...</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    @Override</span></span><br><span class="line"><span class="comment">    public void writeExternal(ObjectOutput out) throws IOException &#123;</span></span><br><span class="line"><span class="comment">        //程序员自己定制要序列化的内容，顺序等</span></span><br><span class="line"><span class="comment">        //这两个方法是在对象被序列化和反序列化的过程中，JVM帮我们调用</span></span><br><span class="line"><span class="comment">        out.writeDouble(interestRate);//静态的也序列化</span></span><br><span class="line"><span class="comment">        out.writeUTF(name);</span></span><br><span class="line"><span class="comment">        out.writeDouble(interest);//有transient也序列化</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    @Override</span></span><br><span class="line"><span class="comment">    public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException &#123;</span></span><br><span class="line"><span class="comment">        //程序员自己定制要反序列化的内容，顺序等，建议与序列化的顺序一致</span></span><br><span class="line"><span class="comment">        interestRate = in.readDouble();</span></span><br><span class="line"><span class="comment">        name = in.readUTF();</span></span><br><span class="line"><span class="comment">        interest = in.readDouble();</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></div></div></div><br>序列化的文件是很难让人阅读的，但它比纯文本文件、或一项一项数据保存的数据更容易让程序恢复对象的状态，也比较安全，因为一般人不会知道如何动手修改数据。</p>
<p><strong>2、哪些属性不序列化</strong><br>（1）static属性不会被序列化，反序列化时恢复为当前类变量的值。static代表“一个类一个”而非“一个对象一个”，因此它不是对象的状态。<br>（2）transient（瞬时）属性不会被序列化，反序列化时被恢复为默认值。如果某个实例变量不需要被序列化，就把它标记为transient的。<br>为什么有些实例变量不能被实例化？<br>如果某个属性的类型没有实现Serializable接口，而你又不能修改该类，那么只能把该属性标记为transient。或者动态数据只可以在执行时求出而不能或不必存储。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> interestRate;</span><br><span class="line">    <span class="keyword">private</span> String number;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> balance;</span><br><span class="line">    <span class="keyword">transient</span> <span class="keyword">private</span> <span class="keyword">double</span> interest;<span class="comment">//interest瞬时变量，不想序列化</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//......此处省略构造器、get/set等其他成员方法    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>3、序列化版本ID</strong><br>如果你将对象序列化，则必须要有该类才能还原和使用该对象。但若你同时又修改了类会发生什么事？<br>有些修改会严重违反Java的类型安全性和兼容性，例如：删除了某个实例变量、改变实例变量的类型、将类从可序列化修改为不可序列化，将实例变量修改静态的等等。但是有些修改通常不会影响，例如：加入新的实例变量（还原时可以按默认值处理），将实例变量从瞬时修改为非瞬时的（可以使用默认值）等。</p>
<p>现在所有对类的修改都导致流中关于类的serialVersionUID与本地类的serialVersionUID对不上，使原来的数据在反序列化时失败java.io.InvalidClassException。流中关于类的serialVersionUID会根据Java运行时环境根据类的内部细节自动生成的，若类的源代码作了修改，serialVersionUID 就会发生变化，从而导致“旧”数据反序列化失败。<br>解决办法：<br>（1）实现java.io.Serializable接口时，增加一个long类型的静态常量serialVersionUID。推荐！<br>（2）手动修改本地的serialVersionUID为流中的serialVersionUID。不建议！</p>
<p>如果对类做了会影响数据兼容性的操作时，要么修改serialVersionUID的值，使得原来的反序列化数据失败，要么你要对“旧”对象反序列化后引起的问题负责。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Account</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;<span class="comment">//增加serialVersionUID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> interestRate;</span><br><span class="line">    <span class="keyword">private</span> String number;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> balance;</span><br><span class="line">    <span class="keyword">transient</span> <span class="keyword">private</span> <span class="keyword">double</span> interest;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//......此处省略构造器、get/set等其他成员方法    </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="拷贝或剪切整个目录"><a href="#拷贝或剪切整个目录" class="headerlink" title="拷贝或剪切整个目录"></a>拷贝或剪切整个目录</h3><p>案例：将”memories/download”文件夹，复制到”memories/temp”目录中去<br><div class="tabs" id="testfileutils"><ul class="nav-tabs"><li class="tab active"><a href="#testfileutils-1">测试</a></li><li class="tab"><a href="#testfileutils-2">拷贝/剪切</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testfileutils-1"><figure class="highlight java"><figcaption><span>TestFileUtils.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.io;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileUtils</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileUtils.copyDirectory(<span class="keyword">new</span> File(<span class="string">&quot;memories/download&quot;</span>), <span class="keyword">new</span> File(<span class="string">&quot;memories/temp&quot;</span>));</span><br><span class="line">        FileUtils.cutDirectory(<span class="keyword">new</span> File(<span class="string">&quot;memories/download&quot;</span>), <span class="keyword">new</span> File(<span class="string">&quot;memories/temp&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testfileutils-2"><figure class="highlight java"><figcaption><span>FileUtils.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.memories.io;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileUtils</span> </span>&#123;</span><br><span class="line">    <span class="comment">//复制文件</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFile</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!src.isFile())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(src.getPath() + <span class="string">&quot;不存在&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(src);</span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(dest);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len = fis.read(data))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(data, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        fos.close();</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//复制文件夹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyDirectory</span><span class="params">(File srcDir,File destDir)</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">       <span class="comment">//父目录不能拷贝到子目录中</span></span><br><span class="line">        <span class="keyword">if</span>(destDir.getAbsolutePath().contains(srcDir.getAbsolutePath()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;父目录不能拷贝到子目录中&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!destDir.isDirectory())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;目标对象不是目录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        File dest = <span class="keyword">new</span> File(destDir,srcDir.getName());</span><br><span class="line">        <span class="comment">//如果srcDir是个文件，那么直接复制文件到destDir中</span></span><br><span class="line">        <span class="keyword">if</span>(srcDir.isFile())&#123;</span><br><span class="line">            copyFile(srcDir, dest);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dest.mkdirs();<span class="comment">//先在destPath目录中创建srcDir对应的文件夹</span></span><br><span class="line">            File[] list = srcDir.listFiles();<span class="comment">//准备复制srcDir的子目录或子文件</span></span><br><span class="line">            <span class="keyword">for</span>(File f: list)&#123;</span><br><span class="line">                copyDirectory(f,dest);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//剪切文件夹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">cutDirectory</span><span class="params">(File srcDir,File destDir)</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(destDir.getAbsolutePath().contains(srcDir.getAbsolutePath()))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;父目录不能剪切到子目录中&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(!destDir.isDirectory())&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IOException(<span class="string">&quot;目标对象不是目录&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        File dest = <span class="keyword">new</span> File(destDir,srcDir.getName());</span><br><span class="line">        <span class="keyword">if</span>(srcDir.isFile())&#123;</span><br><span class="line">            copyFile(srcDir, dest);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            dest.mkdirs();</span><br><span class="line">            File[] list = srcDir.listFiles();</span><br><span class="line">            <span class="keyword">for</span>(File f: list)&#123;</span><br><span class="line">                cutDirectory(f,dest);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        srcDir.delete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h2 id="System中的IO流"><a href="#System中的IO流" class="headerlink" title="System中的IO流"></a>System中的IO流</h2><p>System.in和System.out分别代表了系统标准的输入和输出设备<br>　　默认输入设备是键盘，输出设备是显示器<br>　　System.in的类型是InputStream<br>　　System.out的类型是PrintStream<br>　　System.err的类型是PrintStream，按照惯例，此输出流用于显示错误消息，或者显示那些即使用户输出流（变量 out 的值）已经重定向到通常不被连续监视的某一文件或其他目标，也应该立刻引起用户注意的其他信息。<br>重定向：<br>（1）<code>public static void setIn(InputStream in)</code><br>（2）<code>public static void setOut(PrintStream out)</code><br>（3）<code>public static void setErr(PrintStream err)</code><br>控制台是个文件，查看System类中的initializeSystemClass()方法<br>（1）<code>FileInputStream fdIn = new FileInputStream(FileDescriptor.in);</code><br>（2）<code>FileOutputStream fdOut = new FileOutputStream(FileDescriptor.out);</code><br>（3）<code>FileOutputStream fdErr = new FileOutputStream(FileDescriptor.err);</code></p>
<h3 id="重定向System-in和System-out"><a href="#重定向System-in和System-out" class="headerlink" title="重定向System.in和System.out"></a>重定向System.in和System.out</h3><div class="tabs" id="testsystemin"><ul class="nav-tabs"><li class="tab active"><a href="#testsystemin-1">TestSystemIn</a></li><li class="tab"><a href="#testsystemin-2">TestSystemOut</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testsystemin-1"><figure class="highlight java"><figcaption><span>TestSystemIn.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileDescriptor;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSystemIn</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">//重定向从文件输入</span></span><br><span class="line">        System.setIn(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;myjava\\info.txt&quot;</span>));</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span>(input.hasNext())&#123;</span><br><span class="line">            String str = input.nextLine();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//重定向回键盘输入</span></span><br><span class="line">        System.setIn(<span class="keyword">new</span> FileInputStream(FileDescriptor.in));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testsystemin-2"><figure class="highlight java"><figcaption><span>TestSystemOut.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileDescriptor;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSystemOut</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="comment">//重定向输出到文件</span></span><br><span class="line">        System.setOut(<span class="keyword">new</span> PrintStream(<span class="string">&quot;myjava\\print.txt&quot;</span>));</span><br><span class="line">        System.out.println(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">        <span class="comment">//重定向回控制台</span></span><br><span class="line">        System.setOut(<span class="keyword">new</span> PrintStream(<span class="keyword">new</span> FileOutputStream(FileDescriptor.out)));</span><br><span class="line">        System.out.println(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h3 id="为Scanner指定输入流"><a href="#为Scanner指定输入流" class="headerlink" title="为Scanner指定输入流"></a>为Scanner指定输入流</h3><p>java.util.Scanner是一个可以使用正则表达式来解析基本类型和字符串的简单文本扫描器。<br>示例代码：从键盘输入数据<br>示例代码：从文件扫描数据<br><div class="tabs" id="testscannersystemin"><ul class="nav-tabs"><li class="tab active"><a href="#testscannersystemin-1">键盘输入</a></li><li class="tab"><a href="#testscannersystemin-2">扫描输入</a></li></ul><div class="tab-content"><div class="tab-pane active" id="testscannersystemin-1"><figure class="highlight java"><figcaption><span>TestScannerSystemIn.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestScannerSystemIn</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        </span><br><span class="line">        System.out.print(<span class="string">&quot;姓名：&quot;</span>);</span><br><span class="line">        String name = input.nextLine();</span><br><span class="line">        </span><br><span class="line">        System.out.print(<span class="string">&quot;性别：&quot;</span>);</span><br><span class="line">        <span class="keyword">char</span> gender = input.next().charAt(<span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">        System.out.print(<span class="string">&quot;年龄：&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> age = input.nextInt();</span><br><span class="line">        </span><br><span class="line">        System.out.print(<span class="string">&quot;电话：&quot;</span>);</span><br><span class="line">        String phone = input.next();</span><br><span class="line">        </span><br><span class="line">        System.out.print(<span class="string">&quot;邮箱：&quot;</span>);</span><br><span class="line">        String email = input.next();</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;姓名：&quot;</span> + name);</span><br><span class="line">        System.out.println(<span class="string">&quot;性别：&quot;</span> + gender);</span><br><span class="line">        System.out.println(<span class="string">&quot;年龄：&quot;</span> + age);</span><br><span class="line">        System.out.println(<span class="string">&quot;电话：&quot;</span> + phone);</span><br><span class="line">        System.out.println(<span class="string">&quot;邮箱：&quot;</span> + email);</span><br><span class="line">        </span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="testscannersystemin-2"><figure class="highlight java"><figcaption><span>TestScanner.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestScanner</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;myjava\\info.txt&quot;</span>));</span><br><span class="line">        <span class="keyword">while</span>(input.hasNext())&#123;</span><br><span class="line">            String str = input.nextLine();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h2 id="JDK1-7新特性：try…with…resources"><a href="#JDK1-7新特性：try…with…resources" class="headerlink" title="JDK1.7新特性：try…with…resources"></a>JDK1.7新特性：try…with…resources</h2><p>try…with…resources是为资源关闭专门设计的try…catch的语法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>(</span><br><span class="line">    <span class="comment">//声明需要关闭的资源对象</span></span><br><span class="line">)&#123;</span><br><span class="line">    <span class="comment">//逻辑代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(异常类型 e)&#123;</span><br><span class="line">    <span class="comment">//异常处理代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>凡是在try()中声明的资源对象，都会自动关闭，无论{}部分是否发生异常。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestTryWithResource</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copy</span><span class="params">(File src, File dest)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">        InputStream input = <span class="keyword">new</span> FileInputStream(src);</span><br><span class="line">        OutputStream output = <span class="keyword">new</span> FileOutputStream(dest);</span><br><span class="line">        )&#123;</span><br><span class="line">            <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                output.write(data, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copy2</span><span class="params">(File src, File dest)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>(</span><br><span class="line">        InputStream input = <span class="keyword">new</span> FileInputStream(src);</span><br><span class="line">        OutputStream output = <span class="keyword">new</span> FileOutputStream(dest);</span><br><span class="line">        )&#123;</span><br><span class="line">            <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                output.write(data, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(FileNotFoundException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="NIO"><a href="#NIO" class="headerlink" title="NIO"></a>NIO</h2><p>io：阻塞式IO。<br>nio: 非阻塞式的IO。 JDK1.4就有，在JDK1.7有升级。</p>
<p>java.nio这批API带来了重大的效能提升并可以充分利用执行程序的机器上的原始容量。<br>（1）NIO的一项关键能力是你可以直接控制buffer。<br>（2）另一项能力是non-blocking的输入和输出，它能让你的输入/输出程序代码在没有东西可以读取或写入时不必等在那里。某些现有的类（包括FileInputStream和FileOutputStream）会利用到其中的一部分功能。<br>NIO使用起来更为复杂，除非你真的很需要新功能，不然的话，使用本章介绍的功能方法会简单的多。此外，如果没有很好的设计，NIO可能会引发效能损失。非NIO的输入/输出适合九成以上的应用，特别在你还是新手的时候更是如此。</p>
<p>早期的Java只提供了一个File类来访问文件系统，但File类的功能比较有限，所提供的方法性能也不高。大多数方法在出错时仅返回失败，并不会提供异常信息。<br>NIO.2为了弥补这种不足，引入了Path接口，代表一个平台无关的平台路径，描述了目录结构中文件的位置。Path可以看成是File类的升级版本，实际引用的资源也可以不存在。<br>NIO.2还提供了Files、Paths工具类，Files包了大量静态的工具方法处理文件，Paths则包含了两个返回Path的静态工厂方法。<br>Path（接口）：类似于File，用路径名表示一个目录或文件。<br>Paths工具类，用来创建Path接口的对象。<br>Files工具类，操作文件或目录的工具类：<br>（1）<code>Files.copy(src, dest, StandardCopyOption.REPLACE_EXISTING)</code>：复制文件，REPLACE_EXISTING表示dest文件存在时替换。<br>（2）<code>delete(Path path)</code>：功能类似于File类的delete()，不同的地方是会报异常，当文件不存在时。<br>（3）<code>deleteIfExists(Path path)</code>：功能相同于File类的delete()，存在就删除，不存在就什么也不干。<br>（4）<code>move(Path source, Path target, CopyOption... options)</code>：剪切文件。<br>（5）<code>List&lt;String&gt; readAllLines(Path path, Charset cs)</code>：读取文本到集合中。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以前的IO操作</span></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">&quot;index.html&quot;</span>);</span><br><span class="line"><span class="comment">//Java7开始可以这样写</span></span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line">Path path = Paths.get(<span class="string">&quot;index.html&quot;</span>);</span><br></pre></td></tr></table></figure><br><figure class="highlight java"><figcaption><span>TestNIO.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestNIO</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        Path file = Paths.get(<span class="string">&quot;testIO&quot;</span>,<span class="string">&quot;java&quot;</span>,<span class="string">&quot;2.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//写好的读取方法，不需要IO流、编码解码、缓冲流</span></span><br><span class="line">        List&lt;String&gt; allLines = Files.readAllLines(file, Charset.forName(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        <span class="keyword">for</span> (String string : allLines) &#123;</span><br><span class="line">            System.out.println(string);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        Path src = Paths.get(<span class="string">&quot;2.txt&quot;</span>);</span><br><span class="line">        Path dest = Paths.get(<span class="string">&quot;testIO&quot;</span>,<span class="string">&quot;java&quot;</span>,<span class="string">&quot;2.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//写好的move方法，剪切</span></span><br><span class="line">        Files.move(src, dest, StandardCopyOption.REPLACE_EXISTING);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        Path src = Paths.get(<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">        Path dest = Paths.get(<span class="string">&quot;2.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//写好的copy方法</span></span><br><span class="line">        Files.copy(src, dest, StandardCopyOption.REPLACE_EXISTING);</span><br><span class="line">        <span class="comment">//写好的delete方法，文件不存在时报异常</span></span><br><span class="line">        Files.delete(src);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Path file = Paths.get(<span class="string">&quot;testIO&quot;</span>, <span class="string">&quot;java&quot;</span> ,<span class="string">&quot;1.txt&quot;</span>);</span><br><span class="line">        <span class="comment">//目录分级</span></span><br><span class="line">        <span class="keyword">int</span> count = file.getNameCount();<span class="comment">//3</span></span><br><span class="line">        System.out.println(count);</span><br><span class="line">        <span class="comment">//获取指定级的目录名</span></span><br><span class="line">        Path name = file.getName(<span class="number">0</span>);<span class="comment">//testIO</span></span><br><span class="line">        System.out.println(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/03/01/Java/26.Java%E6%B3%9B%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/01/Java/26.Java%E6%B3%9B%E5%9E%8B/" class="post-title-link" itemprop="url">Java泛型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-01 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-01T00:00:00+08:00">2020-03-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>17k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>15 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="泛型的概念"><a href="#泛型的概念" class="headerlink" title="泛型的概念"></a>泛型的概念</h2><h3 id="无泛型问题"><a href="#无泛型问题" class="headerlink" title="无泛型问题"></a>无泛型问题</h3><p>举例：下面有四个瓶子，准备用来装“醋”、“酱油”、“黄酒”、“花椒油”，如果瓶子没有标签的话，那么当这些调料一旦装进去之后，我们就容易忘记哪个瓶子里装了什么，每次用的时候，需要“闻”或“尝”等确认一下才能用，否则就容易加错调料。</p>
<p>生产瓶子的厂家不知道我们将来用这个瓶子装什么，因此我们为了后面的“方便”、“安全”，可以在装完调料之后贴“标签”。<br>同理，在前一章的时候，我们使用集合时，一旦把一个对象“丢进”Java集合中，集合就会忘记对象的类型，把所有的对象当成Object类型处理。当程序从集合中取出对象后，就需要进行强制类型转换，这种强制类型转换不仅代码臃肿，而且容易引起ClassCastException异常。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestListErr</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//strList集合，本来只想装字符串对象</span></span><br><span class="line">		List strList = <span class="keyword">new</span> ArrayList();</span><br><span class="line">		strList.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">		strList.add(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">		strList.add(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">		<span class="comment">//“不小心”把Integer对象装进去了</span></span><br><span class="line">		strList.add(<span class="number">666</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;strList.size(); i++) &#123;</span><br><span class="line">			<span class="comment">//因为strList中是按照Object处理的，所以必须强制类型转换</span></span><br><span class="line">			<span class="comment">//最后一个元素将出现ClassCastException</span></span><br><span class="line">			String str = (String) strList.get(i);</span><br><span class="line">			System.out.println( str + <span class="string">&quot;的长度：&quot;</span> + str.length());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/03/01/Java/26.Java%E6%B3%9B%E5%9E%8B/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/27/Java/25.Java%E9%9B%86%E5%90%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/27/Java/25.Java%E9%9B%86%E5%90%88/" class="post-title-link" itemprop="url">Java集合</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-27 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-27T00:00:00+08:00">2020-02-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>55k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>50 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="数据结构概述"><a href="#数据结构概述" class="headerlink" title="数据结构概述"></a>数据结构概述</h2><p>不管是哪一种数据结构，其实本质上都是容器来着，就是用来装对象的。因此就要搞清楚两点：（1）如何存储（2）存储特点。</p>
<p>数据结构:<br>（1）逻辑结构：在物理结构基础上，进行操作结构。同一种逻辑结构可以有多种物理结构，比如树可以用顺序存储，也可以用链式存储。<br>（2）物理结构：就是存储结构，包括数据元素的表示和关系的表示。</p>
<p>逻辑结构：<br>（1）线性结构：动态数组、栈、队列<br>　　数据元素之间存在着“一对一”的线性关系。<br>（2）非线性结构：二叉树、图<br>　　数据元素之间存在着“一对多”的非线性关系，可细分为树形和图形。</p>
<p>物理结构（存储结构）：<br>（1）顺序存储：连续的存储空间<br>　　元素是相邻的，在内存中需要开辟的连续的存储空间。<br>　　优点：访问速度比较快，因为有了首地址，然后根据下标，直接就可以找到对应的元素。<br>　　缺点：内存比较吃紧时，找一整块空间不好找。<br>（2）链式存储：非连续的存储空间<br>　　元素不一定是相邻的，在内存中不需要开辟的连续的存储空间。<br>　　优点：不要求空间连续，可以插空。<br>　　缺点：访问速度相对数组比较慢，要从头，挨个遍历。<br>物理结构：顺序表、链表等。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node1</span></span>&#123;<span class="comment">//单向链表结点</span></span><br><span class="line">	Object data;<span class="comment">//数据</span></span><br><span class="line">	Node next;<span class="comment">//下一个结点地址</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node2</span></span>&#123;<span class="comment">//双向链表结点</span></span><br><span class="line">	Object data;<span class="comment">//数据</span></span><br><span class="line">	Node pre;<span class="comment">//上一个结点地址</span></span><br><span class="line">	Node next;<span class="comment">//下一个结点地址</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node3</span></span>&#123;<span class="comment">//二叉树结点</span></span><br><span class="line">	Node parent;<span class="comment">//父结点地址</span></span><br><span class="line">	Object data;<span class="comment">//数据</span></span><br><span class="line">	Node left;<span class="comment">//左结点地址</span></span><br><span class="line">	Node right;<span class="comment">//右结点地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><strong>单向链表：</strong><br><div class="tabs" id="singlelinkedlist"><ul class="nav-tabs"><li class="tab active"><a href="#singlelinkedlist-1">SingleLinkedList</a></li><li class="tab"><a href="#singlelinkedlist-2">TestSingleLinkedList</a></li></ul><div class="tab-content"><div class="tab-pane active" id="singlelinkedlist-1"><figure class="highlight java"><figcaption><span>SingleLinkedLista.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleLinkedList</span> </span>&#123;</span><br><span class="line">	<span class="comment">//这里不需要数组，不需要其他的复杂的结构，只要记录单向链表的“头”结点</span></span><br><span class="line">	<span class="keyword">private</span> Node first;<span class="comment">//first中记录的是第一个结点的地址</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> total;<span class="comment">//记录total是为了方便获取链表有效元素个数</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//内部类，因为这种Node结点的类型，在别的地方没有用，只在单向链表中，用于存储和表示它的结点关系。</span></span><br><span class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">		<span class="comment">//data,next没有私有化，是希望在外部类中可以不需要get/set，而是直接“结点对象.xx&quot;使用</span></span><br><span class="line">		Object data;<span class="comment">//因为数据可以是任意类型的对象，所以设计为Object</span></span><br><span class="line">		Node next;<span class="comment">//因为next中记录的下一个结点的地址，因此类型是结点类型，并不是存储下一个结点对象</span></span><br><span class="line">		</span><br><span class="line">		Node(Object data, Node next)&#123;</span><br><span class="line">			<span class="keyword">this</span>.data = data;</span><br><span class="line">			<span class="keyword">this</span>.next = next;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//返回链表长度</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> total;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//添加数据</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * (1)把obj的数据，包装成一个Node类型结点对象</span></span><br><span class="line"><span class="comment">		 * (2)把新结点“链接”当前链表的最后</span></span><br><span class="line"><span class="comment">		 * ①当前新结点是第一个结点</span></span><br><span class="line"><span class="comment">		 * 如何判断是否是第一个   if(first==null)说明暂时还没有，是第一个</span></span><br><span class="line"><span class="comment">		 * ②先找到目前的最后一个，把新结点链接到它的next中</span></span><br><span class="line"><span class="comment">		 * 如何判断是否是最后一个   if(某个结点.next == null)说明这个结点是最后一个</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="comment">//(1)把obj的数据，包装成一个Node类型结点对象</span></span><br><span class="line">		<span class="comment">//这里新结点的next赋值为null，表示新结点是最后一个结点</span></span><br><span class="line">		Node newNode = <span class="keyword">new</span> Node(obj, <span class="keyword">null</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//①当前新结点是第一个结点</span></span><br><span class="line">		<span class="keyword">if</span>(first == <span class="keyword">null</span>)&#123;</span><br><span class="line">			<span class="comment">//说明newNode是第一个</span></span><br><span class="line">			first = newNode;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="comment">//②先找到目前的最后一个，把新结点链接到它的next中</span></span><br><span class="line">			Node node = first;</span><br><span class="line">			<span class="keyword">while</span>(node.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">				node = node.next;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//退出循环时node指向最后一个结点</span></span><br><span class="line">			<span class="comment">//把新结点链接到它的next中</span></span><br><span class="line">			node.next = newNode;</span><br><span class="line">		&#125;</span><br><span class="line">		total++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//返回链表全部元素</span></span><br><span class="line">	<span class="keyword">public</span> Object[] getAll()&#123;</span><br><span class="line">		<span class="comment">//(1)创建一个数组，长度为total</span></span><br><span class="line">		Object[] all = <span class="keyword">new</span> Object[total];</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//(2)把单向链表的每一个结点中的data，拿过来放到all数组中</span></span><br><span class="line">		Node node = first;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">			all[i] = node.data;<span class="comment">//存入数组</span></span><br><span class="line">			node = node.next;<span class="comment">//然后node指向下一个</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//(3)返回数组</span></span><br><span class="line">		<span class="keyword">return</span> all;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//删除链中的某个元素</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(obj == <span class="keyword">null</span>)&#123;</span><br><span class="line">			<span class="comment">//(1)先考虑是否是第一个</span></span><br><span class="line">			<span class="keyword">if</span>(first!=<span class="keyword">null</span>)&#123;<span class="comment">//链表非空</span></span><br><span class="line">				<span class="comment">//要删除的结点正好是第一个结点</span></span><br><span class="line">				<span class="keyword">if</span>(first.data == <span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="comment">//让第一个结点指向它的下一个</span></span><br><span class="line">					first = first.next;</span><br><span class="line">					total--;</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//要删除的不是第一个结点</span></span><br><span class="line">				Node node = first.next;<span class="comment">//第二个结点</span></span><br><span class="line">				Node last = first;</span><br><span class="line">				<span class="comment">//这里不包括最后一个，当node.next==null时不进入循环，而node.next==null是最后一个</span></span><br><span class="line">				<span class="keyword">while</span>(node.next!=<span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="keyword">if</span>(node.data == <span class="keyword">null</span>)&#123;</span><br><span class="line">						last.next = node.next;</span><br><span class="line">						total--;</span><br><span class="line">						<span class="keyword">return</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					last = node;</span><br><span class="line">					node = node.next;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//单独判断最后一个是否是要删除的结点</span></span><br><span class="line">				<span class="keyword">if</span>(node.data == <span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="comment">//要删除的是最后一个结点</span></span><br><span class="line">					last.next = <span class="keyword">null</span>;</span><br><span class="line">					total--;</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="comment">//(1)先考虑是否是第一个</span></span><br><span class="line">			<span class="keyword">if</span>(first!=<span class="keyword">null</span>)&#123;</span><br><span class="line">				<span class="keyword">if</span>(obj.equals(first.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">					first = first.next;</span><br><span class="line">					total--;</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//要删除的不是第一个结点</span></span><br><span class="line">				Node node = first.next;</span><br><span class="line">				Node last = first;</span><br><span class="line">				<span class="keyword">while</span>(node.next!=<span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="keyword">if</span>(obj.equals(node.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">						last.next = node.next;</span><br><span class="line">						total--;</span><br><span class="line">						<span class="keyword">return</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					last = node;</span><br><span class="line">					node = node.next;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="comment">//单独判断最后一个是否是要删除的结点</span></span><br><span class="line">				<span class="keyword">if</span>(obj.equals(node.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">					last.next = <span class="keyword">null</span>;</span><br><span class="line">					total--;</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//查找元素下标，效率不高，链表不需要</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(obj == <span class="keyword">null</span>)&#123;</span><br><span class="line">			Node node = first;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(node.data == <span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="keyword">return</span> i;</span><br><span class="line">				&#125;</span><br><span class="line">				node = node.next;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			Node node = first;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">				<span class="keyword">if</span>(obj.equals(node.data))&#123;</span><br><span class="line">					<span class="keyword">return</span> i;</span><br><span class="line">				&#125;</span><br><span class="line">				node = node.next;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="singlelinkedlist-2"><figure class="highlight java"><figcaption><span>TestSingleLinkedList.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSingleLinkedList</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SingleLinkedList list = <span class="keyword">new</span> SingleLinkedList();</span><br><span class="line">		</span><br><span class="line">		list.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">		list.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">		list.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">		list.add(<span class="string">&quot;赵六&quot;</span>);</span><br><span class="line">		list.add(<span class="string">&quot;钱七&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;元素个数：&quot;</span> + list.size());</span><br><span class="line">	</span><br><span class="line">		Object[] all = list.getAll();</span><br><span class="line">		System.out.println(Arrays.toString(all));</span><br><span class="line">		</span><br><span class="line">		<span class="comment">/*list.remove(&quot;张三&quot;);</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;元素个数：&quot; + list.size());</span></span><br><span class="line"><span class="comment">		all = list.getAll();</span></span><br><span class="line"><span class="comment">		System.out.println(Arrays.toString(all));</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		list.remove(&quot;王五&quot;);</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;元素个数：&quot; + list.size());</span></span><br><span class="line"><span class="comment">		all = list.getAll();</span></span><br><span class="line"><span class="comment">		System.out.println(Arrays.toString(all));</span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">		list.remove(&quot;钱七&quot;);</span></span><br><span class="line"><span class="comment">		System.out.println(&quot;元素个数：&quot; + list.size());</span></span><br><span class="line"><span class="comment">		all = list.getAll();</span></span><br><span class="line"><span class="comment">		System.out.println(Arrays.toString(all));*/</span></span><br><span class="line">		</span><br><span class="line">		System.out.println(list.indexOf(<span class="string">&quot;张三&quot;</span>));</span><br><span class="line">		System.out.println(list.indexOf(<span class="string">&quot;王五&quot;</span>));</span><br><span class="line">		System.out.println(list.indexOf(<span class="string">&quot;钱七&quot;</span>));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div><br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/02/27/Java/25.Java%E9%9B%86%E5%90%88/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/24/Java/24.Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/24/Java/24.Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="post-title-link" itemprop="url">Java多线程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-24 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-24T00:00:00+08:00">2020-02-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>37k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>33 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="线程概述"><a href="#线程概述" class="headerlink" title="线程概述"></a>线程概述</h2><p>前面我们写的程序都是单线程的，它们都只有一条顺序执行流：程序从main方法开始执行，依次向下执行每行代码，如果程序执行某行代码遇到了阻塞，则程序将会停滞在该处。如果我们使用Eclipse等IDE工具的单步调试功能将可以非常清楚地看出这一点。</p>
<p>多线程其实非常简单：单线程的程序只有一条执行路径，多线程的程序则包含多条执行路径，多条执行路径之间互不干扰。</p>
<p>Java语言提供了非常优秀的多线程支持，程序可以非常简单的方式来启动多线程，通过多线程的学习，将会学到Java多线程编程的很多技能，包括创建、启动、控制线程，以及多线程的同步、通信操作，还可以通过线程池提高多线程性能。<br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/02/24/Java/24.Java%E5%A4%9A%E7%BA%BF%E7%A8%8B/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/22/Java/23.%E9%A1%B9%E7%9B%AE%E4%B8%89%EF%BC%9A%E5%9B%A2%E9%98%9F%E4%BA%BA%E5%91%98%E8%B0%83%E5%BA%A6%E8%BD%AF%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/22/Java/23.%E9%A1%B9%E7%9B%AE%E4%B8%89%EF%BC%9A%E5%9B%A2%E9%98%9F%E4%BA%BA%E5%91%98%E8%B0%83%E5%BA%A6%E8%BD%AF%E4%BB%B6/" class="post-title-link" itemprop="url">项目三：团队人员调度软件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-22 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-22T00:00:00+08:00">2020-02-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>31k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>28 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="团队人员调度软件"><a href="#团队人员调度软件" class="headerlink" title="团队人员调度软件"></a>团队人员调度软件</h2><p>模拟实现一个基于文本界面的《团队人员调度软件》。<br>熟悉Java面向对象的高级特性，进一步掌握编程技巧和调试技巧。<br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/02/22/Java/23.%E9%A1%B9%E7%9B%AE%E4%B8%89%EF%BC%9A%E5%9B%A2%E9%98%9F%E4%BA%BA%E5%91%98%E8%B0%83%E5%BA%A6%E8%BD%AF%E4%BB%B6/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/19/Java/22.Java%E5%8C%85%E8%A3%85%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/11/04/6JhNuwtBe4adylS.png">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/02/19/Java/22.Java%E5%8C%85%E8%A3%85%E7%B1%BB/" class="post-title-link" itemprop="url">Java包装类</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-19 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-19T00:00:00+08:00">2020-02-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
      </div>
      <div class="post-meta">
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h2><h3 id="为什么要有包装类？（了解）"><a href="#为什么要有包装类？（了解）" class="headerlink" title="为什么要有包装类？（了解）"></a>为什么要有包装类？（了解）</h3><p>因为Java是面向对象的编程语言。<br>但是Java发明时，是C语言盛行的时候，而且C语言确实很好用。特别是其中的8种基本数据类型，不管在存储还是运算都很强大。<br>那么，Java就延续使用了C语言的8种基本数据类型，所以，Java中8种基本数据类型不属于对象。<br>这导致Java后面在设计很多的API、新的特性（泛型等），不支持基本数据类型，只支持对象。<br>Java就想了一个办法解决：为8种基本数据类型配上包装类。<br>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/02/19/Java/22.Java%E5%8C%85%E8%A3%85%E7%B1%BB/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      


    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



      

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      

      

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SoundMemories</span>
</div>
  <div class="powered-by">由 <span class="exturl theme-link" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl theme-link" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9tdXNlLw==">NexT.Muse</span> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  




  <script src="/js/local-search.js"></script>








<script data-pjax>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  const url = element.dataset.target;
  const pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  const pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  const fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>


<script data-pjax>
if (document.querySelectorAll('.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8.8.2/dist/mermaid.min.js', () => {
    mermaid.init({
      theme    : 'neutral',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    }, '.mermaid');
  }, window.mermaid);
}
</script>





  








    <div class="pjax">
  

  
      <script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              const target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    const script = document.createElement('script');
    script.src = '//cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js';
    script.defer = true;
    document.head.appendChild(script);
  } else {
    MathJax.startup.document.state(0);
    MathJax.typesetClear();
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@2.0.0/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink.listen({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://soundmemories.github.io/page/7/',]
      });
      });
  </script>

    </div>
</body>
</html>
