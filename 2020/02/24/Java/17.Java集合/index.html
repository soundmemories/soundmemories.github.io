<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Monda:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"soundmemories.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.17.1","exturl":true,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="数据结构 数据结构本质上都可看作容器，就是用来装对象的。要搞清楚两点：（1）如何存储（2）存储特点。 1.数据结构的分类、特点： 123456789101112131415|-逻辑结构：以物理结构为基础，在其上进行操作。同一种逻辑结构可以有多种物理结构，比如树可以用顺序存储，也可以用链式存储。    |-线性结构：数据元素之间存在着&quot;一对一&quot;的线性关系。        |">
<meta property="og:type" content="article">
<meta property="og:title" content="Java集合">
<meta property="og:url" content="https://soundmemories.github.io/2020/02/24/Java/17.Java%E9%9B%86%E5%90%88/index.html">
<meta property="og:site_name" content="SoundMemories">
<meta property="og:description" content="数据结构 数据结构本质上都可看作容器，就是用来装对象的。要搞清楚两点：（1）如何存储（2）存储特点。 1.数据结构的分类、特点： 123456789101112131415|-逻辑结构：以物理结构为基础，在其上进行操作。同一种逻辑结构可以有多种物理结构，比如树可以用顺序存储，也可以用链式存储。    |-线性结构：数据元素之间存在着&quot;一对一&quot;的线性关系。        |">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://soundmemories.github.io/images/Java/C%E9%9B%86%E5%90%88.png">
<meta property="og:image" content="https://soundmemories.github.io/images/Java/M%E9%9B%86%E5%90%88.png">
<meta property="article:published_time" content="2020-02-23T16:00:00.000Z">
<meta property="article:modified_time" content="2024-06-26T02:09:40.726Z">
<meta property="article:author" content="SoundMemories">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://soundmemories.github.io/images/Java/C%E9%9B%86%E5%90%88.png">


<link rel="canonical" href="https://soundmemories.github.io/2020/02/24/Java/17.Java%E9%9B%86%E5%90%88/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":"","permalink":"https://soundmemories.github.io/2020/02/24/Java/17.Java%E9%9B%86%E5%90%88/","path":"2020/02/24/Java/17.Java集合/","title":"Java集合"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Java集合 | SoundMemories</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">SoundMemories</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">10</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">10</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">127</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">1.</span> <span class="nav-text">数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-number">1.1.</span> <span class="nav-text">数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84"><span class="nav-number">1.2.</span> <span class="nav-text">动态数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%93%BE%E8%A1%A8"><span class="nav-number">1.3.</span> <span class="nav-text">链表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6"><span class="nav-number">2.</span> <span class="nav-text">集合框架</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#collection%E9%9B%86%E5%90%88"><span class="nav-number">2.1.</span> <span class="nav-text">Collection集合</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">2.1.1.</span> <span class="nav-text">通用方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E9%81%8D%E5%8E%86"><span class="nav-number">2.1.2.</span> <span class="nav-text">通用遍历</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%81%8D%E5%8E%86%E6%8A%80%E5%B7%A7"><span class="nav-number">2.1.3.</span> <span class="nav-text">遍历技巧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#list%E9%9B%86%E5%90%88"><span class="nav-number">2.1.4.</span> <span class="nav-text">List集合</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#list%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="nav-number">2.1.4.1.</span> <span class="nav-text">List实现类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="nav-number">2.1.4.2.</span> <span class="nav-text">新增方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E9%81%8D%E5%8E%86"><span class="nav-number">2.1.4.3.</span> <span class="nav-text">新增遍历</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E8%B7%9F%E8%B8%AA"><span class="nav-number">2.1.4.4.</span> <span class="nav-text">源码跟踪</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#set%E9%9B%86%E5%90%88"><span class="nav-number">2.1.5.</span> <span class="nav-text">Set集合</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#set%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="nav-number">2.1.5.1.</span> <span class="nav-text">Set实现类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E8%B7%9F%E8%B8%AA-1"><span class="nav-number">2.1.5.2.</span> <span class="nav-text">源码跟踪</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#map%E9%9B%86%E5%90%88"><span class="nav-number">2.2.</span> <span class="nav-text">Map集合</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95-1"><span class="nav-number">2.2.1.</span> <span class="nav-text">通用方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E9%81%8D%E5%8E%86-1"><span class="nav-number">2.2.2.</span> <span class="nav-text">通用遍历</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#map%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="nav-number">2.2.3.</span> <span class="nav-text">Map实现类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E8%B7%9F%E8%B8%AA-2"><span class="nav-number">2.2.4.</span> <span class="nav-text">源码跟踪</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SoundMemories"
      src="/images/avstar.png">
  <p class="site-author-name" itemprop="name">SoundMemories</p>
  <div class="site-description" itemprop="description">今日事，今日毕</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">127</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NvdW5kbWVtb3JpZXM=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;soundmemories"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnNvdW5kbWVtb3JpZXNAMTYzLmNvbQ==" title="E-Mail → mailto:soundmemories@163.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2020/02/24/Java/17.Java%E9%9B%86%E5%90%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Java集合 | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java集合
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-24 00:00:00" itemprop="dateCreated datePublished" datetime="2020-02-24T00:00:00+08:00">2020-02-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>15k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>54 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="数据结构">数据结构</h2>
<p>数据结构本质上都可看作容器，就是用来装对象的。要搞清楚两点：（1）<strong>如何存储</strong>（2）<strong>存储特点</strong>。</p>
<p>1.数据结构的分类、特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">|-逻辑结构：以物理结构为基础，在其上进行操作。同一种逻辑结构可以有多种物理结构，比如树可以用顺序存储，也可以用链式存储。</span><br><span class="line">    |-线性结构：数据元素之间存在着<span class="string">&quot;一对一&quot;</span>的线性关系。</span><br><span class="line">        |-动态数组</span><br><span class="line">        |-栈</span><br><span class="line">        |-队列</span><br><span class="line">    |-非线性结构：数据元素之间存在着<span class="string">&quot;一对多&quot;</span>的非线性关系。</span><br><span class="line">        |-树</span><br><span class="line">        |-图</span><br><span class="line">|-物理结构：就是存储结构，包括数据元素的表示和关系的表示。</span><br><span class="line">    |-顺序存储（顺序表）：元素是相邻的，内存中需要开辟连续的存储空间。</span><br><span class="line">        |-访问速度快，因为有了首地址，然后根据下标，直接就可以找到对应的元素。</span><br><span class="line">        |-内存比较吃紧时，找一整块空间不好找。</span><br><span class="line">    |-链式存储（链表）：元素不一定是相邻的，内存中可用非连续的存储空间。</span><br><span class="line">        |-不要求空间连续，可以插空。</span><br><span class="line">        |-访问速度慢，要从头，挨个遍历。</span><br></pre></td></tr></table></figure></p>
<h3 id="数组">数组</h3>
<p>1.数组特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|-逻辑结构：线性结构。</span><br><span class="line">|-物理结构：顺序存储。</span><br><span class="line">意味着数组一个元素对应一个具体的对象、存储空间是连续的。</span><br></pre></td></tr></table></figure></p>
<p>2.数组操作：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//增、删效率低，要移动元素，需要total辅助</span></span><br><span class="line">|-查：下标快速定位，每一个元素都有一个下标。</span><br><span class="line">|-增：total记录总数组元素个数</span><br><span class="line">    |-尾部增加<span class="string">&quot;数组名[total++]=新元素;&quot;</span></span><br><span class="line">    |-index位置插入<span class="string">&quot;先把index位置开始所有元素后移，然后`数组名[total++]=新元素;&quot;</span>。</span><br><span class="line">|-删：先把index后面的元素前移，然后<span class="string">&quot;数组名[total--]=null;&quot;</span>。</span><br><span class="line">|-改：直接重新赋值，<span class="string">&quot;数组名[index]=新元素;&quot;</span>。</span><br></pre></td></tr></table></figure></p>
<h3 id="动态数组">动态数组</h3>
<p>动态数组的物理结构基础是数组，逻辑结构增加可自动扩容、自动记录有效元素个数功能。<br />
Java自带的动态数组ArrayList在【List集合】中讲解。</p>
<p>自定义、使用动态数组：<br />
<div class="tabs" id="list"><ul class="nav-tabs"><li class="tab active"><a href="#list-1">自定义动态数组</a></li><li class="tab"><a href="#list-2">使用自定义动态数组</a></li></ul><div class="tab-content"><div class="tab-pane active" id="list-1"><figure class="highlight java"><figcaption><span>MyArrayList.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyArrayList</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] data;<span class="comment">//为什么使用Object，因为只是说这个容器是用来装对象的，但是不知道用来装什么对象。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> total;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyArrayList</span><span class="params">()</span>&#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">5</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkCapacity</span><span class="params">()</span> &#123;<span class="comment">//检查是否扩容</span></span><br><span class="line">        <span class="keyword">if</span>(total &gt;= data.length)&#123;</span><br><span class="line">            data = Arrays.copyOf(data, data.length*<span class="number">2</span>);<span class="comment">//如果data满了，就扩容为原来的2倍</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;<span class="comment">//返回实际元素的个数</span></span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">capacity</span><span class="params">()</span>&#123;<span class="comment">//返回数组的实际容量</span></span><br><span class="line">        <span class="keyword">return</span> data.length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object[] getAll()&#123;<span class="comment">//返回所有实际存储的元素</span></span><br><span class="line">        <span class="keyword">return</span> Arrays.copyOf(data, total);<span class="comment">//返回total个</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>&#123;<span class="comment">//获取[index]位置的元素</span></span><br><span class="line">        checkIndex(index);<span class="comment">//校验index的合理性范围</span></span><br><span class="line">        <span class="keyword">return</span> data[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkIndex</span><span class="params">(<span class="type">int</span> index)</span>&#123;<span class="comment">//检查[index]位置元素是否存在</span></span><br><span class="line">        <span class="keyword">if</span>(index&lt;<span class="number">0</span> || index&gt;=total)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(index+<span class="string">&quot;对应位置的元素不存在&quot;</span>);</span><br><span class="line">            <span class="comment">//throw new IndexOutOfBoundsException(index+&quot;越界&quot;);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//查询某个元素的下标</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object obj)</span>&#123;</span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; total; i++) &#123;</span></span><br><span class="line">        <span class="comment">//     if(obj.equals(data[i]))&#123;//当obj是null对象时，obj.equals(data[i])和data[i].equals(obj)写法都有风险</span></span><br><span class="line">        <span class="comment">//         return i;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(data[i] == <span class="literal">null</span>)&#123;<span class="comment">//等价于 if(data[i] == obj)</span></span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(obj.equals(data[i]))&#123;<span class="comment">//内容相等即可，不需要严格的==</span></span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Object obj)</span>&#123;<span class="comment">//添加一个元素</span></span><br><span class="line">        checkCapacity();<span class="comment">//检查是否需要扩容</span></span><br><span class="line">        data[total++] = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(<span class="type">int</span> index, Object value)</span>&#123;<span class="comment">//在[index]位置插入元素value</span></span><br><span class="line">        checkIndex(index);<span class="comment">//1.校验index的合理性范围</span></span><br><span class="line">        checkCapacity();<span class="comment">//2.总长度是否够，需不需要扩容</span></span><br><span class="line">        <span class="comment">//3.[index]以及后面的元素往后移动，把[index]位置腾出来，total-index移动元素的个数</span></span><br><span class="line">        System.arraycopy(data, index, data, index+<span class="number">1</span>, total-index);</span><br><span class="line">        data[index] = value;<span class="comment">//4.放入新元素</span></span><br><span class="line">        total++;<span class="comment">//5.总元素个数增加</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span>&#123;<span class="comment">//删除[index]位置的元素</span></span><br><span class="line">        checkIndex(index);<span class="comment">//1.校验index的合理性范围</span></span><br><span class="line">        <span class="comment">//2.把[index+1]以及后面的元素往前移动，total-index-1移动元素的个数</span></span><br><span class="line">        System.arraycopy(data, index+<span class="number">1</span>, data, index, total-index-<span class="number">1</span>);</span><br><span class="line">        data[total-<span class="number">1</span>] = <span class="literal">null</span>;<span class="comment">//3.让垃圾回收器尽快回收</span></span><br><span class="line">        total--;<span class="comment">//4.总元素个数减少</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Object obj)</span>&#123;<span class="comment">//删除值为obj元素，重复的只删除第一个</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> indexOf(obj);<span class="comment">//1.查询obj的[index]</span></span><br><span class="line">        <span class="keyword">if</span>(index != -<span class="number">1</span>)&#123;<span class="comment">//2.1存在，删除元素</span></span><br><span class="line">            remove(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(obj + <span class="string">&quot;不存在&quot;</span>);<span class="comment">//2.2不存在，可以什么也不做，也可以抛异常</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, Object value)</span>&#123;<span class="comment">//修改[index]位置的元素</span></span><br><span class="line">        checkIndex(index);<span class="comment">//校验index的合理性范围</span></span><br><span class="line">        data[index] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">change</span><span class="params">(Object old, Object value)</span>&#123;<span class="comment">//修改值为old元素</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> indexOf(old);<span class="comment">//1.查询old的[index]</span></span><br><span class="line">        <span class="keyword">if</span>(index!=-<span class="number">1</span>)&#123;<span class="comment">//2.1存在，修改元素</span></span><br><span class="line">            set(index, value);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(old + <span class="string">&quot;不存在&quot;</span>);<span class="comment">//2.2不存在，可以什么也不做，也可以抛异常</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="list-2"><figure class="highlight java"><figcaption><span>TestMyArrayList.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Apple</span>&#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMyArrayList</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MyArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyArrayList</span>();<span class="comment">//创建一个容器对象</span></span><br><span class="line">        <span class="comment">//增加类、字符串、整数对象</span></span><br><span class="line">        list.add(<span class="keyword">new</span> <span class="title class_">Apple</span>());</span><br><span class="line">        list.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">            list.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;元素的个数：&quot;</span> + list.size());<span class="comment">//元素的个数：7</span></span><br><span class="line">        System.out.println(<span class="string">&quot;实际的容量：&quot;</span> + list.capacity());<span class="comment">//实际的容量：10，自动扩容了</span></span><br><span class="line">        <span class="comment">//增：插入</span></span><br><span class="line">        list.insert(<span class="number">0</span>, <span class="string">&quot;aa&quot;</span>);</span><br><span class="line">        list.insert(<span class="number">0</span>, <span class="string">&quot;bb&quot;</span>);</span><br><span class="line">        list.insert(<span class="number">0</span>, <span class="string">&quot;cc&quot;</span>);</span><br><span class="line">        list.insert(<span class="number">0</span>, <span class="string">&quot;dd&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;元素的个数：&quot;</span> + list.size());<span class="comment">//元素的个数：11</span></span><br><span class="line">        System.out.println(<span class="string">&quot;实际的容量：&quot;</span> + list.capacity());<span class="comment">//实际的容量：20，自动扩容了</span></span><br><span class="line">        <span class="comment">//增：null也可以作为有效元素</span></span><br><span class="line">        list.add(<span class="literal">null</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> list.indexOf(<span class="literal">null</span>);</span><br><span class="line">        System.out.println(<span class="literal">null</span> + <span class="string">&quot;在容器的位置：&quot;</span> + index);<span class="comment">//null在容器的位置：11</span></span><br><span class="line">        <span class="comment">//查：下标为[5]的元素</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> list.get(<span class="number">5</span>);</span><br><span class="line">        System.out.println(obj);<span class="comment">//hello</span></span><br><span class="line">        <span class="comment">//改：下标为[5]的元素</span></span><br><span class="line">        list.set(<span class="number">5</span>, <span class="string">&quot;world&quot;</span>);</span><br><span class="line">        obj = list.get(<span class="number">5</span>);</span><br><span class="line">        System.out.println(obj);<span class="comment">//world</span></span><br><span class="line">        <span class="comment">//删：下标为[2]的元素</span></span><br><span class="line">        Object[] all = list.getAll();</span><br><span class="line">        System.out.println(<span class="string">&quot;删除前：&quot;</span> + Arrays.toString(all));</span><br><span class="line">        <span class="comment">//删除前：[dd, cc, bb, aa, Apple@1fb3ebeb, world, 1, 2, 3, 4, 5, null]</span></span><br><span class="line">        list.remove(<span class="number">2</span>);</span><br><span class="line">        all = list.getAll();</span><br><span class="line">        System.out.println(<span class="string">&quot;删除后：&quot;</span> + Arrays.toString(all));</span><br><span class="line">        <span class="comment">//删除后：[dd, cc, aa, Apple@1fb3ebeb, world, 1, 2, 3, 4, 5, null]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<h3 id="链表">链表</h3>
<p>1.二叉树的结点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//单向链表结点</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node1</span>&#123;</span><br><span class="line">    Object data;<span class="comment">//数据</span></span><br><span class="line">    Node next;<span class="comment">//下个结点地址</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//双向链表结点</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node2</span>&#123;</span><br><span class="line">    Object data;<span class="comment">//数据</span></span><br><span class="line">    Node pre;<span class="comment">//上个结点地址</span></span><br><span class="line">    Node next;<span class="comment">//下个结点地址</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//二叉树结点</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node3</span>&#123;</span><br><span class="line">    Node parent;<span class="comment">//父结点地址</span></span><br><span class="line">    Object data;<span class="comment">//数据</span></span><br><span class="line">    Node left;<span class="comment">//左结点地址</span></span><br><span class="line">    Node right;<span class="comment">//右结点地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="单向链表"><ul class="nav-tabs"><li class="tab active"><a href="#单向链表-1">自定义单向链表</a></li><li class="tab"><a href="#单向链表-2">使用自定义单向链表</a></li></ul><div class="tab-content"><div class="tab-pane active" id="单向链表-1"><figure class="highlight java"><figcaption><span>SingleLinkedLista.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingleLinkedList</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Node first;<span class="comment">//记录第一个结点的地址</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> total;<span class="comment">//总元素个数</span></span><br><span class="line">    <span class="comment">//内部类，因为这种Node结点的类型，只在单向链表中有用，用于存储和表示它的结点关系。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">        <span class="comment">//data、next没有私有化，是希望在外部类中可以不需要get/set，而是直接“结点对象.xx&quot;使用</span></span><br><span class="line">        Object data;<span class="comment">//因为数据可以是任意类型的对象，所以设计为Object</span></span><br><span class="line">        Node next;<span class="comment">//记录下一个结点的地址，因此类型是结点类型，并不是存储下一个结点对象</span></span><br><span class="line">        Node(Object data, Node next)&#123;</span><br><span class="line">            <span class="built_in">this</span>.data = data;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;<span class="comment">//返回链表长度</span></span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Object obj)</span>&#123;<span class="comment">//添加数据</span></span><br><span class="line">        <span class="comment">//1.把obj的数据，包装成一个Node类型结点对象，next为null表示新结点是最后一个结点</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Node</span>(obj, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//2.把新结点“链接”当前链表的最后</span></span><br><span class="line">        <span class="keyword">if</span>(first == <span class="literal">null</span>)&#123;<span class="comment">//2.1 第一个节点为null，那么newNode是第一个节点</span></span><br><span class="line">            first = newNode;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//2.2 先找到目前的最后一个，把新结点链接到它的next中</span></span><br><span class="line">            <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first;</span><br><span class="line">            <span class="keyword">while</span>(node.next != <span class="literal">null</span>)&#123;<span class="comment">//从头遍历到尾，得到尾结点</span></span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">            node.next = newNode;<span class="comment">//把newNode链接到尾结点的next中</span></span><br><span class="line">        &#125;</span><br><span class="line">        total++;<span class="comment">//3.总元素个数增加</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object[] getAll()&#123;<span class="comment">//返回链表全部元素</span></span><br><span class="line">        Object[] all = <span class="keyword">new</span> <span class="title class_">Object</span>[total];<span class="comment">//1.创建一个长度为total的数组</span></span><br><span class="line">        <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>; i&lt;total; i++) &#123;<span class="comment">//2.遍历单向链表，每个结点的值存入all数组中</span></span><br><span class="line">            all[i] = node.data;</span><br><span class="line">            node = node.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> all;<span class="comment">//3.返回数组</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(Object obj)</span>&#123;<span class="comment">//删除链表中的某个元素</span></span><br><span class="line">        <span class="comment">//1.先考虑obj是否为null</span></span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//2.考虑是否是第一个</span></span><br><span class="line">            <span class="keyword">if</span>(first != <span class="literal">null</span>)&#123;<span class="comment">//2.1第一个是否为null</span></span><br><span class="line">                <span class="keyword">if</span>(first.data == <span class="literal">null</span>)&#123;<span class="comment">//要删除的结点正好是第一个结点</span></span><br><span class="line">                    first = first.next;<span class="comment">//让第一个结点指向它的下一个</span></span><br><span class="line">                    total--;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//2.2要删除的不是第一个结点</span></span><br><span class="line">                <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first.next;</span><br><span class="line">                <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> first;</span><br><span class="line">                <span class="comment">//这里不包括最后一个，当node.next==null时不进入循环，而node.next==null是最后一个</span></span><br><span class="line">                <span class="keyword">while</span>(node.next != <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(node.data == <span class="literal">null</span>)&#123;</span><br><span class="line">                        last.next = node.next;</span><br><span class="line">                        total--;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    last = node;</span><br><span class="line">                    node = node.next;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(node.data == <span class="literal">null</span>)&#123;<span class="comment">//单独判断最后一个是否是要删除的结点</span></span><br><span class="line">                    last.next = <span class="literal">null</span>;<span class="comment">//要删除的是最后一个结点</span></span><br><span class="line">                    total--;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//2.考虑是否是第一个</span></span><br><span class="line">            <span class="keyword">if</span>(first != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(obj.equals(first.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">                    first = first.next;</span><br><span class="line">                    total--;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//2.2要删除的不是第一个结点</span></span><br><span class="line">                <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first.next;</span><br><span class="line">                <span class="type">Node</span> <span class="variable">last</span> <span class="operator">=</span> first;</span><br><span class="line">                <span class="keyword">while</span>(node.next!=<span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(obj.equals(node.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">                        last.next = node.next;</span><br><span class="line">                        total--;</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    last = node;</span><br><span class="line">                    node = node.next;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//单独判断最后一个是否是要删除的结点</span></span><br><span class="line">                <span class="keyword">if</span>(obj.equals(node.data))&#123;<span class="comment">//内容是否相等</span></span><br><span class="line">                    last.next = <span class="literal">null</span>;</span><br><span class="line">                    total--;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object obj)</span>&#123;<span class="comment">//查找元素下标：效率不高，链表不需要</span></span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(node.data == <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">node</span> <span class="operator">=</span> first;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; total; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(obj.equals(node.data))&#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="单向链表-2"><figure class="highlight java"><figcaption><span>TestSingleLinkedList.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSingleLinkedList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SingleLinkedList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SingleLinkedList</span>();</span><br><span class="line">        list.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        list.add(<span class="literal">null</span>);</span><br><span class="line">        Object[] all = list.getAll();</span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[1, 2, 3, null]</span></span><br><span class="line">        list.remove(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        all = list.getAll();</span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[2, 3, null]</span></span><br><span class="line">        list.remove(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        all = list.getAll();</span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[2, null]</span></span><br><span class="line">        list.remove(<span class="literal">null</span>);</span><br><span class="line">        all = list.getAll();</span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[2]</span></span><br><span class="line"></span><br><span class="line">        System.out.println(list.indexOf(<span class="string">&quot;1&quot;</span>));<span class="comment">//-1</span></span><br><span class="line">        System.out.println(list.indexOf(<span class="string">&quot;3&quot;</span>));<span class="comment">//-1</span></span><br><span class="line">        System.out.println(list.indexOf(<span class="literal">null</span>));<span class="comment">//-1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<span id="more"></span>
<h2 id="集合框架">集合框架</h2>
<p>Java为了满足用户使用数据更多种的<strong>逻辑关系</strong>，而设计的一系列的<strong>不同于数组的、可变的、聚合的抽象数据类型</strong>。<br />
这些接口和类在java.util包中，因为类型很丰富，因此我们通常称为集合框架集，主要分为Collection、Map两大类接口。<br />
<div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img src="/images/Java/C集合.png"></div><div class="group-picture-column"><img src="/images/Java/M集合.png"></div></div></div></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//提示：集合中只能添加对象，不能添加基本数据类型的数据，如果添加基本数据类型的数据，它会自动装箱为对应包装类型的对象。</span></span><br><span class="line"><span class="comment">//注意：集合中元素存入时设置的是Object类型，取出赋值给其他变量时要强转！但很容易忘记集合元素的类型，如何解决？请参考下一章【泛型】</span></span><br><span class="line">|-Collection：规范<span class="string">&quot;单值&quot;</span>集合的接口。</span><br><span class="line">    |-List：列表，有序的，可按index插入、查询。</span><br><span class="line">    |-Queue：队列，通常为FIFO先进先出方式排序，优先级队列、LIFO队列、堆栈例外。</span><br><span class="line">    |-Set：集合，不包含重复元素，最多包含一个<span class="literal">null</span>元素。</span><br><span class="line">        |-SortedSet：进一步提供关于元素的总体排序。</span><br><span class="line">|-Map：规范<span class="string">&quot;对值&quot;</span>集合的接口。-<span class="string">&quot;(key,value)&quot;</span>结构，key不能重复。</span><br><span class="line">    |TreeMap：保证映射顺序。</span><br><span class="line">    |-HashMap：不保证映射顺序。</span><br><span class="line">    |-SortedMap：进一步提供关于键的总体排序。</span><br></pre></td></tr></table></figure>
<h3 id="collection集合">Collection集合</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">是其他<span class="string">&quot;单值&quot;</span>集合的根接口。</span><br><span class="line">没有直接的实现类，而是由具体的子接口（List、Set、Queue等）中实现。</span><br><span class="line">一些集合允许有重复的元素，而另一些则不允许。一些集合是有序的，而另一些则是无序的。</span><br></pre></td></tr></table></figure>
<h4 id="通用方法">通用方法</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">添加元素：</span><br><span class="line">|-add(Object obj)：添加元素对象到当前集合中。</span><br><span class="line">|-addAll(Collection other)：添加other集合中的所有元素对象到当前集合。</span><br><span class="line">删除元素：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object obj)</span>：从当前集合中删除第一个找到的与obj对象equals返回<span class="literal">true</span>的元素。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">removeAll</span><span class="params">(Collection coll)</span>：从当前集合中<span class="string">&quot;删除&quot;</span>所有与coll集合中<span class="string">&quot;相同&quot;</span>元素。删除交集。</span><br><span class="line">判断元素：</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>：判断当前集合是否为空集合，等价于<span class="string">&quot;if(集合对象.size()==0)&quot;</span>。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(Object obj)</span>：判断当前集合中是否存在一个与obj对象equals返回<span class="literal">true</span>的元素。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">containsAll</span><span class="params">(Collection coll)</span>：判断c集合中的元素是否在当前集合中都存在。即coll集合是否是当前集合的<span class="string">&quot;子集&quot;</span>。</span><br><span class="line">其他：</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>：获取当前集合中实际存储的元素个数。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>：清空当前集合。</span><br><span class="line">|-Object[] toArray()：返回包含当前集合中所有元素的数组，转为数组类型。</span><br><span class="line">|-Iterator <span class="title function_">iterator</span><span class="params">()</span>：返回当前集合的迭代器对象。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">retainAll</span><span class="params">(Collection coll)</span>：当前集合仅<span class="string">&quot;保留&quot;</span>与coll集合中的元素<span class="string">&quot;相同&quot;</span>的元素(两个集合的交集)。保留交集。：</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><figcaption><span>TestCollection.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCollection</span> &#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//这里左边写Collection，目的是只关注Collection的方法，多态引用时c1编译期间只能访问Collection的方法</span></span><br><span class="line">        <span class="comment">//ArrayList动态数组，是Collection下面的一个实现类，以此为例讲解上面通用方法</span></span><br><span class="line">        <span class="type">Collection</span> <span class="variable">c1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        c1.add(<span class="number">1</span>);</span><br><span class="line">        c1.add(<span class="number">2</span>);</span><br><span class="line">        c1.add(<span class="number">3</span>);</span><br><span class="line">        <span class="type">Collection</span> <span class="variable">c2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        c2.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        c2.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        c2.add(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//以下都是单独执行结果</span></span><br><span class="line">        c1.add(c2);</span><br><span class="line">        System.out.println(c1);<span class="comment">//[1, 2, 3, [1, 2, 3]]</span></span><br><span class="line">        c1.addAll(c2);</span><br><span class="line">        System.out.println(c1);<span class="comment">//[1, 2, 3, 1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">        c1.remove(<span class="number">1</span>);<span class="comment">//删除元素</span></span><br><span class="line">        System.out.println(c1);<span class="comment">//[2, 3]</span></span><br><span class="line">        c1.removeAll(c2);<span class="comment">//c1删除与c2相同的元素，删除交集元素</span></span><br><span class="line">        System.out.println(c1);<span class="comment">//[1, 2]</span></span><br><span class="line"></span><br><span class="line">        System.out.println(c1.contains(<span class="string">&quot;1&quot;</span>));<span class="comment">//false，&quot;1&quot;不在c1中</span></span><br><span class="line">        System.out.println(c1.contains(<span class="number">1</span>));<span class="comment">//true，1在c1中</span></span><br><span class="line">        System.out.println(c1.containsAll(c2));<span class="comment">//false，c2不是c1子集</span></span><br><span class="line">        System.out.println(<span class="string">&quot;c1元素个数：&quot;</span> + c1.size());<span class="comment">//c1元素个数：3</span></span><br><span class="line"></span><br><span class="line">        Object[] all = c1.toArray();<span class="comment">//c1转为数组类型</span></span><br><span class="line">        System.out.println(Arrays.toString(all));<span class="comment">//[1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">        c1.retainAll(c2);<span class="comment">//保留c1与c2交集元素</span></span><br><span class="line">        System.out.println(c1);<span class="comment">//[3]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="通用遍历">通用遍历</h4>
<p><strong>1.foreach遍历</strong>：Collection接口继承了java.lang.Iterable接口，因此Collection系列的集合就可以直接使用foreach循环遍历，但其底层还是调用Iterator迭代器实现的。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//foreach遍历，只适用于看、找集合中的元素，不能在遍历集合时改变元素数量，否则报异常或者操作结果将不确定。</span></span><br><span class="line"><span class="keyword">for</span>(元素的类型 迭代变量 : 数组/集合名称)&#123;</span><br><span class="line">    <span class="comment">//每一次循环，迭代变量依次代表集合中的一个元素</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="foreach"><ul class="nav-tabs"><li class="tab active"><a href="#foreach-1">foreach遍历</a></li><li class="tab"><a href="#foreach-2">定义容器实现iterator</a></li></ul><div class="tab-content"><div class="tab-pane active" id="foreach-1"><figure class="highlight java"><figcaption><span>TestForeach.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestForeach</span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Collection</span> <span class="variable">coll</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        coll.add(<span class="number">1</span>);</span><br><span class="line">        coll.add(<span class="number">2</span>);</span><br><span class="line">        coll.add(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">for</span>(Object obj : coll)&#123;<span class="comment">//foreach遍历</span></span><br><span class="line">            System.out.println(obj);<span class="comment">//1、2、3</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        String[] arr = &#123;<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>, <span class="string">&quot;java&quot;</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String string : arr) &#123;</span><br><span class="line">            System.out.println(string);<span class="comment">//hello、world、java</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="foreach-2"><figure class="highlight java"><figcaption><span>TestIterable.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyArrayList</span> <span class="keyword">implements</span> <span class="title class_">Iterable</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] data;<span class="comment">//不确定容器装的对象，用Object声明</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> total;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyArrayList</span><span class="params">()</span>&#123;</span><br><span class="line">        data = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">5</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">checkCapacity</span><span class="params">()</span>&#123;<span class="comment">//检查是否扩容</span></span><br><span class="line">        <span class="keyword">if</span>(total &gt;= data.length)&#123;</span><br><span class="line">            data = Arrays.copyOf(data, data.length*<span class="number">2</span>);<span class="comment">//如果data满了，就扩容为原来的2倍</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Object obj)</span>&#123;<span class="comment">//添加一个元素</span></span><br><span class="line">        checkCapacity();<span class="comment">//检查是否需要扩容</span></span><br><span class="line">        data[total++] = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator <span class="title function_">iterator</span><span class="params">()</span> &#123;<span class="comment">//重写java.lang.Iterable的iterator方法</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyItr</span>();<span class="comment">//返回内部类实例</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//内部类重写java.util.Iterator的hasNext、next方法</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">MyItr</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> cursor;<span class="comment">//游标</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> (cursor != total);</span><br><span class="line">            <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;hasNext&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> flag;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;next&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> data[cursor++];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestIterable</span> &#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MyArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyArrayList</span>();</span><br><span class="line">        list.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Object obj : list) &#123;</span><br><span class="line">            System.out.println(obj);</span><br><span class="line">            <span class="comment">//hasNext、next、1、hasNext、next、2、hasNext、next、3</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p><strong>2.Iterator遍历</strong>：因为Collection接口继承了java.lang.Iterable接口，该接口具有iterator()方法，该方法返回一个<strong>实现了Iterator接口的对象</strong>，该对象可以用于迭代集合中的元素。<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|-java.lang.Iterable接口：</span><br><span class="line">    |-集合类的具体实现类，通过<span class="string">&quot;内部类&quot;</span>实现了Iterable接口。</span><br><span class="line">    |-每一种集合的物理结构不同，意味着对迭代器的实现是不同的，每一种集合都要单独定制迭代器。</span><br><span class="line">    |-内部类可以直接访问外部类的私有的属性，成员，迭代器就可以直接访问集合的私有的元素。</span><br><span class="line">    |-集合对象每次调用iterator方法都得到一个全新的迭代器对象，默认游标都在集合的第一个元素位置。</span><br></pre></td></tr></table></figure></p>
<p>Iterator常用方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>：如果仍有元素可以迭代，则返回<span class="literal">true</span>。</span><br><span class="line">|-Object <span class="title function_">next</span><span class="params">()</span>：返回迭代的下一个元素。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span>：从迭代器指向的collection中移除迭代器返回的最后一个元素（可选操作）。</span><br><span class="line"><span class="comment">//在调用next方法之前，先调用hasNext方法检测。</span></span><br><span class="line"><span class="comment">//特别，在调用期间可以改变元素数量。</span></span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="iterator"><ul class="nav-tabs"><li class="tab active"><a href="#iterator-1">Iterator遍历</a></li><li class="tab"><a href="#iterator-2">Iterator遍历同时删除</a></li></ul><div class="tab-content"><div class="tab-pane active" id="iterator-1"><figure class="highlight java"><figcaption><span>TestIterator.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestIterator</span> &#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Collection</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        c.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        c.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        c.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> c.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            System.out.println(obj);<span class="comment">//张三、李四、王五</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="iterator-2"><figure class="highlight java"><figcaption><span>TestIterator.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestIterator</span> &#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Collection</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        c.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        c.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        c.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> c.iterator();<span class="comment">//获取迭代器对象</span></span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">obj</span> <span class="operator">=</span> (String) iterator.next();</span><br><span class="line">            <span class="keyword">if</span>(obj.startsWith(<span class="string">&quot;王&quot;</span>))&#123;</span><br><span class="line">                iterator.remove();<span class="comment">//错误，不能边迭代边删除</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="遍历技巧">遍历技巧</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>如果遍历数组，什么情况下选用foreach，什么情况下选用<span class="keyword">for</span>循环？</span><br><span class="line">当如果你的操作中涉及到<span class="string">&quot;下标&quot;</span>操作时，用<span class="keyword">for</span>最好。</span><br><span class="line">当你只是查看元素的内容，那么选foreach更简洁一些。</span><br><span class="line"><span class="number">2.</span>如果遍历Collection系列集合，什么情况下选用foreach，是否能选用<span class="keyword">for</span>循环？</span><br><span class="line">优先foreach，如果有索引也可用<span class="keyword">for</span>。物理结构是连续的用<span class="keyword">for</span>，非连续的链式结构不用<span class="keyword">for</span>。</span><br><span class="line"><span class="number">3.</span>如果遍历Collection系列集合，什么情况下选用foreach，什么情况下使用Iterator？</span><br><span class="line">如果只是查看集合的元素，使用foreach，代码会更简洁。</span><br><span class="line">如果在<span class="string">&quot;遍历集合的同时&quot;</span>根据某种条件要<span class="string">&quot;删除元素&quot;</span>等操作，那么选用Iterator。</span><br></pre></td></tr></table></figure>
<h4 id="list集合">List集合</h4>
<p>List集合接口特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|-元素有序、可重复。</span><br><span class="line">|-List集合接口常用实现类：Vector动态数组、ArrayList动态数组、Stack栈、LinkedList双向链表/双端队列（特别）。</span><br><span class="line"><span class="comment">//java.util.List为集合接口，java.awt.List是图形界面的组件。</span></span><br><span class="line"><span class="comment">//虽然List系列可通过[索引]操作，但特殊的LinkedList不建议，它底层为链表，非数组，索引效率很低。</span></span><br></pre></td></tr></table></figure></p>
<h5 id="list实现类">List实现类</h5>
<p>List接口实现类的区别：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">|-Vector：动态数组（旧版），物理结构是数组。</span><br><span class="line">    |-线程安全的，效率低。</span><br><span class="line">    |-初始化容量可用<span class="string">&quot;initialCapacity&quot;</span>指定，增量可用<span class="string">&quot;capacityIncrement&quot;</span>指定。</span><br><span class="line">    |-初始容量是<span class="number">10</span>，不够后扩容为原来的<span class="number">2</span>倍，缺点是造成空间浪费的可能性比较大。</span><br><span class="line">    |-支持foreach、Iterator、Enumeration遍历。</span><br><span class="line">|-ArrayList：动态数组（新版），物理结构是数组。</span><br><span class="line">    |-线程不安全的，效率高。</span><br><span class="line">    |-初始化容量可用<span class="string">&quot;initialCapacity&quot;</span>指定，增量可用<span class="string">&quot;capacityIncrement&quot;</span>指定。</span><br><span class="line">    |-默认为空数组，不够后扩容为原来的<span class="number">1.5</span>倍，缺点是造成扩容的次数增大。</span><br><span class="line">    |-支持foreach、Iterator遍历。</span><br><span class="line">|-Stack：栈，是Vector的子类，物理结构是数组。</span><br><span class="line">    |-后进先出（LIFO），扩展了Vector方法，允许将向量视为堆栈。</span><br><span class="line">|-LinkedList：双向链表，物理结构是链表。</span><br><span class="line">    |-可以被当做，单向链表、双向链表、栈（方法同Stack）、队列、双端队列、等各种数据结构。</span><br><span class="line">    |-JDK1<span class="number">.6</span>之后LinkedList实现了Deque接口，双端队列也可用作 LIFO（后进先出）堆栈。</span><br></pre></td></tr></table></figure></p>
<p>Stack和LinkedList的特殊方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">|-Stack：</span><br><span class="line">    |-Object <span class="title function_">peek</span><span class="params">()</span>：访问当前栈顶元素，但是不拿走栈顶元素。</span><br><span class="line">    |-Object <span class="title function_">pop</span><span class="params">()</span>：弹出栈顶元素。</span><br><span class="line">    |-Object <span class="title function_">push</span><span class="params">(Object item)</span>：把元素压入栈顶，等价于<span class="string">&quot;add(item)&quot;</span>，但比其可读性更好些。</span><br><span class="line">    |-<span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span>：测试堆栈是否为空。</span><br><span class="line">    |-<span class="type">int</span> <span class="title function_">search</span><span class="params">(Object o)</span>：在堆栈中查找项并确定到堆栈顶距离，以<span class="number">1</span>为基数。</span><br><span class="line">|-LinkedList：</span><br><span class="line">    |-空链表判断：<span class="keyword">if</span>(first==<span class="literal">null</span> &amp;&amp; last==<span class="literal">null</span>)</span><br><span class="line">    |-只有一个结点：first == last</span><br><span class="line">    |-第一个结点：first.previous = <span class="literal">null</span></span><br><span class="line">    |-最后一个结点：last.next == <span class="literal">null</span></span><br><span class="line">    |-双向链表：</span><br><span class="line">        |-E <span class="title function_">getFirst</span><span class="params">()</span>：返回此列表的第一个元素。</span><br><span class="line">        |-E <span class="title function_">getLast</span><span class="params">()</span>：返回此列表的最后一个元素。</span><br><span class="line">        |-<span class="type">boolean</span> <span class="title function_">offerFirst</span><span class="params">(E e)</span>：在此列表开头插入指定元素。</span><br><span class="line">        |-<span class="type">boolean</span> <span class="title function_">offerLast</span><span class="params">(E e)</span>：在此列表末尾插入指定元素。</span><br><span class="line">        |-<span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object o)</span>：返回此列表中首次出现的指定元素的索引，如果此列表中不包含该元素，则返回 -<span class="number">1</span>。</span><br><span class="line">        |-<span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(Object o)</span>：返回此列表中最后出现的指定元素的索引，如果此列表中不包含该元素，则返回 -<span class="number">1</span>。</span><br><span class="line">        |-E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>：返回此列表中指定位置处的元素。先判断[index]靠前<span class="string">&quot;index&lt;(size&gt;&gt;1)&quot;</span>还是靠后，然后选择从前或从后遍历。</span><br><span class="line">    |-双端队列（FIFO先进先出）：</span><br><span class="line">        |-等效方法：</span><br><span class="line">                        Queue方法                LinkedList实现的Deque方法</span><br><span class="line">                错误抛出异常   错误返回特殊值    错误抛出异常   错误返回特殊值</span><br><span class="line">            插入 add(e)         offer(e)        addLast(e)    offerLast(e)</span><br><span class="line">            移除 remove()       poll()          removeFirst() pollFirst()</span><br><span class="line">            检查 element()      peek()          getFirst()    peekFirst()   </span><br><span class="line">        |-错误返回（<span class="literal">null</span>/<span class="literal">false</span>）：</span><br><span class="line">                    第一个元素（头部）            最后一个元素（尾部） </span><br><span class="line">                错误抛出异常   错误返回特殊值  错误抛出异常  错误返回特殊值 </span><br><span class="line">            插入 addFirst(e)    offerFirst(e)  addLast(e)   offerLast(e) </span><br><span class="line">            移除 removeFirst()  pollFirst()    removeLast() pollLast() </span><br><span class="line">            检查 getFirst()     peekFirst()    getLast()    peekLast() </span><br><span class="line">    |-双端队列，用作堆栈（LIFO先进后出）：</span><br><span class="line">        |-等效方法：</span><br><span class="line">            Stack方法      LinkedList实现的Deque方法</span><br><span class="line">            push(e)           addFirst(e)</span><br><span class="line">            pop()            removeFirst()</span><br><span class="line">            peek()            peekFirst()</span><br><span class="line"><span class="comment">//LinkedList结构定义：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">   Object data;</span><br><span class="line">   Node previous;</span><br><span class="line">   Node next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LinkedList</span>&#123;</span><br><span class="line">   Node first;<span class="comment">//记录第一个结点的地址</span></span><br><span class="line">   Node last;<span class="comment">//记录最后一个结点的地址</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="stack"><ul class="nav-tabs"><li class="tab active"><a href="#stack-1">Stack</a></li><li class="tab"><a href="#stack-2">LinkedList普通列表</a></li><li class="tab"><a href="#stack-3">LinkedList双端队列</a></li><li class="tab"><a href="#stack-4">LinkedList堆栈</a></li></ul><div class="tab-content"><div class="tab-pane active" id="stack-1"><figure class="highlight java"><figcaption><span>TestListImpl.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestListImpl</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();<span class="comment">//用ArrayList，实现后进先出的效果</span></span><br><span class="line">        list.add(<span class="number">1</span>);</span><br><span class="line">        list.add(<span class="number">2</span>);</span><br><span class="line">        System.out.println(list.remove(list.size()-<span class="number">1</span>));<span class="comment">//2</span></span><br><span class="line">        System.out.println(list.remove(list.size()-<span class="number">1</span>));<span class="comment">//1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Stack</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Stack</span>();</span><br><span class="line">        s.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        s.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        System.out.println(s.peek());<span class="comment">//2</span></span><br><span class="line">        System.out.println(s.peek());<span class="comment">//2</span></span><br><span class="line">        s.push(<span class="string">&quot;3&quot;</span>);<span class="comment">//push比add可读性更好，功能是一样的</span></span><br><span class="line">        s.push(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">        System.out.println(s.pop());<span class="comment">//4</span></span><br><span class="line">        System.out.println(s.pop());<span class="comment">//3</span></span><br><span class="line">        <span class="comment">//System.out.println(s.pop());//java.util.EmptyStackException</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="stack-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLinkedList</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">LinkedList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line">        list.add(<span class="number">1</span>);</span><br><span class="line">        list.add(<span class="number">2</span>);</span><br><span class="line">        list.add(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">for</span> (Object object : list) &#123;</span><br><span class="line">            System.out.println(object);<span class="comment">//1、2、3</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="stack-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LinkedList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line">        <span class="comment">//入队</span></span><br><span class="line">        list.addLast(<span class="number">1</span>);</span><br><span class="line">        list.addLast(<span class="number">2</span>);</span><br><span class="line">        list.addLast(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//出队， FIFO（先进先出）</span></span><br><span class="line">        System.out.println(list.pollFirst());<span class="comment">//1</span></span><br><span class="line">        System.out.println(list.pollFirst());<span class="comment">//2</span></span><br><span class="line">        System.out.println(list.pollFirst());<span class="comment">//3</span></span><br><span class="line">        <span class="comment">//队空了，再出队，返回null</span></span><br><span class="line">        System.out.println(list.pollFirst());<span class="comment">//null</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="stack-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LinkedList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedList</span>();</span><br><span class="line">        <span class="comment">//入栈</span></span><br><span class="line">        list.addFirst(<span class="number">1</span>);</span><br><span class="line">        list.addFirst(<span class="number">2</span>);</span><br><span class="line">        list.addFirst(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//出栈：LIFO（后进先出）</span></span><br><span class="line">        System.out.println(list.removeFirst());<span class="comment">//3</span></span><br><span class="line">        System.out.println(list.removeFirst());<span class="comment">//2</span></span><br><span class="line">        System.out.println(list.removeFirst());<span class="comment">//1</span></span><br><span class="line">        <span class="comment">//栈空了，再出栈，会报异常java.util.NoSuchElementException</span></span><br><span class="line">        System.out.println(list.removeFirst());</span><br></pre></td></tr></table></figure></div></div></div>
<h5 id="新增方法">新增方法</h5>
<p>List集合接口除了从Collection集合继承的方法外，List集合里添加了一些根据“索引”来操作集合元素的方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">添加元素：</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, Object ele)</span>：在[index]位置添加一个对象，相当于插入。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">addAll</span><span class="params">(<span class="type">int</span> index, Collection eles)</span>：在[index]位置添加eles中的所有元素。</span><br><span class="line">获取元素：</span><br><span class="line">|-Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>：返回[index]位置的元素。</span><br><span class="line">|-List <span class="title function_">subList</span><span class="params">(<span class="type">int</span> fromIndex, <span class="type">int</span> toIndex)</span>：截取[fromIndex, toIndex)部分元素。</span><br><span class="line">获取索引：</span><br><span class="line">|-Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>：在当前集合中正序查找第一个obj的下标，如果没有返回-<span class="number">1</span>。</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(Object obj)</span>：在当前集合中倒序查找第一个obj的下标，如果没有返回-<span class="number">1</span>。</span><br><span class="line">删除、替换元素：</span><br><span class="line">|-Object <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span>：删除[index]位置的元素。</span><br><span class="line">|-Object <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, Object ele)</span>：替换[index]位置的元素。</span><br><span class="line">迭代器：</span><br><span class="line">|-ListIterator <span class="title function_">listIterator</span><span class="params">()</span>：返回一个迭代器。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><figcaption><span>TestList.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ListIterator;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestList</span> &#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();<span class="comment">//多态，仅关注List的方法</span></span><br><span class="line">        list.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">        list.set(<span class="number">2</span>, <span class="number">2</span>);<span class="comment">//增</span></span><br><span class="line">        System.out.println(list);<span class="comment">//[a, b, 2</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> list.get(<span class="number">0</span>);<span class="comment">//查</span></span><br><span class="line">        System.out.println(obj);<span class="comment">//a</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        list.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        list.add(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//这里调用的是新增的remove(int index)方法，而不是Collection的remove(Object obj)，因为1是基本数据类型，和int最匹配</span></span><br><span class="line">        list.remove(<span class="number">1</span>);<span class="comment">//删除的是[下标]的对象</span></span><br><span class="line">        System.out.println(list);<span class="comment">//[1, 3]</span></span><br><span class="line">        <span class="comment">//想使用Collection的remove(Object obj)，如下所示</span></span><br><span class="line">        list.remove(<span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">3</span>));</span><br><span class="line">        System.out.println(list);<span class="comment">//[1]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="新增遍历">新增遍历</h5>
<p>新增<code>listIterator()</code>方法，该方法来自ListIterator接口（Iterator子接口），增加了从<strong>后往前遍历</strong>、<strong>遍历同时可增加可修改</strong>等方法，该方法返回一个ListIterator对象。该接口具有的方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="type">boolean</span> <span class="title function_">hasPrevious</span><span class="params">()</span>：是否前面还有元素。</span><br><span class="line">|-Object <span class="title function_">previous</span><span class="params">()</span>：获取前面的元素。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">add</span><span class="params">(E e)</span>：遍历的同时，添加元素。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">set</span><span class="params">(E e)</span>：遍历的同时，替换元素。</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">nextIndex</span><span class="params">()</span>：返回下一个元素的索引。</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">previousIndex</span><span class="params">()</span>：返回前一个元素的索引。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><figcaption><span>TestlistIterator.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ListIterator;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestlistIterator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        list.add(<span class="number">1</span>);</span><br><span class="line">        list.add(<span class="number">2</span>);</span><br><span class="line">        list.add(<span class="number">3</span>);</span><br><span class="line">        list.add(<span class="number">4</span>);</span><br><span class="line">        list.add(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//以下都为单独运行结果</span></span><br><span class="line">        <span class="comment">//1.正序遍历</span></span><br><span class="line">        <span class="type">ListIterator</span> <span class="variable">listIterator1</span> <span class="operator">=</span> list.listIterator();<span class="comment">//默认游标在起始位置</span></span><br><span class="line">        <span class="keyword">while</span>(listIterator1.hasNext())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> listIterator1.next();</span><br><span class="line">            System.out.print(obj);<span class="comment">//12345</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.倒序遍历</span></span><br><span class="line">        <span class="type">ListIterator</span> <span class="variable">listIterator2</span> <span class="operator">=</span> list.listIterator(list.size());<span class="comment">//游标在最后</span></span><br><span class="line">        <span class="keyword">while</span>(listIterator2.hasPrevious())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> listIterator2.previous();</span><br><span class="line">            System.out.print(obj);<span class="comment">//54321</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3.指定位置遍历</span></span><br><span class="line">        <span class="type">ListIterator</span> <span class="variable">listIterator3</span> <span class="operator">=</span> list.listIterator(<span class="number">3</span>);<span class="comment">//指定游标位置</span></span><br><span class="line">        <span class="keyword">while</span>(listIterator3.hasPrevious())&#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> listIterator3.previous();</span><br><span class="line">            System.out.print(obj);<span class="comment">//45</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="源码跟踪">源码跟踪</h5>
<p>1.Vector源码跟踪：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">|-Vector()：初始化长度为<span class="number">10</span>的数组，默认增量是<span class="number">0</span>。</span><br><span class="line">|-add(E e)：默认扩容为原来的<span class="number">2</span>倍，初始化容量可用`initialCapacity`指定，增量可用`capacityIncrement`指定。</span><br><span class="line">|-add(index,e)：考虑扩容 -&gt; 移动元素 -&gt; 添加元素 -&gt; 元素个数增加。</span><br><span class="line">|-remove(index)：判断移动元素的个数&gt;<span class="number">0</span>？ -&gt; 调用System.arraycopy方法进行移动 -&gt; <span class="string">&quot;elementData[--elementCount] = null;&quot;</span>。</span><br><span class="line">|-remove(Object obj)：查找obj的下标 -&gt; 如果不是-<span class="number">1</span>就调用<span class="string">&quot;remove(index)&quot;</span>进行删除。</span><br><span class="line">|-indexOf(Object obj)：对obj分情况讨论：（<span class="number">1</span>）是<span class="literal">null</span>（<span class="number">2</span>）不是<span class="literal">null</span>。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="vector"><ul class="nav-tabs"><li class="tab active"><a href="#vector-1">初始化</a></li><li class="tab"><a href="#vector-2">add(E e)</a></li><li class="tab"><a href="#vector-3">remove(Object o)</a></li></ul><div class="tab-content"><div class="tab-pane active" id="vector-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(<span class="number">10</span>);<span class="comment">//默认初始容量initialCapacity为10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(initialCapacity, <span class="number">0</span>);<span class="comment">//默认capacityIncrement增量为0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">int</span> capacityIncrement)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)<span class="comment">//判断形参initialCapacity合法性</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal Capacity: &quot;</span>+ initialCapacity);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];<span class="comment">//创建了一个Object[]类型的数组，默认是容量10</span></span><br><span class="line">    <span class="comment">//增量，默认是0。该值为0，后面就按照2倍增加，该值不是0，后面就按照你指定的增量进行增加</span></span><br><span class="line">    <span class="built_in">this</span>.capacityIncrement = capacityIncrement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="vector-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// overflow-conscious code 源码注释，指下面是考虑溢出而写的代码</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;<span class="comment">//synchronized意味着线程安全的  </span></span><br><span class="line">        modCount++;</span><br><span class="line">        ensureCapacityHelper(elementCount + <span class="number">1</span>);<span class="comment">//检查是否需要扩容</span></span><br><span class="line">        elementData[elementCount++] = e;<span class="comment">//把新的元素存入，存入后，elementCount值+1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityHelper</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)<span class="comment">//检查是否超过了当前数组的容量</span></span><br><span class="line">            grow(minCapacity);<span class="comment">//扩容</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;<span class="comment">//获取目前数组的长度</span></span><br><span class="line">        <span class="comment">//增量，该值为0，后面就按照2倍增加，该值不是0，后面就按照你指定的增量进行增加</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + ((capacityIncrement &gt; <span class="number">0</span>) ?</span><br><span class="line">                                         capacityIncrement : oldCapacity);</span><br><span class="line">        <span class="comment">//如果按照上面计算的新容量还不够，就按照你指定的需要的最小容量来扩容minCapacity</span></span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        <span class="comment">//如果新容量超过了最大数组限制，那么单独处理</span></span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        <span class="comment">//把旧数组中的数据复制到新数组中，新数组的长度为newCapacity</span></span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="vector-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> removeElement(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">boolean</span> <span class="title function_">removeElement</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> indexOf(obj);<span class="comment">//查找obj在当前Vector中的下标</span></span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;<span class="comment">//如果i&gt;=0，说明存在，删除[i]位置的元素</span></span><br><span class="line">        removeElementAt(i);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> indexOf(o, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object o, <span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;<span class="comment">//要查找的元素是null值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> index ; i &lt; elementCount ; i++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[i] == <span class="literal">null</span>)<span class="comment">//如果是null值，用==null判断</span></span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//要查找的元素是非null值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> index ; i &lt; elementCount ; i++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))<span class="comment">//如果是非null值，用equals判断</span></span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">removeElementAt</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= elementCount) &#123; <span class="comment">//判断下标的合法性</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(index + <span class="string">&quot; &gt;= &quot;</span> + elementCount);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(index);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> elementCount - index - <span class="number">1</span>;<span class="comment">//j是要移动的元素的个数</span></span><br><span class="line">    <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;<span class="comment">//移动元素</span></span><br><span class="line">        <span class="comment">//把index+1位置以及后面的元素前移</span></span><br><span class="line">        System.arraycopy(elementData, index + <span class="number">1</span>, elementData, index, j);</span><br><span class="line">    &#125;</span><br><span class="line">    elementCount--;<span class="comment">//移动完，元素的总个数减少</span></span><br><span class="line">    <span class="comment">//主动将尾部位置置空，GC回收，用来添加新元素</span></span><br><span class="line">    elementData[elementCount] = <span class="literal">null</span>; <span class="comment">/* to let gc do its work */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p>2.ArrayList源码跟踪：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化为空数组，目的防止空间没使用而浪费。</span></span><br><span class="line"><span class="comment">//选择动态数组时，有预估容量时要指定容量，避免反复扩容。</span></span><br><span class="line">JDK1<span class="number">.8</span>版本：初始化长度为<span class="number">0</span>的空数组，DEFAULTCAPACITY_EMPTY_ELEMENTDATA。初始扩容<span class="number">10</span>，后续扩容<span class="number">1.5</span>倍。</span><br><span class="line">JDK1<span class="number">.7</span>版本：初始化长度为<span class="number">0</span>的空数组，EMPTY_ELEMENTDATA。</span><br><span class="line">JDK1<span class="number">.6</span>版本：初始化长度为<span class="number">10</span>的数组。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="jdk1.8arraylist"><ul class="nav-tabs"><li class="tab active"><a href="#jdk1.8arraylist-1">初始化</a></li><li class="tab"><a href="#jdk1.8arraylist-2">add(E e)</a></li><li class="tab"><a href="#jdk1.8arraylist-3">remove(Object o)</a></li><li class="tab"><a href="#jdk1.8arraylist-4">remove(int index)</a></li><li class="tab"><a href="#jdk1.8arraylist-5">set(int index, E element)</a></li><li class="tab"><a href="#jdk1.8arraylist-6">indexOf(Object o)</a></li></ul><div class="tab-content"><div class="tab-pane active" id="jdk1.8arraylist-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;<span class="comment">//初始化为空数组</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="jdk1.8arraylist-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        ensureCapacityInternal(size + <span class="number">1</span>);<span class="comment">//检查当前数组能否再存一个元素</span></span><br><span class="line">        elementData[size++] = e;<span class="comment">//存入新元素，容量size+1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityInternal</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;<span class="comment">//如果当前数组还是空数组</span></span><br><span class="line">            <span class="comment">//那么minCapacity取DEFAULT_CAPACITY与minCapacity的最大值</span></span><br><span class="line">            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);<span class="comment">//增量取max(初始, 指定)</span></span><br><span class="line">        &#125;</span><br><span class="line">        ensureExplicitCapacity(minCapacity);<span class="comment">//检查是否需要扩容</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureExplicitCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        modCount++;<span class="comment">//修改次数加1</span></span><br><span class="line">        <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)<span class="comment">//需要的容量&gt;当前容量，就扩容</span></span><br><span class="line">            grow(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="comment">// overflow-conscious code</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;<span class="comment">//当前数组容量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);<span class="comment">//新容量是旧容量的1.5倍</span></span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)<span class="comment">//检查扩容后容量够不够，不够就使用指定值</span></span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)<span class="comment">//检查扩容后是否超过最大数组限制</span></span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);<span class="comment">//新容量，新数组</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="jdk1.8arraylist-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;<span class="comment">//分o是否为空两种情况讨论</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[index] == <span class="literal">null</span>) &#123;<span class="comment">//null值用==比较</span></span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>; index &lt; size; index++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[index])) &#123;<span class="comment">//非null值用equals比较</span></span><br><span class="line">                fastRemove(index);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">fastRemove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    modCount++;<span class="comment">//修改次数加1</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;<span class="comment">//需要移动的元素个数</span></span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)<span class="comment">//需要移动，用System.arraycopy</span></span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index, numMoved);</span><br><span class="line">    <span class="comment">//主动将尾部位置置空，GC回收，用来添加新元素</span></span><br><span class="line">    elementData[--size] = <span class="literal">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="jdk1.8arraylist-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    rangeCheck(index);<span class="comment">//检验index是否合法</span></span><br><span class="line">    modCount++;<span class="comment">//修改次数加1</span></span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData(index);<span class="comment">//取出被删元素存放，用于return</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;<span class="comment">//需要移动的元素个数</span></span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)<span class="comment">//需要移动，用System.arraycopy</span></span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index, numMoved);</span><br><span class="line">    <span class="comment">//主动将尾部位置置空，GC回收，用来添加新元素</span></span><br><span class="line">    elementData[--size] = <span class="literal">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="jdk1.8arraylist-5"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, E element)</span> &#123;</span><br><span class="line">    rangeCheck(index);<span class="comment">//检验index是否合法</span></span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData(index);<span class="comment">//取出被删元素存放，用于return</span></span><br><span class="line">    elementData[index] = element;<span class="comment">//用element替换[index]位置的元素</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    rangeCheck(index);<span class="comment">//检验index是否合法</span></span><br><span class="line">    <span class="keyword">return</span> elementData(index);<span class="comment">//返回[index]位置的元素</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="jdk1.8arraylist-6"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">indexOf</span><span class="params">(Object o)</span> &#123;<span class="comment">//从前往后找</span></span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;<span class="comment">//分为o是否为空两种情况</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[i]==<span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lastIndexOf</span><span class="params">(Object o)</span> &#123;<span class="comment">//从后往前找</span></span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;<span class="comment">//分为o是否为空两种情况</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">            <span class="keyword">if</span> (elementData[i]==<span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p>3.Stack、LinkedList源码跟踪：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//size数组长度</span></span><br><span class="line">|-Stack：</span><br><span class="line">    |-peek()：返回size-<span class="number">1</span>位置的元素。</span><br><span class="line">    |-pop()：先peek返回栈顶元素 -&gt; 删除size-<span class="number">1</span>位置的元素。</span><br><span class="line">    |-push(Object item)：把item添加到size位置。</span><br><span class="line">|-LinkedList：</span><br><span class="line">    |-LinkedList()：什么也没干，没有创建结点。</span><br><span class="line">    |-add(E e)：参考add(E e)。</span><br><span class="line">    |-remove(Object obj)：参考remove(Object obj)。</span><br><span class="line">    |-add(<span class="type">int</span> index, E element)：参考add(<span class="type">int</span> index, E element)。</span><br><span class="line"><span class="comment">//频繁插入、删除，使用LinkedList效率高。</span></span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="linklast"><ul class="nav-tabs"><li class="tab active"><a href="#linklast-1">初始化</a></li><li class="tab"><a href="#linklast-2">Node类型</a></li><li class="tab"><a href="#linklast-3">add(E e)</a></li><li class="tab"><a href="#linklast-4">remove(Object obj)</a></li><li class="tab"><a href="#linklast-5">add(int index, E element)</a></li></ul><div class="tab-content"><div class="tab-pane active" id="linklast-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedList</span><span class="params">()</span> &#123;&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="linklast-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; first;<span class="comment">//指向链表的第一个结点</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; last;<span class="comment">//指向链表的最后一个结点</span></span><br><span class="line">    <span class="comment">//LinkedList中有一个内部类Node类型 </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        E item;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line">        Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">        Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">            <span class="built_in">this</span>.item = element;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="linklast-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;<span class="comment">//默认链到末尾</span></span><br><span class="line">        linkLast(e);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">linkLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;<span class="comment">//用l记录当前链表的最后一个结点对象</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(l, e, <span class="literal">null</span>);<span class="comment">//创建一个新结点对象，并且指定当前新结点的前一个结点为l</span></span><br><span class="line">    last = newNode;<span class="comment">//当前新结点就变成了链表的最后一个结点</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (l == <span class="literal">null</span>)<span class="comment">//如果最后一个结点为null，表示之前为空链表，那么现在第一个结点就是新结点</span></span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span><span class="comment">//如果之前不为空链表，那么最后一个结点的next就指向当前新结点</span></span><br><span class="line">        l.next = newNode;</span><br><span class="line">    size++;<span class="comment">//元素个数增加</span></span><br><span class="line">    modCount++;<span class="comment">//修改次数增加</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="linklast-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123; <span class="comment">//分o是否是null讨论，正序遍历找到要删除的元素o对应的Node结点对象，然后删除</span></span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="literal">null</span>) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">E <span class="title function_">unlink</span><span class="params">(Node&lt;E&gt; x)</span> &#123;<span class="comment">//断开当前结点</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">E</span> <span class="variable">element</span> <span class="operator">=</span> x.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = x.next; <span class="comment">//用next记录x后一个结点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev; <span class="comment">//用prev记录x前一个结点</span></span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123;<span class="comment">//如果x第一个结点，那么x后一个结点将成为第一个结点</span></span><br><span class="line">        first = next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//否则，x前一个结点的next指向x下一个结点</span></span><br><span class="line">        prev.next = next;</span><br><span class="line">        x.prev = <span class="literal">null</span>;<span class="comment">//断开x与前一个结点的关系</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (next == <span class="literal">null</span>) &#123;<span class="comment">//如果x最后一个结点，那么x前一个结点将变成最后一个结点</span></span><br><span class="line">        last = prev;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//否则x后一个结点的prev指向x前一个结点</span></span><br><span class="line">        next.prev = prev;</span><br><span class="line">        x.next = <span class="literal">null</span>;<span class="comment">//断开x与后一个结点的关系</span></span><br><span class="line">    &#125;</span><br><span class="line">    x.item = <span class="literal">null</span>;<span class="comment">//彻底把x变成垃圾对象</span></span><br><span class="line">    size--;<span class="comment">//元素个数减少</span></span><br><span class="line">    modCount++;<span class="comment">//修改次数增加</span></span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="linklast-5"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index, E element)</span> &#123;<span class="comment">//index结点后移，插入element</span></span><br><span class="line">    checkPositionIndex(index);<span class="comment">//检查索引位置的合理性</span></span><br><span class="line">    <span class="keyword">if</span> (index == size)<span class="comment">//如果位置是在最后，那么链接到链表的最后</span></span><br><span class="line">        linkLast(element);</span><br><span class="line">    <span class="keyword">else</span>&#123;<span class="comment">//否则在链表中插入</span></span><br><span class="line">        linkBefore(element, node(index));<span class="comment">//node(index)表示index位置的Node对象</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">linkBefore</span><span class="params">(E e, Node&lt;E&gt; succ)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; pred = succ.prev;<span class="comment">//pred记录index结点前一个结点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(pred, e, succ);<span class="comment">//构建一个新结点</span></span><br><span class="line">    succ.prev = newNode;<span class="comment">//index结点prev链接到新结点</span></span><br><span class="line">    <span class="keyword">if</span> (pred == <span class="literal">null</span>)<span class="comment">//如果被index结点是链表的开头，那么新结点变成了链表头</span></span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        pred.next = newNode;<span class="comment">//否则pred的next就链接到新结点</span></span><br><span class="line">        &#125;</span><br><span class="line">    size++;<span class="comment">//元素个数增加</span></span><br><span class="line">    modCount++;<span class="comment">//修改次数增加</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h4 id="set集合">Set集合</h4>
<p>Set集合<strong>不允许包含相同的元素</strong>，如果把两个相同的元素加入同一个Set集合中，则添加操作失败。<br />
Set集合接口<strong>没有提供额外的方法</strong>，因此Set集合支持的遍历方式和Collection集合一样：foreach和Iterator。</p>
<h5 id="set实现类">Set实现类</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|-HashSet：既不能保证添加顺序，也不能保证大小顺序，是完全无序的。</span><br><span class="line">    |-LinkedHashSet：唯有LinkedHashSet可以保证元素<span class="string">&quot;添加顺序&quot;</span>。</span><br><span class="line">        |-HashSet子类，在HashSet的基础上，在结点中增加两个属性before和after维护了结点的前后添加顺序。</span><br><span class="line">        |-插入性能略低于HashSet，但在迭代访问Set里的全部元素时有很好的性能。</span><br><span class="line">    |-HashSet和LinkedHashSet判断两个元素相等的标准：</span><br><span class="line">        |-两个对象的<span class="string">&quot;hashCode&quot;</span>方法比较结果相等，再调用<span class="string">&quot;equals&quot;</span>方法返回值也相等。</span><br><span class="line">|-TreeSet：唯有TreeSet可以保证元素的<span class="string">&quot;大小顺序&quot;</span>。</span><br><span class="line">    |-是SortedSet接口的实现类。SortedSet是Set子接口。</span><br><span class="line">    |-当需要元素不可重复，又要给元素排大小时，就用TreeSet。</span><br><span class="line">    |-排序时，相等判断<span class="string">&quot;不使用hashCode和equals&quot;</span>，使用Comparable/Comparator的compareTo方法，返回<span class="number">0</span>视为相等。</span><br><span class="line">    |-当重写compareTo方法时，也重写equals方法，确保结果一致（不让人困惑）。</span><br></pre></td></tr></table></figure>
<div class="tabs" id="set"><ul class="nav-tabs"><li class="tab active"><a href="#set-1">HashSet和LinkedHashSet</a></li><li class="tab"><a href="#set-2">TreeSet</a></li></ul><div class="tab-content"><div class="tab-pane active" id="set-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashSet;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> id, String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Student的hashCode方法&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">prime</span> <span class="operator">=</span> <span class="number">31</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        result = prime * result + id;</span><br><span class="line">        result = prime * result + ((name == <span class="literal">null</span>) ? <span class="number">0</span> : name.hashCode());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">        <span class="comment">//return 1111;//测试hashCode值一样时会不会调用equals</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Student的equals方法&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == obj)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">other</span> <span class="operator">=</span> (Student) obj;</span><br><span class="line">        <span class="keyword">if</span> (id != other.id)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (name == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (other.name != <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSet</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">HashSet</span> <span class="variable">set1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();<span class="comment">//无序、去重</span></span><br><span class="line">        set1.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        set1.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        set1.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">        set1.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Object object : set1) &#123;</span><br><span class="line">            System.out.println(object);<span class="comment">//李四、张三、王五</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">LinkedHashSet</span> <span class="variable">set2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>();<span class="comment">//有序（添加顺序）、去重</span></span><br><span class="line">        set2.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        set2.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        set2.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">        set2.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Object object : set2) &#123;</span><br><span class="line">            System.out.println(object);<span class="comment">//张三、李四、王五</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//存储到HashSet/LinkedHashSet的元素会先hashCode，结果一样再equals</span></span><br><span class="line">        <span class="type">HashSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">3</span>,<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1</span>,<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        set.add(s1);<span class="comment">//Student的hashCode方法</span></span><br><span class="line">        set.add(s2);<span class="comment">//Student的hashCode方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="set-2"><figure class="highlight java"><figcaption><span>TestSet.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(<span class="type">int</span> id, String name)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student [id=&quot;</span> + id + <span class="string">&quot;, name=&quot;</span> + name + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">other</span> <span class="operator">=</span> (Student) o;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.id - other.id; <span class="comment">//返回0认为相等</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Student的hashCode方法&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">prime</span> <span class="operator">=</span> <span class="number">31</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        result = prime * result + id;</span><br><span class="line">        result = prime * result + ((name == <span class="literal">null</span>) ? <span class="number">0</span> : name.hashCode());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">        <span class="comment">//return 1111;//测试hashCode值一样时会不会调用equals</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Student的equals方法&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == obj)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">other</span> <span class="operator">=</span> (Student) obj;</span><br><span class="line">        <span class="keyword">if</span> (id != other.id)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (name == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (other.name != <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!name.equals(other.name))</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSet</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">TreeSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeSet</span>();</span><br><span class="line">        <span class="comment">//String类实现了Comparable接口，可以添加到TreeSet中</span></span><br><span class="line">        set.add(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="comment">//错误，Object类没实现Comparable接口，不可以添加到TreeSet中</span></span><br><span class="line">        <span class="comment">//set.add(new Object());</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">TreeSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeSet</span>();<span class="comment">//有序（大小顺序）、去重</span></span><br><span class="line">        <span class="comment">//Student实现了java.lang.Comparable接口，可以添加到TreeSet中</span></span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">3</span>,<span class="string">&quot;张三&quot;</span>)); </span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1</span>,<span class="string">&quot;李四&quot;</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">2</span>,<span class="string">&quot;王五&quot;</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">3</span>,<span class="string">&quot;张三&quot;</span>));</span><br><span class="line">        <span class="keyword">for</span> (Object object : set) &#123;</span><br><span class="line">            System.out.println(object);</span><br><span class="line">            <span class="comment">//Student [id=1, name=李四]</span></span><br><span class="line">            <span class="comment">//Student [id=2, name=王五]</span></span><br><span class="line">            <span class="comment">//Student [id=3, name=张三]</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//用匿名内部类实现了Comparator接口</span></span><br><span class="line">        <span class="type">TreeSet</span> <span class="variable">set</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeSet</span>(<span class="keyword">new</span> <span class="title class_">Comparator</span>()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object o1, Object o2)</span> &#123;</span><br><span class="line">                <span class="type">Student</span> <span class="variable">s1</span> <span class="operator">=</span> (Student) o1;</span><br><span class="line">                <span class="type">Student</span> <span class="variable">s2</span> <span class="operator">=</span> (Student) o2;</span><br><span class="line">                <span class="keyword">return</span> s1.getId() - s2.getId();</span><br><span class="line">            &#125;&#125;);</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">3</span>,<span class="string">&quot;张三&quot;</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">1</span>,<span class="string">&quot;李四&quot;</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="number">2</span>,<span class="string">&quot;王五&quot;</span>));</span><br><span class="line">        <span class="comment">//[Student [id=1, name=李四], Student [id=2, name=王五], Student [id=3, name=张三]]</span></span><br><span class="line">        System.out.println(set);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<h5 id="源码跟踪-1">源码跟踪</h5>
<p>Set的源码分析:<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Set的实现用Map。</span><br><span class="line">HashSet的实现用HashMap。</span><br><span class="line">TreeSet的实现用TreeMap。</span><br><span class="line">LinkedHashSet的实现用LinkedHashMap。</span><br></pre></td></tr></table></figure></p>
<p>Set的部分源代码摘要：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashSet</span><span class="params">()</span> &#123;</span><br><span class="line">    map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line">HashSet(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor, <span class="type">boolean</span> dummy) &#123;</span><br><span class="line">    map = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">TreeSet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;E,Object&gt;());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">LinkedHashSet</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(<span class="number">16</span>, <span class="number">.75f</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>那么存到Set中只有一个元素，又是怎么变成Map的<code>(key, value)</code>的呢？以HashSet为例：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">PRESENT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="comment">//把添加到Set中的元素作为map的key，PRESENT常量对象作为value。</span></span><br><span class="line">    <span class="comment">//利用了Map的key不可重复特点。</span></span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> map.keySet().iterator();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="map集合">Map集合</h3>
<p>Map集合接口的特点：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Map.Entry是Map接口的内部接口。每一种Map内部有自己的Map.Entry的实现类。</span></span><br><span class="line"><span class="comment">//在Map中存储数据，是将Key-value的数据存储在Map.Entry接口的实例中，再在Map集合中插入这个实例。</span></span><br><span class="line"><span class="number">1.</span><span class="string">&quot;(key, value)&quot;</span>形式的，key不允许重复，它们默认是Entry接口类型。</span><br><span class="line"><span class="number">2.</span>key和value都可以是任何引用类型的数据，常用String和Integer。</span><br><span class="line"><span class="number">3.</span>key和value是单向一对一关系，即通过指定的key总能找到唯一的、确定的value。</span><br></pre></td></tr></table></figure></p>
<h4 id="通用方法-1">通用方法</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">添加：</span><br><span class="line">|-Object <span class="title function_">put</span><span class="params">(Object key,Object value)</span>：将指定的值与此映射中的指定键关联。</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">putAll</span><span class="params">(Map t)</span>：从指定映射中将所有映射关系复制到此映射中。</span><br><span class="line">删除：</span><br><span class="line">|-<span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>：从此映射中移除所有映射关系。</span><br><span class="line">|-Object <span class="title function_">remove</span><span class="params">(Object key)</span>：如果存在一个键的映射关系，则将其从此映射中移除。</span><br><span class="line">查询：</span><br><span class="line">|-Object <span class="title function_">get</span><span class="params">(Object key)</span>：返回指定键所映射的值；如果此映射不包含该键的映射关系，则返回 <span class="literal">null</span>。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(Object key)</span>：如果此映射包含指定键的映射关系，则返回 <span class="literal">true</span>。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">containsValue</span><span class="params">(Object value)</span>：如果此映射将一个或多个键映射到指定值，则返回 <span class="literal">true</span>。</span><br><span class="line">|-<span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span>：如果此映射未包含key-value映射关系，则返回 <span class="literal">true</span>。</span><br><span class="line">其他：</span><br><span class="line">|-<span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>：返回此映射中的键-值映射关系数。</span><br></pre></td></tr></table></figure>
<h4 id="通用遍历-1">通用遍历</h4>
<p>Map接口没有继承java.lang.Iterable接口，不支持<code>Iterator iterator()</code>方法返回迭代器对象，不支持直接使用foreach循环进行遍历。<br />
Map的遍历方法：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">|-Set <span class="title function_">keySet</span><span class="params">()</span>：返回所有key构成的set集合。</span><br><span class="line">|-Collection <span class="title function_">values</span><span class="params">()</span>：返回所有value构成的Collection集合。</span><br><span class="line">|-Set <span class="title function_">entrySet</span><span class="params">()</span>：返回所有key-value对构成的Set集合。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight java"><figcaption><span>TestMap.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map.Entry;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeMap;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMap</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">HashMap</span> <span class="variable">map</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();<span class="comment">//创建map对象</span></span><br><span class="line">        map.put(<span class="string">&quot;许仙&quot;</span>, <span class="string">&quot;白娘子&quot;</span>);<span class="comment">//key, value形式</span></span><br><span class="line">        map.put(<span class="string">&quot;董永&quot;</span>, <span class="string">&quot;七仙女&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;牛郎&quot;</span>, <span class="string">&quot;织女&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;许仙&quot;</span>, <span class="string">&quot;小青&quot;</span>);<span class="comment">//key相同，value改为新值</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;所有的key:&quot;</span>);</span><br><span class="line">        <span class="type">Set</span> <span class="variable">keySet</span> <span class="operator">=</span> map.keySet();</span><br><span class="line">        <span class="keyword">for</span> (Object key : keySet) &#123;</span><br><span class="line">            System.out.println(key);<span class="comment">//许仙、董永、牛郎</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;所有的value：&quot;</span>);</span><br><span class="line">        <span class="type">Collection</span> <span class="variable">values</span> <span class="operator">=</span> map.values();</span><br><span class="line">        <span class="keyword">for</span> (Object value : values) &#123;</span><br><span class="line">            System.out.println(value);<span class="comment">//小青、七仙女、织女</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;所有的映射关系&quot;</span>);</span><br><span class="line">        <span class="type">Set</span> <span class="variable">entrySet</span> <span class="operator">=</span> map.entrySet();</span><br><span class="line">        <span class="keyword">for</span> (Object entry : entrySet) &#123;</span><br><span class="line">            System.out.println(entry);<span class="comment">//许仙=小青、董永=七仙女、牛郎=织女</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="map实现类">Map实现类</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用的hashCode和equals方法，判断key是否重复（相等）</span></span><br><span class="line"><span class="comment">//先判断key的hashCode相等，再走equals判断相等，两个结果都为true才算是相等。</span></span><br><span class="line">|-Hashtable：旧版哈希表，线程安全的。它的key和value不能为<span class="literal">null</span>。</span><br><span class="line">    |-Properties：Hashtable的子类，它的key和value的类型都是String，不能为<span class="literal">null</span>。</span><br><span class="line">        |-通常用于存储配置属性，为了可读性更好，增加了下面两个方法：</span><br><span class="line">        |-setProperty(String key,String value)</span><br><span class="line">        |-getProperty(String key)</span><br><span class="line">|-HashMap：新版哈希表，线程不安全。它允许key和value值为<span class="literal">null</span>。</span><br><span class="line">    |-LinkedHashMap：HashMap的子类，比HashMap多维护了映射关系的添加顺序。</span><br><span class="line"><span class="comment">//使用的Comparable和Comparator的compareTo方法，判断key是否重复（相等）</span></span><br><span class="line">|-TreeMap：使用基于红黑树的NavigableMap实现。</span><br><span class="line">    |-根据key实现的Comparable、或提供的Comparator排序，具体取决于使用的构造器方法。</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestProperties</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> System.getProperties();<span class="comment">//获取系统属性配置</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">p2</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;file.encoding&quot;</span>);<span class="comment">//当前源文件字符编码</span></span><br><span class="line">        System.out.println(p2);<span class="comment">//UTF-8</span></span><br><span class="line">        <span class="comment">//设置、获取配置属性</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">pro</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        pro.setProperty(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">        pro.setProperty(<span class="string">&quot;pwd&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> pro.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> pro.getProperty(<span class="string">&quot;pwd&quot;</span>);</span><br><span class="line">        System.out.println(user);<span class="comment">//test</span></span><br><span class="line">        System.out.println(password);<span class="comment">//123456</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="源码跟踪-2">源码跟踪</h4>
<p>1.HashMap中key的hashCode和equals方法非常重要，常见的hash算法有MD5、SHA等。<br />
2.HashMap和Hashtable是散列表，其中维护了一个长度为<strong>2的幂次方</strong>的<strong>Entry类型数组table</strong>，数组的每一个元素被称为一个桶(bucket)，添加的(key,value)都被封装为一个个Map.Entry类型的对象，放到了某个table[index]桶中。使用数组的目的是查询和添加的效率高，可以根据索引直接定位到某个table[index]。<br />
3.HashMap如何将(key,value)存入哪个index桶呢？<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">|-hash % table.length</span><br><span class="line">    |-结果是[<span class="number">0</span>,table.length-<span class="number">1</span>]范围的值，但%运算，不能保证均匀存放。</span><br><span class="line">|-hash &amp; (table.length-<span class="number">1</span>)</span><br><span class="line">    |-因为table.length是<span class="number">2</span>的幂次方，因此table.length-<span class="number">1</span>是一个二进制低位全是<span class="number">1</span>的数，所以&amp;操作完，结果也是[<span class="number">0</span>,table.length-<span class="number">1</span>]范围的值。</span><br><span class="line"><span class="comment">//为什么不用 hashCode &amp; (table.length-1)？以1.8为例讲解</span></span><br><span class="line"><span class="comment">//table数组一般不会很大，那么table.length-1大部分高位为0，导致总是只有最低的几位是有效的，即使hashCode实现再好也难以避免发生碰撞。</span></span><br><span class="line"><span class="comment">//h &gt;&gt;&gt; 16，保留了高16位，并且 h^ ，它对hashCode低位添加了随机性，混合了高位的部分特征，显著减少了碰撞冲突的发生。</span></span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="entry"><ul class="nav-tabs"><li class="tab active"><a href="#entry-1">1.7的Entry</a></li><li class="tab"><a href="#entry-2">1.8的Entry</a></li></ul><div class="tab-content"><div class="tab-pane active" id="entry-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_INITIAL_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">4</span>;<span class="comment">//初始容量16</span></span><br><span class="line"><span class="comment">//内部类</span></span><br><span class="line"><span class="keyword">transient</span> Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Entry</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;<span class="comment">//内部类为Entry</span></span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        Entry&lt;K,V&gt; next;</span><br><span class="line">        <span class="type">int</span> hash;</span><br><span class="line">  <span class="comment">//...省略</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//扩容</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">addEntry</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">int</span> bucketIndex)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((size &gt;= threshold) &amp;&amp; (<span class="literal">null</span> != table[bucketIndex])) &#123;</span><br><span class="line">        resize(<span class="number">2</span> * table.length);<span class="comment">//扩容为原来2倍</span></span><br><span class="line">        hash = (<span class="literal">null</span> != key) ? hash(key) : <span class="number">0</span>;</span><br><span class="line">        bucketIndex = indexFor(hash, table.length);</span><br><span class="line">    &#125;</span><br><span class="line">    createEntry(hash, key, value, bucketIndex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//分桶</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="title function_">indexFor</span><span class="params">(<span class="type">int</span> h, <span class="type">int</span> length)</span> &#123;</span><br><span class="line">    <span class="comment">// assert Integer.bitCount(length) == 1 : &quot;length must be a non-zero power of 2&quot;;</span></span><br><span class="line">    <span class="keyword">return</span> h &amp; (length-<span class="number">1</span>); <span class="comment">//hash &amp; (table.length-1)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//hash散列函数</span></span><br><span class="line"><span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object k)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> hashSeed;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> != h &amp;&amp; k <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">        <span class="keyword">return</span> sun.misc.Hashing.stringHash32((String) k);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    h ^= k.hashCode();</span><br><span class="line">    h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</span><br><span class="line">    <span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="entry-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_INITIAL_CAPACITY</span> <span class="operator">=</span> <span class="number">1</span> &lt;&lt; <span class="number">4</span>;<span class="comment">//初始容量16</span></span><br><span class="line"><span class="comment">//内部类</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;<span class="comment">//内部类为Node</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> hash;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        Node&lt;K,V&gt; next;</span><br><span class="line">   <span class="comment">//...省略</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//扩容</span></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldThr</span> <span class="operator">=</span> threshold;</span><br><span class="line">    <span class="type">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//oldCap &lt;&lt; 1，扩容为原来2倍</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//...省略</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//分桶</span></span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent, <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, i;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>) <span class="comment">////hash &amp; (table.length-1)</span></span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">//...省略</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//hash散列函数</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="comment">//hashCode值与(table.length-1)的按位与的结果，尽量的均匀分布</span></span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div>
<p>4.如何处理碰撞冲突：<br />
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">|-Hash系列：</span><br><span class="line">    |-数组+链表（JDK1<span class="number">.7</span>及之前）</span><br><span class="line">    |-数组+链表/红黑树（JDK1<span class="number">.8</span>及之后）</span><br><span class="line">|-TreeMap：红黑树。</span><br><span class="line">|-数组的优点：访问速度快，可根据索引直接定位到某个元素。</span><br><span class="line">|-链表的优点：不需要连续空间，在添加和删除元素时不需要移动元素，只需要修改前后元素的引用关系。</span><br><span class="line">    |-添加的(key,value)最终被封装为一个Map.Entry类型的对象，放到<span class="string">&quot;数组[index]&quot;</span>中。使用数组的目的是查询和添加的效率高。</span><br><span class="line">    |-HashMap会根据<span class="string">&quot;key的hashCode+公式/算法&quot;</span>，得到[index]。但不同的hashCode值，可能得到的[index]是相同的，这就冲突了。</span><br><span class="line">        |-旧版Hashtable把[index]相同的多个(key,value)用链表连接起来，但链表很长导致查询慢。</span><br><span class="line">        |-新版HashMap在链表很长时，使用二叉树提高查询效率。</span><br></pre></td></tr></table></figure></p>
<div class="tabs" id="hashmap1"><ul class="nav-tabs"><li class="tab active"><a href="#hashmap1-1">1.6的HashMap</a></li><li class="tab"><a href="#hashmap1-2">1.7的HashMap</a></li><li class="tab"><a href="#hashmap1-3">1.8的HashMap</a></li></ul><div class="tab-content"><div class="tab-pane active" id="hashmap1-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="keyword">new</span> <span class="title class_">HashMap</span>()：table数组直接初始化一个长度为<span class="number">16</span>的空数组，threshold=<span class="number">12</span>。</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="hashmap1-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">|-<span class="keyword">new</span> <span class="title class_">HashMap</span>()：table数组初始化为了一个长度为<span class="number">0</span>的空数组，threshold=<span class="number">12</span>。</span><br><span class="line">|-put()的存储过程：</span><br><span class="line">    |-发现数组table是空数组后，会把数组初始化为长度为<span class="number">16</span>的Entry类型的数组，并且把threshold设置为<span class="number">12</span>。</span><br><span class="line">        |-这里如果你手动指定了数组的capacity，如果它不是<span class="number">2</span>的n次方，会自动纠正为<span class="number">2</span>的n次方。</span><br><span class="line">        |-为什么要纠正为<span class="number">2</span>的n次方？后面算index = hash &amp; table.length-<span class="number">1</span>，这样才能保证[<span class="number">0</span>,table.length-<span class="number">1</span>]范围内。</span><br><span class="line">        |-<span class="number">2</span>的n次方，根据它的散列算法，可以保证比较均匀的分散在它的数组的各个位置。</span><br><span class="line">    |-如果key是<span class="literal">null</span>，都放入table[<span class="number">0</span>]中，但table[<span class="number">0</span>]中不只存key为<span class="literal">null</span>的对象。</span><br><span class="line">    |-index = hash &amp; table.length-<span class="number">1</span>计算index。</span><br><span class="line">    |-先判断table[index]下面是否有某个Entry的key与新的key的相同：hash值相同&amp;&amp;(满足key的地址相同||key的equals返回<span class="literal">true</span>)</span><br><span class="line">        |-如果有，就用新的value替换旧的value，就结束了。</span><br><span class="line">        |-如果没有，决定添加新的映射关系。</span><br><span class="line">    |-添加新的映射关系：先看是否需要扩容：size&gt;=threshold &amp;&amp; table[index]!=<span class="literal">null</span></span><br><span class="line">        |-如果扩容了，会重新计算hash和index，并调整存储位置。</span><br><span class="line">        |-再把新的映射关系<span class="keyword">new</span>为一个Entry的对象，放到table[index]中，原来table[index]的映射关系作为新的映射关系的next连接起来。</span><br><span class="line">    |-size++，元素个数增加。</span><br><span class="line"><span class="comment">//扩容条件：(size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="hashmap1-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">|-DEFAULT_INITIAL_CAPACITY：默认的初始容量，<span class="number">16</span>。</span><br><span class="line">|-MAXIMUM_CAPACITY：最大容量，<span class="number">1</span> &lt;&lt; <span class="number">30</span>。</span><br><span class="line">|-DEFAULT_LOAD_FACTOR：默认加载因子，<span class="number">0.75</span>。</span><br><span class="line">|-TREEIFY_THRESHOLD：默认树化阈值<span class="number">8</span>，当链表的长度达到这个值后，要考虑树化。</span><br><span class="line">|-UNTREEIFY_THRESHOLD：默认反树化阈值<span class="number">6</span>，当树中长度达到这个阈值后，要考虑变为链表。</span><br><span class="line">|-MIN_TREEIFY_CAPACITY：最小树化容量<span class="number">64</span>。当链表长度达到<span class="number">8</span>，且table的长度达到<span class="number">64</span>，才会树化，未达到<span class="number">64</span>，会先扩容。</span><br><span class="line">|-Node &lt;K,V&gt;[] table：数组。</span><br><span class="line">|-size：记录有效映射关系的对数，也是Entry对象的个数。</span><br><span class="line">|-<span class="type">int</span> threshold：阈值，当size达到阈值时，考虑扩容。</span><br><span class="line">|-<span class="type">double</span> loadFactor：加载因子，影响扩容的频率。</span><br><span class="line">|-<span class="keyword">new</span> <span class="title class_">HashMap</span>()：table数组初始化为了一个长度为<span class="number">0</span>的空数组，threshold=<span class="number">12</span>。</span><br><span class="line">|-put()的存储过程：</span><br><span class="line">    |-先计算key的hash值，如果key是<span class="literal">null</span>，hash值就是<span class="number">0</span>，如果非<span class="literal">null</span>，使用(h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>)得到hash值。</span><br><span class="line">    |-如果table是空的，先初始化table为Entry类型的数组，并且把threshold设置为<span class="number">12</span>。</span><br><span class="line">    |-index = hash &amp; table.length-<span class="number">1</span>计算index。</span><br><span class="line">    |-如果table[index]==<span class="literal">null</span>，那么直接创建一个Node结点存储到table[index]中。</span><br><span class="line">    |-如果table[index]!=<span class="literal">null</span>：</span><br><span class="line">        |-table[index]是一个TreeNode结点，说明table[index]下是一棵红黑树：</span><br><span class="line">            |-判断该树的某个结点的key与新的key是否相同：hash值相同&amp;&amp;(满足key的地址相同||key的equals返回<span class="literal">true</span>)</span><br><span class="line">                |-如果有，那么用新的value替换原来的value。</span><br><span class="line">                |-如果没有，将(key,value)封装为一个TreeNode结点，连接到红黑树中。</span><br><span class="line">        |-table[index]是一个链表</span><br><span class="line">            |-判断该链表中的某个结点的key与新的key是否相同：hash值相同&amp;&amp;(满足key的地址相同||key的equals返回<span class="literal">true</span>)</span><br><span class="line">                |-如果有，那么用新的value替换原来的value。</span><br><span class="line">                |-如果没有，判断table[index]下结点个数：</span><br><span class="line">                    |-如果没有达到TREEIFY_THRESHOLD(<span class="number">8</span>)个，那么(key,value)将会封装为一个Node结点直接链接到链表尾部。</span><br><span class="line">                    |-如果已经达到TREEIFY_THRESHOLD(<span class="number">8</span>)个，判断table.length是否达到MIN_TREEIFY_CAPACITY(<span class="number">64</span>)：</span><br><span class="line">                        |-如果没有达到，那么先扩容，扩容会导致所有元素重新计算index，并调整位置。</span><br><span class="line">                        |-如果已经达到，将该链表转成一棵自平衡的红黑树，并将结点链接到红黑树中。</span><br><span class="line">    |-如果新增结点而不是替换，那么size++，并且还要重新判断size是否达到threshold阈值，如果达到，还要扩容。</span><br><span class="line"><span class="comment">//扩容条件：++size &gt; threshold</span></span><br></pre></td></tr></table></figure></div></div></div>
<div class="tabs" id="hashmap2"><ul class="nav-tabs"><li class="tab active"><a href="#hashmap2-1">1.6的HashMap</a></li><li class="tab"><a href="#hashmap2-2">1.7的HashMap.初始化</a></li><li class="tab"><a href="#hashmap2-3">1.7的HashMap.put</a></li><li class="tab"><a href="#hashmap2-4">1.8的HashMap</a></li></ul><div class="tab-content"><div class="tab-pane active" id="hashmap2-1"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//loadFactor加载因子（影响扩容频率），默认值DEFAULT_LOAD_FACTOR为0.75</span></span><br><span class="line">    <span class="comment">//loadFactor太小比如0.1会导致扩容太频繁，太长比如0.9会导致链表很长查询速度低。</span></span><br><span class="line">    <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class="line">    <span class="comment">//threshold阈值，当size&gt;=threhold且新(key,valule)不为null时，考虑扩容</span></span><br><span class="line">    threshold = (<span class="type">int</span>)(DEFAULT_INITIAL_CAPACITY * DEFAULT_LOAD_FACTOR);<span class="comment">//threshold = 容量 * 加载因子</span></span><br><span class="line">    <span class="comment">//table是数组，</span></span><br><span class="line">    <span class="comment">//DEFAULT_INITIAL_CAPACITY：默认是16</span></span><br><span class="line">    table = <span class="keyword">new</span> <span class="title class_">Entry</span>[DEFAULT_INITIAL_CAPACITY];</span><br><span class="line">    init();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="hashmap2-2"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//DEFAULT_INITIAL_CAPACITY：默认初始容量16</span></span><br><span class="line">    <span class="comment">//DEFAULT_LOAD_FACTOR：默认加载因子0.75</span></span><br><span class="line">    <span class="built_in">this</span>(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor)</span> &#123;</span><br><span class="line">    <span class="comment">//校验initialCapacity合法性</span></span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal initial capacity: &quot;</span> + initialCapacity);</span><br><span class="line">    <span class="comment">//校验initialCapacity合法性                                       </span></span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="comment">//校验loadFactor合法性</span></span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal load factor: &quot;</span> + loadFactor);</span><br><span class="line">    <span class="comment">//加载因子，初始化为0.75</span></span><br><span class="line">    <span class="built_in">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="comment">// threshold 初始为初始容量                                  </span></span><br><span class="line">    threshold = initialCapacity;</span><br><span class="line">    init();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="hashmap2-3"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (table == EMPTY_TABLE) &#123;<span class="comment">//如果table数组是空的，那么先创建数组</span></span><br><span class="line">        inflateTable(threshold);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="literal">null</span>)<span class="comment">//如果key是null，单独处理</span></span><br><span class="line">        <span class="keyword">return</span> putForNullKey(value);</span><br><span class="line">    <span class="comment">//对key的hashCode进行干扰，算出一个hash值</span></span><br><span class="line">    <span class="comment">//根据key的hashCode用异或，无符号右移等各种运算，得到了一个int类型的hash值</span></span><br><span class="line">    <span class="comment">//因为我们下面要用hash值来算[index]，它的设计者认为用户重写的hashCode可能不够散列。</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">hash</span> <span class="operator">=</span> hash(key);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//计算新的映射关系应该存到table[i]位置，</span></span><br><span class="line">    <span class="comment">//hash &amp; table.length-1，可以保证i在[0,table.length-1]范围内</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> indexFor(hash, table.length);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//检查table[i]下面有没有key与我新的映射关系的key重复，如果重复替换value</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span class="literal">null</span>; e = e.next) &#123;</span><br><span class="line">        Object k;</span><br><span class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</span><br><span class="line">            <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(<span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modCount++;</span><br><span class="line">    addEntry(hash, key, value, i);<span class="comment">//添加新的映射关系</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">inflateTable</span><span class="params">(<span class="type">int</span> toSize)</span> &#123;</span><br><span class="line">    <span class="comment">// Find a power of 2 &gt;= toSize</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> roundUpToPowerOf2(toSize);<span class="comment">//容量是等于toSize值的最接近的2的n次方</span></span><br><span class="line">    <span class="comment">//计算阈值 = 容量 * 加载因子</span></span><br><span class="line">    threshold = (<span class="type">int</span>) Math.min(capacity * loadFactor, MAXIMUM_CAPACITY + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//创建Entry[]数组，长度为capacity</span></span><br><span class="line">    table = <span class="keyword">new</span> <span class="title class_">Entry</span>[capacity];</span><br><span class="line">    initHashSeedAsNeeded(capacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果key是null，直接存入[0]的位置</span></span><br><span class="line"><span class="keyword">private</span> V <span class="title function_">putForNullKey</span><span class="params">(V value)</span> &#123;</span><br><span class="line">    <span class="comment">//判断是否有重复的key，如果有重复的，就替换value</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[<span class="number">0</span>]; e != <span class="literal">null</span>; e = e.next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.key == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(<span class="built_in">this</span>);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//把新的映射关系存入[0]的位置，而且key的hash值用0表示</span></span><br><span class="line">    addEntry(<span class="number">0</span>, <span class="literal">null</span>, value, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">addEntry</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">int</span> bucketIndex)</span> &#123;</span><br><span class="line">    <span class="comment">//判断是否需要库容</span></span><br><span class="line">    <span class="comment">//扩容：（1）size达到阈值（2）table[i]正好非空</span></span><br><span class="line">    <span class="keyword">if</span> ((size &gt;= threshold) &amp;&amp; (<span class="literal">null</span> != table[bucketIndex])) &#123;</span><br><span class="line">        <span class="comment">//table扩容为原来的2倍，并且扩容后，会重新调整所有映射关系的存储位置</span></span><br><span class="line">        resize(<span class="number">2</span> * table.length);</span><br><span class="line">        <span class="comment">//新的映射关系的hash和index也会重新计算</span></span><br><span class="line">        hash = (<span class="literal">null</span> != key) ? hash(key) : <span class="number">0</span>;</span><br><span class="line">        bucketIndex = indexFor(hash, table.length);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//存入table中</span></span><br><span class="line">    createEntry(hash, key, value, bucketIndex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">createEntry</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">int</span> bucketIndex)</span> &#123;</span><br><span class="line">    Entry&lt;K,V&gt; e = table[bucketIndex];</span><br><span class="line">    <span class="comment">//原来table[i]下面的映射关系作为新的映射关系next</span></span><br><span class="line">    table[bucketIndex] = <span class="keyword">new</span> <span class="title class_">Entry</span>&lt;&gt;(hash, key, value, e);</span><br><span class="line">    size++;<span class="comment">//个数增加</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="hashmap2-4"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//目的：干扰hashCode值</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="comment">//如果key是null，hash是0</span></span><br><span class="line">    <span class="comment">//如果key非null，用key的hashCode值 与 key的hashCode值高16进行异或</span></span><br><span class="line">    <span class="comment">//        即就是用key的hashCode值高16位与低16位进行了异或的干扰运算</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    index = hash &amp; table.length-1</span></span><br><span class="line"><span class="comment">    如果用key的原始的hashCode值  与 table.length-1 进行按位与，那么基本上高16没机会用上。</span></span><br><span class="line"><span class="comment">    这样就会增加冲突的概率，为了降低冲突的概率，把高16位加入到hash信息中。</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent, <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; <span class="comment">//数组</span></span><br><span class="line">    Node&lt;K,V&gt; p; <span class="comment">//一个结点</span></span><br><span class="line">    <span class="type">int</span> n, i;<span class="comment">//n是数组的长度   i是下标</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//tab和table等价</span></span><br><span class="line">    <span class="comment">//如果table是空的</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//n = (tab = resize()).length;</span></span><br><span class="line">        tab = resize();</span><br><span class="line">        n = tab.length;<span class="comment">//n= 16</span></span><br><span class="line">        <span class="comment">//如果table是空的，resize()完成了，创建了一个长度为16的数组，threshold设置为12</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//i = (n - 1) &amp; hash ，下标 = 数组长度-1 &amp; hash</span></span><br><span class="line">    <span class="comment">//p = tab[i] </span></span><br><span class="line">    <span class="comment">//if(p==null) 条件满足的话说明 table[i]还没有元素</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="comment">//把新的映射关系直接放入table[i]</span></span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//newNode方法就创建了一个Node类型的新结点，新结点的next是null</span></span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; </span><br><span class="line">        K k;</span><br><span class="line">        <span class="comment">//p是table[i]中第一个结点</span></span><br><span class="line">        <span class="comment">//if(table[i]的第一个结点与新的映射关系的key重复)</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))&#123;</span><br><span class="line">            e = p;<span class="comment">//用e记录这个table[i]的第一个结点</span></span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)&#123;<span class="comment">//如果table[i]第一个结点是一个树结点</span></span><br><span class="line">            <span class="comment">//单独处理树结点</span></span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//table[i]的第一个结点不是树结点，也与新的映射关系的key不重复</span></span><br><span class="line">            <span class="comment">//binCount记录了table[i]下面链表的结点的个数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="comment">//如果p的下一个结点是空的，说明当前的p是最后一个结点</span></span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="comment">//把新的结点连接到table[i]的最后</span></span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">                    <span class="comment">//如果binCount&gt;=8-1，达到7个时</span></span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>)&#123; <span class="comment">// -1 for 1st</span></span><br><span class="line">                        <span class="comment">//要么扩容，要么树化</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//如果e的key和要存的key重复了，就跳出for循环</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果这个e不是null，说明有key重复，就考虑替换原来的value</span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)&#123;</span><br><span class="line">                e.value = value;</span><br><span class="line">            &#125;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;<span class="comment">//元素个数增加</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//size达到阈值</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)&#123;</span><br><span class="line">        resize();<span class="comment">//一旦扩容，重新调整所有映射关系的位置</span></span><br><span class="line">    &#125;</span><br><span class="line">    afterNodeInsertion(evict);<span class="comment">//什么也没干</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;<span class="comment">//oldTab原来的table</span></span><br><span class="line">    <span class="comment">//oldCap：原来数组的长度</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">    <span class="comment">//oldThr：原来的阈值</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldThr</span> <span class="operator">=</span> threshold;<span class="comment">//最开始threshold是0</span></span><br><span class="line">    <span class="type">int</span> newCap, newThr = <span class="number">0</span>;<span class="comment">//newCap新容量，newThr新阈值</span></span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;<span class="comment">//说明原来不是空数组</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;<span class="comment">//是否达到数组最大限制</span></span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                    oldCap &gt;= DEFAULT_INITIAL_CAPACITY)&#123;</span><br><span class="line">            <span class="comment">//newCap = 旧的容量*2 ，(新容量&lt;最大数组容量限制) 且 (oldCap &gt;= 初始容量16)</span></span><br><span class="line">            <span class="comment">//新阈值重新算 = 24，48 ....</span></span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>)&#123; <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY;<span class="comment">//新容量是默认初始化容量16</span></span><br><span class="line">        <span class="comment">//新阈值=默认的加载因子 * 默认的初始化容量 = 0.75*16 = 12</span></span><br><span class="line">        newThr = (<span class="type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">float</span> <span class="variable">ft</span> <span class="operator">=</span> (<span class="type">float</span>)newCap * loadFactor;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="type">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                    (<span class="type">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    threshold = newThr;<span class="comment">//阈值赋值为新阈值12，24.。。。</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建了一个新数组，长度为newCap，16，32,64.。。</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;)</span></span><br><span class="line">        Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> <span class="title class_">Node</span>[newCap];</span><br><span class="line">    table = newTab;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (oldTab != <span class="literal">null</span>) &#123;<span class="comment">//原来不是空数组</span></span><br><span class="line">        <span class="comment">//把原来的table中映射关系，倒腾到新的table中</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            <span class="keyword">if</span> ((e = oldTab[j]) != <span class="literal">null</span>) &#123;<span class="comment">//e是table下面的结点</span></span><br><span class="line">                oldTab[j] = <span class="literal">null</span>;<span class="comment">//把旧的table[j]位置清空</span></span><br><span class="line">                <span class="keyword">if</span> (e.next == <span class="literal">null</span>)<span class="comment">//如果是最后一个结点</span></span><br><span class="line">                    newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;<span class="comment">//重新计算e的在新table中的存储位置，然后放入</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)<span class="comment">//如果e是树结点</span></span><br><span class="line">                    <span class="comment">//把原来的树拆解，放到新的table</span></span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(<span class="built_in">this</span>, newTab, j, oldCap);</span><br><span class="line">                <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                    Node&lt;K,V&gt; loHead = <span class="literal">null</span>, loTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; hiHead = <span class="literal">null</span>, hiTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    <span class="comment">//把原来table[i]下面的整个链表，重新挪到了新的table中</span></span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (loTail == <span class="literal">null</span>)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            loTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (hiTail == <span class="literal">null</span>)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">while</span> ((e = next) != <span class="literal">null</span>);</span><br><span class="line">                    <span class="keyword">if</span> (loTail != <span class="literal">null</span>) &#123;</span><br><span class="line">                        loTail.next = <span class="literal">null</span>;</span><br><span class="line">                        newTab[j] = loHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (hiTail != <span class="literal">null</span>) &#123;</span><br><span class="line">                        hiTail.next = <span class="literal">null</span>;</span><br><span class="line">                        newTab[j + oldCap] = hiHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newTab;</span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line">Node&lt;K,V&gt; <span class="title function_">newNode</span><span class="params">(<span class="type">int</span> hash, K key, V value, Node&lt;K,V&gt; next)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(hash, key, value, next);<span class="comment">//创建一个新结点</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">treeifyBin</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="type">int</span> hash)</span> &#123;</span><br><span class="line">    <span class="type">int</span> n, index; </span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="comment">//MIN_TREEIFY_CAPACITY：最小树化容量64</span></span><br><span class="line">    <span class="comment">//如果table是空的，或者  table的长度没有达到64</span></span><br><span class="line">    <span class="keyword">if</span> (tab == <span class="literal">null</span> || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)</span><br><span class="line">        resize();<span class="comment">//先扩容</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((e = tab[index = (n - <span class="number">1</span>) &amp; hash]) != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//用e记录table[index]的结点的地址</span></span><br><span class="line">        TreeNode&lt;K,V&gt; hd = <span class="literal">null</span>, tl = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//do...while，把table[index]链表变为红黑树</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            TreeNode&lt;K,V&gt; p = replacementTreeNode(e, <span class="literal">null</span>);</span><br><span class="line">            <span class="keyword">if</span> (tl == <span class="literal">null</span>)</span><br><span class="line">                hd = p;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                p.prev = tl;</span><br><span class="line">                tl.next = p;</span><br><span class="line">            &#125;</span><br><span class="line">            tl = p;</span><br><span class="line">        &#125; <span class="keyword">while</span> ((e = e.next) != <span class="literal">null</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ((tab[index] = hd) != <span class="literal">null</span>)</span><br><span class="line">            hd.treeify(tab);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure></div></div></div>
<p>modCount：记录当前集合被修改的次数。在添加、删除这个两个操作都会修改这个变量。</p>
<p>当我们使用迭代器或foreach遍历时，如果你在foreach遍历时，自动调用迭代器的迭代方法，此时在遍历过程中调用了集合的add,remove方法时，modCount就会改变，而迭代器记录的modCount是开始迭代之前的，如果两个不一致，就会报异常，这说明有两个线路（线程）同时操作集合。这种操作有风险，为了保证结果的正确性，避免这样的情况发生，一旦发现modCount与expectedModCount不一致，立即保错。</p>
<p>此类的 iterator 和 listIterator
方法返回的迭代器是快速失败的：在创建迭代器之后，除非通过迭代器自身的
remove 或 add
方法从结构上对列表进行修改，否则在任何时间以任何方式对列表进行修改，迭代器都会抛出
ConcurrentModificationException。因此，面对并发的修改，迭代器很快就会完全失败，而不是冒着在将来某个不确定时间发生任意不确定行为的风险。</p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>SoundMemories
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://soundmemories.github.io/2020/02/24/Java/17.Java%E9%9B%86%E5%90%88/" title="Java集合">https://soundmemories.github.io/2020/02/24/Java/17.Java集合/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Java/" rel="tag"><i class="fa fa-tag"></i> Java</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/02/22/Java/16.%E7%BB%83%E4%B9%A0%E4%B8%89%EF%BC%9A%E5%9B%A2%E9%98%9F%E4%BA%BA%E5%91%98%E8%B0%83%E5%BA%A6%E8%BD%AF%E4%BB%B6/" rel="prev" title="练习三：团队人员调度软件">
                  <i class="fa fa-chevron-left"></i> 练习三：团队人员调度软件
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/02/27/Java/18.Java%E6%B3%9B%E5%9E%8B/" rel="next" title="Java泛型">
                  Java泛型 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">SoundMemories</span>
  </div>
  <div class="powered-by">由 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9tdXNlLw==">NexT.Muse</span> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.12/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"neutral","dark":"neutral"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.3/mermaid.min.js","integrity":"sha256-JFptYy4KzJ5OQP+Q9fubNf3cxpPPmZKqUOovyEONKrQ="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://soundmemories.github.io/2020/02/24/Java/17.Java%E9%9B%86%E5%90%88/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
