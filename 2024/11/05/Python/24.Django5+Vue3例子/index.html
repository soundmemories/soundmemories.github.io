<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Monda:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"soundmemories.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":true,"version":"8.17.1","exturl":true,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":null},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Django5 初始化 1.安装django等库： 123456# 建议使用conda虚拟环境安装pip install django# 不安装使用mysql会报错pip install mysqlclient# 用于连接mysql时规避ssl报错pip install pymysql 2.创建项目： 1django-admin startproject [project_name]">
<meta property="og:type" content="article">
<meta property="og:title" content="Django5+Vue3例子">
<meta property="og:url" content="https://soundmemories.github.io/2024/11/05/Python/24.Django5+Vue3%E4%BE%8B%E5%AD%90/index.html">
<meta property="og:site_name" content="SoundMemories">
<meta property="og:description" content="Django5 初始化 1.安装django等库： 123456# 建议使用conda虚拟环境安装pip install django# 不安装使用mysql会报错pip install mysqlclient# 用于连接mysql时规避ssl报错pip install pymysql 2.创建项目： 1django-admin startproject [project_name]">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://soundmemories.github.io/images/Python/JWT.png">
<meta property="og:image" content="https://soundmemories.github.io/images/Python/vue%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84.png">
<meta property="article:published_time" content="2024-11-04T16:00:00.000Z">
<meta property="article:modified_time" content="2024-11-13T07:32:30.299Z">
<meta property="article:author" content="SoundMemories">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://soundmemories.github.io/images/Python/JWT.png">


<link rel="canonical" href="https://soundmemories.github.io/2024/11/05/Python/24.Django5+Vue3%E4%BE%8B%E5%AD%90/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":"","permalink":"https://soundmemories.github.io/2024/11/05/Python/24.Django5+Vue3%E4%BE%8B%E5%AD%90/","path":"2024/11/05/Python/24.Django5+Vue3例子/","title":"Django5+Vue3例子"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Django5+Vue3例子 | SoundMemories</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">SoundMemories</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">10</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">10</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">129</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#django5"><span class="nav-number">1.</span> <span class="nav-text">Django5</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">1.1.</span> <span class="nav-text">初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.2.</span> <span class="nav-text">数据模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="nav-number">1.3.</span> <span class="nav-text">接口开发</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jwt%E8%AE%A4%E8%AF%81"><span class="nav-number">1.4.</span> <span class="nav-text">jwt认证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2"><span class="nav-number">1.5.</span> <span class="nav-text">登录页面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3"><span class="nav-number">1.5.1.</span> <span class="nav-text">登录接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#csrf%E5%A4%84%E7%90%86"><span class="nav-number">1.5.2.</span> <span class="nav-text">csrf处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E5%AF%B9%E8%B1%A1%E5%BA%8F%E5%88%97%E5%8C%96"><span class="nav-number">1.5.3.</span> <span class="nav-text">后端对象序列化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%AD%E9%97%B4%E4%BB%B6%E9%89%B4%E6%9D%83"><span class="nav-number">1.5.4.</span> <span class="nav-text">自定义中间件鉴权</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E9%A1%B5%E9%9D%A2"><span class="nav-number">1.6.</span> <span class="nav-text">主页面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A6%E4%BE%A7%E6%9D%83%E9%99%90%E8%8F%9C%E5%8D%95"><span class="nav-number">1.6.1.</span> <span class="nav-text">左侧权限菜单</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#vue3"><span class="nav-number">2.</span> <span class="nav-text">Vue3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96-1"><span class="nav-number">2.1.</span> <span class="nav-text">初始化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%90%AF%E5%8A%A8"><span class="nav-number">2.2.</span> <span class="nav-text">创建启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ui%E7%BB%84%E4%BB%B6"><span class="nav-number">2.3.</span> <span class="nav-text">UI组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jwt%E8%AE%A4%E8%AF%81-1"><span class="nav-number">2.4.</span> <span class="nav-text">jwt认证</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2-1"><span class="nav-number">2.5.</span> <span class="nav-text">登录页面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E5%B8%83%E5%B1%80"><span class="nav-number">2.5.1.</span> <span class="nav-text">基础布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89icon"><span class="nav-number">2.5.2.</span> <span class="nav-text">自定义icon</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E9%80%BB%E8%BE%91"><span class="nav-number">2.5.3.</span> <span class="nav-text">登录逻辑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E6%94%B6%E5%90%8E%E7%AB%AF%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.5.4.</span> <span class="nav-text">接收后端对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%B0%E4%BD%8F%E5%AF%86%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="nav-number">2.5.5.</span> <span class="nav-text">记住密码实现</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BB%E9%A1%B5%E9%9D%A2-1"><span class="nav-number">2.6.</span> <span class="nav-text">主页面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80"><span class="nav-number">2.6.1.</span> <span class="nav-text">主页面布局</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B7%A6%E4%BE%A7%E6%9D%83%E9%99%90%E8%8F%9C%E5%8D%95-1"><span class="nav-number">2.6.2.</span> <span class="nav-text">左侧权限菜单</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="nav-number">3.</span> <span class="nav-text">参考文献</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SoundMemories"
      src="/images/avstar.png">
  <p class="site-author-name" itemprop="name">SoundMemories</p>
  <div class="site-description" itemprop="description">今日事，今日毕</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">129</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NvdW5kbWVtb3JpZXM=" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;soundmemories"><i class="fab fa-github fa-fw"></i>GitHub</span>
      </span>
      <span class="links-of-author-item">
        <span class="exturl" data-url="bWFpbHRvOnNvdW5kbWVtb3JpZXNAMTYzLmNvbQ==" title="E-Mail → mailto:soundmemories@163.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <span class="exturl cc-opacity" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></span>
  </div>

        </div>
      </div>
    </div>

    
        <div class="pjax">
        </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://soundmemories.github.io/2024/11/05/Python/24.Django5+Vue3%E4%BE%8B%E5%AD%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avstar.png">
      <meta itemprop="name" content="SoundMemories">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoundMemories">
      <meta itemprop="description" content="今日事，今日毕">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Django5+Vue3例子 | SoundMemories">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Django5+Vue3例子
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-05 00:00:00" itemprop="dateCreated datePublished" datetime="2024-11-05T00:00:00+08:00">2024-11-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>13k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>47 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="django5">Django5</h1>
<h2 id="初始化">初始化</h2>
<p>1.安装django等库：<br />
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">建议使用conda虚拟环境安装</span></span><br><span class="line">pip install django</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">不安装使用mysql会报错</span></span><br><span class="line">pip install mysqlclient</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">用于连接mysql时规避ssl报错</span></span><br><span class="line">pip install pymysql</span><br></pre></td></tr></table></figure></p>
<p>2.创建项目：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject [project_name]</span><br></pre></td></tr></table></figure></p>
<p>3.创建模块：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 项目创建后，需要进入项目文件夹下执行</span></span><br><span class="line">python manage.py startapp [module_name]</span><br><span class="line"><span class="comment"># 本例创建user、role、menu三个模块</span></span><br><span class="line"><span class="comment"># 在每个模块下手动创建urls.py文件，子路由。</span></span><br><span class="line"><span class="comment"># 子路由中要先写空</span></span><br></pre></td></tr></table></figure></p>
<p>4.1将子路由，加入到主路由中：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主路由的urls.py中，添加子路由</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&quot;user/&quot;</span>, include(<span class="string">&quot;user.urls&quot;</span>)),</span><br><span class="line">    path(<span class="string">&quot;role/&quot;</span>, include(<span class="string">&quot;role.urls&quot;</span>)),</span><br><span class="line">    path(<span class="string">&quot;menu/&quot;</span>, include(<span class="string">&quot;menu.urls&quot;</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>4.2将模块加入到配置中：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在项目目录下，settings.py中找到INSTALLED_APPS，添加模块</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&quot;user.apps.UserConfig&quot;</span>,</span><br><span class="line">    <span class="string">&quot;role.apps.RoleConfig&quot;</span>,</span><br><span class="line">    <span class="string">&quot;menu.apps.MenuConfig&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>4.3配置数据库：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在项目目录下，settings.py中找到DATABASES，配置为mysql</span></span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&quot;default&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;ENGINE&quot;</span>: <span class="string">&quot;django.db.backends.mysql&quot;</span>,</span><br><span class="line">        <span class="string">&quot;NAME&quot;</span>: <span class="string">&quot;django&quot;</span>, <span class="comment"># 数据库名称</span></span><br><span class="line">        <span class="string">&quot;USER&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">        <span class="string">&quot;PASSWORD&quot;</span>: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">        <span class="string">&quot;HOST&quot;</span>: <span class="string">&quot;192.168.137.36&quot;</span>,</span><br><span class="line">        <span class="string">&quot;PORT&quot;</span>: <span class="string">&quot;3306&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="数据模型">数据模型</h2>
<p>1.打开user模块的models.py，创建实体类：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysUser</span>(models.Model):</span><br><span class="line">    <span class="built_in">id</span> = models.AutoField(primary_key=<span class="literal">True</span>)</span><br><span class="line">    username = models.CharField(max_length=<span class="number">100</span>, unique=<span class="literal">True</span>, verbose_name=<span class="string">&quot;用户名&quot;</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">100</span>, verbose_name=<span class="string">&quot;密码&quot;</span>)</span><br><span class="line">    avatar = models.CharField(max_length=<span class="number">255</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;用户头像&quot;</span>)</span><br><span class="line">    email = models.CharField(max_length=<span class="number">100</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;用户邮箱&quot;</span>)</span><br><span class="line">    phonenumber = models.CharField(max_length=<span class="number">11</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;手机号码&quot;</span>)</span><br><span class="line">    login_date = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;最后登录时间&quot;</span>)</span><br><span class="line">    status = models.IntegerField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;帐号状态（0正常 1停用）&quot;</span>)</span><br><span class="line">    create_time = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;创建时间&quot;</span>)</span><br><span class="line">    update_time = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;更新时间&quot;</span>)</span><br><span class="line">    remark = models.CharField(max_length=<span class="number">500</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;备注&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>: <span class="comment"># 元数据</span></span><br><span class="line">        db_table = <span class="string">&quot;sys_user&quot;</span> <span class="comment"># 定义数据库中表名，不写默认为&quot;app名_实体类名&quot;</span></span><br></pre></td></tr></table></figure></p>
<p>2.使用python创建的实体类，反向创建数据库表：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 示例这里[module_name]为user, 成功后出现user/migrations/0001_initial.py文件</span></span><br><span class="line"><span class="comment"># 生成指定module的迁移文件（不指定会生成全部module的）</span></span><br><span class="line">python manage.py makemigrations [module_name]</span><br><span class="line"><span class="comment"># 执行指定module的迁移文件，创建数据库表（不指定会生成全部module的）</span></span><br><span class="line">python manage.py migrate [module_name]</span><br></pre></td></tr></table></figure></p>
<p>使用时遇到ssl问题，安装pymysql，并在settings.py中添加：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure></p>
<p>3.为了后续使用，在数据库表中插入几条数据：<br />
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">USE django; <span class="comment">-- 选择数据库</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`, `phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;python222&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;20240906202303.jpg&#x27;</span>,<span class="string">&#x27;caofeng2014@126.com&#x27;</span>,<span class="string">&#x27;18862857104&#x27;</span>,<span class="string">&#x27;2024-08-08&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2024-08-08&#x27;</span>,<span class="string">&#x27;2024-08-08&#x27;</span>,<span class="string">&#x27;超级管理员&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`,`phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;20240808230603.jpg&#x27;</span>,<span class="string">&#x27;caofeng2014@126.com&#x27;</span>,<span class="string">&#x27;18862857104&#x27;</span>,<span class="string">&#x27;2024-08-08&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;2024-08-08&#x27;</span>,<span class="string">&#x27;2024-08-14&#x27;</span>,<span class="string">&#x27;测试用户&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`,`phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;20240808230603.jpg&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`,`phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;20240808230603.jpg&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`,`phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;20240808230603.jpg&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;0&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`, `phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;11&#x27;</span>,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;20240808230603.jpg&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1&#x27;</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>,<span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`,`phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;14&#x27;</span>,<span class="string">&#x27;666&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;default.jpg&#x27;</span>,<span class="string">&#x27;caofeng2014@126.com&#x27;</span>,<span class="string">&#x27;18862857104&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2024-08-13&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;33&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`,`phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;15&#x27;</span>,<span class="string">&#x27;jack&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;default.jpg&#x27;</span>,<span class="string">&#x27;caofeng2014@126.com&#x27;</span>,<span class="string">&#x27;18862857104&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2024-08-13&#x27;</span>,<span class="string">&#x27;2024-09-06&#x27;</span>,<span class="string">&#x27;禁用用户测试4&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`,`phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;16&#x27;</span>,<span class="string">&#x27;12323232&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;default.jpg&#x27;</span>,<span class="string">&#x27;1@126.com&#x27;</span>,<span class="string">&#x27;18862857104&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2024-08-18&#x27;</span>,<span class="string">&#x27;2024-08-18&#x27;</span>,<span class="string">&#x27;115&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user` (`id`, `username`, `password`, `avatar`, `email`,`phonenumber`, `login_date`, `status`, `create_time`, `update_time`, `remark`) <span class="keyword">values</span>(<span class="string">&#x27;17&#x27;</span>,<span class="string">&#x27;marry&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;default.jpg&#x27;</span>,<span class="string">&#x27;111@qq.com&#x27;</span>,<span class="string">&#x27;15586521012&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2024-09-05&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;555&#x27;</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="接口开发">接口开发</h2>
<p>1.尽可能使用Restful规范：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">get：/api/user/test <span class="comment"># 测试</span></span><br><span class="line">get：/api/user/users <span class="comment"># 获取用户列表</span></span><br><span class="line">post：/api/user/users <span class="comment"># 新增用户</span></span><br><span class="line">get：/api/user/users/&#123;<span class="built_in">id</span>&#125; <span class="comment"># 获取用户信息</span></span><br><span class="line">put：/api/user/users/&#123;<span class="built_in">id</span>&#125; <span class="comment"># 更新用户</span></span><br><span class="line">delete：/api/user/users/&#123;<span class="built_in">id</span>&#125; <span class="comment"># 删除用户</span></span><br></pre></td></tr></table></figure></p>
<p>2.创建视图，在 user/views.py 中添加：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.views <span class="keyword">import</span> View</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request</span>):</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;info&#x27;</span>: <span class="string">&#x27;测试！&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<p>3.创建路由映射，在 user/urls.py 中添加：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> user.views <span class="keyword">import</span> TestView</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;test&#x27;</span>, TestView.as_view(), name=<span class="string">&#x27;test&#x27;</span>), <span class="comment"># 测试</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>4.启动项目，访问测试接口 http://127.0.0.1:8000/api/user/test：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认地址为127.0.0.1，端口为8000</span></span><br><span class="line">python manage.py runserver <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">8000</span></span><br></pre></td></tr></table></figure></p>
<p>5.测试接口中，增加数据库数据查询，修改 user/views.py：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> JsonResponse</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.views <span class="keyword">import</span> View</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request</span>):</span><br><span class="line">        userList_obj = SysUser.objects.<span class="built_in">all</span>() <span class="comment"># 返回的是QuerySet对象(外部容器)，对象中每一个元素是object(容器内部元素)</span></span><br><span class="line">        <span class="built_in">print</span>(userList_obj, <span class="built_in">type</span>(userList_obj))  <span class="comment"># &lt;QuerySet [&lt;SysUser: SysUser object (1)&gt;,...], &lt;class &#x27;django.db.models.query.QuerySet&#x27;&gt;</span></span><br><span class="line">        userList_dict = userList_obj.values() <span class="comment"># 返回的是QuerySet对象(外部容器)，对象中每一个元素是dict(容器内部元素)</span></span><br><span class="line">        <span class="built_in">print</span>(userList_dict,<span class="built_in">type</span>(userList_dict)) <span class="comment"># &lt;QuerySet [&#123;&#x27;id&#x27;: 1, &#x27;username&#x27;:&#x27;python222&#x27;,...&#125;,...], &lt;class &#x27;django.db.models.query.QuerySet&#x27;&gt;</span></span><br><span class="line">        userList = <span class="built_in">list</span>(userList_dict) <span class="comment"># 返回的是List对象(外部容器)，对象中每一个元素是dict(容器内部元素)</span></span><br><span class="line">        <span class="built_in">print</span>(userList, <span class="built_in">type</span>(userList)) <span class="comment"># [&#123;&#x27;id&#x27;: 1, &#x27;username&#x27;: &#x27;python222&#x27;,...&#125;,...], &lt;class &#x27;list&#x27;&gt;</span></span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;info&#x27;</span>: userList&#125;) <span class="comment"># django只能返回可序列化的类型数据(QuerySet对象不能被序列化)</span></span><br></pre></td></tr></table></figure>
<h2 id="jwt认证">jwt认证</h2>
<p>Json web token (JWT),
是为了在网络应用环境间传递声明而执行的一种基于JSON的开放标准（(RFC7519)；<br />
JWT就是一段字符串，用来进行用户身份认证的凭证，该字符串分成三段【头部、载荷、签证】。<br />
<img src="/images/Python/JWT.png" width="70%"></p>
<p>DRF（Django Rest
Framework）是基于流行的Web框架Django构建的一个轻量级REST框架，旨在简化复杂的数据访问API的开发过程。如果你已经熟悉Django框架，那么学习DRF将会非常直接，因为它使用了很多Django中已有的概念，并添加了额外的功能来支持RESTful
API的设计。<br />
DRF使用的好处：支持RESTful风格服务端接口。内建了序列化功能，模型转json，json转模型都都不用手写了。</p>
<p>1.在DRF框架基础上使用JWT认证，需要安装这两个库：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># DRF</span></span><br><span class="line">pip install djangorestframework</span><br><span class="line"><span class="comment"># jwt</span></span><br><span class="line">pip install djangorestframework-jwt</span><br></pre></td></tr></table></figure></p>
<p>2.在 settings.py里 INSTALLED_APPS 中添加这两个库：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&quot;django.contrib.admin&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.auth&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.contenttypes&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.staticfiles&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;rest_framework&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;rest_framework_jwt&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;user.apps.UserConfig&quot;</span>, <span class="comment"># 新增</span></span><br><span class="line">    <span class="string">&quot;role.apps.RoleConfig&quot;</span>, <span class="comment"># 新增</span></span><br><span class="line">    <span class="string">&quot;menu.apps.MenuConfig&quot;</span>  <span class="comment"># 新增</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>3.1在 user/views.py
中添加一个测试api，进行模拟登录，返回token：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework_jwt.settings <span class="keyword">import</span> api_settings</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试jwt</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JwtTestView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request</span>):</span><br><span class="line">        user = SysUser.objects.get(username=<span class="string">&#x27;python222&#x27;</span>, password=<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line">        jwt_payload_handler = api_settings.JWT_PAYLOAD_HANDLER <span class="comment"># 小写快捷键ctrl+shift+U</span></span><br><span class="line">        jwt_encode_handler = api_settings.JWT_ENCODE_HANDLER</span><br><span class="line">        <span class="comment"># 将用户对象传递进去，获取到该对象的属性值</span></span><br><span class="line">        payload = jwt_payload_handler(user)</span><br><span class="line">        <span class="comment"># 将属性值编码成jwt格式的字符串</span></span><br><span class="line">        token = jwt_encode_handler(payload)</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;token&#x27;</span>: token&#125;)</span><br></pre></td></tr></table></figure></p>
<p>3.2在 user/urls.py 中添加路由映射：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> user.views <span class="keyword">import</span> TestView, JwtTestView</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;test&#x27;</span>, TestView.as_view(), name=<span class="string">&#x27;test&#x27;</span>), <span class="comment"># 测试数据库读取</span></span><br><span class="line">    path(<span class="string">&#x27;jwt_test&#x27;</span>, JwtTestView.as_view(), name=<span class="string">&#x27;jwt_test&#x27;</span>), <span class="comment"># jwt</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>之后启动Django，测试user/jwt_test接口，会返回token。</p>
<p>3.3进一步，修改TestView数据查询接口，要求有token才可以访问：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TestView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, request</span>):</span><br><span class="line">        token = request.META.get(<span class="string">&#x27;HTTP_AUTHORIZATION&#x27;</span>) <span class="comment"># 注意，django默认在头前面加上&quot;HTTP_&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;token:&quot;</span>, token)</span><br><span class="line">        <span class="keyword">if</span> token != <span class="literal">None</span> <span class="keyword">and</span> token != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            userList_obj = SysUser.objects.<span class="built_in">all</span>() </span><br><span class="line">            userList_dict = userList_obj.values() </span><br><span class="line">            userList = <span class="built_in">list</span>(userList_dict) </span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;info&#x27;</span>: userList&#125;,</span><br><span class="line">                                json_dumps_params=&#123;<span class="string">&#x27;ensure_ascii&#x27;</span>: <span class="literal">False</span>&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># &#x27;ensure_ascii&#x27;: False  设置json编码参数，确保中文字符不会被转译</span></span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">401</span>, <span class="string">&#x27;info&#x27;</span>: <span class="string">&#x27;没有访问权限！&#x27;</span>&#125;, </span><br><span class="line">                                json_dumps_params=&#123;<span class="string">&#x27;ensure_ascii&#x27;</span>: <span class="literal">False</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<p>4.1前后端是分离项目，两个项目的地址是在不同域中，要在后端配置跨域访问。<br />
在Django中，有人开发了cors-header的middleware只需在settings.py中做一些简单的配置即可，首先安装库：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装django-cors-headers库</span></span><br><span class="line">pip install django-cors-headers</span><br></pre></td></tr></table></figure></p>
<p>4.2配置cors：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># setting.py中新增如下：</span></span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ... ,</span><br><span class="line">    <span class="string">&quot;corsheaders&quot;</span> ,</span><br><span class="line">    ... ,</span><br><span class="line">    ]</span><br><span class="line"><span class="comment"># CorsMiddleware需要放在第一位，不放在第一位，可能会造成某些请求没有添加CORS</span></span><br><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&quot;corsheaders.middleware.CorsMiddleware&quot;</span>,</span><br><span class="line">    ... ,</span><br><span class="line">    ]</span><br><span class="line"><span class="comment"># 设置访问白名单，指定所有域名(ip)都可以访问后端接口, 默认为False</span></span><br><span class="line">CORS_ORIGIN_ALLOW_ALL = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 设置允许携带cookie</span></span><br><span class="line">CORS_ALLOW_CREDENTIALS = <span class="literal">True</span></span><br><span class="line"><span class="comment"># 设置默认允许请求头方法</span></span><br><span class="line">CORS_ALLOW_METHODS = [</span><br><span class="line">    <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PUT&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;PATCH&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;DELETE&#x27;</span>,</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure></p>
<h2 id="登录页面">登录页面</h2>
<h3 id="登录接口">登录接口</h3>
<p>1.在 user/views.py 中添加登录接口：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LoginView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, request</span>):</span><br><span class="line">        suername = request.GET.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        password = request.GET.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            user = SysUser.objects.get(username=suername, password=password)</span><br><span class="line">            jwt_payload_handler = api_settings.JWT_PAYLOAD_HANDLER</span><br><span class="line">            jwt_encode_handler = api_settings.JWT_ENCODE_HANDLER</span><br><span class="line">            <span class="comment"># 将用户对象传递进去，获取到该对象的属性值</span></span><br><span class="line">            payload = jwt_payload_handler(user)</span><br><span class="line">            <span class="comment"># 将属性值编码成jwt格式的字符串</span></span><br><span class="line">            token = jwt_encode_handler(payload)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(e)</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">500</span>, <span class="string">&#x27;info&#x27;</span>: <span class="string">&#x27;用户名或密码错误！&#x27;</span>&#125;)</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;token&#x27;</span>:token, <span class="string">&#x27;info&#x27;</span>: <span class="string">&quot;登陆成功&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<p>2.在 user/urls.py 中添加路由映射：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> user.views <span class="keyword">import</span> TestView, JwtTestView, LoginView</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...,</span><br><span class="line">    path(<span class="string">&#x27;login&#x27;</span>, LoginView.as_view(), name=<span class="string">&#x27;login&#x27;</span>), <span class="comment"># 登录</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h3 id="csrf处理">csrf处理</h3>
<p>前端登录页，通过axios访问后端时，报
<code>CSRF verification failed. Request aborted.</code> 错误。<br />
CSRF（跨站请求伪造）是一种攻击类型，它利用用户在已登录状态下的信任，以执行未授权的操作。报这个错误通常表示你的请求没有通过
CSRF 验证。<br />
Django 默认启用了 CSRF 保护，因此需要确保你的请求包含正确的 CSRF
令牌，这一般在提交Form表单时需要此令牌，可以在在提交表单时加上 CSRF
token。因为本例子是前后端分离，带了jwt的token验证，就不要 CSRF
令牌保护了，所以需要关闭它。</p>
<p>在Django中，可以通过以下方式关闭CSRF保护：<br />
1.在settings.py中，找到MIDDLEWARE设置，注释掉'django.middleware.csrf.CsrfViewMiddleware'这一行。<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&quot;corsheaders.middleware.CorsMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.security.SecurityMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions.middleware.SessionMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.common.CommonMiddleware&quot;</span>,</span><br><span class="line">    <span class="comment"># &quot;django.middleware.csrf.CsrfViewMiddleware&quot;,</span></span><br><span class="line">    <span class="string">&quot;django.contrib.auth.middleware.AuthenticationMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages.middleware.MessageMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.clickjacking.XFrameOptionsMiddleware&quot;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><br />
2.在views.py中，使用@csrf_exempt装饰器来标记不需要CSRF保护的视图函数。</p>
<h3 id="后端对象序列化">后端对象序列化</h3>
<p>如果向把查询到的user对象，返回给前端，需要把user对象序列化成json格式，使用DRF的序列化器.<br />
1.在 user/models.py 中添加序列化器：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your models here.</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysUser</span>(models.Model):</span><br><span class="line">    <span class="built_in">id</span> = models.AutoField(primary_key=<span class="literal">True</span>)</span><br><span class="line">    username = models.CharField(max_length=<span class="number">100</span>, unique=<span class="literal">True</span>, verbose_name=<span class="string">&quot;用户名&quot;</span>)</span><br><span class="line">    password = models.CharField(max_length=<span class="number">100</span>, verbose_name=<span class="string">&quot;密码&quot;</span>)</span><br><span class="line">    avatar = models.CharField(max_length=<span class="number">255</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;用户头像&quot;</span>)</span><br><span class="line">    email = models.CharField(max_length=<span class="number">100</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;用户邮箱&quot;</span>)</span><br><span class="line">    phonenumber = models.CharField(max_length=<span class="number">11</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;手机号码&quot;</span>)</span><br><span class="line">    login_date = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;最后登录时间&quot;</span>)</span><br><span class="line">    status = models.IntegerField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;帐号状态（0正常 1停用）&quot;</span>)</span><br><span class="line">    create_time = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;创建时间&quot;</span>)</span><br><span class="line">    update_time = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;更新时间&quot;</span>)</span><br><span class="line">    remark = models.CharField(max_length=<span class="number">500</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;备注&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&quot;sys_user&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># DRF框架序列化</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysUserSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = SysUser <span class="comment"># 序列化模型类</span></span><br><span class="line">        fields = <span class="string">&#x27;__all__&#x27;</span> <span class="comment"># 序列化所有字段</span></span><br></pre></td></tr></table></figure></p>
<p>2.在 user/views.py
中修改LoginView，响应中把序列化的user对象返回：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LoginView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, request</span>):</span><br><span class="line">        suername = request.GET.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">        password = request.GET.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            user = SysUser.objects.get(username=suername, password=password)</span><br><span class="line">            jwt_payload_handler = api_settings.JWT_PAYLOAD_HANDLER</span><br><span class="line">            jwt_encode_handler = api_settings.JWT_ENCODE_HANDLER</span><br><span class="line">            <span class="comment"># 将用户对象传递进去，获取到该对象的属性值</span></span><br><span class="line">            payload = jwt_payload_handler(user)</span><br><span class="line">            <span class="comment"># 将属性值编码成jwt格式的字符串</span></span><br><span class="line">            token = jwt_encode_handler(payload)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="comment"># print(e)</span></span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">500</span>, <span class="string">&#x27;info&#x27;</span>: <span class="string">&#x27;用户名或密码错误！&#x27;</span>&#125;)</span><br><span class="line">        <span class="comment"># 直接返回suer前端会报&quot;Object of type SysUser is not JSON serializable&quot;错误</span></span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;token&#x27;</span>:token, <span class="string">&#x27;user&#x27;</span>:SysUserSerializer(user).data, <span class="string">&#x27;info&#x27;</span>: <span class="string">&quot;登陆成功&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="自定义中间件鉴权">自定义中间件鉴权</h3>
<p>后端会有很多接口，我们需要带token仅限鉴权，如果每个接口都去判断token，这个冗余代码太多了。<br />
所以我们利用自定义中间件来统一实现下所有接口的鉴权功能。</p>
<p>1.新建 user/middleware.py，编写中间件：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.utils.deprecation <span class="keyword">import</span> MiddlewareMixin</span><br><span class="line"><span class="keyword">from</span> jwt <span class="keyword">import</span> ExpiredSignatureError, InvalidTokenError, PyJWTError</span><br><span class="line"><span class="keyword">from</span> rest_framework_jwt.settings <span class="keyword">import</span> api_settings</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JwtAuthenticationMiddleware</span>(<span class="title class_ inherited__">MiddlewareMixin</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_request</span>(<span class="params">self, request</span>):</span><br><span class="line">        white_list = [<span class="string">&quot;/user/login&quot;</span>]  <span class="comment"># 请求白名单</span></span><br><span class="line">        path = request.path</span><br><span class="line">        <span class="comment"># 非白名单+非媒体文件，则进行token验证</span></span><br><span class="line">        <span class="keyword">if</span> path <span class="keyword">not</span> <span class="keyword">in</span> white_list <span class="keyword">and</span> <span class="keyword">not</span> path.startswith(<span class="string">&quot;/media&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;要进行token验证&quot;</span>)</span><br><span class="line">            token = request.META.get(<span class="string">&#x27;HTTP_AUTHORIZATION&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;token:&quot;</span>, token)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                jwt_decode_handler = api_settings.JWT_DECODE_HANDLER</span><br><span class="line">                jwt_decode_handler(token)</span><br><span class="line">            <span class="keyword">except</span> ExpiredSignatureError:</span><br><span class="line">                <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;Token过期，请重新登录！&#x27;</span>)</span><br><span class="line">            <span class="keyword">except</span> InvalidTokenError:</span><br><span class="line">                <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;Token验证失败！&#x27;</span>)</span><br><span class="line">            <span class="keyword">except</span> PyJWTError:</span><br><span class="line">                <span class="keyword">return</span> HttpResponse(<span class="string">&#x27;Token验证异常！&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;不需要token验证&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure></p>
<p>2.在 项目/settings.py 中注册中间件：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&quot;corsheaders.middleware.CorsMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.security.SecurityMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.sessions.middleware.SessionMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.common.CommonMiddleware&quot;</span>,</span><br><span class="line">    <span class="comment"># &quot;django.middleware.csrf.CsrfViewMiddleware&quot;,</span></span><br><span class="line">    <span class="string">&quot;django.contrib.auth.middleware.AuthenticationMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.contrib.messages.middleware.MessageMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;django.middleware.clickjacking.XFrameOptionsMiddleware&quot;</span>,</span><br><span class="line">    <span class="string">&quot;user.middleware.JwtAuthenticationMiddleware&quot;</span> <span class="comment"># 新增，放在最后</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h2 id="主页面">主页面</h2>
<h3 id="左侧权限菜单">左侧权限菜单</h3>
<p>我们<strong>用户登录</strong>的时候
，可以把<strong>用户对应角色的所有权限菜单</strong>一起获取。<br />
我们这时候也需要用到角色表，权限表，以及用户-角色关联表(多对多)，角色-权限关联表(多对多)。所以我们把这些model也建立下。<br />
django创建表的命令：<br />
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations [module_name]</span><br><span class="line">python manage.py migrate [module_name]</span><br></pre></td></tr></table></figure></p>
<p>1.在 role/models.py 和 menu/models.py 中编写模型类：<br />
<div class="tabs" id="caidan"><ul class="nav-tabs"><li class="tab active"><a href="#caidan-1">menu</a></li><li class="tab"><a href="#caidan-2">role</a></li></ul><div class="tab-content"><div class="tab-pane active" id="caidan-1"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> role.models <span class="keyword">import</span> SysRole</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysMenu</span>(models.Model):</span><br><span class="line">    <span class="built_in">id</span> = models.AutoField(primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = models.CharField(max_length=<span class="number">50</span>, unique=<span class="literal">True</span>, verbose_name=<span class="string">&quot;菜单名称&quot;</span>)</span><br><span class="line">    icon = models.CharField(max_length=<span class="number">100</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;菜单图标&quot;</span>)</span><br><span class="line">    parent_id = models.IntegerField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;父菜单ID&quot;</span>)</span><br><span class="line">    order_num = models.IntegerField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;显示顺序&quot;</span>)</span><br><span class="line">    path = models.CharField(max_length=<span class="number">200</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;路由地址&quot;</span>)</span><br><span class="line">    component = models.CharField(max_length=<span class="number">255</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;组件路径&quot;</span>)</span><br><span class="line">    menu_type = models.CharField(max_length=<span class="number">1</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;菜单类型（M目录 C菜单 F按钮）&quot;</span>)</span><br><span class="line">    perms = models.CharField(max_length=<span class="number">100</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;权限标识&quot;</span>)</span><br><span class="line">    create_time = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;创建时间&quot;</span>, )</span><br><span class="line">    update_time = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;更新时间&quot;</span>)</span><br><span class="line">    remark = models.CharField(max_length=<span class="number">500</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;备注&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__lt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.order_num &lt; other.order_num</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&quot;sys_menu&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysMenuSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="comment"># 有children属性，也要序列化</span></span><br><span class="line">    children = serializers.SerializerMethodField()</span><br><span class="line">    <span class="comment"># 如果有子节点，动态添加子节点</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_children</span>(<span class="params">self, obj</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(obj, <span class="string">&quot;children&quot;</span>):</span><br><span class="line">            serializerMenuList: <span class="built_in">list</span>[SysMenuSerializer2] = <span class="built_in">list</span>()</span><br><span class="line">            <span class="keyword">for</span> sysMenu <span class="keyword">in</span> obj.children:</span><br><span class="line">                serializerMenuList.append(SysMenuSerializer2(sysMenu).data)</span><br><span class="line">            <span class="keyword">return</span> serializerMenuList</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = SysMenu</span><br><span class="line">        fields = <span class="string">&#x27;__all__&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysMenuSerializer2</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = SysMenu</span><br><span class="line">        fields = <span class="string">&#x27;__all__&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统角色菜单关联类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysRoleMenu</span>(models.Model):</span><br><span class="line">    <span class="built_in">id</span> = models.AutoField(primary_key=<span class="literal">True</span>)</span><br><span class="line">    role = models.ForeignKey(SysRole, on_delete=models.PROTECT)</span><br><span class="line">    menu = models.ForeignKey(SysMenu, on_delete=models.PROTECT)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&quot;sys_role_menu&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysRoleMenuSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = SysRoleMenu</span><br><span class="line">        fields = <span class="string">&#x27;__all__&#x27;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="caidan-2"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> user.models <span class="keyword">import</span> SysUser</span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统角色类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysRole</span>(models.Model):</span><br><span class="line">    <span class="built_in">id</span> = models.AutoField(primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = models.CharField(max_length=<span class="number">30</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;角色名称&quot;</span>)</span><br><span class="line">    code = models.CharField(max_length=<span class="number">100</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;角色权限字符串&quot;</span>)</span><br><span class="line">    create_time = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;创建时间&quot;</span>, )</span><br><span class="line">    update_time = models.DateField(null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;更新时间&quot;</span>)</span><br><span class="line">    remark = models.CharField(max_length=<span class="number">500</span>, null=<span class="literal">True</span>, verbose_name=<span class="string">&quot;备注&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&quot;sys_role&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysRoleSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = SysRole</span><br><span class="line">        fields = <span class="string">&#x27;__all__&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 系统用户角色关联类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysUserRole</span>(models.Model):</span><br><span class="line">    <span class="built_in">id</span> = models.AutoField(primary_key=<span class="literal">True</span>)</span><br><span class="line">    role = models.ForeignKey(SysRole, on_delete=models.PROTECT)</span><br><span class="line">    user = models.ForeignKey(SysUser, on_delete=models.PROTECT)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        db_table = <span class="string">&quot;sys_user_role&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SysUserRoleSerializer</span>(serializers.ModelSerializer):</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Meta</span>:</span><br><span class="line">        model = SysUserRole</span><br><span class="line">        fields = <span class="string">&#x27;__all__&#x27;</span></span><br></pre></td></tr></table></figure></div></div></div></p>
<p>2.插入数据（注意非标准空格问题）：<br />
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">USE django; <span class="comment">-- 选择数据库</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_menu` (`id`,`name`,`icon`,`parent_id`,`order_num`,`path`,`component`,`menu_type`,`perms`,`create_time`,`update_time`,`remark`) </span><br><span class="line"><span class="keyword">values</span> </span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;系统管理&#x27;</span>,<span class="string">&#x27;system&#x27;</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="string">&#x27;/sys&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;系统管理目录&#x27;</span>);</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;业务管理&#x27;</span>,<span class="string">&#x27;monitor&#x27;</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="string">&#x27;/bsns&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;业务管理目录&#x27;</span>);</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;用户管理&#x27;</span>,<span class="string">&#x27;user&#x27;</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="string">&#x27;/sys/user&#x27;</span>,<span class="string">&#x27;sys/user/index&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;system:user:list&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;用户管理菜单&#x27;</span>);</span><br><span class="line">(<span class="number">4</span>,<span class="string">&#x27;角色管理&#x27;</span>,<span class="string">&#x27;peoples&#x27;</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="string">&#x27;/sys/role&#x27;</span>,<span class="string">&#x27;sys/role/index&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;system:role:list&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;角色管理菜单&#x27;</span>);</span><br><span class="line">(<span class="number">5</span>,<span class="string">&#x27;菜单管理&#x27;</span>,<span class="string">&#x27;tree-table&#x27;</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="string">&#x27;/sys/menu&#x27;</span>,<span class="string">&#x27;sys/menu/index&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;system:menu:list&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;菜单管理菜单&#x27;</span>);</span><br><span class="line">(<span class="number">6</span>,<span class="string">&#x27;部门管理&#x27;</span>,<span class="string">&#x27;tree&#x27;</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="string">&#x27;/bsns/department&#x27;</span>,<span class="string">&#x27;bsns/Department&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;部门管理菜单&#x27;</span>);</span><br><span class="line">(<span class="number">7</span>,<span class="string">&#x27;岗位管理&#x27;</span>,<span class="string">&#x27;post&#x27;</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="string">&#x27;/bsns/post&#x27;</span>,<span class="string">&#x27;bsns/Post&#x27;</span>,<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;岗位管理菜单&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_role` (`id`,`name`,`code`,`create_time`,`update_time`,`remark`)</span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;超级管理员&#x27;</span>,<span class="string">&#x27;admin&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;拥有系统最高权限&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;普通角色&#x27;</span>,<span class="string">&#x27;common&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;普通角色&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;测试角色&#x27;</span>,<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;测试角色&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="string">&#x27;是&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="keyword">NULL</span>),</span><br><span class="line">(<span class="number">5</span>,<span class="string">&#x27;3&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="keyword">NULL</span>),</span><br><span class="line">(<span class="number">6</span>,<span class="string">&#x27;4&#x27;</span>,<span class="keyword">NULL</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="keyword">NULL</span>),</span><br><span class="line">(<span class="number">19</span>,<span class="string">&#x27;测2&#x27;</span>,<span class="string">&#x27;cc2&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;eewew2&#x27;</span>),</span><br><span class="line">(<span class="number">20</span>,<span class="string">&#x27;ccc测试&#x27;</span>,<span class="string">&#x27;test2&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;xxx&#x27;</span>),</span><br><span class="line">(<span class="number">21</span>,<span class="string">&#x27;今天测试角色&#x27;</span>,<span class="string">&#x27;todytest&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;ccc&#x27;</span>),</span><br><span class="line">(<span class="number">22</span>,<span class="string">&#x27;12&#x27;</span>,<span class="string">&#x27;123&#x27;</span>,<span class="string">&#x27;2024-07-04&#x27;</span>,<span class="string">&#x27;2024-08-29&#x27;</span>,<span class="string">&#x27;12&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_role_menu` (`id`,`menu_id`,`role_id`) </span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">(<span class="number">102</span>,<span class="number">2</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">103</span>,<span class="number">6</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">104</span>,<span class="number">7</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">106</span>,<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">107</span>,<span class="number">3</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">108</span>,<span class="number">4</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">109</span>,<span class="number">5</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">110</span>,<span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">111</span>,<span class="number">6</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">112</span>,<span class="number">7</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">114</span>,<span class="number">1</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">115</span>,<span class="number">5</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">116</span>,<span class="number">2</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">117</span>,<span class="number">6</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">118</span>,<span class="number">7</span>,<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> `sys_user_role` (`id`,`role_id`,`user_id`) </span><br><span class="line"><span class="keyword">values</span></span><br><span class="line">(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">13</span>,<span class="number">5</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">17</span>,<span class="number">2</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">18</span>,<span class="number">3</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">19</span>,<span class="number">20</span>,<span class="number">6</span>),</span><br><span class="line">(<span class="number">20</span>,<span class="number">2</span>,<span class="number">8</span>),</span><br><span class="line">(<span class="number">21</span>,<span class="number">20</span>,<span class="number">8</span>),</span><br><span class="line">(<span class="number">22</span>,<span class="number">5</span>,<span class="number">8</span>),</span><br><span class="line">(<span class="number">23</span>,<span class="number">2</span>,<span class="number">17</span>),</span><br><span class="line">(<span class="number">24</span>,<span class="number">2</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">25</span>,<span class="number">3</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">26</span>,<span class="number">4</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">27</span>,<span class="number">2</span>,<span class="number">15</span>);</span><br></pre></td></tr></table></figure></p>
<p>3.要根据当前用户获取对应的权限菜单。<br />
可以先用当前用户id去用户角色表里去查所拥有的角色列表，然后再遍历角色列表去角色权限表查出所有的权限id，这样就可以得到权限菜单了。<br />
在 user/views.py 中 LoginView 修改成如下代码：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> menu.models <span class="keyword">import</span> SysMenu, SysMenuSerializer</span><br><span class="line"><span class="keyword">from</span> role.models <span class="keyword">import</span> SysRole</span><br><span class="line"><span class="keyword">from</span> user.models <span class="keyword">import</span> SysUser, SysUserSerializer</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LoginView</span>(<span class="title class_ inherited__">View</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">buildTreeMenu</span>(<span class="params">self, sysMenuList</span>):</span><br><span class="line">        resultMenuList: <span class="built_in">list</span>[SysMenu] = <span class="built_in">list</span>()</span><br><span class="line">        <span class="keyword">for</span> menu <span class="keyword">in</span> sysMenuList:</span><br><span class="line">            <span class="comment"># 寻找子节点</span></span><br><span class="line">            <span class="keyword">for</span> e <span class="keyword">in</span> sysMenuList:</span><br><span class="line">                <span class="keyword">if</span> e.parent_id == menu.<span class="built_in">id</span>:</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">hasattr</span>(menu, <span class="string">&quot;children&quot;</span>):</span><br><span class="line">                        menu.children = <span class="built_in">list</span>()</span><br><span class="line">                    menu.children.append(e)</span><br><span class="line">            <span class="comment"># 判断父节点，添加到集合</span></span><br><span class="line">            <span class="keyword">if</span> menu.parent_id == <span class="number">0</span>:</span><br><span class="line">                resultMenuList.append(menu)</span><br><span class="line">        <span class="keyword">return</span> resultMenuList</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">post</span>(<span class="params">self, request</span>):</span><br><span class="line">        username = request.GET.get(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">        password = request.GET.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            user = SysUser.objects.get(username=username, password=password)</span><br><span class="line">            jwt_payload_handler = api_settings.JWT_PAYLOAD_HANDLER</span><br><span class="line">            jwt_encode_handler = api_settings.JWT_ENCODE_HANDLER</span><br><span class="line">            payload = jwt_payload_handler(user)</span><br><span class="line">            token = jwt_encode_handler(payload)</span><br><span class="line">            <span class="comment"># 根据user_id从sys_user_role表获取role_id（角色id），根据获得的role_id从表sys_role获取id、name信息（角色id的具体信息）</span></span><br><span class="line">            roleList = SysRole.objects.raw(<span class="string">f&quot;SELECT id ,NAME FROM sys_role WHERE id IN (SELECT role_id FROM sys_user_role WHERE user_id=<span class="subst">&#123;user.<span class="built_in">id</span>&#125;</span>)&quot;</span>)</span><br><span class="line">            <span class="comment"># print(roleList)</span></span><br><span class="line">            menuSet: <span class="built_in">set</span>[SysMenu] = <span class="built_in">set</span>()</span><br><span class="line">            <span class="keyword">for</span> row <span class="keyword">in</span> roleList:</span><br><span class="line">                <span class="comment"># print(row.id, row.name)</span></span><br><span class="line">                <span class="comment"># 根据role_id从sys_role_menu表获取menu_id（菜单id），根据获得的menu_id从表sys_menu获取id、name、parent_id、order_num信息（菜单id的具体信息）</span></span><br><span class="line">                menuList = SysMenu.objects.raw(<span class="string">f&quot;SELECT * FROM sys_menu WHERE id IN (SELECT menu_id FROM sys_role_menu WHERE role_id=<span class="subst">&#123;row.<span class="built_in">id</span>&#125;</span>)&quot;</span>)</span><br><span class="line">                <span class="keyword">for</span> row2 <span class="keyword">in</span> menuList:</span><br><span class="line">                    <span class="comment"># print(&#x27;menuList&#x27;, row2.id, row2.name)</span></span><br><span class="line">                    menuSet.add(row2) <span class="comment"># set，重复菜单不会添加</span></span><br><span class="line">            <span class="comment"># print(menuSet)</span></span><br><span class="line">            menuList: <span class="built_in">list</span>[SysMenu] = <span class="built_in">list</span>(menuSet)  <span class="comment"># set转list</span></span><br><span class="line">            sorted_menuList = <span class="built_in">sorted</span>(menuList)  <span class="comment"># 根据order_num排序</span></span><br><span class="line">            <span class="comment"># print(sorted_menuList)</span></span><br><span class="line">            <span class="comment"># 构造菜单树</span></span><br><span class="line">            sysMenuList: <span class="built_in">list</span>[SysMenu] = self.buildTreeMenu(sorted_menuList)</span><br><span class="line">            <span class="comment"># print(sysMenuList)</span></span><br><span class="line">            <span class="comment"># 序列化</span></span><br><span class="line">            serializerMenuList = <span class="built_in">list</span>()</span><br><span class="line">            <span class="keyword">for</span> menu <span class="keyword">in</span> sysMenuList:</span><br><span class="line">                serializerMenuList.append(SysMenuSerializer(menu).data)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="comment"># print(e)</span></span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">500</span>, <span class="string">&#x27;info&#x27;</span>: <span class="string">&#x27;用户名或者密码错误！&#x27;</span>&#125;)</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>, </span><br><span class="line">                             <span class="string">&#x27;token&#x27;</span>: token, </span><br><span class="line">                             <span class="string">&#x27;user&#x27;</span>: SysUserSerializer(user).data, </span><br><span class="line">                             <span class="string">&#x27;info&#x27;</span>: <span class="string">&#x27;登录成功&#x27;</span>,</span><br><span class="line">                             <span class="string">&#x27;menuList&#x27;</span>: serializerMenuList&#125;)</span><br></pre></td></tr></table></figure></p>
<h1 id="vue3">Vue3</h1>
<p>了解以下概念：<br />
Node.js是一个开源的、跨平台的JavaScript运行环境，使得JavaScript可以用于后端服务器开发。<br />
npm是Node.js的包管理器，用于安装和管理Node.js的第三方库和工具。</p>
<h2 id="初始化-1">初始化</h2>
<p>1.安装node，查看nodejs和npm版本：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用conda虚拟环境安装</span></span><br><span class="line">conda install nodejs</span><br><span class="line"><span class="comment"># nodejs 版本</span></span><br><span class="line">node -v</span><br><span class="line"><span class="comment"># npm 版本</span></span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure></p>
<p>2.vue-cli是官方发布 vue.js <strong>项目脚手架</strong>，可以快速创建
vue 项目、安装插件、安装依赖。vue-cli安装：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装vue-cli</span></span><br><span class="line">npm install -g @vue/cli</span><br><span class="line"><span class="comment"># 查看版本</span></span><br><span class="line">vue --version</span><br></pre></td></tr></table></figure></p>
<h2 id="创建启动">创建启动</h2>
<p>1.启动vue，并创建项目：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动项目</span></span><br><span class="line">vue ui</span><br><span class="line"><span class="comment"># 在vue的图形界面中创建项目</span></span><br><span class="line"><span class="comment"># 1.选择&quot;创建&quot;-&gt;选择要创建项目的位置-&gt;输入&quot;项目名&quot;-&gt;&quot;包管理器&quot;选择&quot;npm&quot;-&gt;git根据需求选择是否初始化-&gt;下一步</span></span><br><span class="line"><span class="comment"># 2.选择&quot;手动配置&quot;-&gt;下一步</span></span><br><span class="line"><span class="comment"># 3.选择&quot;Vue 3&quot;-&gt;选择&quot;Babel&quot;、&quot;Router&quot;、&quot;Vuex&quot;-&gt;下一步</span></span><br><span class="line"><span class="comment"># 4.选择使用的Vue版本，默认是&quot;3.x&quot;-&gt;创建项目</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 步骤3.中安装的是插件，也可以使用命令的方式安装</span></span><br><span class="line">vue add babel</span><br></pre></td></tr></table></figure></p>
<p>项目结构：<br />
<img src="/images/Python/vue项目结构.png" width="60%"></p>
<p>2.为项目安装依赖：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意，vue ui中有插件和依赖两个选项：</span></span><br><span class="line"><span class="comment"># 1.插件是vue项目中的组件</span></span><br><span class="line"><span class="comment"># 2.依赖是vue项目中的第三方库</span></span><br><span class="line"><span class="comment"># 直接搜索想用的插件/依赖安装就行</span></span><br></pre></td></tr></table></figure></p>
<p>package.json完整的安装结果：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;zwv&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;private&quot;</span>: true,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;serve&quot;</span>: <span class="string">&quot;vue-cli-service serve&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;vue-cli-service build&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123; <span class="comment"># 依赖</span></span><br><span class="line">    <span class="string">&quot;core-js&quot;</span>: <span class="string">&quot;^3.8.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;vue&quot;</span>: <span class="string">&quot;^3.2.13&quot;</span>,</span><br><span class="line">    <span class="string">&quot;vue-router&quot;</span>: <span class="string">&quot;^4.0.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;vuex&quot;</span>: <span class="string">&quot;^4.0.0&quot;</span>, <span class="comment"># 以此之后都是新安装的</span></span><br><span class="line">    <span class="string">&quot;axios&quot;</span>: <span class="string">&quot;^1.7.7&quot;</span>,</span><br><span class="line">    <span class="string">&quot;element-plus&quot;</span>: <span class="string">&quot;^2.8.7&quot;</span>,</span><br><span class="line">    <span class="string">&quot;js-cookie&quot;</span>: <span class="string">&quot;^3.0.5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;jsencrypt&quot;</span>: <span class="string">&quot;^3.3.2&quot;</span>,</span><br><span class="line">    <span class="string">&quot;qs&quot;</span>: <span class="string">&quot;^6.13.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sass&quot;</span>: <span class="string">&quot;^1.80.6&quot;</span>,</span><br><span class="line">    <span class="string">&quot;sass-loader&quot;</span>: <span class="string">&quot;^16.0.3&quot;</span>,</span><br><span class="line">    <span class="string">&quot;svg-sprite-loader&quot;</span>: <span class="string">&quot;^6.0.11&quot;</span>,</span><br><span class="line">    <span class="string">&quot;webpack&quot;</span>: <span class="string">&quot;^5.96.1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;devDependencies&quot;</span>: &#123; <span class="comment"># 插件</span></span><br><span class="line">    <span class="string">&quot;@vue/cli-plugin-babel&quot;</span>: <span class="string">&quot;~5.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@vue/cli-plugin-router&quot;</span>: <span class="string">&quot;~5.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@vue/cli-plugin-vuex&quot;</span>: <span class="string">&quot;~5.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@vue/cli-service&quot;</span>: <span class="string">&quot;~5.0.0&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;browserslist&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;&gt; 1%&quot;</span>,</span><br><span class="line">    <span class="string">&quot;last 2 versions&quot;</span>,</span><br><span class="line">    <span class="string">&quot;not dead&quot;</span>,</span><br><span class="line">    <span class="string">&quot;not ie 11&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3.在 vue.config.js 中配置项目启动端口：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">//配置dev的启动端口(serve启动也是这个端口)</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">      <span class="attr">port</span>: <span class="number">8080</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>4.启动项目：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行的是package.json中的scripts/xxx命令</span></span><br><span class="line"><span class="comment"># 启动项目本地开发服务器，用于本地开发预览</span></span><br><span class="line">npm run serve</span><br><span class="line"><span class="comment"># 类似serve，但是能提供更多的开发工具和功能</span></span><br><span class="line">npm run dev</span><br><span class="line"><span class="comment"># 构建项目生产环境使用，并将源码打包优化，生成用于部署的静态文件</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure></p>
<h2 id="ui组件">UI组件</h2>
<p>1.element-plus是Element UI一个分支，提供了完整的UI组件。在项目下的
src/main.js 或 src/main.ts 中引入element-plus：<br />
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局引入</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ElementPlus <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span> <span class="comment"># 引入ElementPlus</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span> <span class="comment"># 引入css</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 增加.use(ElementPlus)</span></span><br><span class="line">createApp(App).use(store).use(router).use(ElementPlus).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<p>2.在 src/views/AboutView.vue 中修改About界面，使用element-plus的 按钮
组件：<br />
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- element-plus组件提供的代码，缩进为2空格 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span>&gt;</span>Default<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>Primary<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span>&gt;</span>Success<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span>&gt;</span>Info<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span>&gt;</span>Warning<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span>&gt;</span>Danger<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">plain</span>&gt;</span>Plain<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">plain</span>&gt;</span>Primary<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">plain</span>&gt;</span>Success<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">plain</span>&gt;</span>Info<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span> <span class="attr">plain</span>&gt;</span>Warning<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">plain</span>&gt;</span>Danger<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">round</span>&gt;</span>Round<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">round</span>&gt;</span>Primary<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">round</span>&gt;</span>Success<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">round</span>&gt;</span>Info<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span> <span class="attr">round</span>&gt;</span>Warning<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">round</span>&gt;</span>Danger<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:icon</span>=<span class="string">&quot;Search&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Edit&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Check&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Message&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;warning&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Star&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">:icon</span>=<span class="string">&quot;Delete&quot;</span> <span class="attr">circle</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 这里不支持ts，可以去掉lang=&quot;ts&quot; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Check</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Delete</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Edit</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Message</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Search</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title class_">Star</span>,</span></span><br><span class="line"><span class="language-javascript">&#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="jwt认证-1">jwt认证</h2>
<p>1.前端通过axios请求后端，首先需要对axios的请求方法进行封装，创建
src/util/request.js 文件，写入：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//后端地址</span></span><br><span class="line"><span class="keyword">let</span> baseUrl = <span class="string">&quot;http://localhost:8000/&quot;</span>; </span><br><span class="line"><span class="comment">//创建axios实例</span></span><br><span class="line"><span class="keyword">const</span> httpService = axios.<span class="title function_">create</span>(&#123;</span><br><span class="line">    <span class="comment">//baseURL: process.env.BASE_API, //需要自定义</span></span><br><span class="line">    <span class="attr">baseURL</span>: baseUrl,</span><br><span class="line">    <span class="comment">//请求超时时间</span></span><br><span class="line">    <span class="attr">timeout</span>: <span class="number">3000</span> <span class="comment">//3秒超时</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要添加请求、响应拦截器</span></span><br><span class="line"><span class="comment">//添加请求拦截器（在发送请求之前做些什么）</span></span><br><span class="line">httpService.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">config</span>) &#123;</span><br><span class="line">    <span class="comment">//在发送请求之前，从sessionStorage中获取token，添加到请求头中</span></span><br><span class="line">    config.<span class="property">headers</span>.<span class="property">AUTHORIZATION</span> = <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line"></span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">//对请求错误做些什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//添加响应拦截器（对响应数据做点什么）</span></span><br><span class="line">httpService.<span class="property">interceptors</span>.<span class="property">response</span>.<span class="title function_">use</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="comment">//对响应数据什么都不做</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">//对响应错误做点什么</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//网络请求封装</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * get请求</span></span><br><span class="line"><span class="comment"> * url：请求地址</span></span><br><span class="line"><span class="comment"> * params：请求参数</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">get</span>(<span class="params">url, params = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">httpService</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: url,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">            <span class="attr">params</span>: params</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(response);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * post请求</span></span><br><span class="line"><span class="comment"> * url：请求地址</span></span><br><span class="line"><span class="comment"> * params：请求参数</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">post</span>(<span class="params">url, params = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">httpService</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: url,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">params</span>: params</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">            <span class="title function_">resolve</span>(response);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * delete请求</span></span><br><span class="line"><span class="comment"> * url：请求地址</span></span><br><span class="line"><span class="comment"> * params：请求参数</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">del</span>(<span class="params">url, params = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">httpService</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: url,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">            <span class="attr">params</span>: params</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(response)</span><br><span class="line">            <span class="title function_">resolve</span>(response);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(error)</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 文件上传请求</span></span><br><span class="line"><span class="comment"> * url：请求地址</span></span><br><span class="line"><span class="comment"> * params：请求参数</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">fileUpload</span>(<span class="params">url, params = &#123;&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">httpService</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: url,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">            <span class="attr">params</span>: params,</span><br><span class="line">            <span class="attr">headers</span>: &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span>&#125;</span><br><span class="line">        &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">resolve</span>(response);</span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getServerUrl</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> baseUrl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    get,</span><br><span class="line">    post,</span><br><span class="line">    del,</span><br><span class="line">    fileUpload,</span><br><span class="line">    getServerUrl</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.编写 src/AboutView.vue
通过axios请求后端接口，模拟登录获取token、获取用户信息：<br />
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- @click 按钮事件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleLogin&quot;</span>&gt;</span>测试登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleUserList&quot;</span>&gt;</span>测试获取用户信息列表<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 这里不支持ts，去掉lang=&quot;ts&quot; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/util/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//登录时，获取响应的token，并存入sessionStorage中</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">handleLogin</span> = <span class="keyword">async</span>(<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> result = <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&quot;user/jwt_test&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> data = result.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span>(data.<span class="property">code</span> == <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> token = data.<span class="property">token</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;登录成功，token=&quot;</span> + token)</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;token&quot;</span>, token)</span></span><br><span class="line"><span class="language-javascript">  &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;登录出错&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">handleUserList</span> = <span class="keyword">async</span>(<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> result = <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&quot;user/test&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> data = result.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span>(data.<span class="property">code</span> == <span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> userList = data.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;用户信息列表，userList=&quot;</span> + userList)</span></span><br><span class="line"><span class="language-javascript">  &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;登录出错&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>3.1启动前后端，点击"测试登录"按钮，会报CORS跨域请求错误，需要在后端配置跨域。<br />
3.2跨域配置好后，浏览器按F12进入开发这模式，重新点击"测试登录"按钮，触发handleLogin事件，将响应中token存储在sessionStorage中，浏览器中Network显示访问jwt_test，查看其Response中的token，并和Application的Session
storage中存储的token对比，应该是一样的。<br />
3.3点击"测试获取用户信息列表"按钮，触发handleUserList事件，因为自己封装的axios文件request.js中定义了请求拦截器，在每次请求前从sessionStorage中获取token，并加载到当前请求上，所以带了token，能访问test获取信息。</p>
<h2 id="登录页面-1">登录页面</h2>
<h3 id="基础布局">基础布局</h3>
<p>一般开发页面前，对全局样式进行配置。<br />
1.首先引入全局样式，新建 src/assets/styles 文件夹，放入 border.css 和
reset.css 两个文件：<br />
<div class="tabs" id="fourth-unique-name"><ul class="nav-tabs"><li class="tab active"><a href="#fourth-unique-name-1">边框样式</a></li><li class="tab"><a href="#fourth-unique-name-2">重置浏览器默认样式</a></li></ul><div class="tab-content"><div class="tab-pane active" id="fourth-unique-name-1"><figure class="highlight css"><figcaption><span>border.css</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line"><span class="selector-class">.border</span>,</span><br><span class="line"><span class="selector-class">.border-top</span>,</span><br><span class="line"><span class="selector-class">.border-right</span>,</span><br><span class="line"><span class="selector-class">.border-bottom</span>,</span><br><span class="line"><span class="selector-class">.border-left</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\0020&quot;</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* border</span></span><br><span class="line"><span class="comment"> * 因，边框是由伪元素区域遮盖在父级</span></span><br><span class="line"><span class="comment"> * 故，子级若有交互，需要对子级设置</span></span><br><span class="line"><span class="comment"> * 定位 及 z轴</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="selector-class">.border</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">100%</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">1px</span> solid <span class="number">#eaeaea</span>;</span><br><span class="line">    <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line"><span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line"><span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max--moz-device-pixel-ratio</span>: <span class="number">1.49</span>), (<span class="attribute">-webkit-max-device-pixel-ratio</span>: <span class="number">1.49</span>), (<span class="attribute">max-device-pixel-ratio</span>: <span class="number">1.49</span>), (<span class="attribute">max-resolution</span>: <span class="number">143dpi</span>), (<span class="attribute">max-resolution</span>: <span class="number">1.49dppx</span>) &#123;</span><br><span class="line">    <span class="comment">/* 默认值，无需重置 */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min--moz-device-pixel-ratio</span>: <span class="number">1.5</span>) <span class="keyword">and</span> (<span class="attribute">max--moz-device-pixel-ratio</span>: <span class="number">2.49</span>), (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">1.5</span>) <span class="keyword">and</span> (<span class="attribute">-webkit-max-device-pixel-ratio</span>: <span class="number">2.49</span>), (<span class="attribute">min-device-pixel-ratio</span>: <span class="number">1.5</span>) <span class="keyword">and</span> (<span class="attribute">max-device-pixel-ratio</span>: <span class="number">2.49</span>), (<span class="attribute">min-resolution</span>: <span class="number">144dpi</span>) <span class="keyword">and</span> (<span class="attribute">max-resolution</span>: <span class="number">239dpi</span>), (<span class="attribute">min-resolution</span>: <span class="number">1.5dppx</span>) <span class="keyword">and</span> (<span class="attribute">max-resolution</span>: <span class="number">2.49dppx</span>) &#123;</span><br><span class="line">    <span class="selector-class">.border</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(.<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleX</span>(.<span class="number">5</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">min--moz-device-pixel-ratio</span>: <span class="number">2.5</span>), (<span class="attribute">-webkit-min-device-pixel-ratio</span>: <span class="number">2.5</span>), (<span class="attribute">min-device-pixel-ratio</span>: <span class="number">2.5</span>), (<span class="attribute">min-resolution</span>: <span class="number">240dpi</span>), (<span class="attribute">min-resolution</span>: <span class="number">2.5dppx</span>) &#123;</span><br><span class="line">    <span class="selector-class">.border</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">300%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">300%</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">33333</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.border-top</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-bottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topright</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(.<span class="number">33333</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.border-right</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-left</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-rightleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-topleft</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-rightbottom</span><span class="selector-pseudo">::before</span>,</span><br><span class="line">    <span class="selector-class">.border-topright</span><span class="selector-pseudo">::after</span>,</span><br><span class="line">    <span class="selector-class">.border-bottomleft</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scaleX</span>(.<span class="number">33333</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="fourth-unique-name-2"><figure class="highlight css"><figcaption><span>reset.css</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@charset</span> <span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line"><span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">12px</span>&#125;</span><br><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">dl</span>,<span class="selector-tag">dd</span>,<span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,<span class="selector-tag">figure</span>,<span class="selector-tag">form</span>,<span class="selector-tag">fieldset</span>,<span class="selector-tag">legend</span>,<span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">button</span>,<span class="selector-tag">p</span>,<span class="selector-tag">blockquote</span>,<span class="selector-tag">th</span>,<span class="selector-tag">td</span>,pre,xmp&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="selector-tag">body</span>,<span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">button</span>,select,pre,xmp,tt,<span class="selector-tag">code</span>,<span class="selector-tag">kbd</span>,<span class="selector-tag">samp</span>&#123;<span class="attribute">line-height</span>:<span class="number">1.5</span>;<span class="attribute">font-family</span>:tahoma,arial,<span class="string">&quot;Hiragino Sans GB&quot;</span>,simsun,sans-serif&#125;</span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,small,big,<span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">button</span>,select&#123;<span class="attribute">font-size</span>:<span class="number">100%</span>&#125;</span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>&#123;<span class="attribute">font-family</span>:tahoma,arial,<span class="string">&quot;Hiragino Sans GB&quot;</span>,<span class="string">&quot;微软雅黑&quot;</span>,simsun,sans-serif&#125;</span><br><span class="line"><span class="selector-tag">h1</span>,<span class="selector-tag">h2</span>,<span class="selector-tag">h3</span>,<span class="selector-tag">h4</span>,<span class="selector-tag">h5</span>,<span class="selector-tag">h6</span>,<span class="selector-tag">b</span>,<span class="selector-tag">strong</span>&#123;<span class="attribute">font-weight</span>:normal&#125;</span><br><span class="line"><span class="selector-tag">address</span>,<span class="selector-tag">cite</span>,<span class="selector-tag">dfn</span>,<span class="selector-tag">em</span>,<span class="selector-tag">i</span>,optgroup,<span class="selector-tag">var</span>&#123;<span class="attribute">font-style</span>:normal&#125;</span><br><span class="line"><span class="selector-tag">table</span>&#123;<span class="attribute">border-collapse</span>:collapse;<span class="attribute">border-spacing</span>:<span class="number">0</span>;<span class="attribute">text-align</span><span class="selector-pseudo">:left</span>&#125;</span><br><span class="line"><span class="selector-tag">caption</span>,<span class="selector-tag">th</span>&#123;<span class="attribute">text-align</span>:inherit&#125;</span><br><span class="line"><span class="selector-tag">ul</span>,<span class="selector-tag">ol</span>,<span class="selector-tag">menu</span>&#123;<span class="attribute">list-style</span>:none&#125;</span><br><span class="line"><span class="selector-tag">fieldset</span>,<span class="selector-tag">img</span>&#123;<span class="attribute">border</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="selector-tag">img</span>,<span class="selector-tag">object</span>,<span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">button</span>,select&#123;<span class="attribute">vertical-align</span>:middle&#125;</span><br><span class="line"><span class="selector-tag">article</span>,<span class="selector-tag">aside</span>,<span class="selector-tag">footer</span>,<span class="selector-tag">header</span>,<span class="selector-tag">section</span>,<span class="selector-tag">nav</span>,<span class="selector-tag">figure</span>,<span class="selector-tag">figcaption</span>,<span class="selector-tag">hgroup</span>,<span class="selector-tag">details</span>,<span class="selector-tag">menu</span>&#123;<span class="attribute">display</span>:block&#125;</span><br><span class="line"><span class="selector-tag">audio</span>,<span class="selector-tag">canvas</span>,<span class="selector-tag">video</span>&#123;<span class="attribute">display</span>:inline-block;*<span class="attribute">display</span>:inline;*zoom:<span class="number">1</span>&#125; <span class="comment">/* *符号是为了兼容旧版本IE浏览器，可以去掉 */</span></span><br><span class="line"><span class="selector-tag">blockquote</span><span class="selector-pseudo">:before</span>,<span class="selector-tag">blockquote</span><span class="selector-pseudo">:after</span>,<span class="selector-tag">q</span><span class="selector-pseudo">:before</span>,<span class="selector-tag">q</span><span class="selector-pseudo">:after</span>&#123;<span class="attribute">content</span>:<span class="string">&quot;\0020&quot;</span>&#125;</span><br><span class="line"><span class="selector-tag">textarea</span>&#123;<span class="attribute">overflow</span>:auto;<span class="attribute">resize</span>:vertical&#125;</span><br><span class="line"><span class="selector-tag">input</span>,<span class="selector-tag">textarea</span>,<span class="selector-tag">button</span>,select,<span class="selector-tag">a</span>&#123;<span class="attribute">outline</span>:<span class="number">0</span> none;<span class="attribute">border</span>: none;&#125;</span><br><span class="line"><span class="selector-tag">button</span>::-moz-focus-inner,input::-moz-focus-inner&#123;<span class="attribute">padding</span>:<span class="number">0</span>;<span class="attribute">border</span>:<span class="number">0</span>&#125;</span><br><span class="line"><span class="selector-tag">mark</span>&#123;<span class="attribute">background-color</span>:transparent&#125;</span><br><span class="line"><span class="selector-tag">a</span>,<span class="selector-tag">ins</span>,s,u,<span class="selector-tag">del</span>&#123;<span class="attribute">text-decoration</span>:none&#125;</span><br><span class="line"><span class="selector-tag">sup</span>,sub&#123;<span class="attribute">vertical-align</span>:baseline&#125;</span><br><span class="line"><span class="selector-tag">html</span> &#123;<span class="attribute">overflow-x</span>: hidden;<span class="attribute">height</span>: <span class="number">100%</span>;<span class="attribute">font-size</span>: <span class="number">50px</span>;-webkit-tap-highlight-<span class="attribute">color</span>: transparent;&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;<span class="attribute">font-family</span>: Arial, <span class="string">&quot;Microsoft Yahei&quot;</span>, <span class="string">&quot;Helvetica Neue&quot;</span>, Helvetica, sans-serif;<span class="attribute">color</span>: <span class="number">#333</span>;<span class="attribute">font-size</span>: .<span class="number">28em</span>;<span class="attribute">line-height</span>: <span class="number">1</span>;-webkit-text-size-adjust: none;&#125;</span><br><span class="line">hr &#123;<span class="attribute">height</span>: .<span class="number">02rem</span>;<span class="attribute">margin</span>: .<span class="number">1rem</span> <span class="number">0</span>;<span class="attribute">border</span>: medium none;<span class="attribute">border-top</span>: .<span class="number">02rem</span> solid <span class="number">#cacaca</span>;&#125;</span><br><span class="line"><span class="selector-tag">a</span> &#123;<span class="attribute">color</span>: <span class="number">#25a4bb</span>;<span class="attribute">text-decoration</span>: none;&#125;</span><br></pre></td></tr></table></figure></div></div></div></p>
<p>2.在 src/main.js 中导入两个样式文件：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/assets/styles/border.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/assets/styles/reset.css&#x27;</span></span><br></pre></td></tr></table></figure></p>
<p>3.新建 src/views/Login.vue
作为登录页面（这里用到了scss样式，需要安装sass和sass-loader依赖），内容如下：<br />
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- el-form 是 element-plus组件 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ref是引用名 class是类名(用于css样式定制)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;loginRef&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login-form&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>后台管理系统<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;账号&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-checkbox</span>  <span class="attr">style</span>=<span class="string">&quot;margin:0px 0px 25px 0px;&quot;</span>&gt;</span>记住密码<span class="tag">&lt;/<span class="name">el-checkbox</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>登 录<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  底部  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;el-login-footer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>Copyright © 2024-2025 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 版权所有.<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用scss，简化了css编写样式的复杂写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>:white <span class="comment">/* 对a标签(超链接)的文字颜色设置为白色 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login</span> &#123; <span class="comment">/* 类选择器，应用于所有login类的html元素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex; <span class="comment">/* Flexbox布局 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">justify-content</span>: center; <span class="comment">/* 设置了Flex容器中的子元素在主轴（默认是水平方向）上的对齐方式为居中对齐 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">align-items</span>: center; <span class="comment">/* 设置了Flex容器中的子元素在交叉轴（默认是垂直方向）上的对齐方式为居中对齐 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100%</span>; <span class="comment">/* 设置了元素的高度为其父元素高度的100% */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;../assets/images/login-background.png&quot;</span>);<span class="comment">/* 新建images文件夹，找张背景图片即可 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-size</span>: cover;<span class="comment">/* 设置了背景图片的尺寸调整方式为覆盖：背景图片会被缩放以完全覆盖元素区域，同时保持图片的宽高比，可能会有部分图片内容被裁剪 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.title</span> &#123;<span class="comment">/* 标题 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">0px</span> auto <span class="number">30px</span> auto;<span class="comment">/* margin 属性用于设置元素的外边距（即元素周围的空间）：0px 表示上边距为0像素，30px 表示下边距为30像素，auto 表示左右边距自动调整，这通常用于水平居中元素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;<span class="comment">/* 设置元素内文本的水平对齐方式为居中对齐 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#707070</span>;<span class="comment">/* 设置元素内文本的颜色，#707070 是一个十六进制颜色代码，表示一种灰色 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-form</span> &#123;<span class="comment">/* 登录表单 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;<span class="comment">/* 设置表单的边框圆角为6像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="number">#ffffff</span>;<span class="comment">/* 设置表单的背景颜色为白色 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">400px</span>;<span class="comment">/* 设置表单的宽度为400像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">25px</span> <span class="number">25px</span> <span class="number">5px</span> <span class="number">25px</span>;<span class="comment">/* 设置表单的内边距，上、右、下、左分别为25像素、25像素、5像素、25像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-input</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span>;<span class="comment">/* 设置输入框的高度为40像素 */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: inline-block;<span class="comment">/* 设置输入框为行内块元素，使其能够与其他元素在同一行显示 */</span></span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">40px</span>;<span class="comment">/* 设置输入框的高度为40像素 */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.input-icon</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">39px</span>;<span class="comment">/* 设置输入框图标的的高度为39像素 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">14px</span>;<span class="comment">/* 设置输入框图标的宽度为14像素 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">0px</span>;<span class="comment">/* 设置输入框图标的左边距为0像素 */</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-tip</span> &#123;<span class="comment">/* 提示信息 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">13px</span>;<span class="comment">/* 设置了字体大小为13像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;<span class="comment">/* 文本对齐方式设置为居中 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#bfbfbf</span>;<span class="comment">/* 设置了文本颜色为一种浅灰色 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-code</span> &#123;<span class="comment">/* 验证码 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">33%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">vertical-align</span>: middle;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.el-login-footer</span> &#123;<span class="comment">/* 页脚 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">40px</span>;<span class="comment">/* 设置高度为40像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">line-height</span>: <span class="number">40px</span>;<span class="comment">/* 设置行高为40像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: fixed;<span class="comment">/* 使用固定定位，使页脚始终固定在视口底部 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">bottom</span>: <span class="number">0</span>;<span class="comment">/* 将页脚定位到视口的底部 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;<span class="comment">/* 置页脚的宽度为100%，使其占满整个视口宽度 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;<span class="comment">/* 文本居中对齐 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#fff</span>;<span class="comment">/* 设置文本颜色为白色 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-family</span>: Arial;<span class="comment">/* 设置字体为Arial */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">12px</span>;<span class="comment">/* 设置字体大小为12像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">letter-spacing</span>: <span class="number">1px</span>;<span class="comment">/* 设置字母间距为1像素 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-code-img</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-left</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>4.在 src/router/index.js 中添加登录页面的路由：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  ...,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Login.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>5.在 src/App.vue 中添加 <code>&lt;router-view/&gt;</code>
组件，用于显示当前路由匹配到的组件内容，并且设置html、body等高度为100%，让登录页背景图全显示出来（不然只显示一半高）：<br />
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;nav&gt;</span></span><br><span class="line"><span class="comment">    &lt;router-link to=&quot;/&quot;&gt;Home&lt;/router-link&gt; |</span></span><br><span class="line"><span class="comment">    &lt;router-link to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span></span><br><span class="line"><span class="comment">  &lt;/nav&gt; --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="comment">/* #app 指定是 &lt;div id=&quot;app&quot;&gt;，是整个Vue实例挂载的根元素，#是id选择器的意思 */</span></span></span><br><span class="line"><span class="language-css"><span class="comment">/* &lt;html&gt;、&lt;body&gt; 是html自带的标签，不需要加# */</span></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>,<span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-family</span>: Avenir, Helvetica, Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">  -webkit-<span class="attribute">font-smoothing</span>: antialiased;</span></span><br><span class="line"><span class="language-css">  -moz-osx-<span class="attribute">font-smoothing</span>: grayscale;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100%</span>; <span class="comment">/* 设置高度为100%。这里想让到&lt;body&gt;高度为100%，让登录页背景图全显示 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.app-container</span> &#123;<span class="comment">/* 类选择器 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>:<span class="number">20px</span> <span class="comment">/* 在元素的内容和边框之间添加20像素的空间 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">nav</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">nav</span> <span class="selector-tag">a</span> &#123;<span class="comment">/* 定义 &lt;nav&gt; 元素内的 &lt;a&gt;（链接）标签的样式 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-weight</span>: bold;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#2c3e50</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">nav</span> <span class="selector-tag">a</span><span class="selector-class">.router-link-exact-active</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#42b983</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="自定义icon">自定义icon</h3>
<p>想要在登录页的"账号"、"密码"输入框内显示一个用户图标，一个锁图标，需要自定义icon。<br />
1.新建 src/components/SvgIcon/index.vue
文件夹和文件，index.vue中定义svg-icon组件：<br />
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- aria-hidden=&quot;true&quot; 表示对屏幕阅读器不可见 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">&quot;svg-icon&quot;</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 将 iconName 这个组件的属性值绑定到 xlink:href 属性上 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">use</span> <span class="attr">:xlink:href</span>=<span class="string">&quot;iconName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 从 vue 包中导入 defineProps 和 computed 函数</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; defineProps, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 定义一个名为 icon 的 prop，它是一个字符串，并且是必需的</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">icon</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">type</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 创建一个计算属性 iconName，它返回一个字符串，该字符串由 #icon- 前缀和 icon prop 的值组成</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> iconName = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">return</span> <span class="string">`#icon-<span class="subst">$&#123;props.icon&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- lang=&quot;scss&quot; 指定了样式使用的是 SCSS（Sassy CSS）预处理器 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- scoped的作用是限定样式只会应用到当前组件的元素上，而不会影响到其他组件的样式 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.svg-icon</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">1em</span>; <span class="comment">/* 设置svg图片宽度，em 是一个相对单位，相对于当前元素的字体大小，1em意味着图标的宽度将与当前字体大小相同 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">1em</span>; <span class="comment">/* 设置svg图片高度 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">vertical-align</span>: -<span class="number">0.15em</span>; <span class="comment">/* 设置垂直对齐方式，-0.15em 的值意味着图标将向上移动当前字体大小的 15%。这通常用于调整图标与文本的垂直对齐，使其看起来更加协调 */</span></span></span><br><span class="line"><span class="language-css">  fill: currentColor; <span class="comment">/* 设置SVG图标的填充颜色，currentColor 是一个关键字，表示使用当前文本颜色 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">overflow</span>: hidden; <span class="comment">/*设置元素内容的溢出处理方式，hidden 表示如果内容溢出元素框，则隐藏溢出的部分*/</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>2.新建 src/icons/svg 文件夹存放icon，然后新建 src/icons/index.js
文件，将svg-icon组件注册到全局：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">SvgIcon</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/SvgIcon&#x27;</span> <span class="comment">//导入SvgIcon组件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//require.context是Webpack提供的一个功能，用于创建一个包含了指定目录下所有文件的上下文</span></span><br><span class="line"><span class="comment">//这里，它被用来创建一个上下文，该上下文包含了./svg目录下所有以.svg结尾的文件</span></span><br><span class="line"><span class="comment">//&#x27;./svg&#x27;：指定要查找的目录。false：表示不查找子目录。\.svg$：正则表达式，用于匹配以.svg结尾的文件。</span></span><br><span class="line"><span class="keyword">const</span> svgRequired = <span class="built_in">require</span>.<span class="title function_">context</span>(<span class="string">&#x27;./svg&#x27;</span>, <span class="literal">false</span>, <span class="regexp">/\.svg$/</span>)</span><br><span class="line"><span class="comment">//遍历上下文中的所有文件，并导入它们</span></span><br><span class="line">svgRequired.<span class="title function_">keys</span>().<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="title function_">svgRequired</span>(item))</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义并导出一个默认函数，该函数接收一个Vue应用实例app作为参数</span></span><br><span class="line"><span class="comment">//在函数内部，使用app.component方法将SvgIcon组件注册为全局组件，组件名为&#x27;svg-icon&#x27;</span></span><br><span class="line"><span class="comment">//这样，在任何Vue模板中都可以使用&lt;svg-icon&gt;&lt;/svg-icon&gt;标签来使用这个组件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (app) =&gt; &#123;</span><br><span class="line">    app.<span class="title function_">component</span>(<span class="string">&#x27;svg-icon&#x27;</span>, <span class="title class_">SvgIcon</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>3.需要安装webpack（静态模块打包器）和svg-sprite-loader（Webpack的加载器，专门用于将SVG图标打包成SVG
sprite）依赖。<br />
4.配置项目下的 vue.config.js 文件，添加svg图标配置：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; defineConfig &#125; = <span class="built_in">require</span>(<span class="string">&#x27;@vue/cli-service&#x27;</span>)<span class="comment">//引入默认配置函数defineConfig</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="comment">//这个属性设置为 true 时，表示项目中的依赖包也会被 Babel 转译</span></span><br><span class="line">  <span class="comment">//默认情况下，Vue CLI 只会转译 src 目录下的文件。</span></span><br><span class="line">  <span class="comment">//如果项目依赖了一些使用了现代 JavaScript 特性的第三方库，并且这些库没有提供编译后的代码，设置这个选项为 true 可以确保这些依赖在旧版浏览器中也能正常运行</span></span><br><span class="line">  <span class="attr">transpileDependencies</span>: <span class="literal">true</span>, </span><br><span class="line">  <span class="comment">//开发服务器配置</span></span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">      <span class="attr">port</span>: <span class="number">8080</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="comment">//接收一个dir，用于拼接成一个绝对路径</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resolve</span>(<span class="params">dir</span>) &#123;</span><br><span class="line">    <span class="comment">//__dirname是Node.js中的一个全局变量，表示当前执行脚本所在的目录</span></span><br><span class="line">    <span class="comment">//将__dirname和传入的dir参数连接起来，可以生成一个绝对路径，确保无论项目在何处运行，路径都是正确的</span></span><br><span class="line">    <span class="keyword">return</span> path.<span class="title function_">join</span>(__dirname, dir) </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//配置了 webpack 来处理 SVG 文件，并使用 svg-sprite-loader 来加载 SVG 图标</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">lintOnSave</span>: <span class="literal">false</span>, <span class="comment">//关闭了 Vue CLI 在保存文件时自动进行代码质量检查（linting）的功能</span></span><br><span class="line">    <span class="comment">//chainWebpack 是一个函数，接收一个 config 参数，这个参数是 webpack 的配置对象。</span></span><br><span class="line">    <span class="comment">//通过这个函数，可以对 webpack 的配置进行链式修改</span></span><br><span class="line">    <span class="title function_">chainWebpack</span>(<span class="params">config</span>) &#123;</span><br><span class="line">        <span class="comment">// 设置 svg-sprite-loader</span></span><br><span class="line">        <span class="comment">// config.module 表示创建一个具名规则，以后用来修改规则</span></span><br><span class="line">        <span class="comment">//创建了一个名为 svg 的规则，并设置了一个排除项，排除 src/icons 目录下的 SVG 文件。</span></span><br><span class="line">        <span class="comment">//这意味着 src/icons 目录下的 SVG 文件不会被默认的 SVG loader 处理</span></span><br><span class="line">        config.<span class="property">module</span></span><br><span class="line">            <span class="comment">// 规则</span></span><br><span class="line">            .<span class="title function_">rule</span>(<span class="string">&#x27;svg&#x27;</span>)</span><br><span class="line">            <span class="comment">// 忽略</span></span><br><span class="line">            .<span class="property">exclude</span>.<span class="title function_">add</span>(<span class="title function_">resolve</span>(<span class="string">&#x27;src/icons&#x27;</span>))</span><br><span class="line">            <span class="comment">// 结束</span></span><br><span class="line">            .<span class="title function_">end</span>()</span><br><span class="line">        <span class="comment">// 创建了一个名为 icons 的规则，用于处理 src/icons 目录下的 .svg 文件。</span></span><br><span class="line">        <span class="comment">// 它使用了 svg-sprite-loader 来加载这些文件，并设置了 symbolId 为 icon-[name]，其中 [name] 是文件名</span></span><br><span class="line">        config.<span class="property">module</span></span><br><span class="line">            <span class="comment">// 规则</span></span><br><span class="line">            .<span class="title function_">rule</span>(<span class="string">&#x27;icons&#x27;</span>)</span><br><span class="line">            <span class="comment">// 正则，解析 .svg 格式文件</span></span><br><span class="line">            .<span class="title function_">test</span>(<span class="regexp">/\.svg$/</span>)</span><br><span class="line">            <span class="comment">// 解析的文件</span></span><br><span class="line">            .<span class="property">include</span>.<span class="title function_">add</span>(<span class="title function_">resolve</span>(<span class="string">&#x27;src/icons&#x27;</span>))</span><br><span class="line">            <span class="comment">// 结束</span></span><br><span class="line">            .<span class="title function_">end</span>()</span><br><span class="line">            <span class="comment">// 新增了一个解析的loader</span></span><br><span class="line">            .<span class="title function_">use</span>(<span class="string">&#x27;svg-sprite-loader&#x27;</span>)</span><br><span class="line">            <span class="comment">// 具体的loader</span></span><br><span class="line">            .<span class="title function_">loader</span>(<span class="string">&#x27;svg-sprite-loader&#x27;</span>)</span><br><span class="line">            <span class="comment">// loader 的配置</span></span><br><span class="line">            .<span class="title function_">options</span>(&#123;</span><br><span class="line">                <span class="attr">symbolId</span>: <span class="string">&#x27;icon-[name]&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// 结束</span></span><br><span class="line">            .<span class="title function_">end</span>()</span><br><span class="line">        <span class="comment">//使用 webpack.ContextReplacementPlugin 插件来忽略 moment.js 库中除了 zh-cn（中文）以外的本地化文件，以减小打包后的文件体积</span></span><br><span class="line">        config</span><br><span class="line">            .<span class="title function_">plugin</span>(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line">            .<span class="title function_">use</span>(</span><br><span class="line">                <span class="keyword">new</span> webpack.<span class="title class_">ContextReplacementPlugin</span>(<span class="regexp">/moment[/\\]locale$/</span>, <span class="regexp">/zh-cn$/</span>)</span><br><span class="line">            )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>5.入口文件main.js中引入svg相关组件：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">SvgIcon</span> <span class="keyword">from</span> <span class="string">&#x27;@/icons&#x27;</span> <span class="comment">//导入svg</span></span><br><span class="line"><span class="comment">//因为SvgIcon，修改导入组件的方式</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"><span class="title class_">SvgIcon</span>(app)</span><br><span class="line">app.<span class="title function_">use</span>(store).<span class="title function_">use</span>(router).<span class="title function_">use</span>(<span class="title class_">ElementPlus</span>).<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>6.在 src/views/Login.vue 中使用svg-icon组件：<br />
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;账号&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用自定义组件svg-icon，显示user图标 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">prefix</span>&gt;</span><span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">icon</span>=<span class="string">&quot;user&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用自定义组件svg-icon，显示password图标 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">prefix</span>&gt;</span><span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">icon</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="登录逻辑">登录逻辑</h3>
<p>在 src/views/Login.vue
中添加登录逻辑，包括表单验证、表单数据绑定，以及调用后端接口进行登录验证。具体代码如下：<br />
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- el-form 是 element-plus组件 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ref为表单组件指定一个引用名称，以便在代码中可以通过这个引用名称来访问表单组件的方法和属性 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- class是类名(用于css样式定制) --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- :model是 v-bind 的简写形式，用于绑定数据。</span></span><br><span class="line"><span class="comment">      即表单控件的值会与 loginForm 对象中的属性进行双向绑定，</span></span><br><span class="line"><span class="comment">      该表单的数据模型将通过名为 loginForm 的变量进行管理 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;loginForm&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;loginRules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;loginRef&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login-form&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>后台管理系统<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 配置prop属性，用于loginRules规则匹配 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 输入框绑定到LoginForm.username --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;loginForm.username&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;账号&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 使用自定义组件svg-icon，显示user图标 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> #<span class="attr">prefix</span>&gt;</span><span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">icon</span>=<span class="string">&quot;user&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span>  <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 输入框绑定到LoginForm.password --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;loginForm.password&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">auto-complete</span>=<span class="string">&quot;off&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;密码&quot;</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 使用自定义组件svg-icon，显示password图标 --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">template</span> #<span class="attr">prefix</span>&gt;</span><span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">icon</span>=<span class="string">&quot;password&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- &lt;el-checkbox  style=&quot;margin:0px 0px 25px 0px;&quot;&gt;记住密码&lt;/el-checkbox&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 绑定触发事件handleLogin --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;handleLogin&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>登 录<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  底部  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;el-login-footer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>Copyright © 2024-2025 <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 版权所有.<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> <span class="comment">//ref 是 Vue 3 中用于创建响应式数据的函数</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;<span class="title class_">ElMessage</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span> <span class="comment">//引入消息提示组件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&#x27;qs&#x27;</span> <span class="comment">//用来将对象转换成url中的query参数</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/util/request&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//创建一个响应式对象 loginRef，用于存储表单引用（用于表单提交、验证）</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> loginRef = <span class="title function_">ref</span>(<span class="literal">null</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//创建一个响应式对象 LoginForm，用于存储表单数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> loginForm = <span class="title function_">ref</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//创建一个响应式对象 loginRules，用于存储表单验证规则（不能为空）</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> loginRules = &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//required: true：表示这个字段是必填的，不能为空。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//trigger: &quot;blur&quot;：表示验证触发的事件是失去焦点（blur），系统会自动验证输入的内容是否符合规则。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//message: &quot;请输入您的账号&quot;：表示当验证失败时，显示的错误信息。</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">username</span>: [&#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">trigger</span>: <span class="string">&quot;blur&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;请输入您的账号&quot;</span>&#125;],</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">password</span>: [&#123;<span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">trigger</span>: <span class="string">&quot;blur&quot;</span>, <span class="attr">message</span>: <span class="string">&quot;请输入您的密码&quot;</span>&#125;]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//调用表单的 validate 方法进行表单验证</span></span></span><br><span class="line"><span class="language-javascript">    loginRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> (valid) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (valid) &#123;<span class="comment">//如果验证通过，则执行登录操作</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">let</span> result = <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&quot;user/login?&quot;</span> + qs.<span class="title function_">stringify</span>(loginForm.<span class="property">value</span>))</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">let</span> data = result.<span class="property">data</span> <span class="comment">//获取后端响应，data为后端响应的数据</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (data.<span class="property">code</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(data.<span class="property">info</span>) <span class="comment">//弹窗提示</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//存储token到sessionStorage</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;token&quot;</span>, data.<span class="property">token</span>)</span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(data.<span class="property">info</span>) <span class="comment">//弹窗提示</span></span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;<span class="comment">//如果验证失败，则显示错误信息</span></span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;表单验证失败&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用scss，简化了css编写样式的复杂写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>:white <span class="comment">/* 对a标签(超链接)的文字颜色设置为白色 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login</span> &#123; <span class="comment">/* 类选择器，应用于所有login类的html元素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex; <span class="comment">/* Flexbox布局 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">justify-content</span>: center; <span class="comment">/* 设置了Flex容器中的子元素在主轴（默认是水平方向）上的对齐方式为居中对齐 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">align-items</span>: center; <span class="comment">/* 设置了Flex容器中的子元素在交叉轴（默认是垂直方向）上的对齐方式为居中对齐 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100%</span>; <span class="comment">/* 设置了元素的高度为其父元素高度的100% */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;../assets/images/login-background.png&quot;</span>);<span class="comment">/* 新建images文件夹，找张背景图片即可 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-size</span>: cover;<span class="comment">/* 设置了背景图片的尺寸调整方式为覆盖：背景图片会被缩放以完全覆盖元素区域，同时保持图片的宽高比，可能会有部分图片内容被裁剪 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.title</span> &#123;<span class="comment">/* 标题  */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin</span>: <span class="number">0px</span> auto <span class="number">30px</span> auto;<span class="comment">/* margin 属性用于设置元素的外边距（即元素周围的空间）：0px 表示上边距为0像素，30px 表示下边距为30像素，auto 表示左右边距自动调整，这通常用于水平居中元素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;<span class="comment">/* 设置元素内文本的水平对齐方式为居中对齐 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#707070</span>;<span class="comment">/* 设置元素内文本的颜色，#707070 是一个十六进制颜色代码，表示一种灰色 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-form</span> &#123;<span class="comment">/* 登录表单 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;<span class="comment">/* 设置表单的边框圆角为6像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="number">#ffffff</span>;<span class="comment">/* 设置表单的背景颜色为白色 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">400px</span>;<span class="comment">/* 设置表单的宽度为400像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">25px</span> <span class="number">25px</span> <span class="number">5px</span> <span class="number">25px</span>;<span class="comment">/* 设置表单的内边距，上、右、下、左分别为25像素、25像素、5像素、25像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.el-input</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">40px</span>;<span class="comment">/* 设置输入框的高度为40像素 */</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">display</span>: inline-block;<span class="comment">/* 设置输入框为行内块元素，使其能够与其他元素在同一行显示 */</span></span></span><br><span class="line"><span class="language-css">      <span class="attribute">height</span>: <span class="number">40px</span>;<span class="comment">/* 设置输入框的高度为40像素 */</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.input-icon</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">height</span>: <span class="number">39px</span>;<span class="comment">/* 设置输入框图标的的高度为39像素 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">width</span>: <span class="number">14px</span>;<span class="comment">/* 设置输入框图标的宽度为14像素 */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">margin-left</span>: <span class="number">0px</span>;<span class="comment">/* 设置输入框图标的左边距为0像素 */</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-tip</span> &#123;<span class="comment">/* 提示信息 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">13px</span>; <span class="comment">/* 设置了字体大小为13像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;<span class="comment">/* 文本对齐方式设置为居中 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#bfbfbf</span>;<span class="comment">/* 设置了文本颜色为一种浅灰色 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-code</span> &#123;<span class="comment">/* 验证码 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">33%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">float</span>: right;</span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">img</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">vertical-align</span>: middle;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.el-login-footer</span> &#123;<span class="comment">/* 页脚 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">40px</span>;<span class="comment">/* 设置高度为40像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">line-height</span>: <span class="number">40px</span>;<span class="comment">/* 设置行高为40像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: fixed;<span class="comment">/* 使用固定定位，使页脚始终固定在视口底部 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">bottom</span>: <span class="number">0</span>;<span class="comment">/* 将页脚定位到视口的底部 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;<span class="comment">/* 置页脚的宽度为100%，使其占满整个视口宽度 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;<span class="comment">/* 文本居中对齐 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#fff</span>;<span class="comment">/* 设置文本颜色为白色 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-family</span>: Arial;<span class="comment">/* 设置字体为Arial */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">12px</span>;<span class="comment">/* 设置字体大小为12像素 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">letter-spacing</span>: <span class="number">1px</span>;<span class="comment">/* 设置字母间距为1像素 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.login-code-img</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-left</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="接收后端对象">接收后端对象</h3>
<p>后端通过DRF把user对象序列化后传递给了前端，前端接收时这个user是一个js对象，所以前端想把它存储下来，还需要通过json序列化掉。<br />
1.在 src/views/Login.vue 中，将后端返回的 user 对象存储到 sessionStorage
中：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 调用表单的 validate 方法进行表单验证</span></span><br><span class="line">    loginRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> (valid) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;<span class="comment">// 如果验证通过，则执行登录操作</span></span><br><span class="line">          <span class="keyword">let</span> result = <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&quot;user/login?&quot;</span> + qs.<span class="title function_">stringify</span>(loginForm.<span class="property">value</span>))</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">          <span class="keyword">let</span> data = result.<span class="property">data</span> <span class="comment">//获取后端响应，data为后端响应的数据</span></span><br><span class="line">          <span class="keyword">if</span> (data.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(data.<span class="property">info</span>) <span class="comment">//弹窗提示</span></span><br><span class="line">            <span class="comment">//存储token到sessionStorage</span></span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;token&quot;</span>, data.<span class="property">token</span>)</span><br><span class="line">            <span class="comment">//存储user信息到sessionStorage</span></span><br><span class="line">            <span class="comment">//JSON.stringify：将js对象转为json字符串</span></span><br><span class="line">            <span class="comment">//JSON.parse：将json字符串转为js对象</span></span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;currentUser&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">user</span>))</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(data.<span class="property">info</span>) <span class="comment">//弹窗提示</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;<span class="comment">// 如果验证失败，则显示错误信息</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;表单验证失败&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="记住密码实现">记住密码实现</h3>
<p>记住密码，我们通过cookie来实现，先安装依赖'js-cookie'。<br />
为了安全存储前需要加密，获取密码需要解密。所以我们安装依赖'jsencrypt'。</p>
<p>1.新建 src/util/jsencrypt.js 文件，用于加密解密密码：<br />
<figure class="highlight js"><figcaption><span>jsencrypt.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">JSEncrypt</span> <span class="keyword">from</span> <span class="string">&#x27;jsencrypt/bin/jsencrypt.min&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 密钥对生成 http://web.chacuo.net/netrsakeypair</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> publicKey = <span class="string">&#x27;MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH\n&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;nzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ==&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> privateKey = <span class="string">&#x27;MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY\n&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN\n&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;PuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA\n&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;kM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow\n&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;cSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv\n&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;DQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh\n&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;YhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3\n&#x27;</span> +</span><br><span class="line">    <span class="string">&#x27;UP8iWi1Qw0Y=&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 加密：存储前进行加密</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">encrypt</span>(<span class="params">txt</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> encryptor = <span class="keyword">new</span> <span class="title class_">JSEncrypt</span>()</span><br><span class="line">    encryptor.<span class="title function_">setPublicKey</span>(publicKey) <span class="comment">// 设置公钥</span></span><br><span class="line">    <span class="keyword">return</span> encryptor.<span class="title function_">encrypt</span>(txt) <span class="comment">// 对数据进行加密</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解密：获取后进行解密</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">decrypt</span>(<span class="params">txt</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> encryptor = <span class="keyword">new</span> <span class="title class_">JSEncrypt</span>()</span><br><span class="line">    encryptor.<span class="title function_">setPrivateKey</span>(privateKey) <span class="comment">// 设置私钥</span></span><br><span class="line">    <span class="keyword">return</span> encryptor.<span class="title function_">decrypt</span>(txt) <span class="comment">// 对数据进行解密</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.在 src/views/login.vue 文件中，增加记住密码相关配置：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导入依赖</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Cookies</span> <span class="keyword">from</span> <span class="string">&quot;js-cookie&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; encrypt, decrypt &#125; <span class="keyword">from</span> <span class="string">&quot;@/util/jsencrypt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//增加rememberMe</span></span><br><span class="line"><span class="keyword">const</span> loginForm = <span class="title function_">ref</span>(&#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">rememberMe</span>: <span class="literal">false</span> <span class="comment">//是否记住密码</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//checkbox增加v-model=&quot;loginForm.rememberMe&quot;</span></span><br><span class="line">&lt;el-checkbox v-model=<span class="string">&quot;loginForm.rememberMe&quot;</span> style=<span class="string">&quot;margin:0px 0px 25px 0px;&quot;</span>&gt;记住密码&lt;/el-checkbox&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//增加记住密码逻辑</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 调用表单的 validate 方法进行表单验证</span></span><br><span class="line">    loginRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> (valid) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;<span class="comment">// 如果验证通过，则执行登录操作</span></span><br><span class="line">          <span class="keyword">let</span> result = <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&quot;user/login?&quot;</span> + qs.<span class="title function_">stringify</span>(loginForm.<span class="property">value</span>))</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">          <span class="keyword">let</span> data = result.<span class="property">data</span> <span class="comment">//获取后端响应，data为后端响应的数据</span></span><br><span class="line">          <span class="keyword">if</span> (data.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(data.<span class="property">info</span>) <span class="comment">//弹窗提示</span></span><br><span class="line">            <span class="comment">//存储token到sessionStorage</span></span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;token&quot;</span>, data.<span class="property">token</span>)</span><br><span class="line">            <span class="comment">//存储user信息到sessionStorage</span></span><br><span class="line">            <span class="comment">//JSON.stringify：将js对象转为json字符串</span></span><br><span class="line">            <span class="comment">//JSON.parse：将json字符串转为js对象</span></span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;currentUser&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">user</span>))</span><br><span class="line">            <span class="comment">// 勾选了需要记住密码设置在 cookie 中设置记住用户名和密码</span></span><br><span class="line">            <span class="keyword">if</span> (loginForm.<span class="property">value</span>.<span class="property">rememberMe</span>) &#123;</span><br><span class="line">              <span class="comment">//expires: 30 表示有效期30天</span></span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;username&quot;</span>, loginForm.<span class="property">value</span>.<span class="property">username</span>, &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;password&quot;</span>, <span class="title function_">encrypt</span>(loginForm.<span class="property">value</span>.<span class="property">password</span>), &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;rememberMe&quot;</span>, loginForm.<span class="property">value</span>.<span class="property">rememberMe</span>, &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">// 否则移除</span></span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;rememberMe&quot;</span>);</span><br><span class="line">            &#125; </span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(data.<span class="property">info</span>) <span class="comment">//弹窗提示</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;<span class="comment">// 如果验证失败，则显示错误信息</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;表单验证失败&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//增加自动填充用户名和密码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getCookie</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> username = <span class="title class_">Cookies</span>.<span class="title function_">get</span>(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> password = <span class="title class_">Cookies</span>.<span class="title function_">get</span>(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> rememberMe = <span class="title class_">Cookies</span>.<span class="title function_">get</span>(<span class="string">&quot;rememberMe&quot;</span>);</span><br><span class="line">  loginForm.<span class="property">value</span> = &#123;</span><br><span class="line">    <span class="attr">username</span>: username === <span class="literal">undefined</span> ? loginForm.<span class="property">value</span>.<span class="property">username</span> : username,</span><br><span class="line">    <span class="attr">password</span>: password === <span class="literal">undefined</span> ? loginForm.<span class="property">value</span>.<span class="property">password</span> : <span class="title function_">decrypt</span>(password),</span><br><span class="line">    <span class="attr">rememberMe</span>: rememberMe === <span class="literal">undefined</span> ? <span class="literal">false</span> : <span class="title class_">Boolean</span>(rememberMe)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">getCookie</span>();</span><br></pre></td></tr></table></figure></p>
<h2 id="主页面-1">主页面</h2>
<h3 id="主页面布局">主页面布局</h3>
<p>主页设计<strong>采用Element-plus的Container布局容器</strong>。</p>
<p>1.因为页面布局有foot、header、menu、tabs四个部分组成，都写在一起显得比较混乱，所以将这四个部分分别写在四个文件中，然后在index.vue中引入。<br />
新建 src/layout/index.vue 文件夹和文件，用于主页面组件；<br />
新建 src/layout/footer/index.vue 文件夹和文件，用于footer组件；<br />
新建 src/layout/header/index.vue 文件夹和文件，用于header组件；<br />
新建 src/layout/menu/index.vue 文件夹和文件，用于menu组件；<br />
新建 src/layout/tabs/index.vue 文件夹和文件，用于tabs组件。<br />
<div class="tabs" id="zhuyemian"><ul class="nav-tabs"><li class="tab active"><a href="#zhuyemian-1">主页面布局</a></li><li class="tab"><a href="#zhuyemian-2">页脚布局</a></li><li class="tab"><a href="#zhuyemian-3">头布局</a></li><li class="tab"><a href="#zhuyemian-4">菜单布局</a></li><li class="tab"><a href="#zhuyemian-5">标签页布局</a></li></ul><div class="tab-content"><div class="tab-pane active" id="zhuyemian-1"><figure class="highlight html"><figcaption><span>layout/index.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 这里Menu、Header、Tabs、Footer全是标签，是为了解耦使用 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-aside</span> <span class="attr">width</span>=<span class="string">&quot;200px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-container&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">Menu</span>/&gt;</span><span class="tag">&lt;/<span class="name">el-aside</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-header</span>&gt;</span><span class="tag">&lt;<span class="name">Header</span>/&gt;</span><span class="tag">&lt;/<span class="name">el-header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-main</span>&gt;</span><span class="tag">&lt;<span class="name">Tabs</span>/&gt;</span><span class="tag">&lt;/<span class="name">el-main</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-footer</span>&gt;</span><span class="tag">&lt;<span class="name">Footer</span>/&gt;</span><span class="tag">&lt;/<span class="name">el-footer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//导入解耦的页面布局组件</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Menu</span> <span class="keyword">from</span> <span class="string">&#x27;@/layout/menu&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Header</span> <span class="keyword">from</span> <span class="string">&#x27;@/layout/header&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Footer</span> <span class="keyword">from</span> <span class="string">&#x27;@/layout/footer&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Tabs</span> <span class="keyword">from</span> <span class="string">&#x27;@/layout/tabs&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.app-wrapper</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative; <span class="comment">/* 相对布局 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="comment">/* 左侧菜单 */</span></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.sidebar-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: <span class="number">#2d3a4b</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.el-container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100%</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.el-header</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-left</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding-right</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="comment">/* 深度选择器，修改element-plus的样式 */</span></span></span><br><span class="line"><span class="language-css">:<span class="built_in">deep</span>(ul.el-menu) &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-right-width</span>: <span class="number">0px</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="zhuyemian-2"><figure class="highlight html"><figcaption><span>footer/index.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span></span><br><span class="line">    Copyright © 2012-2025 Python知识分享网 版权所有<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.python222.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>www.python222.com<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.footer</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="zhuyemian-3"><figure class="highlight html"><figcaption><span>header/index.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">header</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="zhuyemian-4"><figure class="highlight html"><figcaption><span>menu/index.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">menu</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="zhuyemian-5"><figure class="highlight html"><figcaption><span>tabs/index.vue</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用element-plus中的&quot;标签页触发器自定义&quot; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 20px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addTab(editableTabsValue)&quot;</span>&gt;</span></span><br><span class="line">      add tab</span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-tabs</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;editableTabsValue&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;card&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;demo-tabs&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">closable</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">tab-remove</span>=<span class="string">&quot;removeTab&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-tab-pane</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">&quot;item in editableTabs&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:key</span>=<span class="string">&quot;item.name&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:label</span>=<span class="string">&quot;item.title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:name</span>=<span class="string">&quot;item.name&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      &#123;&#123; item.content &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-tabs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 默认是lang=&quot;ts&quot;，要去掉，我们使用js --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>  <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">let</span> tabIndex = <span class="number">2</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> editableTabsValue = <span class="title function_">ref</span>(<span class="string">&#x27;2&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> editableTabs = <span class="title function_">ref</span>([</span></span><br><span class="line"><span class="language-javascript">  &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>: <span class="string">&#x27;Tab 1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">content</span>: <span class="string">&#x27;Tab 1 content&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>: <span class="string">&#x27;Tab 2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="string">&#x27;2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">content</span>: <span class="string">&#x27;Tab 2 content&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">])</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//ts可以&quot;targetName: string&quot;指定类型，js不需要，所以去掉</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">addTab</span> = (<span class="params">targetName</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> newTabName = <span class="string">`<span class="subst">$&#123;++tabIndex&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">  editableTabs.<span class="property">value</span>.<span class="title function_">push</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>: <span class="string">&#x27;New Tab&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: newTabName,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">content</span>: <span class="string">&#x27;New Tab content&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript">  editableTabsValue.<span class="property">value</span> = newTabName</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//ts可以&quot;targetName: string&quot;指定类型，js不需要，所以去掉</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> <span class="title function_">removeTab</span> = (<span class="params">targetName</span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> tabs = editableTabs.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">let</span> activeName = editableTabsValue.<span class="property">value</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> (activeName === targetName) &#123;</span></span><br><span class="line"><span class="language-javascript">    tabs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">tab, index</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (tab.<span class="property">name</span> === targetName) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> nextTab = tabs[index + <span class="number">1</span>] || tabs[index - <span class="number">1</span>]</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (nextTab) &#123;</span></span><br><span class="line"><span class="language-javascript">          activeName = nextTab.<span class="property">name</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  editableTabsValue.<span class="property">value</span> = activeName</span></span><br><span class="line"><span class="language-javascript">  editableTabs.<span class="property">value</span> = tabs.<span class="title function_">filter</span>(<span class="function">(<span class="params">tab</span>) =&gt;</span> tab.<span class="property">name</span> !== targetName)</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.demo-tabs</span> &gt; <span class="selector-class">.el-tabs__content</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#6b778c</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-weight</span>: <span class="number">600</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></div></div></div></p>
<p>2.在 src/router/index.js 中修改主页面路由指向：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    <span class="comment">// component: HomeView</span></span><br><span class="line">    <span class="comment">// 修改路由指向</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../layout/index.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>3.在 src/views/Login.vue
中导入router，写入登录成功后跳转页面逻辑：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router&#x27;</span> <span class="comment">//登录成功跳转主页</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    loginRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> (valid) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">          <span class="keyword">let</span> result = <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&quot;user/login?&quot;</span> + qs.<span class="title function_">stringify</span>(loginForm.<span class="property">value</span>))</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">          <span class="keyword">let</span> data = result.<span class="property">data</span> </span><br><span class="line">          <span class="keyword">if</span> (data.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(data.<span class="property">info</span>)</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;token&quot;</span>, data.<span class="property">token</span>)</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;currentUser&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">user</span>))</span><br><span class="line">            <span class="keyword">if</span> (loginForm.<span class="property">value</span>.<span class="property">rememberMe</span>) &#123;</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;username&quot;</span>, loginForm.<span class="property">value</span>.<span class="property">username</span>, &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;password&quot;</span>, <span class="title function_">encrypt</span>(loginForm.<span class="property">value</span>.<span class="property">password</span>), &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;rememberMe&quot;</span>, loginForm.<span class="property">value</span>.<span class="property">rememberMe</span>, &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;rememberMe&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 登录成功跳转到主页</span></span><br><span class="line">            router.<span class="title function_">replace</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(data.<span class="property">info</span>) </span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;表单验证失败&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="左侧权限菜单-1">左侧权限菜单</h3>
<p>后端在登录后返回给前端用户信息（currentUser）、用户权限菜单信息（menuList），并且sessionStorage中存储了它们，根据权限信息动态生成左侧菜单栏。<br />
1.在 src/views/login.vue
中记录用户权限菜单信息（menuList），修改成如下代码：<br />
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    loginRef.<span class="property">value</span>.<span class="title function_">validate</span>(<span class="keyword">async</span> (valid) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (valid) &#123;</span><br><span class="line">          <span class="keyword">let</span> result = <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&quot;user/login?&quot;</span> + qs.<span class="title function_">stringify</span>(loginForm.<span class="property">value</span>))</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br><span class="line">          <span class="keyword">let</span> data = result.<span class="property">data</span></span><br><span class="line">          <span class="keyword">if</span> (data.<span class="property">code</span> == <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">success</span>(data.<span class="property">info</span>)</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;token&quot;</span>, data.<span class="property">token</span>)</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;currentUser&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">user</span>))</span><br><span class="line">            <span class="comment">//存储menuList信息到sessionStorage</span></span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">sessionStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;menuList&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">menuList</span>))</span><br><span class="line">            <span class="keyword">if</span> (loginForm.<span class="property">value</span>.<span class="property">rememberMe</span>) &#123;</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;username&quot;</span>, loginForm.<span class="property">value</span>.<span class="property">username</span>, &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;password&quot;</span>, <span class="title function_">encrypt</span>(loginForm.<span class="property">value</span>.<span class="property">password</span>), &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">set</span>(<span class="string">&quot;rememberMe&quot;</span>, loginForm.<span class="property">value</span>.<span class="property">rememberMe</span>, &#123; <span class="attr">expires</span>: <span class="number">30</span> &#125;);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">              <span class="title class_">Cookies</span>.<span class="title function_">remove</span>(<span class="string">&quot;rememberMe&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 登录成功跳转到主页</span></span><br><span class="line">            router.<span class="title function_">replace</span>(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(data.<span class="property">info</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;表单验证失败&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2.从 sessionStorage中取menuList信息，动态生成左侧菜单栏，修改
src/layout/menu/index.vue 中的代码如下：<br />
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- router是路由，default-active默认选择的页面  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-menu</span></span></span><br><span class="line"><span class="tag">      <span class="attr">active-text-color</span>=<span class="string">&quot;#ffd04b&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">background-color</span>=<span class="string">&quot;#2d3a4b&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;el-menu-vertical-demo&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">text-color</span>=<span class="string">&quot;#fff&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">router</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">:default-active</span>=<span class="string">&quot;&#x27;/index&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- index相当于menu的id，值唯一即可 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- el-menu-item单独的菜单 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">index</span>=<span class="string">&quot;/index&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 从element-plus/icons-vue引入的HomeFilled --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">home-filled</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- el-sub-menu带子菜单，:index是绑定js表达式到index属性上（:表示后面是表达式而不是字符串） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-sub-menu</span> <span class="attr">:index</span>=<span class="string">&quot;menu.path&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;menu in menuList&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 外层菜单 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> #<span class="attr">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- 使用自定义的图标标签svg-icon --&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">:icon</span>=<span class="string">&quot;menu.icon&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 菜单名字 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;menu.name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 内层菜单 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-menu-item</span> <span class="attr">:index</span>=<span class="string">&quot;item.path&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in menu.children&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-icon</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">svg-icon</span> <span class="attr">:icon</span>=<span class="string">&quot;item.icon&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-icon</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-menu-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-sub-menu</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123;<span class="title class_">HomeFilled</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@element-plus/icons-vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">//从sessionStorage中获取菜单数据，这里需要的是js对象，所以要用JSON.parse</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> menuList = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">sessionStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;menuList&quot;</span>))</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h1 id="参考文献">参考文献</h1>
<p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRqYW5nb3Byb2plY3QuY29tL3poLWhhbnMvNS4wLw==">django官方文档(5.0)<i class="fa fa-external-link-alt"></i></span><br />
<span class="exturl" data-url="aHR0cHM6Ly9jbi52dWVqcy5vcmcv">vue官网<i class="fa fa-external-link-alt"></i></span><br />
<span class="exturl" data-url="aHR0cHM6Ly9lbGVtZW50LXBsdXMub3JnL3poLUNOLw==">element-plus官网<i class="fa fa-external-link-alt"></i></span><br />
<span class="exturl" data-url="aHR0cHM6Ly93d3cuZGphbmdvLXJlc3QtZnJhbWV3b3JrLm9yZy8=">DRF官网<i class="fa fa-external-link-alt"></i></span><br />
<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2pwYWRpbGxhL2RqYW5nby1yZXN0LWZyYW1ld29yay1qd3Q=">JWT<i class="fa fa-external-link-alt"></i></span><br />
<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmlsaWJpbGkuY29tL3ZpZGVvL0JWMTlzcHNlR0U5WS8/c3BtX2lkX2Zyb209MzMzLjMzNy5zZWFyY2gtY2FyZC5hbGwuY2xpY2smdmRfc291cmNlPWJhYjI2MThiMzlmNjljN2QzYzJkNDFkZDMwNDM4Mjg3">django5+vue3视频<i class="fa fa-external-link-alt"></i></span></p>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>SoundMemories
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://soundmemories.github.io/2024/11/05/Python/24.Django5+Vue3%E4%BE%8B%E5%AD%90/" title="Django5+Vue3例子">https://soundmemories.github.io/2024/11/05/Python/24.Django5+Vue3例子/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/10/09/Python/23.FastAPI/" rel="prev" title="FastAPI">
                  <i class="fa fa-chevron-left"></i> FastAPI
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 2019 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">SoundMemories</span>
  </div>
  <div class="powered-by">由 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9tdXNlLw==">NexT.Muse</span> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.8/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.2.12/pdfobject.min.js","integrity":"sha256-g2xji1rlE3KsGVClvuxTbcR0Kn2+wtQADSff2Tbb4zA="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"neutral","dark":"neutral"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.2.3/mermaid.min.js","integrity":"sha256-JFptYy4KzJ5OQP+Q9fubNf3cxpPPmZKqUOovyEONKrQ="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/quicklink/2.3.0/quicklink.umd.js" integrity="sha256-yvJQOINiH9fWemHn0vCA5lsHWJaHs6/ZmO+1Ft04SvM=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://soundmemories.github.io/2024/11/05/Python/24.Django5+Vue3%E4%BE%8B%E5%AD%90/"}</script>
  <script src="/js/third-party/quicklink.js"></script>

</body>
</html>
